(function(){"use strict";var e={207:function(e,t,n){n.r(t),t["default"]={rotate:{left:"Left",right:"Right"},title:{front:"Red-Black",next:"Tree",githubdes:"Github"},operation:{insert:"Insert",randomInsert:"Random Insert",delete:"Delete",randomDelete:"Randon Dekete",placeholder:"0-999",generate:"Generate",generateholder:"<100"},main:{error1:"The ID should be a number(0-999)",error2:"The generate nodes number should be 1-99"},footer:{reportbug:"Report a bug"},tip:{insertNode:"Inserted node",replaceNode:"Replace node",deleteNode:"Deleting node",currentBalance:"Processing node",nextBalance:"Next",case:"Cases",reason:"Reasons",process:"Operations",pause:"Pause",forward:"Forward",none:"None",balanced:"Balanced",notbalanced:"Unbalanced",insertBalanceOp:"Insertion",deleteBalanceOp:"Removal",redKey:"Red",blackKey:"Black",rRotateKey:"Right Rotate",lRotateKey:"Left Rotate"},canvas:{deleteNode:"Removal",insertNode:"Insertion"},message:{insertsuccess:"Node({id}) insertion completed",updatewarning:"Node({id}) exsits，just update it",deletesuccess:"Node({id}) removal complete",deleteerror:"Node({id}) does not exist",generatesuccess:"Generate {num} nodes BRTree complete",deleteBlance:{additional1:". Remove the Replace Node({0}), and replace the Deleting Node({1})'s id with its",additional2:". The Deleting Node and Replace Node is the same one, remove the Deleting Node({0}) directly",additional3:"It's balanced",simple:{case1:{ca:"Simple case(1). Replace Node is Red, and it has only one child node at most",op:"Do nothing",re:"Replace Node({0}) is Red, Base on RBTree's features, Its parent MUST be Black and its children MUST be Black too, it won't break the RBTree balance if deleted it directly."},case2:{re:"Replace Node({0}) has a single Red child node({1}), if remove the Replace Node({0}), the black nodes count which pass cross this Replace Node({0}) will minus 1 , so change the single Red child node({1}) of the Replace Node({0}) to Black, and use it to repalce the Replace Node({0}), the balance won't be broken",op:"Change its Red child node({0})'s color to Black, and remove the replace node , use the Node({0}) to replace the Replace Node",ca:"Simple case(1). Replace Node is Black, it has only one child and this child node is Red"},case3:{re:"The Replace Node({0}) is Black, If delete it, the black nodes count of the path which cross this node will change.",op:"Need to balance the RBTree via the Replace Node({0})",ca:"Simple(3). The Replace Node is Black, and has no Red child"}},complex:{case1:{re:"Need not to balance for the root",ca:"Case(1). The processing node is the root"},case2:{re:"When we do next balance, The Processing Node's father is Red, so it will match case(4),case(5),case(6)",op:"Change father({0}) to Red，Change brother({1}) to Black，and {3} Rotate the father, go on balance via this node(${2})",ca:"Case(2). The Processing Node's brother is Red"},case3:{re:"The sub-tree is unable to be balanced whatever we do , so change the processing node's brother to Red, it make the black nodes count of the path which cross its father won't reduce, then go on balance via its father",op:"Change the brother({0}) to Red，go on balance via its father({1}) next time",ca:"Case(3). The Processing Node is Black , its father, brother, nephew are Black(or it has no nephew)"},case4:{op:"Change brother({0}) to Red, father({0}) to Black, Balance complete",ca:"Case(4). The Processing Node is Black, its brother and nephew are Black(or it has no nephew), but its father is Red"},case5:{re:"Rotating the Processing Node's brother and changing color , we can go to Case(6)",op:"Change brother({0}) to Red，Change the nephew({1}) which is in the same direction with the Processing Node to Black，then {3} Rotate its brother, go on balance via this node({2})",ca:"Case(5). The Processing Node is Black, its brother is Black too, One of its nephew is Red, the processing node and this nephew is in same direction(it means , the node and its nephew both are right node or left node)"},case6:{op:"Exchange the color of the brother({0}) and father({1})，Change the processing node's Red nephew({2}) to Black, {3} Rotate its father({1}). Balance complete",ca:"Case(6). The Processing Node is Black , its brother is Black too, The nephew's color are different with each other(or it has a single Red nephew), the processing node and its Red nephew is not in same direction(it means , it's left node but its nephew is right , it's right node but its nephew is left)"}}},insertBlance:{case1:{re:"No need to balance Black node"},case2:{re:"The root MUST be Black",op:"Change node({0}) to Black"},case3:{ca:"The Processing Node's father is Black，need not to balance"},case4:{op:"Change grandpa({0}) to Red, Change father({1}),uncle({2}) to Black, go on balance via grandpa({0})",ca:"Case(1). The Processing Node's father , uncle are Red"},case5:{re:"After rotating , next processing node is the father of current processing node, make them to be in same direction, so it can go to Case(2)",op:"{1} Rotate father({0})",ca:"Case(3). The Processing Node and its father both are Red and they are not in same direction"},case6:{op:"Change grandpa({0}) to Red，Change father({1}) to black，{2} Rotate grandpa, Balance complete",ca:"Case(2). The Processing Node's father is red, they are in same direction, and the Processing Node has no uncle or its uncle is Black"}}}}},5551:function(e,t,n){n.r(t),t["default"]={rotate:{left:"左",right:"右"},title:{front:"红黑",next:"树",githubdes:"Github地址"},operation:{insert:"插入",randomInsert:"随机插入",delete:"删除",randomDelete:"随机删除",placeholder:"0-999",generate:"生成",generateholder:"<100"},main:{error1:"ID只能是0-999的数字",error2:"生成节点个数只能是1-99个"},footer:{reportbug:"提交bug"},tip:{insertNode:"插入节点",replaceNode:"替换节点",deleteNode:"删除节点",currentBalance:"当前处理节点",nextBalance:"下个处理节点",case:"情景",reason:"原因",process:"操作",pause:"暂停",forward:"下一步",none:"无",balanced:"已平衡",notbalanced:"未平衡",insertBalanceOp:"插入节点",deleteBalanceOp:"删除节点",redKey:"红色",blackKey:"黑色",rRotateKey:"右旋转",lRotateKey:"左旋转"},canvas:{deleteNode:"删除节点",insertNode:"插入节点"},message:{insertsuccess:"插入节点({id})完成",updatewarning:"节点({id})已经存在，不替换，仅更新",deletesuccess:"删除节点({id})完成",deleteerror:"没有找到对应节点({id})",generatesuccess:"生成{num}个节点的红黑树完成",deleteBlance:{additional1:". 删除替换节点({0}), 并将删除点键值({1})改为替换点键值({0})",additional2:". 删除节点和替换节点是同一个节点({0}), 直接删除节点({0})",additional3:"已经平衡",simple:{case1:{ca:"简单情景(1). 替换点为红色, 且最多只有一个子节点",op:"无需平衡操作",re:"替换点({0})为红色节点，根据红黑树特点, 该节点的父节点必定是黑色, 且其子节点也必定为黑色(或者为空), 直接删除该节点({0})不会影响子树平衡"},case2:{re:"替换点({0})是黑色，并且有唯一一个红色子节点({1})。删除该替换点会让通过该点路径上的黑色节点数减1，所以如果将这个唯一的红色节点改成黑色并替换替换点, 就不会影响子树平衡.",op:"将红色子节点({0})改为黑色",ca:"简单情景(2). 替换点为黑色, 并且只有一个节点，而且是红色"},case3:{re:"替换点({0})为黑色，直接删除会影响通过该节点路径上的黑色节点数目.",op:"需要对替换点({0})进行子树平衡",ca:"简单情景(3). 替换点为黑色, 但不具有至少一个红色子节点"}},complex:{case1:{re:"根节点无需平衡处理",ca:"情景(1). 处理节点是根节点"},case2:{re:"这样操作能让下次平衡处理的时候, 处理节点的父节点为红色, 可以转入到情景(4), 情景(5), 情景(6)",op:"将父节点({0})改为红色，兄弟节点({1})改为黑色，并将父节点({0})进行{3}旋转，继续以该点(${2})进行平衡",ca:"情景(2). 处理节点的兄弟节点为红色"},case3:{re:"该节点的子树无论怎样操作也不能平衡, 所以修改兄弟节点为红色,这样通过父节点路径的黑色节点即使在删除替代点后也不会减少, 并让父节点进行平衡",op:"更改兄弟节点({0})为红色，将其父节点({1})作为下个处理点进行平衡",ca:"情景(3).处理节点是黑色, 其兄弟节点以及兄弟节点的所有子节点都为黑色（或者兄弟节点没有子节点），且父节点也为黑色"},case4:{op:"更改兄弟节点({0})为红色，父节点({0})为黑色, 平衡完成",ca:"情景(4). 处理节点是黑色, 其兄弟节点以及兄弟节点的所有子节点都为黑色（或者兄弟节点没有子节点），且父节点为红色"},case5:{re:"通过变换颜色以及对兄弟节点的旋转, 可以转换到情景(6)",op:"更改兄弟节点({0})为红色，兄弟的同向红色子节点({1})改为黑色，对兄弟节点({0})进行{3}旋转，继续以该点({2})进行平衡",ca:"情景(5). 处理节点是黑色, 其兄弟节点也为黑色, 且兄弟节点有一红色节点和处理节点在同一则(同为左节点或同为右节点)"},case6:{op:"兄弟节点({0})和父节点({1})调换颜色，兄弟的红色子节点({2})改为黑色，对父节点({1})进行{3}旋转，平衡完成",ca:"情景(6). 处理节点是黑色, 其兄弟节点也为黑色, 兄弟节点的子节点不同色(或仅有一个红色子节点), 且兄弟节点的红色子节点和处理节点不在同一则"}}},insertBlance:{case1:{re:"黑色节点无需更对子树平衡"},case2:{re:"根节点必须为黑色",op:"将节点({0})改成黑色"},case3:{ca:"父节点为黑色节点，无需平衡"},case4:{op:"将祖父节点({0})改为红色，再将父节点({1})、叔父节点({2})改为黑色, 对祖父节点({0})进行平衡处理",ca:"情景(1). 处理节点的父节点、叔父节点都为红色"},case5:{re:"旋转后的下一个处理节点是当前处理点的父节点, 这样能让它们都在同一则, 转入情景(2)",op:"对父节点({0})进行{1}旋转",ca:"情景(3). 处理节点和其父节点同为红色，请不在同一侧"},case6:{op:"修改祖父节点({0})为红色，更改父节点({1})为黑色，对祖父节点进行{2}旋转, 达到平衡",ca:"情景(2). 处理节点的父节点为红色，和处理节点在同一侧，并且处理节点没有叔父节点或者叔父节点为黑色"}}}}},9217:function(e,t,n){n(6992),n(8674),n(9601),n(7727);var a=n(9963),i=n(3781),r=n(6252),o={id:"app",class:"bg-light"};function s(e,t,n,a,i,s){var l=(0,r.up)("Header"),h=(0,r.up)("MainSpace"),c=(0,r.up)("Footer");return(0,r.wg)(),(0,r.j4)("div",o,[(0,r.Wm)(l),(0,r.Wm)(h),(0,r.Wm)(c)])}var l=n(3577),h={class:"bg-dark d-flex"},c={class:"container-fluid"},d={class:"d-flex justify-content-between align-items-center"},u={class:"header-left"},f={id:"title-text"},g={class:"text-white title-text-container title-font-size",style:{"font-weight":"bolder"}},p={id:"title-next",class:"text-dark title-text-container title-font-size"},v={class:"header-right"},m={class:"dropdown"},b={class:"btn btn-secondary btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},y={class:"dropdown-menu small-text","aria-labelledby":"dropdownMenuButton1"},w={class:"title-link-container"},k=(0,r.Wm)("i",{id:"github",class:"fab fa-github title-font-size title-right-icon"},null,-1);function x(e,t,n,a,i,o){return(0,r.wg)(),(0,r.j4)("div",h,[(0,r.Wm)("div",c,[(0,r.Wm)("div",d,[(0,r.Wm)("div",u,[(0,r.Wm)("div",f,[(0,r.Wm)("div",g,(0,l.zw)(e.$t("default.title.front")),1),(0,r.Wm)("div",p,(0,l.zw)(e.$t("default.title.next")),1)])]),(0,r.Wm)("div",v,[(0,r.Wm)("div",m,[(0,r.Wm)("button",b,(0,l.zw)(o.currentLangText),1),(0,r.Wm)("ul",y,[(0,r.Wm)("li",null,[(0,r.Wm)("button",{class:["dropdown-item",{active:o.isChinese}],onClick:t[1]||(t[1]=function(e){return o.changeLang("zh")}),type:"button"}," 中文 ",2)]),(0,r.Wm)("li",null,[(0,r.Wm)("button",{class:["dropdown-item",{active:!o.isChinese}],onClick:t[2]||(t[2]=function(e){return o.changeLang("en")}),type:"button"}," Excellent English ",2)])])]),(0,r.Wm)("div",w,[(0,r.Wm)("a",{href:"https://github.com/eclipseglory/91datastructure/tree/main/rbtree",target:"_blank",title:e.$t("default.title.githubdes")},[k],8,["title"])])])])])])}var C={name:"Header",props:{currentLang:{type:String,default:"zh"}},methods:{changeLang:function(e){this.$i18n&&this.$i18n.locale!=e&&(this.$i18n.locale=e)}},computed:{currentLangText:function(){return this.isChinese?"中文":"Excellent English"},isChinese:function(){return!!this.$i18n&&"zh"==this.$i18n.locale}}};C.render=x;var _=C,N=(n(8309),{class:"mt-auto bg-dark footer-container"}),B=(0,r.Wm)("div",{class:"text-light"},null,-1),T={id:"center",class:"text-light"},R=(0,r.Uk)("Developed by "),S={id:"left"},P=(0,r.Wm)("i",{class:"fas fa-bug footer-left-icon"},null,-1);function I(e,t,n,a,i,o){return(0,r.wg)(),(0,r.j4)("footer",N,[B,(0,r.Wm)("div",T,[(0,r.Wm)("small",null,[R,(0,r.Wm)("a",{id:"developer",href:e.$root.$AUTHOR.url,title:"Developer's blog,if he had"},(0,l.zw)(e.$root.$AUTHOR.name),9,["href"]),(0,r.Uk)(" (v"+(0,l.zw)(e.$root.$VERSION)+")",1)])]),(0,r.Wm)("div",S,[(0,r.Wm)("a",{href:"https://github.com/eclipseglory/91datastructure/issues",target:"_blank",title:e.$t("default.footer.reportbug")},[P],8,["title"])])])}var M={name:"Footer"};M.render=I;var W=M,$={id:"main"};function O(e,t,n,a,i,o){var s=(0,r.up)("OperateSpace"),l=(0,r.up)("CanvasSpace");return(0,r.wg)(),(0,r.j4)("div",$,[(0,r.Wm)(s,{disabled:i.disableOperation,onAdd:o.add,onDelete:o.del,onRandomDelete:o.randomDelete,onGenerate:o.generate,onInvalidId:o.invalidId,onInvalidNum:o.invalidNum},null,8,["disabled","onAdd","onDelete","onRandomDelete","onGenerate","onInvalidId","onInvalidNum"]),(0,r.Wm)(l,{ref:"canvas","onOperation:over":o.operationOver,"onOperation:start":o.operationStart},null,8,["onOperation:over","onOperation:start"])])}var A={id:"operate-space"},D={class:"row bb",style:{padding:"20px"}},H={class:"mb-3"},L={class:"input-group mb-3"},E=(0,r.Wm)("i",{class:"fas fa-sitemap"},null,-1),K={class:"row bb",style:{padding:"20px"}},z={class:"input-group mb-3"},Z=(0,r.Wm)("i",{class:"far fa-plus-square"},null,-1),F={class:"mb-3"},j=(0,r.Wm)("i",{class:"fas fa-plus"},null,-1),Y={class:"row",style:{padding:"20px"}},X={class:"input-group mb-3"},G=(0,r.Wm)("i",{class:"far fa-minus-square"},null,-1),U={class:"mb-3"},q=(0,r.Wm)("i",{class:"fas fa-minus"},null,-1);function V(e,t,n,i,o,s){return(0,r.wg)(),(0,r.j4)("div",A,[(0,r.Wm)("div",D,[(0,r.Wm)("div",H,[(0,r.Wm)("div",L,[(0,r.Wm)("button",{disabled:!s.generateEnable,onClick:t[1]||(t[1]=function(){return s.generate&&s.generate.apply(s,arguments)}),class:"btn btn-primary btn-sm",type:"button",id:"generatebutton"},[E,(0,r.Uk)(" "+(0,l.zw)(e.$t("default.operation.generate")),1)],8,["disabled"]),(0,r.wy)((0,r.Wm)("input",{disabled:n.disabled,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.generateNumber=e}),type:"text",class:["form-control",{"is-invalid":!o.validateGenerate}],onInput:t[3]||(t[3]=function(){return s.generateChange&&s.generateChange.apply(s,arguments)}),placeholder:e.$t("default.operation.generateholder"),id:"generatenumber","aria-describedby":"generatebutton"},null,42,["disabled","placeholder"]),[[a.nr,o.generateNumber]])])])]),(0,r.Wm)("div",K,[(0,r.Wm)("div",z,[(0,r.Wm)("button",{disabled:!s.addButtonEnable,onClick:t[4]||(t[4]=function(){return s.add&&s.add.apply(s,arguments)}),class:"btn btn-primary btn-sm",type:"button",id:"addbutton"},[Z,(0,r.Uk)(" "+(0,l.zw)(e.$t("default.operation.insert")),1)],8,["disabled"]),(0,r.wy)((0,r.Wm)("input",{disabled:n.disabled,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.addId=e}),type:"text",class:["form-control",{"is-invalid":!o.validAddId}],onInput:t[6]||(t[6]=function(){return s.inputChange&&s.inputChange.apply(s,arguments)}),placeholder:e.$t("default.operation.placeholder"),id:"idinput","aria-describedby":"addbutton"},null,42,["disabled","placeholder"]),[[a.nr,o.addId]])]),(0,r.Wm)("div",F,[(0,r.Wm)("button",{disabled:n.disabled,onClick:t[7]||(t[7]=function(){return s.randomAdd&&s.randomAdd.apply(s,arguments)}),class:"btn btn-primary btn-sm",style:{width:"100%"},type:"button",id:"randomadd"},[j,(0,r.Uk)(" "+(0,l.zw)(e.$t("default.operation.randomInsert")),1)],8,["disabled"])])]),(0,r.Wm)("div",Y,[(0,r.Wm)("div",X,[(0,r.Wm)("button",{disabled:!s.deleteButtonEnable,class:"btn btn-danger btn-sm",onClick:t[8]||(t[8]=function(){return s.del&&s.del.apply(s,arguments)}),type:"button",id:"deletebutton"},[G,(0,r.Uk)(" "+(0,l.zw)(e.$t("default.operation.delete")),1)],8,["disabled"]),(0,r.wy)((0,r.Wm)("input",{disabled:n.disabled,"onUpdate:modelValue":t[9]||(t[9]=function(e){return o.deleteId=e}),type:"text",class:[{"is-invalid":!o.validDeleteId},"form-control"],onInput:t[10]||(t[10]=function(){return s.inputChange2&&s.inputChange2.apply(s,arguments)}),placeholder:e.$t("default.operation.placeholder"),id:"delete_idinput","aria-describedby":"deletebutton"},null,42,["disabled","placeholder"]),[[a.nr,o.deleteId]])]),(0,r.Wm)("div",U,[(0,r.Wm)("button",{disabled:n.disabled,onClick:t[11]||(t[11]=function(){return s.randomDelete&&s.randomDelete.apply(s,arguments)}),class:"btn btn-danger btn-sm",style:{width:"100%"},type:"button",id:"randomdelete"},[q,(0,r.Uk)(" "+(0,l.zw)(e.$t("default.operation.randomDelete")),1)],8,["disabled"])])])])}n(9494),n(9653);var J={data:function(){return{addId:"",validAddId:!0,deleteId:"",validDeleteId:!0,generateNumber:"",validateGenerate:!0}},emits:["add","delete","randomDelete","invalid-id","generate","invalid-num"],props:{disabled:!1},computed:{addButtonEnable:function(){return!this.disabled&&this.validAddId},deleteButtonEnable:function(){return!this.disabled&&this.validDeleteId},generateEnable:function(){return!this.disabled&&this.validateGenerate}},methods:{generate:function(){if(this.validateGenerate){var e=Number.parseInt(this.generateNumber);isNaN(e)||this.$emit("generate",e)}},add:function(){if(this.validAddId){var e=Number.parseInt(this.addId);this.addNode(e)}},randomDelete:function(){this.$emit("randomDelete")},del:function(){if(this.validDeleteId){var e=Number.parseInt(this.deleteId);this.$emit("delete",e)}},generateChange:function(e){var t=e.target.value,n=Number.parseInt(t);this.validateGenerate=!isNaN(n)&&n>0&&n<100,this.validateGenerate||this.$emit("invalid-num",n)},inputChange:function(e){var t=e.target.value,n=Number.parseInt(t);this.validAddId=!isNaN(t)&&n>=0&&n<1e3,this.validAddId||this.$emit("invalid-id",t)},inputChange2:function(e){var t=e.target.value,n=Number.parseInt(t);this.validDeleteId=!isNaN(t)&&n>=0&&n<1e3,this.validDeleteId||this.$emit("invalid-id",t)},randomAdd:function(){var e=Math.floor(1e3*Math.random());this.addNode(e)},addNode:function(e){this.$emit("add",e)}}};J.render=V;var Q=J,ee={id:"canvas-group"},te=(0,r.Wm)("canvas",{id:"canvas"},null,-1),ne={class:"toast-body"},ae=(0,r.Wm)("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function ie(e,t,n,a,i,o){var s=(0,r.up)("Tip");return(0,r.wg)(),(0,r.j4)("div",ee,[te,(0,r.Wm)(s,{ref:"balanceTip",onNextStep:o.balanceNextStep,waitTime:6},null,8,["onNextStep"]),(0,r.Wm)("div",{id:"result-tip",class:["toast align-items-center text-white border-0 position-absolute",i.tipColor],role:"alert","aria-live":"assertive","aria-atomic":"true"},[(0,r.Wm)("div",{class:["d-flex justify-content-baseline",i.tipTextColor]},[(0,r.Wm)("div",ne,[(0,r.Wm)("i",{class:i.tipIcon,style:{"margin-right":"0.5em"}},null,2),(0,r.Wm)("small",null,(0,l.zw)(i.tipMsg),1)]),ae],2)],2)])}var re=n(1278),oe=n(2610),se=(n(4747),n(4916),n(5306),n(2222),n(1539),n(561),function(){function e(){(0,re.Z)(this,e),this.root}return(0,oe.Z)(e,[{key:"insertNode",value:function(e){return null==this.root?(this.root=e,this.root.changeToBlack(),this.root):(this.root=this._findRoot(),this.root.insertNode(e))}},{key:"_findRoot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root;return null==e?null:null!=e.parent?this._findRoot(e.parent):(this.root=e,e)}},{key:"findNode",value:function(e){if(null!=this.root)return this.root=this._findRoot(this.root),this.root.findNode(e)}}]),e}()),le=n(8198),he=n(4175),ce=n(485),de=n(9666),ue=n(7224),fe=(n(3290),function(){function e(){(0,re.Z)(this,e)}return(0,oe.Z)(e,null,[{key:"getFrontLineColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.frontline:"#000000"}},{key:"getFocusColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.focus:"#000000"}},{key:"getLightColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.light:"#000000"}},{key:"getLightSecondColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.lightsecond:"#000000"}},{key:"getSecondColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.second:"#000000"}},{key:"getLineColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.line:"#000000"}},{key:"getRedColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.red:"#ffffff"}},{key:"getBlackColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.black:"#000000"}},{key:"getBackGroundColorHex",value:function(){var e=this.SCHEMAS[this.currentSchema];return null!=e?e.bg:"#ffffff"}},{key:"hexToRgb",value:function(e){var t=this.cache[e];if(null==t){var n=e.substring(1,3),a=Number.parseInt(n,16);n=e.substring(3,5);var i=Number.parseInt(n,16);n=e.substring(5,7);var r=Number.parseInt(n,16);t={red:a,green:i,blue:r},this.cache[e]=t}return t}},{key:"getRGBString",value:function(e,t){return null!=t?"rgba(".concat(e.red,",").concat(e.green,",").concat(e.blue,",").concat(t,")"):"rgb(".concat(e.red,",").concat(e.green,",").concat(e.blue,")")}}]),e}());(0,ue.Z)(fe,"SCHEMAS",{default:{red:"#DC3545",black:"#212529",line:"#576088",bg:"#F8F9FA",focus:"#ffcef3",light:"#fdfdfd",lightsecond:"#a1eafb",second:"#cabbe9",frontline:"#8559a5"}}),(0,ue.Z)(fe,"currentSchema","default"),(0,ue.Z)(fe,"cache",{});var ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,re.Z)(this,e),this.x=t,this.y=n}return(0,oe.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!=e&&(this._x=e,this._length=null)}},{key:"y",get:function(){return this._y},set:function(e){this._y!=e&&(this._y=e,this._length=null)}},{key:"length",get:function(){return null==this._length&&(this._length=Math.sqrt(this.x*this.x+this.y*this.y)),this._length}},{key:"normalize",value:function(){var e=this.length;this.x=this.x/e,this.y=this.y/e}},{key:"multiply",value:function(e){this.x*=e,this.y*=e}},{key:"plus",value:function(e){this.x+=e.x,this.y+=e.y}},{key:"clone",value:function(){return new e(this.x,this.y)}}]),e}(),pe=(n(9714),function(){function e(){(0,re.Z)(this,e)}return(0,oe.Z)(e,null,[{key:"_getOpMsg",value:function(e,t,n){return this.$t("default.message.".concat(e),{id:t,num:n})}},{key:"generateOperationOverMsg",value:function(e,t,n,a){if(null==this.$t)return"";var i="default.message.".concat(e).concat(a);return this.$t(i,{id:t,num:n})}},{key:"generateDeleteBalanceMsgSimple",value:function(e,t,n){if(null==this.$t)return"";var a="default.message.deleteBlance.simple.case".concat(e,".").concat(t);return this.$t(a,n)}},{key:"generateDeleteBalanceMsgComplex",value:function(e,t,n){if(null==this.$t)return"";var a="default.message.deleteBlance.complex.case".concat(e,".").concat(t);return this.$t(a,n)}},{key:"generateDeleteBalanceAdditionalMsg",value:function(e,t){if(null==this.$t)return"";var n="default.message.deleteBlance.additional".concat(e);return this.$t(n,t)}},{key:"generateInsertBalanceMsg",value:function(e,t,n){if(null==this.$t)return"";var a="default.message.insertBlance.case".concat(e,".").concat(t);return this.$t(a,n)}},{key:"generateRotateForward",value:function(e){return null==this.$t?"":(t=e?"default.rotate.left":"default.rotate.right",this.$t(t));var t}}]),e}());(0,ue.Z)(pe,"$t",void 0);var ve=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,re.Z)(this,e),this._id=t,null==this._id)throw"ID can not be null";this._black=a,this.value=n,this.left,this.right,this.parent}return(0,oe.Z)(e,[{key:"isBlack",get:function(){return this._black}},{key:"isRed",get:function(){return!this.isBlack}},{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"update",value:function(e){this.value=e.value}},{key:"changeToRed",value:function(){this._black=!1}},{key:"changeToBlack",value:function(){this._black=!0}},{key:"disConnectParent",value:function(){return null==this.parent?null:this.parent.left==this?(this.parent.left=null,this.parent=null,!0):this.parent.right==this?(this.parent.right=null,this.parent=null,!1):null}},{key:"leftRotate",value:function(){if(null==this.right)throw"Cant left rotate without right child node";var t=[],n=this.parent,a=!1;null!=this.parent&&(a=this.disConnectParent()),t.push(this);var i=this.right;if(t.push(this.right),this.right.disConnectParent(),null!=i.left){var r=i.left;t.push(i.left),i.left.disConnectParent(),e.createConnection(this,r,!1)}return e.createConnection(i,this),null!=n&&e.createConnection(n,i,a),t}},{key:"rightRotate",value:function(){if(null==this.left)throw"Cant right rotate without left child node";var t=[],n=this.parent,a=!1;null!=this.parent&&(a=this.disConnectParent()),t.push(this);var i=this.left;if(t.push(this.left),this.left.disConnectParent(),null!=i.right){var r=i.right;t.push(i.right),i.right.disConnectParent(),e.createConnection(this,r)}return e.createConnection(i,this,!1),null!=n&&e.createConnection(n,i,a),t}},{key:"rotate",value:function(e){return e?this.leftRotate():this.rightRotate()}},{key:"findReplaceNode",value:function(){if(null!=this.left&&null!=this.right){var e=this.findNextNode();return e.findReplaceNode()}var t=[{node:this}],n=null!=this.left?this.left:this.right;if(this.isRed){var a=pe.generateDeleteBalanceMsgSimple(1,"re",[this.id]),i=pe.generateDeleteBalanceMsgSimple(1,"op"),r=pe.generateDeleteBalanceMsgSimple(1,"ca");return this._debug(a),{balance:!1,replace:this,ca:r,reason:a,operation:i,op:"delete"}}if(null!=n&&n.isRed){var o=pe.generateDeleteBalanceMsgSimple(2,"re",[this.id,n.id]),s=pe.generateDeleteBalanceMsgSimple(2,"op",[n.id]),l=pe.generateDeleteBalanceMsgSimple(2,"ca");return this._debug(o),n.changeToBlack(),{change:[n],balance:!1,replace:this,reason:o,ca:l,operation:s,op:"delete"}}var h=pe.generateDeleteBalanceMsgSimple(3,"re",[this.id]),c=pe.generateDeleteBalanceMsgSimple(3,"op",[this.id]),d=pe.generateDeleteBalanceMsgSimple(3,"ca");return{balance:!0,replace:this,reason:h,ca:d,operation:c,focus:t,op:"delete"}}},{key:"balanceSubTreeAfterDelete",value:function(){var e=this.parent;if(null==e){this._debug("平衡点为根节点，平衡完成");var t=pe.generateDeleteBalanceMsgComplex(1,"re"),n=pe.generateDeleteBalanceMsgComplex(1,"ca");return{reason:t,ca:n,focus:[{node:this}],op:"delete"}}var a=e.left==this?e.right:e.left,i=e.left==this;if(null==a)throw"Red-Black tree struct error";if(a.isRed){var r=[];r.push({node:e,left:i});var o=pe.generateDeleteBalanceMsgComplex(2,"re"),s=pe.generateDeleteBalanceMsgComplex(2,"op",[e.id,a.id,this.id,pe.generateRotateForward(i)]),l=pe.generateDeleteBalanceMsgComplex(2,"ca"),h={ca:l,next:this,change:[a,e],rotated:r,focus:[{node:a},{node:e}],op:"delete"};a.changeToBlack(),e.changeToRed();var c=e.rotate(i);return this._debug(s),h["effected"]=c,h["operation"]=s,h["reason"]=o,h}if(e.isBlack){if((null==a.left||a.left.isBlack)&&(null==a.right||a.right.isBlack)){a.changeToRed();var d=pe.generateDeleteBalanceMsgComplex(3,"re"),u=pe.generateDeleteBalanceMsgComplex(3,"op",[a.id,e.id]),f=pe.generateDeleteBalanceMsgComplex(3,"ca");return this._debug(u),{next:e,change:[a],ca:f,reason:d,operation:u,focus:[{node:a}],op:"delete"}}}else if((null==a.left||a.left.isBlack)&&(null==a.right||a.right.isBlack)){e.changeToBlack(),a.changeToRed();var g=pe.generateDeleteBalanceMsgComplex(4,"op",[a.id,e.id]),p=pe.generateDeleteBalanceMsgComplex(4,"ca");return this._debug(g),{ca:p,change:[a,e],operation:g,focus:[{node:a},{node:e}],op:"delete"}}var v=i?a.left:a.right;if(null!=v&&v.isRed){a.changeToRed(),v.changeToBlack();var m=pe.generateDeleteBalanceMsgComplex(5,"re"),b=pe.generateDeleteBalanceMsgComplex(5,"op",[a.id,v.id,this.id,pe.generateRotateForward(!i)]),y=pe.generateDeleteBalanceMsgComplex(5,"ca"),w=[];w.push({node:a,left:!i});var k=a.rotate(!i);return this._debug(b),{ca:y,next:this,change:[a,v],rotated:w,effected:k,operation:b,reason:m,focus:[{node:a},{node:v}],op:"delete"}}var x=i?a.right:a.left;if(null!=x&&x.isRed){var C=[],_=[];x.changeToBlack(),_.push({node:x}),C.push(x);var N=e.isBlack,B=a.isBlack;a.isRed?e.changeToRed():e.changeToBlack(),N?a.changeToBlack():a.changeToRed(),N&&e.isBlack||(C.push(e),_.push({node:e})),B&&a.isBlack||(C.push(a),_.push({node:a}));var T=[],R=pe.generateDeleteBalanceMsgComplex(6,"op",[a.id,e.id,x.id,pe.generateRotateForward(i)]),S=pe.generateDeleteBalanceMsgComplex(6,"ca");T.push({node:e,left:i});var P=e.rotate(i);return this._debug(R),{change:C,rotated:T,effected:P,ca:S,operation:R,focus:_,op:"delete"}}}},{key:"findNode",value:function(e){return e==this.id?this:this.id>e?null!=this.left?this.left.findNode(e):null:null!=this.right?this.right.findNode(e):null}},{key:"findNextNode",value:function(){if(this.right){var e=this.right;while(1){if(null==e.left)return e;e=e.left}}}},{key:"findPreNode",value:function(){if(this.left){var e=this.left;while(1){if(null==e.right)return e;e=e.right}}}},{key:"childIsSameColor",value:function(){if(null==this.left&&null==this.right)return!0;if(null!=this.left&&null!=this.right)return this.left.isRed&&this.right.isRed||this.left.isBlack&&this.right.isBlack;var e=null!=this.left?this.left:this.right;return e.isBlack}},{key:"deleteMe",value:function(){if(null==this.left&&null==this.right)return this.disConnectParent()}},{key:"insertNode",value:function(t){return t.id==this.id?(this._debug("找到更新点，使用".concat(t.toString(),"更新信息")),this.update(t),null):this.id>t.id?null!=this.left?this.left.insertNode(t):(this._debug("找到插入位置，插入节点".concat(t.toString(),"作为左节点")),e.createConnection(this,t),t):null!=this.right?this.right.insertNode(t):(this._debug("找到插入位置，插入节点".concat(t.toString(),"作为右节点")),e.createConnection(this,t,!1),t)}},{key:"balanceSubTreeAfterInsert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null==this.parent){if(this.isBlack){var t=pe.generateInsertBalanceMsg(1,"re");return{reason:t,op:"insert"}}this._debug("平衡子树 : "),this._debug("该节点为根节点，修改颜色"),this.changeToBlack(),e.push(this);var n=pe.generateInsertBalanceMsg(2,"re"),a=pe.generateInsertBalanceMsg(2,"op",[this.id]);return{change:e,reason:n,operation:a,op:"insert",focus:[{node:this}]}}if(this.isBlack)return null;if(this._debug("平衡子树 : "),this.parent.isBlack){var i=pe.generateInsertBalanceMsg(3,"ca");return this._debug(i),{ca:i,op:"insert",focus:[{node:this}]}}var r=this.parent.parent;if(null==r)throw"Balance sub-tree error, grande node can not be null";var o=r.left==this.parent?r.right:r.left,s=r.left==this.parent,l=this.parent.left==this;if(null!=o&&o.isRed){var h=pe.generateInsertBalanceMsg(4,"op",[r.id,this.parent.id,o.id]),c=pe.generateInsertBalanceMsg(4,"ca");return this._debug(h),o.changeToBlack(),this.parent.changeToBlack(),e.push(o),e.push(this.parent),r.changeToRed(),e.push(r),{next:r,change:e,ca:c,operation:h,op:"insert",focus:[{node:this},{node:o},{node:this.parent},{node:r}]}}var d,u,f,g,p=this.parent,v=[],m=[{node:this}];return s!=l?(g=pe.generateInsertBalanceMsg(5,"re"),f=pe.generateInsertBalanceMsg(5,"op",[this.parent.id,pe.generateRotateForward(!l)]),u=pe.generateInsertBalanceMsg(5,"ca"),this._debug(f),v.push({node:this.parent,left:!l}),d=this.parent.rotate(!l)):(f=pe.generateInsertBalanceMsg(6,"op",[r.id,this.parent.id,pe.generateRotateForward(!s)]),u=pe.generateInsertBalanceMsg(6,"ca"),this._debug(f),this.parent.changeToBlack(),r.changeToRed(),e.push(r),e.push(this.parent),m.push({node:r}),m.push({node:this.parent}),v.push({node:r,left:!s}),d=r.rotate(!s)),p.isBlack?{change:e,effected:d,rotated:v,operation:f,reason:g,ca:u,op:"insert",focus:m}:{next:p,change:e,effected:d,rotated:v,operation:f,ca:u,reason:g,op:"insert",focus:m}}},{key:"_debug",value:function(e){console.log("".concat(this.toString()," - ").concat(e))}},{key:"toString",value:function(){return null!=this.value?"Node(".concat(this.id,")[").concat(this.value,"]"):"Node(".concat(this.id,")")}}],[{key:"createConnection",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n?e.left=t:e.right=t,t.parent=e}}]),e}(),me=function(e){(0,ce.Z)(n,e);var t=(0,de.Z)(n);function n(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20;return(0,re.Z)(this,n),a=t.call(this,e,r,o),a.xPadding=s,a.yPadding=l,a._radius=i,a.x=0,a.y=0,a._red=255,a._green=255,a._blue=255,a.shadowBlur=3,a.shadowOffset=2,a._connectionsParams=new Array(2),a.scale=1,a.innerPercent=1,a}return(0,oe.Z)(n,[{key:"innerPercent",get:function(){return this._innerPercent},set:function(e){(e>=0||e<=1)&&this._innerPercent!=e&&(this._innerPercent=e,this._path=null)}},{key:"isLeftLeaf",get:function(){return null==this.parent||this.parent.left==this}},{key:"red",get:function(){return this._red},set:function(e){e!=this._red&&(this._red=e,this._colorStr=null)}},{key:"green",get:function(){return this._green},set:function(e){e!=this._green&&(this._green=e,this._colorStr=null)}},{key:"blue",get:function(){return this._blue},set:function(e){e!=this._blue&&(this._blue=e,this._colorStr=null)}},{key:"radius",get:function(){return this._radius},set:function(e){e!=this._radius&&(this._radius=e,this._path=null)}},{key:"_getColorString",value:function(){return null==this._colorStr&&(this._colorStr="rgb(".concat(this.red,",").concat(this.green,",").concat(this.blue,")")),this._colorStr}},{key:"_getPath",value:function(){if(null==this._path){this._path=new Path2D;var e=this._path,t=this.radius*this.innerPercent;if(this.innerPercent<=0)this._path.rect(-this.radius,-this.radius,2*this.radius,2*this.radius);else if(this.innerPercent>=1)this._path.arc(0,0,this.radius,0,2*Math.PI);else{var n=-this.radius,a=n;e.arc(t+n,t+a,t,Math.PI,Math.PI+Math.PI/2);var i=2*this.radius-t+n,r=a;e.lineTo(i,r),e.arc(i,r+t,t,-Math.PI/2,0),i=2*this.radius+n,r=2*this.radius-t+a,e.lineTo(i,r),e.arc(i-t,r,t,0,Math.PI/2),i=t+n,r=a+2*this.radius,e.lineTo(i,r),e.arc(i,r-t,t,Math.PI/2,Math.PI),e.closePath()}}return this._path}},{key:"calculateWidth",value:function(){var e=0,t=0;if(null!=this.left){var n=this.left.calculateWidth();e=n["width"],t=n["height"]}var a=0,i=0;if(null!=this.right){var r=this.right.calculateWidth();a=r["width"],i=r["height"]}var o=Math.max(e+a,2*this.radius+this.xPadding),s=Math.max(t,i)+2*this.radius+this.yPadding;return this.dimension={left:e,right:a,width:o,height:s},this.dimension}},{key:"layout",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null!=this.left&&(e=this.left.layout({x:n.x,y:n.y+2*this.radius+this.yPadding},a)),null!=this.right&&(t=this.right.layout({x:n.x+this.dimension.left,y:n.y+2*this.radius+this.yPadding},a)),this.oldX=this.x,this.oldY=this.y,null!=e&&null!=t)this.x=(e+t)/2;else{var i=this.dimension.width;this.x=n.x+i/2}return this.y=n.y+this.radius,this.oldX==this.x&&this.oldY==this.y||a.push(this),this.x}},{key:"_getConnectionParams",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=n?0:1,i=this._connectionsParams[a];if(null==i){i={sourceX:this.x,sourceY:this.y,targetX:e,targetY:t},this._connectionsParams[a]=i;var r=new ge(e-this.x,t-this.y);i["radian"]=Math.atan2(r.y,r.x),r.normalize(),r.multiply(this.radius+this.shadowOffset);var o=new ge(this.x,this.y);o.plus(r),r.multiply(-1);var s=new ge(e,t);s.plus(r),i["sx"]=o.x,i["sy"]=o.y,i["ex"]=s.x,i["ey"]=s.y}else{var l=i.sourceX,h=i.sourceY,c=i.targetX,d=i.targetY;if(l!=this.x||h!=this.y||c!=e||d!=t)return this._connectionsParams[a]=null,this._getConnectionParams(e,t,n)}return i}},{key:"_getLeftConnectionParam",value:function(e,t){return this._getConnectionParams(e,t)}},{key:"_getRightConnectionParam",value:function(e,t){return this._getConnectionParams(e,t,!1)}},{key:"_drawConnectLine",value:function(e,t){null!=t&&this._drawConnection(e,this._getConnectionParams(t.x,t.y,t==this.left),t.scale)}},{key:"draw",value:function(e){this.scale>0&&(this._drawConnectLine(e,this.left),this._drawConnectLine(e,this.right),e.save(),e.translate(this.x,this.y),e.scale(this.scale,this.scale),e.fillStyle=this._getColorString(),e.save(),e.shadowBlur=this.shadowBlur,e.shadowOffsetX=this.shadowOffset,e.shadowOffsetY=this.shadowOffset,e.shadowColor="#433d3c",e.fill(this._getPath()),e.restore(),e.fillStyle=fe.getBackGroundColorHex(),e.textBaseline="middle",e.textAlign="center",e.font="".concat(Math.floor(.9*this.radius),"px Arial"),e.fillText("".concat(this.id),0,0,2*this.radius),e.restore()),this.left&&this.left.draw(e),this.right&&this.right.draw(e)}},{key:"_drawConnection",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!(a<=0)){e.save(),e.globalAlpha*=a,e.beginPath(),e.moveTo(t.sx,t.sy),e.lineTo(t.ex,t.ey);var i=fe.getLineColorHex();e.strokeStyle=i,e.fillStyle=i,e.lineWidth=2,e.stroke(),e.translate(t.ex,t.ey),e.rotate(t.radian-Math.PI),e.fill(n._getArrowPath(this.radius/2)),e.restore()}}},{key:"changeToBlack",value:function(){this.recordOldColor();var e=fe.getBlackColorHex(),t=fe.hexToRgb(e);this.red=t.red,this.green=t.green,this.blue=t.blue,(0,le.Z)((0,he.Z)(n.prototype),"changeToBlack",this).call(this)}},{key:"changeToRed",value:function(){this.recordOldColor();var e=fe.getRedColorHex(),t=fe.hexToRgb(e);this.red=t.red,this.green=t.green,this.blue=t.blue,(0,le.Z)((0,he.Z)(n.prototype),"changeToRed",this).call(this)}},{key:"recordOldColor",value:function(){this.oldRed=this.red,this.oldGreen=this.green,this.oldBlue=this.blue}},{key:"reverseColor",value:function(){var e=this.red;this.red=this.oldRed,this.oldRed=e,e=this.blue,this.blue=this.oldBlue,this.oldBlue=e,e=this.green,this.green=this.oldGreen,this.oldGreen=e}}],[{key:"_getArrowPath",value:function(e){if(null==this._arrowPath){this._arrowPath=new Path2D;var t=this._arrowPath;t.moveTo(0,0);var n=e,a=Math.floor(Math.cos(30/180*Math.PI)*n),i=Math.floor(Math.sin(30/180*Math.PI)*n);t.lineTo(a,i),t.lineTo(a,Math.floor(i-n)),t.closePath()}return this._arrowPath}}]),n}(ve);(0,ue.Z)(me,"_arrowPath",void 0);var be=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nodeRadius:20,nodeXPadding:10,nodeYPadding:20,padding:{left:0,right:0,top:0,bottom:0}};(0,re.Z)(this,e),this.nodeRadius=null==t.nodeRadius?20:t.nodeRadius,this.nodeXPadding=null==t.nodeXPadding?10:t.nodeXPadding,this.nodeYPadding=null==t.nodeYPadding?20:t.nodeYPadding,this.padding=null==t.padding?{left:0,right:0,top:0,bottom:0}:t.padding,this._tree=new se,this.width=0,this.height=0}return(0,oe.Z)(e,[{key:"root",get:function(){return this._tree.root},set:function(e){this._tree.root=e}},{key:"updateSize",value:function(e){this.oldWidth=this.width,this.oldHeight=this.height,this.width=e.width,this.height=e.height}},{key:"insertNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new me(e,this.nodeRadius,t.value,!1,this.nodeXPadding,this.nodeYPadding);n.changeToRed();var a=this._tree.insertNode(n);return a}},{key:"findNode",value:function(e){return this._tree.findNode(e)}},{key:"draw",value:function(e){e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.translate(e.canvas.width/2,e.canvas.height/2);var t=1;this.width>canvas.width&&(t=Math.min(canvas.width/this.width,t)),this.height>canvas.height&&(t=Math.min(canvas.height/this.height,t)),1!=t&&e.scale(t,t),e.translate(-this.width/2+this.padding.left,-this.height/2+this.padding.top),this._tree._findRoot(),null!=this.root&&this.root.draw(e),e.restore()}},{key:"layout",value:function(){var e=this._tree._findRoot();if(null==e)return null;var t=e.calculateWidth(),n=[];return e.layout({x:0,y:0},n),{dirty:n,region:{width:t.width+this.padding.left+this.padding.right,height:t.height-this.nodeYPadding+this.padding.top+this.padding.bottom}}}},{key:"_constriantNodePosition",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(null!=e){e.oldX=e.x,e.x=t.x,e.oldY=e.y,e.y=t.y,e.oldX==e.x&&e.oldY==e.y||a.push(e);var i=n/2;this._constriantNodePosition(e.left,{x:t.x-i,y:t.y+2*e.radius+this.nodeYPadding},i,a),this._constriantNodePosition(e.right,{x:t.x+i,y:t.y+2*e.radius+this.nodeYPadding},i,a)}}}]),e}(),ye=(n(4197),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),4),we=.001,ke=1e-7,xe=10,Ce=11,_e=1/(Ce-1),Ne="function"===typeof Float32Array,Be=function(){function e(t,n,a,i){if((0,re.Z)(this,e),!(0<=t&&t<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(this.mY1=n,this.mY2=i,this.mX1=t,this.mX2=a,this.linearEasing=!1,t===n&&a===i)this.linearEasing=!0;else{this.sampleValues=Ne?new Float32Array(Ce):new Array(Ce);for(var r=0;r<Ce;++r)this.sampleValues[r]=this.calcBezier(r*_e,t,a)}}return(0,oe.Z)(e,[{key:"easing",value:function(e){return 0===e||1===e||this.linearEasing?e:this.calcBezier(this.getTForX(e,this.mX1,this.mX2),this.mY1,this.mY2)}},{key:"getTForX",value:function(e,t,n){for(var a=0,i=1,r=Ce-1,o=this.sampleValues;i!==r&&o[i]<=e;++i)a+=_e;--i;var s=(e-o[i])/(o[i+1]-o[i]),l=a+s*_e,h=this.getSlope(l,t,n);return h>=we?this.newtonRaphsonIterate(e,l,t,n):0===h?l:this.binarySubdivide(e,a,a+_e,t,n)}},{key:"A",value:function(e,t){return 1-3*t+3*e}},{key:"B",value:function(e,t){return 3*t-6*e}},{key:"C",value:function(e){return 3*e}},{key:"calcBezier",value:function(e,t,n){return((this.A(t,n)*e+this.B(t,n))*e+this.C(t))*e}},{key:"getSlope",value:function(e,t,n){return 3*this.A(t,n)*e*e+2*this.B(t,n)*e+this.C(t)}},{key:"binarySubdivide",value:function(e,t,n,a,i){var r,o,s=0;do{o=t+(n-t)/2,r=this.calcBezier(o,a,i)-e,r>0?n=o:t=o}while(Math.abs(r)>ke&&++s<xe);return o}},{key:"newtonRaphsonIterate",value:function(e,t,n,a){for(var i=0;i<ye;++i){var r=this.getSlope(t,n,a);if(0===r)return t;var o=this.calcBezier(t,n,a)-e;t-=o/r}return t}}]),e}(),Te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x1:0,y1:0,x2:0,y2:0};(0,re.Z)(this,e),this.duration=t,this.timingFunction=new Be(n.x1,n.y1,n.x2,n.y2),this.figures=[],this.loop=!1,this.loopWithReverse=!1}return(0,oe.Z)(e,[{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4?arguments[4]:void 0,r=a-n;0!=r&&this.figures.push({figure:e,prop:t,start:n,end:a,delta:r,processor:i})}},{key:"forward",value:function(e){var t=this;return this.running?Promise.resolve():new Promise((function(n,a){var i=Math.floor(t.duration/16.6);t._run(e,i,0,!1,n)}))}},{key:"stop",value:function(){this._stop=!0}},{key:"reverse",value:function(e){var t=this;return this.running?Promise.resolve():new Promise((function(n,a){var i=Math.floor(t.duration/16.6);t._run(e,i,0,!0,n)}))}},{key:"_run",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;if(this._stop)r();else{this._stop=!1;var o=a/t,s=this.timingFunction.easing(o);if(this.figures.forEach((function(e){if(0!=e.delta){var t=e.figure,n=e.prop;if(i){var a=e.end-e.delta*s;e.processor&&(a=e.processor(a)),t[n]=a}else{var r=e.delta*s+e.start;e.processor&&(r=e.processor(r)),t[n]=r}}})),a++,e&&e(s),a>t)return this.running=!1,this.loop?(this.loopWithReverse&&(i=!i),void this._run(e,t,0,i,r)):void r();requestAnimationFrame((function(){n._run(e,t,a,i,r)}))}}}]),e}(),Re=function(){function e(t){(0,re.Z)(this,e),this.refNode=t}return(0,oe.Z)(e,[{key:"nodeBounds",get:function(){return this._nodeBounds}},{key:"refNode",get:function(){return this._r},set:function(e){if(this._r!=e){this._r=e;var t=this.refNode.x-this.refNode.radius,n=this.refNode.y-this.refNode.radius,a=t+2*this.refNode.radius,i=n+2*this.refNode.radius;this._nodeBounds={left:t,top:n,right:a,bottom:i},this.whenRefNodeChange()}}},{key:"whenRefNodeChange",value:function(){}},{key:"dispose",value:function(){}}]),e}(),Se=function(e){(0,ce.Z)(n,e);var t=(0,de.Z)(n);function n(e){var a;return(0,re.Z)(this,n),a=t.call(this,e),a.opacity=1,a}return(0,oe.Z)(n,[{key:"_getPaths",value:function(){if(null==this._paths){this._paths=[new Path2D,new Path2D,new Path2D];var e=.8*this.refNode.radius,t=2*this.refNode.radius-e,n=this._paths[0];n.rect(-t/2,-t/2,t,t);var a=this._paths[1];a.rect((-t-e)/2,(-t-e)/2,e,e);var i=this._paths[2];i.rect((t-e)/2,(t-e)/2,e,e)}return this._paths}},{key:"whenRefNodeChange",value:function(){this._paths&&(this._paths.length=0),this._paths=null}},{key:"draw",value:function(e){if(0!=this.opacity){e.save(),e.translate(this.refNode.x,this.refNode.y),e.scale(.8,.8),e.globalAlpha=this.opacity;var t=this._getPaths();e.strokeStyle=fe.getLineColorHex();var n=e.lineWidth;e.lineWidth=3,e.stroke(t[0]),e.lineWidth=n,e.fillStyle=fe.getBlackColorHex(),e.fill(t[1]),e.stroke(t[1]),e.fillStyle=fe.getRedColorHex(),e.fill(t[2]),e.stroke(t[2]),e.restore()}}},{key:"dispose",value:function(){this._paths.length=0,this._paths=null}}]),n}(Re),Pe=function(){function e(t,n){(0,re.Z)(this,e),this.brTree=t,this.width=0,this.opacity=0,this.ctx=n,this.effects=[],this.scale=1}return(0,oe.Z)(e,[{key:"add",value:function(e){this.effects.push(e)}},{key:"draw",value:function(){var e=this.ctx;e.save(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.opacity>0&&(e.globalAlpha=this.opacity,e.fillStyle="black",e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.translate(e.canvas.width/2,e.canvas.height/2);var t=1;this.scale=1,this.brTree.width>e.canvas.width&&(t=Math.min(e.canvas.width/this.brTree.width,t)),this.brTree.height>e.canvas.height&&(t=Math.min(e.canvas.height/this.brTree.height,t)),1!=t&&(this.scale=t,e.scale(t,t)),e.translate(-this.brTree.width/2,-this.brTree.height/2),e.globalAlpha=1,this.effects.forEach((function(t){t.draw(e)})),e.restore()}},{key:"clean",value:function(){var e=this.ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height),this.effects.forEach((function(e){e.dispose()})),this.effects.length=0}}]),e}(),Ie=function(e){(0,ce.Z)(n,e);var t=(0,de.Z)(n);function n(e,a){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe.getLightColorHex();return(0,re.Z)(this,n),i=t.call(this,e),i.parent=a,i.radiusPercent=1,i.shadowColor=r,i}return(0,oe.Z)(n,[{key:"_getPath",value:function(){if(null==this._path){this._path=new Path2D;var e=this._path,t=this.refNode.radius;e.arc(0,0,Math.floor(2*t),0,2*Math.PI),e.closePath()}return this._path}},{key:"whenRefNodeChange",value:function(){this._path=null}},{key:"draw",value:function(e){if(!(this.radiusPercent<=0)){e.save(),e.globalAlpha=.5;var t=this.refNode;e.translate(t.x+e.canvas.width,t.y+e.canvas.height),e.globalAlpha=this.radiusPercent,e.shadowBlur=2*t.radius*this.parent.scale,e.shadowOffsetX=-e.canvas.width*this.parent.scale,e.shadowOffsetY=-e.canvas.height*this.parent.scale,e.shadowColor=fe.getRGBString(fe.hexToRgb(this.shadowColor),.8),e.fill(this._getPath()),e.restore()}}},{key:"dispose",value:function(){this.parent=null}}]),n}(Re),Me=Math.PI/4,We=function(e){(0,ce.Z)(n,e);var t=(0,de.Z)(n);function n(e){var a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,re.Z)(this,n),a=t.call(this,e),a.left=i,a.progress=1,a}return(0,oe.Z)(n,[{key:"whenRefNodeChange",value:function(){this._arrow=null}},{key:"_getArrowPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.refNode.radius/5;if(null==this._arrow){this._arrow=new Path2D;var t=this._arrow,n=1.6*e;t.moveTo(0,n);var a=n/Math.sin(30/180*Math.PI),i=a*Math.cos(30/180*Math.PI),r=0;t.lineTo(i,r),t.lineTo(0,-n),t.closePath()}return this._arrow}},{key:"draw",value:function(e){if(!(this.progress<=0)){e.save(),e.translate(this.refNode.x,this.refNode.y);var t=1.8*this.refNode.radius;e.beginPath();var n=this.refNode.radius/5;if(e.lineWidth=n,e.strokeStyle=fe.getFrontLineColorHex(),e.lineCap="round",this.left){var a=-(Math.PI+Math.PI/2),i=this.progress*a+Me;e.arc(0,0,t,Me,i,!0),e.stroke();var r=Math.cos(i)*t,o=Math.sin(i)*t;e.translate(r,o),e.rotate(i-Math.PI/2),e.fillStyle=fe.getFrontLineColorHex(),e.fill(this._getArrowPath(n))}else{var s=Math.PI/2+Math.PI,l=this.progress*s+(Math.PI-Me);e.arc(0,0,t,Math.PI-Me,l,!1),e.stroke();var h=Math.cos(l)*t,c=Math.sin(l)*t;e.translate(h,c),e.rotate(l+Math.PI/2),e.fillStyle=fe.getFrontLineColorHex(),e.fill(this._getArrowPath(n))}e.restore()}}}]),n}(Re),$e=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{left:0,top:0,bottom:0,right:0};(0,re.Z)(this,e),this.ctx=t,this.fctx=n,this.brTree=new be({nodeRadius:a,nodeXPadding:i,nodeYPadding:r,padding:o}),this.effectLayer=new Pe(this.brTree,this.fctx),this._eventHandler={},this.nodeIds=[]}return(0,oe.Z)(e,[{key:"on",value:function(e,t){if("balanceStepOver"!=e)if("balanceStepStart"!=e){var n=this._eventHandler[e];null==n&&(this._eventHandler[e]=[],n=this._eventHandler[e]),n.push(t)}else this._balanceStartHandler=t;else this._balanceCompleteHandler=t}},{key:"_fireBalanceStepStart",value:function(e){if(this._balanceStartHandler)return this._balanceStartHandler(e)}},{key:"_fireBalanceStepOver",value:function(){if(this._balanceCompleteHandler)return this._balanceCompleteHandler()}},{key:"_fireOperationStart",value:function(){var e=this._eventHandler["operationStart"];null!=e&&e.forEach((function(e){e()}))}},{key:"_fireOperationOver",value:function(e){var t=this._eventHandler["operationOver"];null!=t&&t.forEach((function(t){t(e)}))}},{key:"generate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;this.brTree.root=null,this.nodeIds.length=0,this.brTree.draw(this.ctx),this._fireOperationStart();for(var n=0;n<t;){var a=Math.floor(1e3*Math.random());if(null==this.brTree.root)this.brTree.insertNode(a),this.recordId(a);else{var i=this.brTree.insertNode(a);if(null==i)continue;this.recordId(a);var r=i.balanceSubTreeAfterInsert();while(null!=r&&null!=r.next)r=r.next.balanceSubTreeAfterInsert()}n++}var o=this.brTree.width/2,s=this.brTree.height/2;function l(e,t){null!=e&&(e.oldX=o,e.oldY=s,t.add(e,"innerPercent",e.innerPercent,e.isLeftLeaf?1:0),l(e.left,t),l(e.right,t))}var h=this.brTree.layout(),c=new Te(500,{x1:.37,y1:-.47,x2:.61,y2:1.45});if(null==h)this.brTree.updateSize({width:0,height:0});else{var d=h.dirty,u=h.region;l(this.brTree.root,c),this.brTree.updateSize(u),d.forEach((function(t){e.registPositionChange(c,t)}))}this._registerTreeDimensionChange(c),c.forward((function(){e.brTree.draw(e.ctx)})).then((function(){e._fireOperationOver({op:"generate",num:t,type:"success"})}))}},{key:"randomDelete",value:function(){if(this.nodeIds.length>0){var e=Math.floor(Math.random()*this.nodeIds.length),t=this.nodeIds[e];this.deleteNode(t)}}},{key:"deleteNode",value:function(e){var t=this;if(!isNaN(e)){this._fireOperationStart();var n=this.brTree.findNode(e);if(null!=n){var a=n.findReplaceNode(),i=a.replace,r=a.balance;console.log("删除节点".concat(n,":替换节点").concat(i));var o=[];o.push({node:i,color:fe.getFocusColorHex()}),i.id!=n.id&&o.push({node:n,color:fe.getSecondColorHex()}),a.change&&a.change.forEach((function(e){return o.push({node:e})})),a["focus"]=o,a.replaceNode=i,a.deleteNode=n;var s=pe.generateDeleteBalanceAdditionalMsg(1,[i.id,n.id]);return i.id==n.id&&(s=pe.generateDeleteBalanceAdditionalMsg(2,[i.id])),r?this.balanceAfterDelete(i,n,i).then((function(){s=pe.generateDeleteBalanceAdditionalMsg(3)+s,t._deleteReplaceNode(i,n,{focus:o,deleteNode:n,replaceNode:i,change:a.change,operation:s}).then((function(){t._fireOperationOver({op:"delete",id:e,type:"success"})}))})):(null!=a.operation&&(a.operation+=s),this._deleteReplaceNode(i,n,a).then((function(){t._fireOperationOver({op:"delete",id:e,type:"success"})}))),this.removeId(e),e}return this._fireOperationOver({op:"delete",id:e,type:"error"}),null}}},{key:"_deleteReplaceNode",value:function(e,t,n){var a=this;return new Promise((function(i,r){a._excuteProcessAnimated(t,(function(){return n}),(function(){var n=new Te(500,{x1:.37,y1:-.47,x2:.61,y2:1.45});n.add(e,"scale",1,0),n.add(t,"id",t.id,e.id,(function(e){return Math.floor(e)})),n.forward((function(n){if(a.brTree.draw(a.ctx),1==n){var r=null==e.left?e.right:e.left;t.id=e.id,t.value=e.value;var o=e.parent,s=[];r&&(s.push(r),r.disConnectParent());var l=e.disConnectParent();null!=o?(l?o.left=r:o.right=r,r&&(r.parent=o)):a.brTree.root=r,a._refreshTreeAnimated(null,s,null).then((function(){i()}))}}))}),!1)}))}},{key:"recordId",value:function(e){-1==this.nodeIds.indexOf(e)&&this.nodeIds.push(e)}},{key:"removeId",value:function(e){var t=this.nodeIds.indexOf(e);-1!=t&&this.nodeIds.splice(t,1)}},{key:"addNode",value:function(e){var t=this;if(isNaN(e))return null;this._fireOperationStart();var n=this.brTree.insertNode(e);return null==n?(this._fireOperationOver({op:"update",id:e,type:"warning"}),null):(this.recordId(e),this._refreshTreeAnimated(n).then((function(){return t.balanceAfterInsert(n,n)})).then((function(){t._fireOperationOver({op:"insert",id:e,type:"success"})})),e)}},{key:"registPositionChange",value:function(e,t){e.add(t,"x",t.oldX,t.x),e.add(t,"y",t.oldY,t.y)}},{key:"registColorChange",value:function(e,t){e.add(t,"red",t.oldRed,t.red),e.add(t,"green",t.oldGreen,t.green),e.add(t,"blue",t.oldBlue,t.blue)}},{key:"refreshEffectLayerWithAnimation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(e){a&&t.effectLayer.draw(),1==e&&(i||t.effectLayer.clean())};return n?e.reverse(r):e.forward(r)}},{key:"fadeInEffectLayer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=new Te(t);return n.add(this.effectLayer,"opacity",0,.5),n.forward((function(t){e.effectLayer.draw()}))}},{key:"fadeOutEffectLayer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=new Te(t);return n.add(this.effectLayer,"opacity",this.effectLayer.opacity,0),n.forward((function(){e.effectLayer.draw()}))}},{key:"balanceAfterDelete",value:function(e,t,n){return this._excuteProcessAnimated(e,(function(e){var a=e.balanceSubTreeAfterDelete();if(a.deleteNode=t,a.replaceNode=n,a.focus){for(var i=!1,r=!1,o=!1,s=0;s<a.focus.length;s++){var l=a.focus[s];if(l.id==t.id){l["color"]=fe.getFocusColorHex(),i=!0;break}if(l.id==n.id){r=!0,l["color"]=fe.getSecondColorHex();break}if(l.id==e.id){o=!0,l["color"]=fe.getLightSecondColorHex();break}}i||a.focus.push({node:t,color:fe.getFocusColorHex()}),r||t.id==n.id||a.focus.push({node:n,color:fe.getSecondColorHex()}),o||t.id==e.id||n.id==e.id||a.focus.push({node:e,color:fe.getLightSecondColorHex()})}return a}))}},{key:"_nextStep",value:function(){this._balanceEffectAnimation&&(this._balanceEffectAnimation.loop=!1)}},{key:"_excuteProcessAnimated",value:function(e,t,n){var a=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Promise((function(r,o){if(null==e||null==t)return n&&n(),r();var s=t(e);if(null==s)return n&&n(),r();a.fadeInEffectLayer().then((function(){var t=a._createBalanceStepEffectAnimation(s.focus,s);return t.loop=!0,t.loopWithReverse=!0,a._balanceEffectAnimation=t,a._fireBalanceStepStart({current:e,balance:s}),new Promise((function(e,n){t.forward((function(){return a.effectLayer.draw()})).then((function(){e()}))}))})).then((function(){return a._balanceEffectAnimation=null,a._fireBalanceStepOver(),a.effectLayer.clean(),a.fadeOutEffectLayer()})).then((function(){if(i)return a._refreshTreeAnimated(null,s.effected,s.change)})).then((function(){var e=s.next;if(null==e)return a.effectLayer.clean(),n&&n(),r();setTimeout((function(){a._excuteProcessAnimated(e,t,n,i).then((function(){r()}))}),500)}))}))}},{key:"_createBalanceStepEffectAnimation",value:function(e,t){var n=this,a=new Te(600);return null!=e&&e.forEach((function(e){var t=new Ie(e.node,n.effectLayer,e.color);a.add(t,"radiusPercent",0,1),n.effectLayer.add(t)})),t.change&&t.change.forEach((function(e){var t=new Se(e);n.effectLayer.add(t),a.add(t,"opacity",0,1)})),t.rotated&&t.rotated.forEach((function(e){var t=e.left,i=e.node,r=new We(i,t);a.add(r,"progress",0,1),n.effectLayer.add(r)})),a}},{key:"balanceAfterInsert",value:function(e,t){return this._excuteProcessAnimated(e,(function(e){var n=e.balanceSubTreeAfterInsert();if(n.insertNode=t,n.focus){for(var a=!1,i=!1,r=0;r<n.focus.length;r++){var o=n.focus[r];if(o.id==t.id){o["color"]=fe.getFocusColorHex(),a=!0;break}if(o.id==e.id){o["color"]=fe.getSecondColorHex(),i=!0;break}}a||n.focus.push({node:t,color:fe.getFocusColorHex()}),i||t.id==e.id||n.focus.push({node:e,color:fe.getSecondColorHex()})}return n}))}},{key:"_registerTreeDimensionChange",value:function(e){e.add(this.brTree,"width",this.brTree.oldWidth,this.brTree.width),e.add(this.brTree,"height",this.brTree.oldHeight,this.brTree.height)}},{key:"_refreshTreeAnimated",value:function(e,t,n){var a=this,i=this.brTree.layout(),r=new Te(500,{x1:.37,y1:-.47,x2:.61,y2:1.45});if(null==i)this.brTree.updateSize({width:0,height:0});else{var o=i.dirty,s=i.region;this.brTree.updateSize(s),o.forEach((function(t){null!=e&&e.id==t.id||a.registPositionChange(r,t)})),e&&(r.add(e,"scale",0,1),r.add(e,"innerPercent",e.innerPercent,e.isLeftLeaf?1:0)),n&&n.forEach((function(e){a.registColorChange(r,e)})),t&&t.forEach((function(t){null!=e&&e.id==t.id||r.add(t,"innerPercent",t.innerPercent,t.isLeftLeaf?1:0)}))}return this._registerTreeDimensionChange(r),r.forward((function(){a.brTree.draw(a.ctx)}))}}]),e}(),Oe={id:"toast-container",class:"toast-container"},Ae={id:"toast",class:"toast hide",role:"alert","aria-live":"assertive","aria-atomic":"true"},De={class:"toast-header"},He={class:"me-auto"},Le=(0,r.Wm)("i",{class:"fas fa-info-circle",style:{"margin-right":"0.2em"}},null,-1),Ee={class:"toast-body"},Ke={id:"message-container"},ze={key:0,id:"balance-node",class:"border-bottom"},Ze={class:"text-dark"},Fe={style:{"margin-left":"5px"}},je={key:1,class:"node-text-container"},Ye={id:"balance-node",class:"border-bottom"},Xe={class:"text-dark"},Ge={style:{"margin-left":"5px"}},Ue={id:"balance-node",style:{"justify-content":"flex-end"}},qe={class:"text-dark"},Ve={style:{"margin-left":"5px"}},Je={class:"node-text-container"},Qe={id:"balance-node",class:"border-bottom"},et={class:"text-dark"},tt={style:{"margin-left":"5px"}},nt={id:"balance-node",style:{"justify-content":"flex-end"}},at={class:"text-dark"},it={style:{"margin-left":"5px"}},rt={key:2,id:"balance-operation",class:"border-bottom"},ot={class:"text-primary"},st=(0,r.Wm)("i",{class:"fas fa-tasks",style:{"margin-right":"0.2em"}},null,-1),lt={key:3,id:"balance-reason",class:"border-bottom"},ht={class:"text-primary"},ct=(0,r.Wm)("i",{class:"far fa-bell",style:{"margin-right":"0.2em"}},null,-1),dt={key:4,id:"balance-operation"},ut={class:"text-primary"},ft=(0,r.Wm)("i",{class:"far fa-question-circle",style:{"margin-right":"0.2em"}},null,-1),gt={id:"toast-footer",class:"mt-2 pt-2 border-top"},pt=(0,r.Wm)("i",{class:"fas fa-pause-circle"},null,-1),vt=(0,r.Wm)("i",{class:"fas fa-arrow-circle-right"},null,-1);function mt(e,t,n,a,i,o){return(0,r.wg)(),(0,r.j4)("div",Oe,[(0,r.Wm)("div",Ae,[(0,r.Wm)("div",De,[(0,r.Wm)("strong",He,[Le,(0,r.Uk)((0,l.zw)(o.tipName),1)]),(0,r.Wm)("small",{class:o.tipTitle.color},(0,l.zw)(o.tipTitle.msg),3)]),(0,r.Wm)("div",Ee,[(0,r.Wm)("div",Ke,[o.hasInsertNode?((0,r.wg)(),(0,r.j4)("div",ze,[(0,r.Wm)("strong",Ze,(0,l.zw)(e.$t("".concat(i.msgKey,"insertNode"))+":"),1),(0,r.Wm)("small",Fe,(0,l.zw)(o.insertNodeText),1)])):(0,r.ry)("",!0),o.hasDeleteNode&&o.hasReplaceNode?((0,r.wg)(),(0,r.j4)("div",je,[(0,r.Wm)("div",Ye,[(0,r.Wm)("strong",Xe,(0,l.zw)(e.$t("".concat(i.msgKey,"deleteNode"))+":"),1),(0,r.Wm)("small",Ge,(0,l.zw)(o.deleteNodeText),1)]),(0,r.Wm)("div",Ue,[(0,r.Wm)("strong",qe,(0,l.zw)(e.$t("".concat(i.msgKey,"replaceNode"))+":"),1),(0,r.Wm)("small",Ve,(0,l.zw)(o.replaceNodeText),1)])])):(0,r.ry)("",!0),(0,r.Wm)("div",Je,[(0,r.Wm)("div",Qe,[(0,r.Wm)("strong",et,(0,l.zw)(e.$t("".concat(i.msgKey,"currentBalance"))+":"),1),(0,r.Wm)("small",tt,(0,l.zw)(o.currentBalanceText),1)]),(0,r.Wm)("div",nt,[(0,r.Wm)("strong",at,(0,l.zw)(e.$t("".concat(i.msgKey,"nextBalance"))+":"),1),(0,r.Wm)("small",it,(0,l.zw)(o.nextBalanceText),1)])]),o.nullCase?(0,r.ry)("",!0):((0,r.wg)(),(0,r.j4)("div",rt,[(0,r.Wm)("div",ot,[st,(0,r.Wm)("strong",null,(0,l.zw)(e.$t("".concat(i.msgKey,"case"))+":"),1)]),(0,r.Wm)("small",null,[(0,r.Wm)("div",{innerHTML:o.ca},null,8,["innerHTML"])])])),o.nullOp?(0,r.ry)("",!0):((0,r.wg)(),(0,r.j4)("div",lt,[(0,r.Wm)("div",ht,[ct,(0,r.Wm)("strong",null,(0,l.zw)(e.$t("".concat(i.msgKey,"process"))+":"),1)]),(0,r.Wm)("small",null,[(0,r.Wm)("div",{innerHTML:o.operation},null,8,["innerHTML"])])])),o.nullReason?(0,r.ry)("",!0):((0,r.wg)(),(0,r.j4)("div",dt,[(0,r.Wm)("div",ut,[ft,(0,r.Wm)("strong",null,(0,l.zw)(e.$t("".concat(i.msgKey,"reason"))+":"),1)]),(0,r.Wm)("small",null,[(0,r.Wm)("div",{innerHTML:o.reason},null,8,["innerHTML"])])]))]),(0,r.Wm)("div",gt,[(0,r.Wm)("button",{type:"button",disabled:i.pause,onClick:t[1]||(t[1]=function(){return o.pauseHere&&o.pauseHere.apply(o,arguments)}),class:"btn btn-secondary btn-sm"},[pt,(0,r.Uk)(" "+(0,l.zw)(e.$t("".concat(i.msgKey,"pause"))),1)],8,["disabled"]),(0,r.Wm)("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[2]||(t[2]=function(){return o.nextStep&&o.nextStep.apply(o,arguments)})},[vt,(0,r.Uk)(" "+(0,l.zw)(o.nextString),1)])])])])])}var bt={name:"Tip",mounted:function(){var e=this.$el.querySelector("#toast");this.toast=new bootstrap.Toast(e,{autohide:!1})},emits:["next-step"],methods:{_startCount:function(){var e=this;if(this.currentCount<=0)return null!=this.intervalId&&clearTimeout(this.intervalId),void this.nextStep();this.currentCount--,this.intervalId=setTimeout((function(){e._startCount()}),1e3)},nextStep:function(){this.hideTip(),this.$emit("next-step")},showTip:function(e){this.currentCount=this.waitTime,this.currentBalance=e.current,this.balance=e.balance,this.toast.show(),this.pause=!1,this._startCount()},hideTip:function(){null!=this.intervalId&&clearTimeout(this.intervalId),this.currentBalance=null,this.balance=null,this.toast.hide()},pauseHere:function(){null!=this.intervalId&&clearTimeout(this.intervalId),this.pause=!0}},computed:{nextString:function(){var e=this.$t("".concat(this.msgKey,"forward"));return this.pause||(e="".concat(this.$t("".concat(this.msgKey,"forward"))," (").concat(this.currentCount,")")),e},hasDeleteNode:function(){return null!=this.balance&&null!=this.balance.deleteNode},hasReplaceNode:function(){return null!=this.balance&&null!=this.balance.replaceNode},hasInsertNode:function(){return null!=this.balance&&null!=this.balance.insertNode},deleteNodeText:function(){if(this.hasDeleteNode)return this.balance.deleteNode.id},replaceNodeText:function(){if(this.hasReplaceNode)return this.balance.replaceNode.id},insertNodeText:function(){if(this.hasInsertNode)return this.balance.insertNode.id},currentBalanceText:function(){return null==this.currentBalance?"":this.currentBalance.id},nextBalanceText:function(){return null==this.balance?"":null==this.balance.next?this.$t("".concat(this.msgKey,"none")):this.balance.next.id},tipTitle:function(){return null==this.balance?"":null==this.balance.next?{msg:this.$t("".concat(this.msgKey,"balanced")),color:"text-success"}:{msg:this.$t("".concat(this.msgKey,"notbalanced")),color:"text-danger"}},tipName:function(){return null==this.balance?"":"insert"==this.balance.op?this.$t("".concat(this.msgKey,"insertBalanceOp")):this.$t("".concat(this.msgKey,"deleteBalanceOp"))},nullReason:function(){if(null==this.balance)return!0;var e=this.balance.reason;return null==e||0==e.length},nullOp:function(){if(null==this.balance)return!0;var e=this.balance.operation;return null==e||0==e.length},nullCase:function(){if(null==this.balance)return!0;var e=this.balance.ca;return null==e||0==e.length},reason:function(){if(this.nullReason)return"";var e=this.balance.reason;return e=e.replaceAll(this.$t("".concat(this.msgKey,"redKey")),'<span class="text-danger" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"redKey")),"</span>")),e=e.replaceAll(this.$t("".concat(this.msgKey,"blackKey")),'<span class="text-black" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"blackKey")),"</span>")),e},ca:function(){if(this.nullCase)return"";var e=this.balance.ca;return e=e.replaceAll(this.$t("".concat(this.msgKey,"redKey")),'<span class="text-danger" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"redKey")),"</span>")),e=e.replaceAll(this.$t("".concat(this.msgKey,"blackKey")),'<span class="text-black" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"blackKey")),"</span>")),e},operation:function(){if(this.nullOp)return"";var e=this.balance.operation;return e=e.replaceAll(this.$t("".concat(this.msgKey,"lRotateKey")),'<span class="text-primary" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"lRotateKey")),"</span>")),e=e.replaceAll(this.$t("".concat(this.msgKey,"rRotateKey")),'<span class="text-success" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"rRotateKey")),"</span>")),e=e.replaceAll(this.$t("".concat(this.msgKey,"redKey")),'<span class="text-danger" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"redKey")),"</span>")),e=e.replaceAll(this.$t("".concat(this.msgKey,"blackKey")),'<span class="text-black" style="font-weight:bold">'.concat(this.$t("".concat(this.msgKey,"blackKey")),"</span>")),e}},data:function(){return{pause:!1,currentCount:0,balance:null,currentBalance:null,msgKey:"default.tip."}},props:{waitTime:{type:Number,default:6}}};bt.render=mt;var yt=bt,wt={props:{radius:{type:Number,default:22},xpadding:{type:Number,default:14},ypadding:{type:Number,default:30}},components:{Tip:yt},data:function(){return{tipMsg:"",op:"",tipColor:"bg-success",tipTextColor:"text-white",tipIcon:"fas fa-check-circle"}},emits:["operation:start","operation:over","balance:start","balance:over"],methods:{generate:function(e){this.animationController&&this.animationController.generate(e)},randomDelete:function(){this.animationController&&this.animationController.randomDelete()},add:function(e){this.animationController&&this.animationController.addNode(e)},delete:function(e){this.animationController&&this.animationController.deleteNode(e)},showError:function(e){this.tipMsg=e,this.tipColor="bg-danger",this.tipTextColor="text-white",this.tip.show()},balanceNextStep:function(){this.animationController&&this.animationController._nextStep()},fireOperationStart:function(){this.$emit("operation:start")},fireOperationOver:function(e){this.op=e.op;var t=e.id,n=e.num;this.tipMsg=pe.generateOperationOverMsg(e.op,t,n,e.type),"success"==e.type&&(this.tipColor="bg-success",this.tipTextColor="text-white",this.tipIcon="fas fa-check-circle"),"update"==e.op&&(this.tipColor="bg-warning",this.tipTextColor="text-dark",this.tipIcon="fas fa-edit"),"error"==e.type&&(this.tipColor="bg-danger",this.tipTextColor="text-white",this.tipIcon="fas fa-exclamation-circle"),this.tip.show(),this.$emit("operation:over",e)},fireBalanceStart:function(e){this.$refs.balanceTip.showTip(e),this.$emit("balance:start",e)},fireBalanceOver:function(e){this.$emit("balance:over",e)}},mounted:function(){var e=this.$el,t=e.querySelector("#result-tip");this.tip=new bootstrap.Toast(t,{delay:3e3});var n=this.$el.querySelector("#canvas"),a=document.createElement("canvas");a.id="__front-canvas",a.className="front-canvas";var i=window.devicePixelRatio;null==i&&(i=1);var r=e.clientWidth,o=e.clientHeight;n.width=r*i,n.height=o*i,a.width=n.width,a.height=n.height,a.style.width="".concat(r,"px"),a.style.height="".concat(o,"px"),n.style.width="".concat(r,"px"),n.style.height="".concat(o,"px"),e.insertBefore(a,n.nextSibling);var s=n.getContext("2d"),l=a.getContext("2d");this.animationController=new $e(s,l,this.radius,this.xpadding,this.ypadding),this.animationController.on("operationStart",this.fireOperationStart),this.animationController.on("operationOver",this.fireOperationOver),this.animationController.on("balanceStepOver",this.fireBalanceOver),this.animationController.on("balanceStepStart",this.fireBalanceStart)}};wt.render=ie;var kt=wt,xt={name:"MainSpace",components:{OperateSpace:Q,CanvasSpace:kt},data:function(){return{disableOperation:!1}},methods:{invalidId:function(e){this.$refs.canvas.showError(this.$t("default.main.error1"))},invalidNum:function(e){this.$refs.canvas.showError(this.$t("default.main.error2"))},add:function(e){this.$refs.canvas.add(e)},del:function(e){this.$refs.canvas.delete(e)},randomDelete:function(){this.$refs.canvas.randomDelete()},generate:function(e){this.$refs.canvas.generate(e)},operationStart:function(){this.disableOperation=!0},operationOver:function(){this.disableOperation=!1}}};xt.render=O;var Ct=xt,_t={name:"App",components:{Header:_,Footer:W,MainSpace:Ct},created:function(){pe.$t=this.$t,this.$TEST="TEST",this.$VERSION="1.0.0",this.$AUTHOR={name:"老脸",url:"#"}}};_t.render=s;var Nt=_t,Bt=(0,i.o)({locale:"zh",fallbackLocale:"en",messages:{zh:n(5551),en:n(207)}}),Tt=(0,a.ri)(Nt);Tt.use(Bt),Tt.mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,r){if(!a){var o=1/0;for(h=0;h<e.length;h++){a=e[h][0],i=e[h][1],r=e[h][2];for(var s=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(s=!1,r<o&&(o=r));s&&(e.splice(h--,1),t=i())}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[a,i,r]}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,r,o=a[0],s=a[1],l=a[2],h=0;for(i in s)n.o(s,i)&&(n.m[i]=s[i]);for(l&&l(n),t&&t(a);h<o.length;h++)r=o[h],n.o(e,r)&&e[r]&&e[r][0](),e[o[h]]=0;n.O()},a=self["webpackChunkbrtree"]=self["webpackChunkbrtree"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(9217)}));a=n.O(a)})();