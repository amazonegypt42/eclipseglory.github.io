{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/property/ColorProperty.vue?d9ed","webpack:///./src/components/structure/Document.vue?96bd","webpack:///./src/components/Main.vue?2d58","webpack:///./src/App.vue","webpack:///./src/components/Header.vue","webpack:///./src/components/NewDocDialog.vue","webpack:///./src/components/NewDocDialog.vue?9ab5","webpack:///./src/components/Header.vue?e257","webpack:///./src/components/Main.vue","webpack:///./src/components/workspace/ToolsBar.vue","webpack:///./src/components/workspace/ToolsBar.vue?14ae","webpack:///./src/components/property/PropertyBar.vue","webpack:///./src/components/property/BorderProperty.vue","webpack:///./src/components/property/text-click-fullselect.js","webpack:///./src/lib/canvaskit-utils.js","webpack:///./src/lib/event-emitter.js","webpack:///./src/lib/math/matrix3.js","webpack:///./src/lib/utils.js","webpack:///./src/lib/transformable.js","webpack:///./src/lib/drawable.js","webpack:///./src/lib/math/sat.js","webpack:///./src/lib/quadtree/quadtree-node.js","webpack:///./src/lib/figure.js","webpack:///./src/lib/shape/shape.js","webpack:///./src/lib/shape/rect.js","webpack:///./src/lib/group.js","webpack:///./src/lib/point.js","webpack:///./src/components/property/selection-tools.js","webpack:///./src/components/property/Property.vue","webpack:///./src/components/property/Property.vue?5c49","webpack:///./src/components/property/ColorProperty.vue","webpack:///./src/components/property/ColorProperty.vue?a8f4","webpack:///./src/components/property/BorderProperty.vue?ab7f","webpack:///./src/lib/path.js","webpack:///./src/lib/shape/vertices-shape.js","webpack:///./src/lib/shape/path-shape.js","webpack:///./src/lib/shape/polygon.js","webpack:///./src/lib/shape/star.js","webpack:///./src/components/property/FillProperty.vue","webpack:///./src/components/property/FillProperty.vue?5622","webpack:///./src/lib/shape/ellipse.js","webpack:///./src/utils.js","webpack:///./src/lib/shape/line.js","webpack:///./src/components/property/PropertyBar.vue?f511","webpack:///./src/components/workspace/Canvas.vue","webpack:///./src/lib/root-figure.js","webpack:///./src/lib/shape/center-rect.js","webpack:///./src/figure/resize-anchor.js","webpack:///./src/lib/shape/center-ellipse.js","webpack:///./src/figure/rotate-anchor.js","webpack:///./src/figure/nobounds-rect.js","webpack:///./src/figure/feedback-figure.js","webpack:///./src/tool/tool.js","webpack:///./src/figure/transform-feedback.js","webpack:///./src/actions/action-stack.js","webpack:///./src/actions/action.js","webpack:///./src/actions/add-figure-action.js","webpack:///./src/actions/translate-action.js","webpack:///./src/actions/compsite-action.js","webpack:///./src/actions/pose-change-action.js","webpack:///./src/actions/insert-point-action.js","webpack:///./src/actions/change-property-action.js","webpack:///./src/actions/delete-point-action.js","webpack:///./src/actions/remove-figure-action.js","webpack:///./src/actions/change-index-action.js","webpack:///./src/actions/action-factory.js","webpack:///./src/lib/math/vector2.js","webpack:///./src/tool/transform-feedback-tool.js","webpack:///./src/tool/select-tool.js","webpack:///./src/tool/transformtools/translate-tool.js","webpack:///./src/tool/transformtools/pose-change-tool.js","webpack:///./src/tool/transformtools/rotate-tool.js","webpack:///./src/tool/transformtools/e-resize-tool.js","webpack:///./src/tool/transformtools/w-resize-tool.js","webpack:///./src/tool/transformtools/n-resize-tool.js","webpack:///./src/tool/transformtools/s-resize-tool.js","webpack:///./src/tool/transformtools/coner-resize-tool.js","webpack:///./src/tool/transformtools/se-resize-tool.js","webpack:///./src/tool/transformtools/ne-resize-tool.js","webpack:///./src/tool/transformtools/sw-resize-tool.js","webpack:///./src/tool/transformtools/nw-resize-tool.js","webpack:///./src/tool/shaptools/shape-tool.js","webpack:///./src/tool/shaptools/rect-tool.js","webpack:///./src/tool/shaptools/ellipse-tool.js","webpack:///./src/lib/shape/center-star.js","webpack:///./src/tool/shaptools/star-tool.js","webpack:///./src/lib/shape/center-polygon.js","webpack:///./src/tool/shaptools/polygon-tool.js","webpack:///./src/figure/vertex-controller.js","webpack:///./src/figure/vertex.js","webpack:///./src/figure/vertices-path-feedback.js","webpack:///./src/tool/pen-tool.js","webpack:///./src/tool/vertex-select-tool.js","webpack:///./src/tool/translate-root-tool.js","webpack:///./src/tool/shaptools/line-tool.js","webpack:///./src/components/workspace/ActionBar.vue","webpack:///./src/components/workspace/change-index-processor.js","webpack:///./src/components/workspace/align-processor.js","webpack:///./src/components/workspace/distribute-processor.js","webpack:///./src/components/workspace/ActionBar.vue?b597","webpack:///./src/figure/document-root.js","webpack:///./src/components/workspace/keyborad-handler.js","webpack:///./src/components/workspace/group-processor.js","webpack:///./src/components/workspace/clip-processor.js","webpack:///./src/components/workspace/Canvas.vue?79e4","webpack:///./src/components/structure/Document.vue","webpack:///./src/components/structure/TreeNode.vue","webpack:///./src/components/structure/TreeNode.vue?ef8c","webpack:///./src/components/structure/Document.vue?496e","webpack:///./src/components/Main.vue?f5c9","webpack:///./src/components/Footer.vue","webpack:///./src/components/Footer.vue?801f","webpack:///./src/App.vue?eabf","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?a655","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/components/workspace/Canvas.vue?7320","webpack:///./src/App.vue?ef03","webpack:///./src/components/Footer.vue?7f28","webpack:///./src/components/workspace/ToolsBar.vue?09f7","webpack:///./src/components/NewDocDialog.vue?ecc5","webpack:///./src/components/Header.vue?5ee1","webpack:///./src/components/property/PropertyBar.vue?d0d9","webpack:///./src/assets/logo.png","webpack:///./src/components/structure/TreeNode.vue?26db","webpack:///./src/components/workspace/ActionBar.vue?8b7b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","id","class","style","role","showLoader","loaded","newDocument","createSVG","ref","tooltipUpdate","documentUpdate","tooltip","data-bs-toggle","aria-expanded","aria-labelledby","openNewDocDialog","generateSVG","show","showDocDialog","docDialogHidden","tabindex","aria-hidden","data-bs-dismiss","aria-label","selectedTemplate","sizeTemplate","template","width","height","createDocument","emits","mounted","docElement","getElementById","addEventListener","$emit","Number","parseFloat","this","dialog","bootstrap","Modal","methods","hide","watch","old","forEach","props","Boolean","default","render","components","NewDocDialog","nodes","selectionChange","rootFigureUpdate","currentSelections","selections","propertyChange","tools","tool","split","click","icon","iconClass","currentTool","String","disabled","currentTarget","isActive","data-bs-target","aria-controls","data-bs-parent","for","titleIcon","title","canShow","pk","fixed","showDimension","showScale","step","showSkew","transformToAngel","showRotation","isRect","isVertex","changeVertexType","vertexType","isStar","isPolygon","isPath","pathCloseChange","checked","pathClosed","showIn","controllerChange","hasInController","hasOutController","hasBorderOrFillProperty","showBorderChange","showBorder","selectText","confirm","miter","changeJoinType","join","changeCapType","cap","colorChanged","rk","gk","bk","ak","select","MAX_ID","Math","pow","CanvasKitUtils","currentId","path","CanvasKitInit","locateFile","file","then","CanvasKit","ClipOp","StrokeCap","StrokeJoin","MakeCanvasSurface","Paint","Path","TRANSPARENT","PaintStyle","Fill","Stroke","x","y","w","h","flag","XYWHRect","rect","radiusx","radiusy","RRectXY","Bevel","Round","Miter","Butt","Square","EventEmitter","_eventHandlers","clear","hanlders","handler","source","Map","handlers","set","index","indexOf","_TEMP","_TEMP2","Matrix3","PI","array","Float32Array","_array","identity","matrix","out","from","QRList","mat","a","b","f","translation","rotation","scale","skew","Delta","sqrt","acos","atan","radian","cos","sin","multiplyWithSimpleDatas","tan","scalex","scaley","multiplyWithVertexDatas","b00","b01","b02","b10","b11","b12","b20","b21","b22","a00","a01","a02","a10","a11","a12","a20","a21","a22","getInvert","outMatrix","det","multiplyWithDatas","to","m3","Utils","rect1","rect2","left","right","top","bottom","bounds","lt","rb","p1","multiplyWithVertex","p2","min","max","g","rf","toString","gf","bf","decompose","figure","pose","skewx","skewy","x1","y1","x2","y2","dx","dy","PI2","HALF_PI","Transformable","getTarget","__target","_matrix","_transformDirty","_boundsdirty","_bounds","_axis","parent","_disposed","_width","v","fireTransformDirty","fireBoundsDirty","_height","_scalex","_scaley","_skewx","_skewy","vs","localVertices","worldMatrix","wv","clone","axis","_rotation","_x","_y","calculateTransformableMatrix","pm","multiply","calculateLocalBounds","wvs","wb","Infinity","worldVertices","fireEvent","isWorldPoint","realPoint","invert","containsPoint","isDisposed","scaleX","scaleY","translate","rotate","Drawable","_id","newID","children","showChildren","visible","clip","ctx","isVisible","save","beforeDrawSelf","beforeTransform","transform","applyClip","drawSelf","beforeDrawChildren","drawChildren","restore","concat","painter","child","draw","insertChild","temp","warn","indexOfChild","removeAt","dispose","str","getSVGLabelName","postionStr","getSVGPositionString","dimension","getSVGDimensionString","extension","getSVGExtensionString","getSVGString","csvg","getSVGTransformString","projectionsOnAxis","vertices","vertex","projection","dot","isContact","project1","project2","contactTest","vertices1","axis1","vertices2","axis2","k","r1","xie","contacted","NW_INDEX","NE_INDEX","SW_INDEX","SE_INDEX","QuadTreeNode","maxNodes","currentDeepth","maxDeepth","totalNodesCount","areas","Array","isContacted","area","findNodes","findSingleNode","node","cx","floor","cy","nw","insert","ne","sw","se","relation","__related_quad","_createRelationShip","_deleteRelationShip","splitInsert","decreased","needMerge","decreaseTotalNodes","dr","remove","merge","relateds","relate","utils","Figure","useQuadTree","quadtree","_recreateQuadTree","getQuadTreeNode","log","updateRelatedQuadTree","_quadTreeNode","deleteNodeForce","insertChildQuadNode","_reQT","qn","worldBounds","recordAdd","removed","recordRemove","transformToRelatedBounds","qnode","findFigure","Shape","_paint","newPaint","setAntiAlias","br","bg","bb","ba","alpha","fill","borderWidth","getStrokeCap","setStrokeCap","getStrokeJoin","setStrokeJoin","getStrokeMiter","setStrokeMiter","getStrokeWidth","setStrokeWidth","fireShapeDirty","_path","delete","deletePath","newPath","drawPath","getPath","clipPath","Intersect","canvas","setStyle","fillStyle","setColorComponents","strokeStyle","deletePaint","u","transformRGBToHex","getJoinText","getCapText","Rect","radius","_radiusx","_radiusy","newXYWHRect","addRect","newRRectXY","addRRect","Group","_getAnyPropertyValue","_setAllChildren","defaultValue","cp","copy","addPath","on","_childDirty","off","Point","_type","fireDirty","_in","_out","in","point","equals","inX","inY","outX","outY","copyFrom","firePropertyChangeEvents","events","canChangeProperty","model","changeProperty","hasSelection","selection","changeMultipleProperties","properties","getAnyPropertyValue","computed","currentSelection","isShape","isGroup","pvalue","angle","toFixed","currentColorString","placeholder","mixins","substring","parseInt","Property","ColorProperty","_points","_closed","nextPoint","start","prePoint","moveTo","_lineToNext","isClosed","pout","nin","lineTo","control","control1","quadTo","cubicTo","points","getPointIndex","deleteAt","insertPoint","VerticesShape","boundsRect","getPathModel","_pathModel","pathModel","addPoint","deletePoint","close","_configPathPoints","_createPathModel","_pathModelChanged","deletePathModel","getBounds","isWorld","_containsPoint","contains","ext","toSVGString","PathShape","_close","open","Polygon","sides","theta","delta","offsetx","offsety","_sides","Star","corners","pointsCount","count","outAngleOffset","outIndexOffset","inAngleOffset","inIndexOffset","a1","b1","_radius","_corners","ir","fillChange","canFill","Ellipse","addOval","CURSOR","move","add","pen","deleteVertex","figures","useWorldMatrix","tb","obj","Line","endX","endY","_endX","_endY","abs","dw","dh","objectIcon","isLine","BorderProperty","FillProperty","canvasBGColor","toolUpdate","mainRoot","actionStack","rootFigure","groupFigures","unGroupFigures","clipFigures","unClipFigures","cursor","mousedown","mouseleave","mousemove","mouseup","mouseover","mouseout","mousewheel","RootFigure","surface","_rAFid","_figureMap","cancelAnimationFrame","requestAnimationFrame","beforeDraw","SVG_XMLNS_STR","CenterRect","ResizeAnchor","CenterEllipse","RotateAnchor","NoboundsRect","FeedbackFigure","relatedSelection","relateFigure","Tool","frontRoot","backendRoot","actived","using","currentFeedbacks","_selections","msg","toolId","args","_moveRefreshId","sx","sy","lx","ly","toolActived","activeMove","hoverMove","toolTipUpdate","ex","ey","toolDeactived","reset","copyPose","copyPath","setFeedbackColors","applyPose","FEEDBACK_B_COLOR","FEEDBACK_COLOR","FB_COLOR","FB_B_COLOR","TransformFeedback","anchorSize","as","padding","feedbackContainer","addChild","rotateAnchor","topAnchor","bottomAnchor","leftAnchor","rightAnchor","seAnchor","neAnchor","swAnchor","nwAnchor","anchor","bcolor","removeChild","updateAnchorsPostion","drawLine","ActionStack","redos","undos","action","excute","disposeUndo","redo","disposeRedo","canRedo","pop","canUndo","undo","Action","AddFigureAction","TranslateAction","CompositeAction","actions","PoseChangeAction","InsertPointAction","ChangePropertyAction","oldValue","DeletePointAction","RemoveFigureAction","ChangeIndexAction","oldIndex","ActionFactory","newIndex","Vector2","atan2","magnitude","TransformFeedbackTool","transformFeedback","_transformFeedback","updateFeedbackId","keepFeedback","refresh","transfromFeedback","sort","ap","bp","feedback","createDelegateFigure","addFeedback","transformBounds","sameRotation","testRotation","isSameRadian","vx","vy","projectx","projecty","px","py","vx1","vx2","vy1","vy2","tpv","rbv","dpv","calculateFiguresBounds","initFeedbackContainer","tim","fm","feedbackFiguresUpdated","requestUpdateFeedbackFigures","r2","EPSILON","SelectTool","fr","mr","notifySelectionChange","_selectRect","color","deleteHoverFigure","transformId","getTransformToolId","switchTool","blur","findChildren","SAT","worldAxis","changeCursor","defaultCursor","currentSelectionsContains","updateHoverFigure","_lastHoverDelegate","isTransformTool","TranslateTool","startPosition","first","lp","fb","PoseChangeTool","isIllegalData","ipm2","applyFigure","processFinalResult","RotateTool","sr","startRotation","cr","EResizeTool","dis","distance","WResizeTool","NResizeTool","SResizeTool","ConerResizeTool","updateTransformFeedback","SEResizeTool","NEResizeTool","SWResizeTool","NWResizeTool","ShapeTool","fireSelectionChangeEvent","_newShape","createShape","shape","altKey","updateShapeBounds","mm","figureName","RectTool","EllipseTool","CenterStar","StarTool","CenterPolygon","PolygonTool","VertexController","isOut","master","_isfocus","Vertex","pointModel","_linePaint","flagIn","flagOut","inController","outController","in1","VerticesPathFeedback","vertexSize","vertexFigures","hideAllVertex","getLastPreVertexFigure","showController","v2","getLastVertexFigure","showAllVertex","hideAllVertexController","element","hideController","initControllerPoints","addVertexFigure","removeVertexFigure","PenTool","currentPath","createShadowPath","disposeCurrentShadow","updateVertexShapeFeedback","_updateFeedbackid","shadowPath","applyRestingVisible","point2","currentAdded","applyWorkingVisible","completeType","clickFigure","indexOfVertex","minusIndex","addNewPoint","m1","m2","firstPoint","getPoint","getSelectionById","current","_lastHover","focus","update","VertexSelectTool","stopUpdate","disposeShadowPath","deleteLastHover","_shadowPath","relatedPath","_selectedVertex","_selectedVertexType","_updateId","pathmodel","getVertexFigure","_lastVertexHover","focusVertex","getFigureById","actionType","findRealModel","isnew","isin","nv","pv","cf","updateVertexHover","lastHoverFigure","controller","another","TranslateRootTool","LineTool","line","deleteLine","createLine","end","deleteSelections","canGroup","unGroup","canUnGroup","canClip","unClip","canUnClip","bringFront","canBringFront","sendBack","canSendBack","alignLeft","canAlign","alignCenter","alignRight","alignTop","alignBottom","distribute","canDistribute","mainScale","hasRootFigure","newChangeIndexAction","actionName","totalBounds","composite","bcx","bcy","deltax","deltay","newTranslateAction","align","hf","isH","map","getPropertyValue","wb1","wb2","f1","f2","cx1","cx2","rcx","distributeLeft","zoom","z","isNaN","placeAtCenter","clipMask","mask","sp","si","ep","masks","newDeletePointAction","triggerCanvasRefresh","MAX_SIZE","DocumentRoot","screanWidth","screanHeight","disW","disH","zx","zy","minW","minH","z1","cw","ch","_zoom","configPath","getDocPath","paint","getPaint","keydown","code","_deleteAction","deleteActionFired","spacePressed","keyup","keypress","_keyPressId","ctrlKey","shiftKey","undoActionFired","redoActionFired","groupActionFired","ungroupActionFired","actionbar","$refs","group","ga","fs","fa","ra","newRemoveFigureAction","aa","newAddFigureAction","pa","newPoseChangeAction","ca","ta","mf","newChangePropertyAction","mca","ToolsBar","ActionBar","el","$el","container","querySelector","clientWidth","clientHeight","ratio","devicePixelRatio","front","main","backend","initCanvas","frontSurface","makeCanvasSurface","fc","getCanvas","mainSurface","mc","radio","createTools","createNewMainRoot","disposeMainRoot","figureAdded","figureRemoved","configToolsMainRoot","init","back","me","register","registedTools","figureTransform","toolCompleted","toolSwitch","toolTipUpdated","cursorChange","_zoomId","zoomMainRoot","deltaY","offsetX","offsetY","activeTool","getCurrentTool","currentActivedTool","deactiveCurrentTool","deactive","zoomIn","$nextTick","useTool","prepare","updateCurrentSelections","unUseTool","unUse","active","isAddShapeTool","processVertexSelectResult","processPenResult","newInsertPointAction","addShape","getTransformFeedback","changeFigureProperty","excuteAction","vertexAdded","vertexRemoved","newFigure","oldTool","deep","expand","hasChildren","collapsed","nodeIcon","iconWidth","updated","TreeNode","PropertyBar","Canvas","Document","svgDownloadLink","display","body","rootDocument","svg","link","encodeURIComponent","createNewDocument","loader","initCanvasKit","canvaskit","root","Header","Main","Footer","alt","routes","component","Home","router","createRouter","history","createWebHistory","process","createStore","state","mutations","createApp","App","use","store","mount"],"mappings":"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","file":"js/app.0950fdfb.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"d5dbac9e\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ColorProperty.vue?vue&type=style&index=0&id=c95e422a&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Document.vue?vue&type=style&index=0&id=6ea5c962&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Main.vue?vue&type=style&index=0&id=6ccac119&lang=css\"","<template>\n  <div id=\"app\" class=\"blackbg\">\n    <div\n      v-if=\"showLoader\"\n      id=\"main-loader\"\n      class=\"blackbg\"\n      :class=\"loaded ? 'fadeout' : ''\"\n    >\n      <div\n        class=\"spinner-border text-secondary\"\n        style=\"width: 4rem; height: 4rem\"\n        role=\"status\"\n      ></div>\n    </div>\n    <div v-else id=\"main-workspace\">\n      <Header @document:new=\"newDocument\" @svg:create=\"createSVG\" />\n      <Main\n        ref=\"main\"\n        @tooltip:update=\"tooltipUpdate\"\n        @document:update=\"documentUpdate\"\n      />\n      <Footer :tooltip=\"tooltip\" />\n    </div>\n  </div>\n</template>\n<script>\nimport { computed } from \"vue\";\nimport Header from \"./components/Header.vue\";\nimport Main from \"./components/Main.vue\";\nimport Footer from \"./components/Footer.vue\";\nimport CanvasKitUtils from \"./lib/canvaskit-utils.js\";\n\nexport default {\n  name: \"App\",\n  mounted() {\n    let el = this.$el;\n    let loader = el.querySelector(\"#main-loader\");\n    if (loader) {\n      loader.addEventListener(\"transitionend\", () => {\n        this.showLoader = false;\n      });\n      loader.addEventListener(\"animationend\", () => {\n        this.showLoader = false;\n      });\n    }\n    // 加载CanvasKit WASM\n    CanvasKitUtils.initCanvasKit(\"lib/\").then((canvaskit) => {\n      this.loaded = true;\n    });\n  },\n  methods: {\n    documentUpdate(root) {\n      this.root = root;\n    },\n    tooltipUpdate(event) {\n      this.tooltip = event;\n    },\n    newDocument(event) {\n      this.$refs[\"main\"].createNewDocument(event);\n    },\n    createSVG(event) {\n      this.$refs[\"main\"].createSVG();\n    },\n  },\n\n  data() {\n    return {\n      loaded: false,\n      showLoader: true,\n      tooltip: \"\",\n      root: null,\n    };\n  },\n\n  components: {\n    Header,\n    Main,\n    Footer,\n  },\n};\n</script>\n<style>\n#main-space {\n  width: 100%;\n  height: 100%;\n  max-width: 100vw;\n  max-height: 100vh;\n  position: relative;\n}\n\n#main-workspace {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: whitesmoke;\n  width: 100vw;\n  height: 100vh;\n  max-width: 100vw;\n  max-height: 100vh;\n  display: block;\n}\n\n#main-loader {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n</style>\n","<template>\r\n  <nav id=\"header\" class=\"darkbg navbar navbar-expand-sm navbar-dark\">\r\n    <div class=\"container-fluid\">\r\n      <label class=\"navbar-brand\"\r\n        ><span style=\"font-weight: bold\">MU</span\r\n        ><span style=\"color: #aaaaaa\">LIN</span></label\r\n      >\r\n      <button\r\n        class=\"navbar-toggler\"\r\n        type=\"button\"\r\n        data-bs-toggle=\"collapse\"\r\n        data-bs-target=\"#navbarNavDarkDropdown\"\r\n        aria-controls=\"navbarNavDarkDropdown\"\r\n        aria-expanded=\"false\"\r\n        aria-label=\"Toggle navigation\"\r\n      >\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarNavDarkDropdown\">\r\n        <ul class=\"navbar-nav\">\r\n          <li class=\"nav-item dropdown\">\r\n            <a\r\n              class=\"nav-link dropdown-toggle\"\r\n              id=\"navbarDarkDropdownMenuLink\"\r\n              role=\"button\"\r\n              data-bs-toggle=\"dropdown\"\r\n              aria-expanded=\"false\"\r\n            >\r\n              File\r\n            </a>\r\n            <ul\r\n              class=\"dropdown-menu\"\r\n              aria-labelledby=\"navbarDarkDropdownMenuLink\"\r\n            >\r\n              <li>\r\n                <a class=\"dropdown-item\" @click=\"openNewDocDialog\">New</a>\r\n              </li>\r\n              <li><a class=\"dropdown-item\">Open</a></li>\r\n              <li>\r\n                <a class=\"dropdown-item\" @click=\"generateSVG\">Download SVG</a>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <new-doc-dialog :show=\"showDocDialog\" @dialog:hidden=\"docDialogHidden\" />\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nimport NewDocDialog from \"./NewDocDialog.vue\";\r\nexport default {\r\n  name: \"Header\",\r\n  components: { NewDocDialog },\r\n  emits: [\"document:new\", \"svg:create\"],\r\n  data() {\r\n    return {\r\n      showDocDialog: false,\r\n    };\r\n  },\r\n  methods: {\r\n    openNewDocDialog(e) {\r\n      if (this.showDocDialog) return;\r\n      this.showDocDialog = true;\r\n    },\r\n    docDialogHidden(event) {\r\n      this.showDocDialog = false;\r\n      if (event.type == \"create\") this.$emit(\"document:new\", event);\r\n    },\r\n    generateSVG() {\r\n      this.$emit(\"svg:create\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#header {\r\n  padding: 2px 20px 2px 20px;\r\n  box-sizing: border-box;\r\n}\r\n</style>","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"new-doc-dialog\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"staticBackdropLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog modal-dialog-centered doc-root\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"staticBackdropLabel\">\r\n            <i class=\"iconfont icon-document\"></i>\r\n            New Document\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"container\">\r\n            <div class=\"row\">\r\n              <select\r\n                class=\"form-select\"\r\n                aria-label=\"Default select example\"\r\n                v-model=\"selectedTemplate\"\r\n              >\r\n                <option\r\n                  v-for=\"template in sizeTemplate\"\r\n                  v-bind:key=\"template.name\"\r\n                >\r\n                  {{ template.name }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class=\"row\" style=\"margin-top: 20px\">\r\n              <div class=\"col\">\r\n                <div class=\"input-group\">\r\n                  <span class=\"input-group-text\">Width</span>\r\n                  <input\r\n                    v-model=\"width\"\r\n                    type=\"number\"\r\n                    class=\"form-control\"\r\n                    aria-label=\"Amount (to the nearest dollar)\"\r\n                  />\r\n                  <span class=\"input-group-text\">px</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"col\">\r\n                <div class=\"input-group\">\r\n                  <span class=\"input-group-text\">Height</span>\r\n                  <input\r\n                    v-model=\"height\"\r\n                    type=\"number\"\r\n                    class=\"form-control\"\r\n                    aria-label=\"Amount (to the nearest dollar)\"\r\n                  />\r\n                  <span class=\"input-group-text\">px</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            Close\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"createDocument\">\r\n            Create\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"NewDocumentDialog\",\r\n  emits: [\"dialog:hidden\", \"dialog:shown\"],\r\n  mounted() {\r\n    let docElement = document.getElementById(\"new-doc-dialog\");\r\n    if (!docElement) return;\r\n    docElement.addEventListener(\"hidden.bs.modal\", (event) => {\r\n      this.$emit(\"dialog:hidden\", {\r\n        type: this.type,\r\n        width: Number.parseFloat(this.width),\r\n        height: Number.parseFloat(this.height),\r\n      });\r\n    });\r\n    docElement.addEventListener(\"shown.bs.modal\", (event) => {\r\n      this.$emit(\"dialog:shown\");\r\n    });\r\n    this.dialog = new bootstrap.Modal(docElement);\r\n  },\r\n  methods: {\r\n    createDocument() {\r\n      this.type = \"create\";\r\n      this.dialog.hide();\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      dialog: null,\r\n      width: 300,\r\n      height: 300,\r\n      type: \"cancel\",\r\n      sizeTemplate: [\r\n        { name: \"Custom\", width: 300, height: 300 },\r\n        { name: \"Letter\", width: 612, height: 792 },\r\n        { name: \"A4\", width: 595.28, height: 841.89 },\r\n        { name: \"A3\", width: 841.89, height: 1190.55 },\r\n        { name: \"B5\", width: 515.91, height: 728.5 },\r\n        { name: \"B4\", width: 728.5, height: 1031.81 },\r\n      ],\r\n      selectedTemplate: \"Custom\",\r\n    };\r\n  },\r\n  watch: {\r\n    show(c, old) {\r\n      if (!this.dialog) return;\r\n      if (c) {\r\n        this.type = \"cancel\";\r\n        this.dialog.show();\r\n      } else {\r\n        this.dialog.hide();\r\n      }\r\n    },\r\n\r\n    selectedTemplate(c, old) {\r\n      this.sizeTemplate.forEach((p) => {\r\n        if (p.name == c) {\r\n          this.width = p.width;\r\n          this.height = p.height;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  props: {\r\n    show: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.doc-root {\r\n  color: #333333;\r\n}\r\n</style>","import { render } from \"./NewDocDialog.vue?vue&type=template&id=6d9dceaf\"\nimport script from \"./NewDocDialog.vue?vue&type=script&lang=js\"\nexport * from \"./NewDocDialog.vue?vue&type=script&lang=js\"\n\nimport \"./NewDocDialog.vue?vue&type=style&index=0&id=6d9dceaf&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Header.vue?vue&type=template&id=64586dd8\"\nimport script from \"./Header.vue?vue&type=script&lang=js\"\nexport * from \"./Header.vue?vue&type=script&lang=js\"\n\nimport \"./Header.vue?vue&type=style&index=0&id=64586dd8&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div id=\"editor-main\">\r\n    <div id=\"main-left\" class=\"blackbg\">\r\n      <document :nodes=\"nodes\" />\r\n    </div>\r\n    <div id=\"main-center\">\r\n      <Canvas\r\n        ref=\"canvas\"\r\n        @selection:change=\"selectionChange\"\r\n        @tooltip:update=\"tooltipUpdate\"\r\n        @root:update=\"rootFigureUpdate\"\r\n      />\r\n    </div>\r\n    <div id=\"main-right\">\r\n      <PropertyBar\r\n        :currentSelections=\"selections\"\r\n        @property:change=\"propertyChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ToolsBar from \"./workspace/ToolsBar.vue\";\r\nimport PropertyBar from \"./property/PropertyBar.vue\";\r\nimport Canvas from \"./workspace/Canvas.vue\";\r\nimport Document from \"./structure/Document.vue\";\r\n\r\nexport default {\r\n  name: \"Main\",\r\n  components: {\r\n    ToolsBar,\r\n    PropertyBar,\r\n    Canvas,\r\n    Document,\r\n  },\r\n  emits: [\"tooltip:update\"],\r\n\r\n  mounted() {\r\n    this.svgDownloadLink = document.createElement(\"a\");\r\n    let element = this.svgDownloadLink;\r\n    element.style.display = \"none\";\r\n\r\n    document.body.appendChild(element);\r\n    // window.Split([\"#main-center\", \"#main-right\"], {\r\n    //   sizes: [75, 25],\r\n    // });\r\n  },\r\n\r\n  methods: {\r\n    createSVG() {\r\n      if (this.rootDocument) {\r\n        this.rootDocument.getSVGString().then((svg) => {\r\n          if (this.svgDownloadLink) {\r\n            let link = this.svgDownloadLink;\r\n            link.setAttribute(\r\n              \"href\",\r\n              \"data:xml/plain;charset=utf-8,\" + encodeURIComponent(svg)\r\n            );\r\n            link.setAttribute(\"download\", \"untitle.svg\");\r\n            link.click();\r\n          }\r\n        });\r\n      }\r\n    },\r\n    createNewDocument(event) {\r\n      if (event.type != \"create\") return;\r\n      this.$refs[\"canvas\"].createNewMainRoot(event.width, event.height);\r\n    },\r\n    rootFigureUpdate(mainRoot) {\r\n      this.rootDocument = mainRoot;\r\n      // function generateModel(figure) {\r\n      //   let m = {\r\n      //     name: figure.name,\r\n      //     id: figure.id,\r\n      //   };\r\n      //   if (figure.children && figure.children.length != 0) {\r\n      //     m.children = [];\r\n      //     figure.children.forEach((f) => {\r\n      //       m.children.push(generateModel(f));\r\n      //     });\r\n      //     m.collapsed = figure.collapsed == null ? false : figure.collapased;\r\n      //   }\r\n      //   return m;\r\n      // }\r\n      // this.rootDocument = generateModel(mainRoot);\r\n    },\r\n    tooltipUpdate(event) {\r\n      this.$emit(\"tooltip:update\", event);\r\n    },\r\n    selectionChange(event) {\r\n      // 分发selection去其他components\r\n      this.selections = event.selections;\r\n    },\r\n\r\n    propertyChange(events) {\r\n      this.$refs[\"canvas\"].changeFigureProperty(events);\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    nodes() {\r\n      if (this.rootDocument) {\r\n        return this.rootDocument.children;\r\n      }\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      currentTool: \"select\",\r\n      selections: [],\r\n      rootDocument: null,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#editor-main {\r\n  width: 100%;\r\n  height: 100%;\r\n  flex-grow: 1;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: stretch;\r\n}\r\n\r\n#editor-main:focus {\r\n  border: none;\r\n}\r\n\r\n#main-left {\r\n  width: 14.6%;\r\n  max-height: 100%;\r\n  min-height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n#main-right {\r\n  width: 14.6%;\r\n}\r\n\r\n#main-center {\r\n  flex-grow: 1;\r\n}\r\n\r\n.gutter {\r\n  background-color: #eee;\r\n  background-repeat: no-repeat;\r\n  background-position: 50%;\r\n}\r\n\r\n.gutter.gutter-horizontal {\r\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==\");\r\n  cursor: col-resize;\r\n}\r\n</style>","<template>\r\n  <div id=\"tool\" class=\"darkbg\">\r\n    <div\r\n      v-for=\"tool in tools\"\r\n      v-bind:key=\"tool.id\"\r\n      class=\"icon-container\"\r\n      :class=\"tool.split ? 'icon-spliter' : ''\"\r\n    >\r\n      <i\r\n        @click=\"click\"\r\n        :id=\"tool.id\"\r\n        class=\"iconfont\"\r\n        :class=\"tool.icon + ' ' + iconClass(tool.id)\"\r\n      ></i>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ToolsBar\",\r\n  emits: [\"tool:update\"],\r\n  props: {\r\n    currentTool: {\r\n      type: String,\r\n      default: null,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      tools: [\r\n        {\r\n          id: \"select\",\r\n          icon: \"icon-mousepointer\",\r\n        },\r\n        {\r\n          id: \"vertex-select\",\r\n          icon: \"icon-vertexpointer\",\r\n          split: true,\r\n        },\r\n        {\r\n          id: \"pen\",\r\n          icon: \"icon-pen\",\r\n          split: true,\r\n        },\r\n        {\r\n          id: \"line\",\r\n          icon: \"icon-square\",\r\n        },\r\n        {\r\n          id: \"rect\",\r\n          icon: \"icon-square\",\r\n        },\r\n        {\r\n          id: \"ellipse\",\r\n          icon: \"icon-circle\",\r\n        },\r\n        {\r\n          id: \"star\",\r\n          icon: \"icon-star\",\r\n        },\r\n        {\r\n          id: \"polygon\",\r\n          icon: \"icon-polygon\",\r\n          split: true,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    click(event) {\r\n      if (this.disabled) return;\r\n      let id = event.currentTarget.id;\r\n      if (id) {\r\n        if (this.currentTool != id) {\r\n          this.$emit(\"tool:update\", id);\r\n        }\r\n      }\r\n    },\r\n\r\n    iconClass(id) {\r\n      if (this.disabled) return \"deactive-icon\";\r\n      if (this.isActive(id)) {\r\n        return \"active-tool\";\r\n      } else {\r\n        return \"deactive-icon clickable-icon\";\r\n      }\r\n    },\r\n\r\n    isActive(id) {\r\n      return id == this.currentTool && !this.disabled;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#tool {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px 10px 20px 10px;\r\n  box-sizing: border-box;\r\n  font-size: 1.5em;\r\n}\r\n\r\n.icon-container {\r\n  width: 100%;\r\n  padding: 0.5em 0.5em 0.5em 0.5em;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.deactive-icon {\r\n  color: #777777;\r\n}\r\n\r\n.icon-spliter {\r\n  border-bottom: #777777 solid 1px;\r\n}\r\n\r\n.active-tool {\r\n  font-size: 1em;\r\n  color: whitesmoke;\r\n  cursor: pointer;\r\n}\r\n\r\n.clickable-icon {\r\n  cursor: pointer;\r\n  font-size: 1em;\r\n}\r\n</style>","import { render } from \"./ToolsBar.vue?vue&type=template&id=fd936df8\"\nimport script from \"./ToolsBar.vue?vue&type=script&lang=js\"\nexport * from \"./ToolsBar.vue?vue&type=script&lang=js\"\n\nimport \"./ToolsBar.vue?vue&type=style&index=0&id=fd936df8&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div id=\"property-view\" class=\"darkbg\">\r\n    <div id=\"selection-title\">\r\n      <i id=\"title-icon\" class=\"iconfont\" :class=\"titleIcon\"></i>\r\n      <strong>{{ title }}</strong>\r\n    </div>\r\n    <div id=\"properties-accordions-container\">\r\n      <div\r\n        class=\"accordion accordion-flush properties-accordion-root\"\r\n        id=\"collapse-root\"\r\n      >\r\n        <div class=\"accordion-item properties-accordion-item\">\r\n          <h2 class=\"accordion-header\" id=\"basic-properties\">\r\n            <button\r\n              id=\"accordion-button1\"\r\n              class=\"accordion-button properties-accordion-button\"\r\n              type=\"button\"\r\n              data-bs-toggle=\"collapse\"\r\n              data-bs-target=\"#flush-collapseOne\"\r\n              aria-expanded=\"true\"\r\n              aria-controls=\"flush-collapseOne\"\r\n            >\r\n              <i class=\"iconfont icon-position\" style=\"margin-right: 5px\"></i\r\n              ><span>Transform</span>\r\n            </button>\r\n          </h2>\r\n          <div\r\n            id=\"flush-collapseOne\"\r\n            class=\"accordion-collapse collapse show\"\r\n            aria-labelledby=\"basic-properties\"\r\n            data-bs-parent=\"#collapse-root\"\r\n          >\r\n            <div class=\"property-accordion-contents\">\r\n              <div v-if=\"canShow\" class=\"property-row\">\r\n                <Property\r\n                  name=\"x\"\r\n                  pk=\"x\"\r\n                  :fixed=\"0\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n                <Property\r\n                  name=\"y\"\r\n                  pk=\"y\"\r\n                  :fixed=\"0\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n              </div>\r\n              <div v-if=\"showDimension\" class=\"property-row\">\r\n                <Property\r\n                  name=\"width\"\r\n                  pk=\"width\"\r\n                  :fixed=\"0\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n                <Property\r\n                  name=\"height\"\r\n                  pk=\"height\"\r\n                  :fixed=\"0\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n              </div>\r\n              <div v-if=\"showScale\" class=\"property-row\">\r\n                <Property\r\n                  name=\"scaleX\"\r\n                  pk=\"scalex\"\r\n                  :step=\"0.1\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n                <Property\r\n                  name=\"scaleY\"\r\n                  pk=\"scaley\"\r\n                  :step=\"0.1\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n              </div>\r\n              <div v-if=\"showSkew\" class=\"property-row\">\r\n                <Property\r\n                  name=\"skewX\"\r\n                  pk=\"skewx\"\r\n                  :transformToAngel=\"true\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n                <Property\r\n                  name=\"skewY\"\r\n                  pk=\"skewy\"\r\n                  :transformToAngel=\"true\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n              </div>\r\n              <div v-if=\"showRotation\" class=\"property-row\">\r\n                <Property\r\n                  name=\"rotation\"\r\n                  pk=\"rotation\"\r\n                  :transformToAngel=\"true\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n              </div>\r\n\r\n              <!-- 特有属性 -->\r\n              <div v-if=\"isRect\" class=\"property-row\">\r\n                <Property\r\n                  name=\"radiusX\"\r\n                  pk=\"radiusx\"\r\n                  :fixed=\"0\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n                <Property\r\n                  name=\"radiusY\"\r\n                  pk=\"radiusy\"\r\n                  :fixed=\"0\"\r\n                  :selections=\"currentSelections\"\r\n                  @property:change=\"propertyChange\"\r\n                />\r\n              </div>\r\n              <div v-if=\"isVertex\" class=\"sub-property-row\">\r\n                <div id=\"vertex-type-container\">\r\n                  <div\r\n                    style=\"width: 100%; text-align: start; margin: 5px 0 0px 0\"\r\n                  >\r\n                    <div style=\"margin-bottom: 5px\">\r\n                      <small>Vertex Type</small>\r\n                    </div>\r\n                    <ul class=\"pagination pagination-sm justify-content-start\">\r\n                      <li\r\n                        id=\"vertexType0\"\r\n                        @click.stop=\"changeVertexType\"\r\n                        :class=\"vertexType == 0 ? 'active' : ''\"\r\n                        class=\"page-item\"\r\n                      >\r\n                        <label class=\"page-link\"\r\n                          ><i class=\"fas fa-wave-square\"></i\r\n                        ></label>\r\n                      </li>\r\n                      <li\r\n                        id=\"vertexType1\"\r\n                        class=\"page-item\"\r\n                        :class=\"vertexType == 1 ? 'active' : ''\"\r\n                        @click.stop=\"changeVertexType\"\r\n                      >\r\n                        <label class=\"page-link\"\r\n                          ><i class=\"fas fa-bezier-curve\"></i\r\n                        ></label>\r\n                      </li>\r\n                      <li\r\n                        id=\"vertexType2\"\r\n                        class=\"page-item\"\r\n                        :class=\"vertexType == 2 ? 'active' : ''\"\r\n                        @click.stop=\"changeVertexType\"\r\n                      >\r\n                        <label class=\"page-link\"\r\n                          ><i class=\"fas fa-code-branch\"></i\r\n                        ></label>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n\r\n                  <div\r\n                    style=\"height: 1px; width: 100%; background-color: #444444\"\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"isStar\" class=\"sub-property-row\">\r\n                <div class=\"property-row\">\r\n                  <Property\r\n                    name=\"corners\"\r\n                    pk=\"corners\"\r\n                    :fixed=\"0\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                  <Property\r\n                    name=\"inner\"\r\n                    pk=\"radius\"\r\n                    :fixed=\"2\"\r\n                    :step=\"0.1\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"isPolygon\" class=\"sub-property-row\">\r\n                <div class=\"property-row\">\r\n                  <Property\r\n                    name=\"sides\"\r\n                    pk=\"sides\"\r\n                    :fixed=\"0\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"isPath\" class=\"sub-property-row\">\r\n                <div class=\"single-row\">\r\n                  <div class=\"form-check form-switch\">\r\n                    <label for=\"closePath\">Closed</label>\r\n                    <input\r\n                      @change=\"pathCloseChange\"\r\n                      :checked=\"pathClosed\"\r\n                      class=\"form-check-input\"\r\n                      type=\"checkbox\"\r\n                      id=\"closePath\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div v-if=\"showIn\" class=\"sub-property-row\">\r\n                <div class=\"single-row\">\r\n                  <div class=\"form-check form-switch\">\r\n                    <label for=\"inController\">In Controller</label>\r\n                    <input\r\n                      @change=\"controllerChange\"\r\n                      :checked=\"hasInController\"\r\n                      class=\"form-check-input\"\r\n                      type=\"checkbox\"\r\n                      id=\"inController\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div v-if=\"hasInController\" class=\"property-row\">\r\n                  <Property\r\n                    name=\"x\"\r\n                    pk=\"inX\"\r\n                    :fixed=\"0\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                  <Property\r\n                    name=\"y\"\r\n                    pk=\"inY\"\r\n                    :fixed=\"0\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"showIn\" class=\"sub-property-row\">\r\n                <div class=\"single-row\">\r\n                  <div class=\"form-check form-switch\">\r\n                    <label for=\"outController\">Out Controller</label>\r\n                    <input\r\n                      @change=\"controllerChange\"\r\n                      :checked=\"hasOutController\"\r\n                      class=\"form-check-input\"\r\n                      type=\"checkbox\"\r\n                      id=\"outController\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div v-if=\"hasOutController\" class=\"property-row\">\r\n                  <Property\r\n                    name=\"x\"\r\n                    pk=\"outX\"\r\n                    :fixed=\"0\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                  <Property\r\n                    name=\"y\"\r\n                    pk=\"outY\"\r\n                    :fixed=\"0\"\r\n                    :selections=\"currentSelections\"\r\n                    @property:change=\"propertyChange\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"accordion-item properties-accordion-item\">\r\n          <h2 class=\"accordion-header\" id=\"border-property\">\r\n            <button\r\n              class=\"accordion-button collapsed properties-accordion-button\"\r\n              type=\"button\"\r\n              data-bs-toggle=\"collapse\"\r\n              data-bs-target=\"#flush-collapseTwo\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"flush-collapseTwo\"\r\n            >\r\n              <i class=\"iconfont icon-border\" style=\"margin-right: 5px\"></i>\r\n              Border\r\n            </button>\r\n          </h2>\r\n          <div\r\n            id=\"flush-collapseTwo\"\r\n            class=\"accordion-collapse collapse\"\r\n            aria-labelledby=\"border-property\"\r\n            data-bs-parent=\"#collapse-root\"\r\n          >\r\n            <div class=\"property-accordion-contents\">\r\n              <BorderProperty\r\n                :selections=\"currentSelections\"\r\n                @property:change=\"propertyChange\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"accordion-item properties-accordion-item\">\r\n          <h2 class=\"accordion-header\" id=\"flush-headingThree\">\r\n            <button\r\n              class=\"accordion-button collapsed properties-accordion-button\"\r\n              type=\"button\"\r\n              data-bs-toggle=\"collapse\"\r\n              data-bs-target=\"#flush-collapseThree\"\r\n              aria-expanded=\"false\"\r\n              aria-controls=\"flush-collapseThree\"\r\n            >\r\n              <i class=\"iconfont icon-fill\" style=\"margin-right: 5px\"></i>\r\n              Fill\r\n            </button>\r\n          </h2>\r\n          <div\r\n            id=\"flush-collapseThree\"\r\n            class=\"accordion-collapse collapse\"\r\n            aria-labelledby=\"flush-headingThree\"\r\n            data-bs-parent=\"#collapse-root\"\r\n          >\r\n            <div class=\"property-accordion-contents\">\r\n              <fill-property\r\n                :selections=\"currentSelections\"\r\n                @property:change=\"propertyChange\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BorderProperty from \"./BorderProperty.vue\";\r\n\r\nimport PathShape from \"../../lib/shape/path-shape\";\r\nimport Property from \"./Property.vue\";\r\nimport Point from \"../../lib/point\";\r\nimport Polygon from \"../../lib/shape/polygon\";\r\nimport Star from \"../../lib/shape/star\";\r\nimport FillProperty from \"./FillProperty.vue\";\r\nimport Rect from \"../../lib/shape/rect\";\r\nimport Utils from \"../../utils\";\r\nimport Line from \"../../lib/shape/line\";\r\n\r\nexport default {\r\n  name: \"PropertyBar\",\r\n  emits: [\"property:change\"],\r\n  computed: {\r\n    title() {\r\n      if (!this.currentSelections || this.currentSelections.length == 0) {\r\n        return \"No Selections\";\r\n      } else {\r\n        if (this.currentSelections) {\r\n          if (this.currentSelections.length > 1) {\r\n            return \"Multiple Selections\";\r\n          } else {\r\n            let selection = this.currentSelections[0];\r\n            if (selection.name) return selection.name;\r\n            if (selection instanceof Point) return \"Vertex\";\r\n            return \"Unknown\";\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    titleIcon() {\r\n      if (!this.currentSelections || this.currentSelections.length == 0) {\r\n      } else {\r\n        if (this.currentSelections) {\r\n          if (this.currentSelections.length > 1) {\r\n            return \"icon-shapes\";\r\n          } else {\r\n            let selection = this.currentSelections[0];\r\n            return Utils.objectIcon(selection);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    canShow() {\r\n      return this.currentSelections && this.currentSelections.length == 1;\r\n    },\r\n\r\n    isVertex() {\r\n      if (this.canShow) {\r\n        return this.currentSelections[0] instanceof Point;\r\n      }\r\n      return false;\r\n    },\r\n    isRect() {\r\n      if (this.canShow) {\r\n        let m = this.currentSelections[0];\r\n        return m instanceof Rect;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    isStar() {\r\n      if (this.canShow) {\r\n        let m = this.currentSelections[0];\r\n        return m instanceof Star;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    isPolygon() {\r\n      if (this.canShow) {\r\n        let m = this.currentSelections[0];\r\n        return m instanceof Polygon;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    isPath() {\r\n      if (this.canShow) {\r\n        let m = this.currentSelections[0];\r\n        if (m instanceof PathShape) {\r\n          if (this.isStar || this.isPolygon) return false;\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n\r\n    isLine() {\r\n      if (this.canShow) {\r\n        let m = this.currentSelections[0];\r\n        if (m instanceof Line) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n\r\n    showDimension() {\r\n      if (this.canShow) {\r\n        if (this.isVertex || this.isPath || this.isLine) return false;\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    showScale() {\r\n      if (this.canShow) {\r\n        if (this.isVertex) return false;\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    showSkew() {\r\n      if (this.canShow) {\r\n        if (this.isVertex) return false;\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    showRotation() {\r\n      if (this.canShow) {\r\n        if (this.isVertex) return false;\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    showIn() {\r\n      return this.isVertex;\r\n    },\r\n\r\n    hasInController() {\r\n      if (this.isVertex) {\r\n        return this.currentSelections[0].in != null;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    hasOutController() {\r\n      if (this.isVertex) {\r\n        return this.currentSelections[0].out != null;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    pathClosed() {\r\n      if (this.isPath) {\r\n        return this.currentSelections[0].close;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    vertexType() {\r\n      if (this.isVertex) {\r\n        return this.currentSelections[0].type;\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    propertyChange(event) {\r\n      this.$emit(\"property:change\", event);\r\n    },\r\n    changeVertexType(event) {\r\n      let str = event.currentTarget.id;\r\n      if (!str) return;\r\n      let index = str.indexOf(\"vertexType\");\r\n      if (index == -1) return;\r\n      let typeStr = str.substring(index + 10);\r\n    },\r\n    controllerChange(event) {\r\n      let property = \"in\";\r\n      if (event.target.id == \"outController\") property = \"out\";\r\n      let model = this.currentSelections[0];\r\n      let checked = event.target.checked;\r\n      let value = null;\r\n      if (checked) {\r\n        value = [model.x, model.y];\r\n      }\r\n      let e = { model, property, value };\r\n      this.propertyChange([e]);\r\n    },\r\n    pathCloseChange(event) {\r\n      let checked = event.target.checked;\r\n      this.propertyChange([\r\n        { model: this.currentSelections[0], property: \"close\", value: checked },\r\n      ]);\r\n    },\r\n  },\r\n  components: { Property, BorderProperty, FillProperty },\r\n  props: {\r\n    currentSelections: {\r\n      type: Array,\r\n      default: null,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#vertex-type-container {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: baseline;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.sub-property-row {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n\r\n.single-row {\r\n  padding: 5px 0 0 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n#title-icon {\r\n  margin-left: 10px;\r\n  margin-right: 15px;\r\n}\r\n#selection-title {\r\n  width: 100%;\r\n  text-align: start;\r\n  font-size: 1em;\r\n  padding-bottom: 5px;\r\n  box-sizing: border-box;\r\n  border-bottom: #777777 solid 1px;\r\n}\r\n\r\n#property-view {\r\n  height: 100%;\r\n  max-height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  color: whitesmoke;\r\n}\r\n\r\n.properties-accordion-root {\r\n  background-color: transparent;\r\n}\r\n\r\n#properties-accordions-container {\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  padding-top: 10px;\r\n  max-height: 100%;\r\n  box-sizing: border-box;\r\n  background-color: transparent;\r\n}\r\n\r\n#collapse-root {\r\n  height: 100%;\r\n}\r\n\r\n#properties-accordion-root {\r\n  height: 100%;\r\n}\r\n\r\n.properties-accordion-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.property-item {\r\n  display: flex;\r\n  color: #dddddd;\r\n  justify-content: center;\r\n  width: 100%;\r\n  align-items: baseline;\r\n}\r\n\r\n.property-lable {\r\n  margin-right: 5px;\r\n}\r\n\r\n.property-input {\r\n  border: none;\r\n  background-color: transparent;\r\n  color: #dddddd;\r\n  border-bottom: #444444 solid 1px;\r\n  border-radius: 0;\r\n}\r\n\r\n.property-input:focus {\r\n  color: whitesmoke;\r\n  background-color: transparent;\r\n  box-shadow: none;\r\n  border-bottom: whitesmoke solid 1px;\r\n  border-radius: 0;\r\n}\r\n\r\n.property-row {\r\n  display: flex;\r\n  flex: 50% 50%;\r\n  justify-content: space-between;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.property-accordion-contents {\r\n  padding: 10px 0 10px 0;\r\n  box-sizing: border-box;\r\n  color: #dddddd;\r\n}\r\n\r\n.properties-accordion-item {\r\n  background-color: transparent;\r\n}\r\n\r\n.properties-accordion-button {\r\n  background-color: #313131;\r\n  color: whitesmoke;\r\n}\r\n\r\n.properties-accordion-button:focus {\r\n  box-shadow: none;\r\n  color: whitesmoke;\r\n}\r\n.properties-accordion-button:not(.collapsed) {\r\n  color: whitesmoke;\r\n  background-color: #313131;\r\n}\r\n\r\n.properties-accordion-button::after {\r\n  background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23ffffff'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z'/%3E%3C/svg%3E\");\r\n}\r\n\r\n.properties-accordion-button:not(.collapsed):after {\r\n  background-image: url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23ffffff'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 01.708 0L8 10.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z'/%3E%3C/svg%3E\");\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.properties-accordion-body {\r\n  padding: 5px 0px 5px 0px;\r\n  box-sizing: border-box;\r\n}\r\n</style>","<template>\r\n  <div>\r\n    <div v-if=\"!hasBorderOrFillProperty\" style=\"text-algin: left; color: grey\">\r\n      <small>Nothing</small>\r\n    </div>\r\n    <div v-else>\r\n      <div class=\"sub-property-row\">\r\n        <div class=\"single-row\">\r\n          <div class=\"form-check form-switch\">\r\n            <label for=\"showBorder\">Show border</label>\r\n            <input\r\n              @change=\"showBorderChange\"\r\n              :checked=\"showBorder\"\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id=\"showBorder\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"gray-splitter\"></div>\r\n\r\n        <div v-if=\"showBorder\">\r\n          <div class=\"property-row\">\r\n            <div class=\"property-item\">\r\n              <label class=\"property-lable\">width</label>\r\n              <input\r\n                v-model.lazy=\"width\"\r\n                id=\"border-width\"\r\n                class=\"form-control form-control-sm property-input\"\r\n                type=\"number\"\r\n                @click=\"selectText\"\r\n                @keypress.enter=\"confirm\"\r\n              />\r\n            </div>\r\n            <div class=\"property-item\">\r\n              <label class=\"property-lable\">miter</label>\r\n              <input\r\n                v-model.lazy=\"miter\"\r\n                id=\"border-miter\"\r\n                class=\"form-control form-control-sm property-input\"\r\n                type=\"number\"\r\n                @click=\"selectText\"\r\n                @keypress.enter=\"confirm\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"sub-property-row\">\r\n            <div id=\"vertex-type-container\">\r\n              <div style=\"width: 100%; text-align: start; margin: 5px 0 0px 0\">\r\n                <div style=\"margin-bottom: 5px\">\r\n                  <small>Join</small>\r\n                  <!-- <div\r\n                    class=\"btn-group\"\r\n                    role=\"group\"\r\n                    aria-label=\"Basic radio toggle button group\"\r\n                  >\r\n                    <input\r\n                      type=\"radio\"\r\n                      class=\"btn-check\"\r\n                      name=\"btnradio\"\r\n                      id=\"btnradio1\"\r\n                      autocomplete=\"off\"\r\n                      checked\r\n                    />\r\n                    <label class=\"btn btn-outline-primary\" for=\"btnradio1\"\r\n                      >Radio 1</label\r\n                    >\r\n\r\n                    <input\r\n                      type=\"radio\"\r\n                      class=\"btn-check\"\r\n                      name=\"btnradio\"\r\n                      id=\"btnradio2\"\r\n                      autocomplete=\"off\"\r\n                    />\r\n                    <label class=\"btn btn-outline-primary\" for=\"btnradio2\"\r\n                      >Radio 2</label\r\n                    >\r\n\r\n                    <input\r\n                      type=\"radio\"\r\n                      class=\"btn-check\"\r\n                      name=\"btnradio\"\r\n                      id=\"btnradio3\"\r\n                      autocomplete=\"off\"\r\n                    />\r\n                    <label class=\"btn btn-outline-primary\" for=\"btnradio3\"\r\n                      >Radio 3</label\r\n                    >\r\n                  </div> -->\r\n                </div>\r\n                <ul class=\"pagination pagination-sm justify-content-center\">\r\n                  <li\r\n                    id=\"Bevel\"\r\n                    @click.stop=\"changeJoinType\"\r\n                    :class=\"join.value == 2 ? 'active' : ''\"\r\n                    class=\"page-item\"\r\n                  >\r\n                    <label class=\"page-link\">Bevel</label>\r\n                  </li>\r\n                  <li\r\n                    id=\"Miter\"\r\n                    class=\"page-item\"\r\n                    :class=\"join.value == 0 ? 'active' : ''\"\r\n                    @click.stop=\"changeJoinType\"\r\n                  >\r\n                    <label class=\"page-link\">Miter</label>\r\n                  </li>\r\n                  <li\r\n                    id=\"Round\"\r\n                    class=\"page-item\"\r\n                    :class=\"join.value == 1 ? 'active' : ''\"\r\n                    @click.stop=\"changeJoinType\"\r\n                  >\r\n                    <label class=\"page-link\">Round</label>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div class=\"gray-splitter\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"sub-property-row\">\r\n            <div id=\"vertex-type-container\">\r\n              <div style=\"width: 100%; text-align: start; margin: 5px 0 0px 0\">\r\n                <div style=\"margin-bottom: 5px\">\r\n                  <small>Cap</small>\r\n                </div>\r\n                <ul class=\"pagination pagination-sm justify-content-center\">\r\n                  <li\r\n                    id=\"Butt\"\r\n                    @click.stop=\"changeCapType\"\r\n                    :class=\"cap.value == 0 ? 'active' : ''\"\r\n                    class=\"page-item\"\r\n                  >\r\n                    <label class=\"page-link\">Butt</label>\r\n                  </li>\r\n                  <li\r\n                    id=\"Round\"\r\n                    class=\"page-item\"\r\n                    :class=\"cap.value == 1 ? 'active' : ''\"\r\n                    @click.stop=\"changeCapType\"\r\n                  >\r\n                    <label class=\"page-link\">Round</label>\r\n                  </li>\r\n                  <li\r\n                    id=\"Square\"\r\n                    class=\"page-item\"\r\n                    :class=\"cap.value == 2 ? 'active' : ''\"\r\n                    @click.stop=\"changeCapType\"\r\n                  >\r\n                    <label class=\"page-link\">Square</label>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"gray-splitter\"></div>\r\n          <div style=\"margin-top: 10px; text-align: left\">\r\n            <small>Color</small>\r\n          </div>\r\n\r\n          <div class=\"sub-property-row\">\r\n            <ColorProperty\r\n              :selections=\"selections\"\r\n              @property:change=\"colorChanged\"\r\n              rk=\"br\"\r\n              gk=\"bg\"\r\n              bk=\"bb\"\r\n              ak=\"ba\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport textselect from \"./text-click-fullselect.js\";\r\nimport selectionTool from \"./selection-tools\";\r\nimport CanvasKitUtils from \"../../lib/canvaskit-utils\";\r\nimport Property from \"./Property.vue\";\r\nimport ColorProperty from \"./ColorProperty.vue\";\r\nimport Point from \"../../lib/point.js\";\r\n\r\nexport default {\r\n  name: \"BorderProperty\",\r\n  mixins: [textselect, selectionTool],\r\n  components: { Property, ColorProperty },\r\n  emits: [\"property:change\"],\r\n  computed: {\r\n    width: {\r\n      get() {\r\n        return this.getAnyPropertyValue(\"borderWidth\", 0);\r\n      },\r\n      set(w) {\r\n        let v = Number.parseInt(w);\r\n        this.changeProperty(\"borderWidth\", v);\r\n      },\r\n    },\r\n    miter: {\r\n      get() {\r\n        return this.getAnyPropertyValue(\"miter\", 0);\r\n      },\r\n      set(w) {\r\n        let v = Number.parseInt(w);\r\n        this.changeProperty(\"miter\", v);\r\n      },\r\n    },\r\n    join: {\r\n      get() {\r\n        return this.getAnyPropertyValue(\"join\", CanvasKitUtils.StrokeCap.Bevel);\r\n      },\r\n    },\r\n    cap: {\r\n      get() {\r\n        return this.getAnyPropertyValue(\"cap\", CanvasKitUtils.StrokeCap.Butt);\r\n      },\r\n    },\r\n\r\n    showBorder() {\r\n      return this.getAnyPropertyValue(\"showBorder\", false);\r\n    },\r\n  },\r\n  methods: {\r\n    canChangeProperty(model) {\r\n      if (model instanceof Point) return false;\r\n      return true;\r\n    },\r\n    colorChanged(events) {\r\n      this.firePropertyChangeEvents(events);\r\n    },\r\n    changeCapType(event) {\r\n      let str = event.currentTarget.id;\r\n      if (!str) return;\r\n      let c;\r\n      if (str == \"Butt\") {\r\n        c = CanvasKitUtils.StrokeCap.Butt;\r\n      }\r\n      if (str == \"Square\") {\r\n        c = CanvasKitUtils.StrokeCap.Square;\r\n      }\r\n      if (str == \"Round\") {\r\n        c = CanvasKitUtils.StrokeCap.Round;\r\n      }\r\n      if (!c || c == this.cap) return;\r\n      this.changeProperty(\"cap\", c);\r\n    },\r\n\r\n    changeJoinType(event) {\r\n      let str = event.currentTarget.id;\r\n      if (!str) return;\r\n      let c;\r\n      if (str == \"Bevel\") {\r\n        c = CanvasKitUtils.StrokeJoin.Bevel;\r\n      }\r\n      if (str == \"Miter\") {\r\n        c = CanvasKitUtils.StrokeJoin.Miter;\r\n      }\r\n      if (str == \"Round\") {\r\n        c = CanvasKitUtils.StrokeJoin.Round;\r\n      }\r\n      if (!c || c == this.join) return;\r\n      this.changeProperty(\"join\", c);\r\n    },\r\n    showBorderChange(e) {\r\n      let checked = e.target.checked;\r\n      if (checked == this.showBorder) return;\r\n      this.changeProperty(\"showBorder\", checked);\r\n    },\r\n  },\r\n  props: {\r\n    selections: {\r\n      type: Array,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","export default {\r\n    methods: {\r\n        confirm(event) {\r\n            event.target.select();\r\n            //   event.target.blur();\r\n        },\r\n        selectText(event) {\r\n            event.target.select();\r\n        },\r\n    }\r\n}","const MAX_ID = Math.pow(2, 31);\r\n\r\nexport default class CanvasKitUtils {\r\n    static CanvasKit;\r\n\r\n    static currentId;\r\n\r\n    static newID() {\r\n        if (this.currentId == null) {\r\n            this.currentId = 0;//Math.floor(Math.random() * MAX_ID);\r\n        }\r\n        this.currentId += 1;\r\n        if (this.currentId > MAX_ID) {\r\n            this.currentId = 0;\r\n        }\r\n        return this.currentId;\r\n    }\r\n\r\n    static initCanvasKit(path) {\r\n        return new Promise((resolve, reject) => {\r\n            CanvasKitInit({\r\n                locateFile: (file) => path + file,\r\n            }).then((CanvasKit) => {\r\n                if (window) window.CanvasKit = CanvasKit;\r\n                this.CanvasKit = CanvasKit;\r\n                resolve(CanvasKit);\r\n            });\r\n        });\r\n\r\n    }\r\n\r\n    static get ClipOp() {\r\n        return this.CanvasKit.ClipOp;\r\n    }\r\n\r\n    static get StrokeCap() {\r\n        return this.CanvasKit.StrokeCap;\r\n    }\r\n\r\n    static get StrokeJoin() {\r\n        return this.CanvasKit.StrokeJoin;\r\n    }\r\n\r\n    static makeCanvasSurface(id) {\r\n        return this.CanvasKit.MakeCanvasSurface(id);\r\n    }\r\n\r\n    static newPaint() {\r\n        if (CanvasKit) return new this.CanvasKit.Paint();\r\n    }\r\n\r\n    static newPath() {\r\n        if (CanvasKit) return new this.CanvasKit.Path();\r\n    }\r\n\r\n    static get TRANSPARENT() {\r\n        return this.CanvasKit.TRANSPARENT;\r\n    }\r\n\r\n    static get fillStyle() {\r\n        return this.CanvasKit.PaintStyle.Fill;\r\n    }\r\n\r\n\r\n    static get strokeStyle() {\r\n        return this.CanvasKit.PaintStyle.Stroke;\r\n    }\r\n\r\n    static newXYWHRect(x, y, w, h, flag = false) {\r\n        return CanvasKit.XYWHRect(x, y, w, h, flag);\r\n    }\r\n\r\n    static newRRectXY(rect, radiusx, radiusy, flag = false) {\r\n        return CanvasKit.RRectXY(rect, radiusx, radiusy, flag);\r\n    }\r\n\r\n    static getJoinText(j) {\r\n        if (j.value == this.StrokeJoin.Bevel.value) return 'bevel';\r\n        if (j.value == this.StrokeJoin.Round.value) return 'round';\r\n        if (j.value == this.StrokeJoin.Miter.value) return 'miter';\r\n    }\r\n\r\n    static getCapText(j) {\r\n        if (j.value == this.StrokeCap.Butt.value) return 'butt';\r\n        if (j.value == this.StrokeCap.Round.value) return 'round';\r\n        if (j.value == this.StrokeCap.Square.value) return 'square';\r\n    }\r\n}\r\n\r\n\r\n","export default class EventEmitter {\r\n    constructor() { }\r\n\r\n    dispose() {\r\n        if (this._eventHandlers) {\r\n            this._eventHandlers.forEach((value, key) => {\r\n                value.length = 0;\r\n            })\r\n            this._eventHandlers.clear();\r\n            this._eventHandlers = null;\r\n        }\r\n    }\r\n\r\n    fireEvent(name, event) {\r\n        if (this._eventHandlers == null) return;\r\n        let hanlders = this._eventHandlers.get(name);\r\n        if (hanlders) {\r\n            hanlders.forEach(handler => {\r\n                // Promise.resolve(event).then((event) => {\r\n                handler({ source: this, event: event });\r\n                // })\r\n            })\r\n        }\r\n    }\r\n\r\n    on(name, handler) {\r\n        if (this._eventHandlers == null) {\r\n            this._eventHandlers = new Map();\r\n        }\r\n        let handlers = this._eventHandlers.get(name);\r\n        if (!handlers) {\r\n            handlers = [];\r\n            this._eventHandlers.set(name, handlers);\r\n        }\r\n        handlers.push(handler);\r\n    }\r\n\r\n    off(name, handler) {\r\n        if (!this._eventHandlers) return;\r\n        let handlers = this._eventHandlers.get(name);\r\n        if (handlers) {\r\n            let index = handlers.indexOf(handler);\r\n            if (index != -1) handlers.splice(index, 1);\r\n        }\r\n    }\r\n}","\r\nlet _TEMP = null;\r\nlet _TEMP2 = null;\r\n\r\nconst PI2 = Math.PI * 2;\r\n\r\n/**\r\n * 只有两列数据的3x3矩阵。反正最后一列是固定的\r\n */\r\nexport default class Matrix3 {\r\n\r\n    constructor(array = new Float32Array(9)) {\r\n        this._array = array;\r\n        this.identity();\r\n    }\r\n    /**\r\n     * 是否是一个单位矩阵。\r\n     * 有时候判断这6个数比乘一次矩阵要快很多\r\n     */\r\n    isIdentity() {\r\n        let data = this._array;\r\n        return data[0] == 1 && data[1] == 0 && data[2] == 0 && data[3] == 0 && data[4] == 1 && data[5] == 0\r\n            && data[6] == 0 && data[7] == 0 && data[8] == 1;\r\n    }\r\n\r\n    /** 这个方法仅允许我使用 */\r\n    static get TEMP() {\r\n        if (_TEMP == null) {\r\n            _TEMP = new Matrix3();\r\n            _TEMP.identity();\r\n        }\r\n        return _TEMP;\r\n    }\r\n\r\n    /** 这个方法仅允许我使用 */\r\n    static get TEMP2() {\r\n        if (_TEMP2 == null) {\r\n            _TEMP2 = new Matrix3();\r\n            _TEMP.identity();\r\n        }\r\n        return _TEMP2;\r\n    }\r\n\r\n    static copyFrom(from, to) {\r\n        let t = to.data;\r\n        let f = from.data;\r\n        t[0] = f[0];\r\n        t[1] = f[1];\r\n        t[2] = f[2];\r\n        t[3] = f[3];\r\n        t[4] = f[4];\r\n        t[5] = f[5];\r\n    }\r\n\r\n    get data() {\r\n        return this._array;\r\n    }\r\n\r\n    static IdentityMatrix(out) {\r\n        if (out == null) out = new Float32Array(9);\r\n        let m3 = new Matrix3(out);\r\n        return m3.identity();\r\n    }\r\n\r\n    clone() {\r\n        let matrix = new Matrix3();\r\n        let data = this.data;\r\n        let out = matrix.data;\r\n        for (let i = 0; i < data.length; i++) {\r\n            out[i] = data[i];\r\n        }\r\n        return matrix;\r\n    }\r\n\r\n    from(m) {\r\n        let data = this.data;\r\n        let from = m.data;\r\n        for (let i = 0; i < data.length; i++) {\r\n            data[i] = from[i];\r\n        }\r\n    }\r\n\r\n    decompose(QRList = true) {\r\n        let mat = this.data;\r\n        // (a c e b d f 0 0 1)\r\n        let a = mat[0],\r\n            c = mat[1],\r\n            e = mat[2],\r\n            b = mat[3],\r\n            d = mat[4],\r\n            f = mat[5];\r\n        let translation = { x: e, y: f };\r\n        let rotation = 0, scale = { x: 1, y: 1 }, skew = { x: 0, y: 0 };\r\n        var Delta = a * d - b * c;\r\n\r\n        if (QRList) {\r\n            // Apply the QR-like decomposition.\r\n            if (a != 0 || b != 0) {\r\n                var r = Math.sqrt(a * a + b * b);\r\n                rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\r\n                scale.x = r, scale.y = Delta / r;\r\n                skew.x = Math.atan((a * c + b * d) / (r * r));\r\n            } else if (c != 0 || d != 0) {\r\n                var s = Math.sqrt(c * c + d * d);\r\n                rotation = Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\r\n                scale.x = Delta / s, scale.y = s;\r\n                skew.y = Math.atan((a * c + b * d) / (s * s));\r\n            } else { // a = b = c = d = 0\r\n                scale.x = scale.y = 0;\r\n            }\r\n        } else {\r\n            // Apply the LU-like decomposition.\r\n            if (a != 0) {\r\n                skew.y = Math.atan(b / a);\r\n                scale.x = a, scale.y = Delta / a;\r\n                skew.x = Math.atan(c / a);\r\n            } else if (b != 0) {\r\n                rotation = Math.PI / 2;\r\n                scale.x = b, scale.y = Delta / b;\r\n                skew.x = Math.atan(d / b);\r\n            } else { // a = b = 0\r\n                scale.x = c, scale.y = d;\r\n                skew.x = Math.PI / 4;\r\n                scale.x = 0, scale.y = 1;\r\n            }\r\n        }\r\n        return { translation, rotation, scale, skew };\r\n    }\r\n\r\n    identity() {\r\n        let out = this._array;\r\n        out[0] = 1, out[1] = 0, out[2] = 0;\r\n        out[3] = 0, out[4] = 1, out[5] = 0;\r\n        out[6] = 0, out[7] = 0, out[8] = 1;\r\n        return this;\r\n    }\r\n\r\n    rotate(radian) {\r\n        // let m = this.data;\r\n        let c = Math.cos(radian);\r\n        let s = Math.sin(radian);\r\n        // m[0] = c, m[1] = -s, m[2] = 0;\r\n        // m[3] = s, m[4] = c, m[5] = 0;\r\n        this.multiplyWithSimpleDatas(c, s, -s, c, 0, 0);\r\n        return this;\r\n    }\r\n\r\n    skew(x, y) {\r\n        // m[0] = 1, m[1] = x, m[2] = 0;\r\n        // m[3] = y, m[4] = 1, m[5] = 0;\r\n        this.multiplyWithSimpleDatas(1, Math.tan(y), Math.tan(x), 1, 0, 0);\r\n        return this;\r\n    }\r\n\r\n    scale(scalex, scaley) {\r\n        // let m = this.data;\r\n        // m[0] = scalex, m[1] = 0, m[2] = 0;\r\n        // m[3] = 0, m[4] = scaley, m[5] = 0;\r\n        this.multiplyWithSimpleDatas(scalex, 0, 0, scaley, 0, 0);\r\n        return this;\r\n    }\r\n\r\n    translate(x, y) {\r\n        // let m = this.data;\r\n        // m[0] = 1, m[1] = 0, m[2] = x;\r\n        // m[3] = 0, m[4] = 1, m[5] = y;\r\n        this.multiplyWithSimpleDatas(1, 0, 0, 1, x, y);\r\n        return this;\r\n    }\r\n\r\n    multiplyWithVertexDatas(x, y, out) {\r\n        if (out == null) out = new Float32Array(2);\r\n        let a = this.data;\r\n        out[0] = a[0] * x + a[1] * y + a[2];// z补位是1\r\n        out[1] = a[3] * x + a[4] * y + a[5];\r\n        return out;\r\n    }\r\n\r\n    multiplyWithVertex(p, out) {\r\n        return this.multiplyWithVertexDatas(p[0], p[1], out);\r\n    }\r\n\r\n    multiplyWithDatas(b00, b01, b02, b10, b11, b12, b20, b21, b22) {\r\n        let out = this.data;\r\n        let a = this.data;\r\n        let a00 = a[0], a01 = a[3], a02 = a[6];\r\n        let a10 = a[1], a11 = a[4], a12 = a[7];\r\n        let a20 = a[2], a21 = a[5], a22 = a[8];\r\n\r\n        out[0] = b00 * a00 + b01 * a10 + b02 * a20;\r\n        out[3] = b00 * a01 + b01 * a11 + b02 * a21;\r\n        out[6] = b00 * a02 + b01 * a12 + b02 * a22;\r\n\r\n        out[1] = b10 * a00 + b11 * a10 + b12 * a20;\r\n        out[4] = b10 * a01 + b11 * a11 + b12 * a21;\r\n        out[7] = b10 * a02 + b11 * a12 + b12 * a22;\r\n\r\n        out[2] = b20 * a00 + b21 * a10 + b22 * a20;\r\n        out[5] = b20 * a01 + b21 * a11 + b22 * a21;\r\n        out[8] = b20 * a02 + b21 * a12 + b22 * a22;\r\n        return this;\r\n    }\r\n\r\n    multiplyWithSimpleDatas(b00, b01, b10, b11, b20, b21) {\r\n        let a = this.data;\r\n        let out = this.data;\r\n        let a00 = a[0], a01 = a[3];//, a02 = a[2];\r\n        let a10 = a[1], a11 = a[4];//, a12 = a[5];\r\n        let a20 = a[2], a21 = a[5];//, a22 = a[8];\r\n\r\n        out[0] = b00 * a00 + b01 * a10;// + b02 * a20;\r\n        out[3] = b00 * a01 + b01 * a11;// + b02 * a21;\r\n        // out[2] = 0;//b00 * a02 + b01 * a12 + b02 * a22;\r\n\r\n        out[1] = b10 * a00 + b11 * a10;// + b12 * a20;\r\n        out[4] = b10 * a01 + b11 * a11;// + b12 * a21;\r\n        // out[5] = 0;//b10 * a02 + b11 * a12 + b12 * a22;\r\n\r\n        out[2] = b20 * a00 + b21 * a10 + a20;// b22 * a20;\r\n        out[5] = b20 * a01 + b21 * a11 + a21;//b22 * a21;\r\n        // out[8] = 1;//b20 * a02 + b21 * a12 + b22 * a22;\r\n        return this;\r\n    }\r\n\r\n    invert() {\r\n        return this.getInvert(this);\r\n    }\r\n    /**\r\n     * 获得逆矩阵。\r\n     * @todo 这个方法要修改成6个数据的那种，减少一些计算量\r\n     * @param {Matrix3} outMatrix \r\n     */\r\n    getInvert(outMatrix = new Matrix3()) {\r\n        let out = outMatrix.data;\r\n        let a = this.data;\r\n        let a00 = a[0], a01 = a[3], a02 = a[6];\r\n        let a10 = a[1], a11 = a[4], a12 = a[7];\r\n        let a20 = a[2], a21 = a[5], a22 = a[8];\r\n\r\n        let b01 = a22 * a11 - a12 * a21;\r\n        let b11 = -a22 * a10 + a12 * a20;\r\n        let b21 = a21 * a10 - a11 * a20;\r\n\r\n        // Calculate the determinant\r\n        let det = a00 * b01 + a01 * b11 + a02 * b21;\r\n\r\n        if (!det) {\r\n            return null;\r\n        }\r\n        det = 1.0 / det;\r\n\r\n        out[0] = b01 * det;\r\n        out[3] = (-a22 * a01 + a02 * a21) * det;\r\n        out[6] = (a12 * a01 - a02 * a11) * det;\r\n\r\n        out[1] = b11 * det;\r\n        out[4] = (a22 * a00 - a02 * a20) * det;\r\n        out[7] = (-a12 * a00 + a02 * a10) * det;\r\n\r\n        out[2] = b21 * det;\r\n        out[5] = (-a21 * a00 + a01 * a20) * det;\r\n        out[8] = (a11 * a00 - a01 * a10) * det;\r\n        return outMatrix;\r\n    }\r\n\r\n    simpleMultiply(m) {\r\n        let b = m.data;\r\n        return this.multiplyWithSimpleDatas(b[0], b[3], b[1], b[4], b[2], b[5]);\r\n        // let b00 = b[0], b01 = b[3];// b02 = b[6];\r\n        // let b10 = b[1], b11 = b[4];// b12 = b[7];\r\n        // let b20 = b[2], b21 = b[5];// b22 = b[8];\r\n    }\r\n\r\n    /**\r\n     * 和一个3x3的6个数据矩阵相乘\r\n     * @param {Matrix3} m \r\n     */\r\n    multiply(m) {\r\n        let b = m.data;\r\n        return this.multiplyWithDatas(b[0], b[3], b[6], b[1], b[4], b[7], b[2], b[5], b[8]);\r\n        // let b00 = b[0], b01 = b[3];// b02 = b[6];\r\n        // let b10 = b[1], b11 = b[4];// b12 = b[7];\r\n        // let b20 = b[2], b21 = b[5];// b22 = b[8];\r\n    }\r\n    /**\r\n     * 有病\r\n     */\r\n    toSVGMatrix() {\r\n        let data = this.data;\r\n        return { a: data[0], b: data[3], c: data[1], d: data[4], e: data[2], f: data[5] };\r\n    }\r\n}","export default class Utils {\r\n    static isContacted(rect1, rect2) {\r\n        return !(rect1.left > rect2.right || rect1.top > rect2.bottom ||\r\n            rect2.left > rect1.right || rect2.top > rect1.bottom);\r\n    }\r\n\r\n    static containsPoint(x, y, bounds) {\r\n        return x >= bounds.left && x <= bounds.right\r\n            && y >= bounds.top && y <= bounds.bottom;\r\n    }\r\n\r\n    static transformToRelatedBounds(bounds, matrix) {\r\n        let lt = [bounds.left, bounds.top];\r\n        let rb = [bounds.right, bounds.bottom];\r\n        let p1 = matrix.multiplyWithVertex(lt);\r\n        let p2 = matrix.multiplyWithVertex(rb);\r\n        let left = Math.min(p1[0], p2[0]);\r\n        let top = Math.min(p1[1], p2[1]);\r\n        let right = Math.max(p1[0], p2[0]);\r\n        let bottom = Math.max(p1[1], p2[1]);\r\n        return { left, top, right, bottom };\r\n    }\r\n\r\n    static transformRGBToHex(r, g, b) {\r\n        let rf = r.toString(16);\r\n        if (rf.length == 1) rf = \"0\" + rf;\r\n        let gf = g.toString(16);\r\n        if (gf.length == 1) gf = \"0\" + gf;\r\n        let bf = b.toString(16);\r\n        if (bf.length == 1) bf = \"0\" + bf;\r\n        return `#${rf}${gf}${bf}`;\r\n    }\r\n\r\n\r\n    static decomposeMatrix(matrix, QRList = true) {\r\n        return matrix.decompose(QRList);\r\n    }\r\n\r\n    static applyPose(figure, pose) {\r\n        if (!figure || !pose) return;\r\n        figure.x = pose.translation.x;\r\n        figure.y = pose.translation.y;\r\n        figure.rotation = pose.rotation;\r\n        figure.skewx = pose.skew.x;\r\n        figure.skewy = pose.skew.y;\r\n        figure.scaley = pose.scale.y;\r\n        figure.scalex = pose.scale.x;\r\n    }\r\n\r\n    static distance(x1, y1, x2, y2) {\r\n        let dx = x1 - x2;\r\n        let dy = y1 - y2;\r\n        return Math.sqrt(dx * dx + dy * dy);\r\n    }\r\n}","import EventEmitter from \"./event-emitter.js\";\r\nimport Matrix3 from \"./math/matrix3.js\";\r\nimport Utils from \"./utils.js\";\r\n\r\nconst PI2 = Math.PI * 2;\r\nconst HALF_PI = Math.PI / 2;\r\n\r\nexport default class Transformable extends EventEmitter {\r\n    constructor(props = {\r\n        x: 0, y: 0, width: 0, height: 0, scalex: 1,\r\n        scaley: 1, rotation: 0\r\n    }) {\r\n        super();\r\n        // HACK : 如果被Proxy截获，可以用这个方法获得自己\r\n        this.getTarget = () => {\r\n            if (!this.__target) this.__target = this;\r\n            return this.__target;\r\n        };\r\n        this.getTarget();\r\n        this.x = props == null || props.x == null ? 0 : props.x;\r\n        this.y = props == null || props.y == null ? 0 : props.y;\r\n        this.width = props == null || props.width == null ? 0 : props.width;\r\n        this.height = props == null || props.height == null ? 0 : props.height;\r\n        this.scalex = props == null || props.scalex == null ? 1 : props.scalex;\r\n        this.scaley = props == null || props.scaley == null ? 1 : props.scaley;\r\n        this.skewx = props == null || props.skewx == null ? 0 : props.skewx;\r\n        this.skewy = props == null || props.skewy == null ? 0 : props.skewy;\r\n        this.rotation = props == null || props.rotation == null ? 0 : props.rotation;\r\n        this._matrix = new Matrix3();\r\n        this._transformDirty = true;\r\n        this._boundsdirty = true;\r\n        this._bounds = { left: 0, top: 0, right: 0, bottom: 0 };\r\n        this._axis;\r\n        this.parent;\r\n        this._disposed = false;\r\n    }\r\n\r\n    static get PI2() {\r\n        return PI2\r\n    }\r\n\r\n    static get HALF_PI() {\r\n        return HALF_PI\r\n    }\r\n\r\n    get isDisposed() { return this._disposed; }\r\n\r\n    get width() { return this._width; }\r\n\r\n    set width(v) {\r\n        if (this._width != v) {\r\n            this._width = v;\r\n            this.fireTransformDirty();\r\n            this.fireBoundsDirty();\r\n        }\r\n    }\r\n\r\n    get height() { return this._height; }\r\n\r\n    set height(v) {\r\n        if (this._height != v) {\r\n            this._height = v;\r\n            this.fireTransformDirty();\r\n            this.fireBoundsDirty();\r\n        }\r\n    }\r\n\r\n    get scalex() {\r\n        return this._scalex;\r\n    }\r\n\r\n    set scalex(v) {\r\n        if (this._scalex != v) {\r\n            this._scalex = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get scaley() {\r\n        return this._scaley;\r\n    }\r\n\r\n    set scaley(v) {\r\n        if (this._scaley != v) {\r\n            this._scaley = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get skewx() {\r\n        return this._skewx;\r\n    }\r\n\r\n    set skewx(v) {\r\n        if (this._skewx != v) {\r\n            this._skewx = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get skewy() {\r\n        return this._skewy;\r\n    }\r\n\r\n    set skewy(v) {\r\n        if (this._skewy != v) {\r\n            this._skewy = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get worldVertices() {\r\n        let vs = this.bounds;\r\n        let localVertices = [[vs.left, vs.top], [vs.right, vs.top], [vs.right, vs.bottom], [vs.left, vs.bottom]];\r\n        let worldMatrix = this.worldMatrix;\r\n        //计算变换后的四个顶点 (顺时针)\r\n        let wv = [];\r\n        for (let i = 0; i < localVertices.length; i++) {\r\n            wv.push(worldMatrix.multiplyWithVertex(localVertices[i]));\r\n        }\r\n        return wv;\r\n    }\r\n\r\n    // 这个轴只是x和y的，因为这里不会做很强的碰撞测试，只考虑图形的bounds而已\r\n    get axis() {\r\n        if (!this._axis) {\r\n            this._axis = [[1, 0], [0, 1]];\r\n        }\r\n        return this._axis;\r\n    }\r\n\r\n    get worldAxis() {\r\n        let matrix = this.worldMatrix.clone();\r\n        let axis = this.axis;\r\n        matrix.data[2] = 0;\r\n        matrix.data[5] = 0;\r\n        let r = []\r\n        axis.forEach(a => {\r\n            r.push(matrix.multiplyWithVertexDatas(a[0], a[1]));\r\n        })\r\n        return r;\r\n    }\r\n\r\n    /**\r\n     * Figure基于变换锚点的旋转角度\r\n     * @returns {Number} 角度值\r\n     */\r\n    get rotation() {\r\n        return this._rotation;\r\n    }\r\n\r\n    set rotation(v) {\r\n        if (this._rotation != v) {\r\n            this._rotation = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(v) {\r\n        if (this._x != v) {\r\n            this._x = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(v) {\r\n        if (this._y != v) {\r\n            this._y = v;\r\n            this.fireTransformDirty();\r\n        }\r\n    }\r\n\r\n    get matrix() {\r\n        if (this._transformDirty) {\r\n            Transformable.calculateTransformableMatrix(this.x, this.y, this.width, this.height\r\n                , this.rotation, this.scalex, this.scaley, this.skewx, this.skewy, this._matrix);\r\n            this._transformDirty = false;\r\n        }\r\n        return this._matrix;\r\n    }\r\n\r\n\r\n    /**\r\n     * 不再对其进行储存，每次使用都进行计算获取\r\n     */\r\n    get worldMatrix() {\r\n        if (this.parent) {\r\n            let pm = this.parent.worldMatrix;\r\n            return pm.clone().multiply(this.matrix);\r\n        } else {\r\n            return this.matrix;\r\n        }\r\n    }\r\n\r\n    get bounds() {\r\n        if (this._boundsdirty) {\r\n            this._bounds = this.calculateLocalBounds(this._bounds);\r\n            this._boundsdirty = false;\r\n        }\r\n        return this._bounds;\r\n    }\r\n\r\n    getRelateBounds(matrix) {\r\n        if (!matrix) return this.bounds;\r\n        let vs = this.bounds;\r\n        let localVertices = [[vs.left, vs.top], [vs.right, vs.top], [vs.right, vs.bottom], [vs.left, vs.bottom]];\r\n        let wvs = [];\r\n        for (let i = 0; i < localVertices.length; i++) {\r\n            wvs.push(matrix.multiplyWithVertex(localVertices[i]));\r\n        }\r\n        let wb = { left: Infinity, top: Infinity, right: -Infinity, bottom: -Infinity };\r\n        wvs.forEach(wv => {\r\n            wb.left = Math.min(wv[0], wb.left);\r\n            wb.top = Math.min(wv[1], wb.top);\r\n            wb.right = Math.max(wv[0], wb.right);\r\n            wb.bottom = Math.max(wv[1], wb.bottom);\r\n        })\r\n        return wb;\r\n    }\r\n\r\n    calculateLocalBounds(out = { left, top, right, bottom }) {\r\n        out.left = 0;\r\n        out.top = 0;\r\n        out.right = this.width;\r\n        out.bottom = this.height;\r\n        return out;\r\n    }\r\n\r\n\r\n    get worldBounds() {\r\n        let wvs = this.worldVertices;\r\n        let wb = { left: Infinity, top: Infinity, right: -Infinity, bottom: -Infinity };\r\n        wvs.forEach(wv => {\r\n            wb.left = Math.min(wv[0], wb.left);\r\n            wb.top = Math.min(wv[1], wb.top);\r\n            wb.right = Math.max(wv[0], wb.right);\r\n            wb.bottom = Math.max(wv[1], wb.bottom);\r\n        })\r\n        return wb;\r\n    }\r\n\r\n    fireBoundsDirty() {\r\n        this._boundsdirty = true;\r\n        this.fireEvent('boundsDirty', true);\r\n    }\r\n\r\n    fireTransformDirty() {\r\n        this._transformDirty = true;\r\n        this.fireEvent('transformDirty', true);\r\n    }\r\n\r\n    /**\r\n     * 判断某个点是否在figure的bounds范围内\r\n     * @param {number} x xzuobiao\r\n     * @param {number} y yzuobiao\r\n     * @param {boolean} isWorldPoint shi bushi world zuo biao xi\r\n     * @returns \r\n     */\r\n    containsPoint(x, y, isWorldPoint = true) {\r\n        let x1 = x;\r\n        let y1 = y;\r\n        if (isWorldPoint) {\r\n            let m = this.worldMatrix.clone();\r\n            let realPoint = m.invert().multiplyWithVertexDatas(x1, y1);\r\n            x1 = realPoint[0]; y1 = realPoint[1];\r\n        }\r\n        return Utils.containsPoint(x1, y1, this.bounds)\r\n    }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return\r\n        this._disposed = true;\r\n        this.__target = null;\r\n        this.fireEvent('disposed');\r\n        super.dispose();\r\n    }\r\n\r\n\r\n    /**\r\n     * 通过图形pose计算该图形当前的变换矩阵\r\n     * @param {Number} x  默认0，图形左上角横坐标\r\n     * @param {Number} y  默认0，图形左上角纵坐标\r\n     * @param {Number} width  默认0，图形宽度\r\n     * @param {Number} height  默认0，图形高度\r\n     * @param {Number} rotation 默认0，图形旋转弧度\r\n     * @param {Number} scaleX  默认1，图形的横向伸缩量\r\n     * @param {Number} scaleY  默认1，图形的纵向伸缩量\r\n     * @param {Number} skewx  默认0，图形的横向倾斜弧度\r\n     * @param {Number} skewy  默认0，图形的纵向倾斜弧度\r\n     * @param {Number} anchor 默认为{x:0.5,y:0.5}，图形的变换锚点, 0 <= x,y <= 1\r\n     * @param {Matrix3} out \r\n     * @returns \r\n     */\r\n    static calculateTransformableMatrix(x, y, width, height,\r\n        rotation = 0, scaleX = 1, scaleY = 1, skewx = 0, skewy = 0, out = new Matrix3()) {\r\n        if (scaleX == 0 || scaleY == 0) {\r\n            return null;\r\n        }\r\n        let matrix = out.identity();\r\n        matrix = matrix.translate(x, y);\r\n\r\n        if (rotation !== 0) {\r\n            matrix.rotate(rotation);\r\n        }\r\n\r\n        if (scaleX !== 1 || scaleY !== 1) {\r\n            matrix.scale(scaleX, scaleY);//.translate(tx / scaleX - tx, ty / scaleY - ty);\r\n        }\r\n\r\n        if (skewx !== 0 || skewy !== 0) {\r\n            matrix.skew(skewx, skewy);\r\n        }\r\n        return out;\r\n    }\r\n\r\n}","import CanvasKitUtils from \"./canvaskit-utils.js\";\r\nimport Transformable from \"./transformable.js\";\r\n\r\nexport default class Drawable extends Transformable {\r\n    constructor(props) {\r\n        super(props);\r\n        this._id = CanvasKitUtils.newID();\r\n        this.children = [];\r\n        this.showChildren = true;\r\n        this.visible = true;\r\n        this.clip = false;\r\n    }\r\n\r\n    get id() { return this._id; }\r\n\r\n    set id(id) { this._id = id }\r\n\r\n    get isVisible() {\r\n        return this.visible && this.width != 0 && this.height != 0\r\n            && this.scaley != 0 && this.scalex != 0;\r\n    }\r\n\r\n    draw(ctx) {\r\n        if (!this.isVisible) return;\r\n        ctx.save();\r\n        this.beforeDrawSelf();\r\n\r\n        this.beforeTransform();\r\n        this.transform(ctx);\r\n\r\n        if (this.clip) this.applyClip(ctx);\r\n\r\n        this.drawSelf(ctx);\r\n        this.beforeDrawChildren();\r\n        this.drawChildren(ctx);\r\n        ctx.restore();\r\n    }\r\n\r\n    applyClip(ctx) {\r\n\r\n    }\r\n\r\n\r\n    beforeTransform() { }\r\n\r\n    transform(ctx) {\r\n        ctx.concat(this.matrix.data);\r\n    }\r\n\r\n    beforeDrawSelf() { }\r\n\r\n    drawSelf(painter) { }\r\n\r\n    beforeDrawChildren() { }\r\n\r\n    drawChildren(painter) {\r\n        if (!this.showChildren) return;\r\n        this.children.forEach((child) => {\r\n            child.draw(painter);\r\n        });\r\n    }\r\n\r\n    addChild(child) {\r\n        return this.insertChild(child, this.children.length);\r\n    }\r\n\r\n    insertChild(child, index) {\r\n        if (index == -1 || !child) return false;\r\n        if (child.parent != null) {\r\n            console.warn('cannot add child because it has a parent,please delete it first');\r\n            return;\r\n        }\r\n        if (index >= this.children.length) {\r\n            this.children.push(child);\r\n            child.parent = this;\r\n            this.fireEvent('addChild', {\r\n                parent: this, child: child,\r\n                index: this.children.length - 1\r\n            });\r\n            return true;\r\n        }\r\n        this.children.push(child);\r\n        child.parent = this;\r\n        for (let i = this.children.length - 1; i > index; i--) {\r\n            let temp = this.children[i];\r\n            this.children[i] = this.children[i - 1];\r\n            this.children[i - 1] = temp;\r\n        }\r\n        this.fireEvent('addChild', {\r\n            parent: this, child: child,\r\n            index: index\r\n        });\r\n        return true;\r\n    }\r\n\r\n    indexOfChild(child) {\r\n        return this.children.indexOf(child);\r\n    }\r\n\r\n    removeChild(child) {\r\n        if (!child) return;\r\n        let index = this.indexOfChild(child);\r\n        return this.removeAt(index);\r\n    }\r\n\r\n    removeAt(index) {\r\n        if (index == -1) return;\r\n        let r = this.children.splice(index, 1);\r\n        if (r && r[0]) {\r\n            let child = r[0];\r\n            child.parent = null;\r\n            this.fireEvent('removeChild', { parent: this, child: child });\r\n            return child;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @deprecated\r\n     * @param { } from \r\n     * @param {*} to \r\n     * @returns \r\n     */\r\n    moveIndex(from, to) {\r\n        if (from == to || from < 0 || from > this.children.length - 1\r\n            || to < 0 || to > this.children.length - 1) {\r\n            console.warn(`invalidate from/to index value :${from} -> ${to}`);\r\n            return;\r\n        }\r\n        if (from > to) {\r\n            for (let i = from; i > to; i--) {\r\n                let t = this.children[from - 1];\r\n                this.children[from - 1] = this.children[from];\r\n                this.children[from] = t;\r\n            }\r\n        }\r\n        if (from < to) {\r\n            for (let i = from; i < to; i++) {\r\n                let t = this.children[from];\r\n                this.children[from] = this.children[from + 1];\r\n                this.children[from + 1] = t;\r\n            }\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return;\r\n        this.children.forEach((child) => {\r\n            child.dispose();\r\n        })\r\n        this.children.length = 0;\r\n        super.dispose();\r\n    }\r\n\r\n    async getSVGString() {\r\n        let str = `<${this.getSVGLabelName()} id=\"${this.id}\"`;\r\n        let postionStr = this.getSVGPositionString();\r\n        if (postionStr) str += ` ${postionStr}`;\r\n        let dimension = this.getSVGDimensionString();\r\n        if (dimension) str += ` ${dimension}`;\r\n        let extension = this.getSVGExtensionString();\r\n        if (extension) str += ` ${extension}`;\r\n        if (this.children.length > 0) {\r\n            str += \">\";\r\n            for (let i = 0; i < this.children.length; i++) {\r\n                const child = this.children[i];\r\n                try {\r\n                    let csvg = await child.getSVGString();\r\n                    if (csvg) {\r\n                        str += `     \\n<g transform=\"${child.getSVGTransformString()}\">`\r\n                        str += `        \\n${csvg}`;\r\n                        str += `     \\n</g>`\r\n                    }\r\n                } catch (e) {\r\n                    // 容错\r\n                    console.warn(e);\r\n                }\r\n            }\r\n            str += `\\n</${this.getSVGLabelName()}>`;\r\n            return str;\r\n        } else {\r\n            str += '/>';\r\n            return str;\r\n        }\r\n    }\r\n\r\n    getSVGTransformString() {\r\n        let str = `translate(${this.x} ${this.y})`;\r\n        if (this.rotation != 0) {\r\n            if (str) str += ' '; else str = '';\r\n            str += `rotate(${this.rotation * 180 / Math.PI})`\r\n        }\r\n        if (this.scalex != 1 || this.scaley != 1) {\r\n            if (str) str += ' '; else str = '';\r\n            str += `scale(${this.scalex} ${this.scaley})`\r\n        }\r\n        if (this.skewx != 0) {\r\n            if (str) str += ' '; else str = '';\r\n            str += `skewX(${this.skewx * 180 / Math.PI})`\r\n        }\r\n        if (this.skewy != 0) {\r\n            if (str) str += ' '; else str = '';\r\n            str += `skewY(${this.skewy * 180 / Math.PI})`\r\n        }\r\n        return str;\r\n    }\r\n\r\n    getSVGPositionString() {\r\n        // 默认是0，0\r\n    }\r\n\r\n    getSVGDimensionString() {\r\n        return `width=\"${this.width}\" height=\"${this.height}\"`;\r\n    }\r\n\r\n    getSVGLabelName() {\r\n        return '';\r\n    }\r\n\r\n    getSVGExtensionString() { }\r\n}","\r\nfunction projectionsOnAxis(vertices, axis) {\r\n    let min = Infinity;\r\n    let max = -Infinity;\r\n    vertices.forEach(vertex => {\r\n        let projection = dot(axis[0], axis[1], vertex[0], vertex[1]);\r\n        min = Math.min(min, projection);\r\n        max = Math.max(max, projection);\r\n    });\r\n    return { min, max };\r\n}\r\n\r\nfunction dot(x1, y1, x2, y2) {\r\n    return (x1 * x2 + y1 * y2);\r\n}\r\n\r\nfunction isContact(project1, project2) {\r\n    if (project1.min > project2.max || project2.min > project1.max) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * 该方法是用SAT算法检测选择框是否和图形相交。\r\n */\r\nfunction contactTest(vertices1, axis1, vertices2, axis2) {\r\n    let k = {};\r\n    let r1 = f(axis1, k);\r\n    if (!r1) return false;\r\n    r1 = f(axis2, k);\r\n    if (!r1) return false;\r\n    return true;\r\n\r\n    function f(axis2, k) {\r\n        for (let i = 0; i < axis2.length; i++) {\r\n            let axis = axis2[i];\r\n            let xie = axis[0] == 0 ? Infinity : axis[1] / axis[0];\r\n            if (k[xie]) continue;\r\n            k[xie] = true;\r\n            let project1 = projectionsOnAxis(vertices1, axis);\r\n            let project2 = projectionsOnAxis(vertices2, axis);\r\n            let contacted = isContact(project1, project2);\r\n            if (!contacted) return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n\r\nexport default {\r\n    contactTest: contactTest\r\n}","import utils from '../utils.js';\r\n\r\nconst NW_INDEX = 0;\r\nconst NE_INDEX = 1;\r\nconst SW_INDEX = 2;\r\nconst SE_INDEX = 3;\r\n\r\nexport default class QuadTreeNode {\r\n    constructor(bounds = { left: 0, top: 0, right: 0, bottom: 0 },\r\n        maxNodes = 5, currentDeepth = 0, maxDeepth = 5) {\r\n        if (bounds == null) throw 'QuadTree Bounds can not be null'\r\n        this.totalNodesCount = 0;\r\n        this.bounds = bounds;\r\n        this.maxNodes = maxNodes;\r\n        this.currentDeepth = currentDeepth;\r\n        this.maxDeepth = maxDeepth;\r\n        this.nodes = [];\r\n        this.areas = Array(4);\r\n        this.parent;\r\n    }\r\n\r\n    findNodes(bounds) {\r\n        if (QuadTreeNode.isContacted(bounds, this.bounds)) {\r\n            if (this.nodes.length == 0) {\r\n                let nodes = [];\r\n                for (let i = this.areas.length - 1; i >= 0; i--) {\r\n                    let area = this.areas[i];\r\n                    if (area) {\r\n                        let r = area.findNodes(bounds);\r\n                        if (r != null) {\r\n                            r.forEach((n) => {\r\n                                if (nodes.indexOf(n) == -1)\r\n                                    nodes.push(n)\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                return nodes;\r\n            } else {\r\n                return this.nodes;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    findSingleNode(x, y) {\r\n        if (QuadTreeNode.containsPoint(x, y, this.bounds)) {\r\n            if (this.nodes.length == 0) {\r\n                for (let i = this.areas.length - 1; i >= 0; i--) {\r\n                    let area = this.areas[i];\r\n                    if (area) {\r\n                        let r = area.findSingleNode(x, y);\r\n                        if (r != null) return r;\r\n                    }\r\n                }\r\n                return null;\r\n            } else {\r\n                for (let i = this.nodes.length - 1; i >= 0; i--) {\r\n                    let node = this.nodes[i];\r\n                    if (QuadTreeNode.containsPoint(x, y, node.bounds)) {\r\n                        return node;\r\n                    }\r\n                }\r\n                return null;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    _getArea(index) {\r\n        return this.areas[index];\r\n    }\r\n\r\n    splitInsert(node) {\r\n        let l = this.bounds.left;\r\n        let r = this.bounds.right;\r\n        let t = this.bounds.top;\r\n        let b = this.bounds.bottom;\r\n        let cx = Math.floor((r + l) / 2);\r\n        let cy = Math.floor((b + t) / 2);\r\n\r\n        let nw = this.areas[NW_INDEX];\r\n        if (!nw) {\r\n            nw = new QuadTreeNode({ left: l, top: t, right: cx, bottom: cy },\r\n                this.maxNodes, this.currentDeepth + 1, this.maxDeepth);\r\n            this.areas[NW_INDEX] = nw;\r\n        }\r\n        nw.insert(node);\r\n\r\n        let ne = this.areas[NE_INDEX];\r\n        if (!ne) {\r\n            ne = new QuadTreeNode({ left: cx, top: t, right: r, bottom: cy },\r\n                this.maxNodes, this.currentDeepth + 1, this.maxDeepth);\r\n            this.areas[NE_INDEX] = ne;\r\n        }\r\n        ne.insert(node);\r\n\r\n        let sw = this.areas[SW_INDEX];\r\n        if (!sw) {\r\n            sw = new QuadTreeNode({ left: l, top: cy, right: cx, bottom: b },\r\n                this.maxNodes, this.currentDeepth + 1, this.maxDeepth);\r\n            this.areas[SW_INDEX] = sw;\r\n        }\r\n        sw.insert(node);\r\n\r\n        let se = this.areas[SE_INDEX];\r\n        if (!se) {\r\n            se = new QuadTreeNode({ left: cx, top: cy, right: r, bottom: b },\r\n                this.maxNodes, this.currentDeepth + 1, this.maxDeepth);\r\n            this.areas[SE_INDEX] = se;\r\n        }\r\n        se.insert(node);\r\n    }\r\n\r\n    _createRelationShip(node, relation) {\r\n        if (!node.__related_quad)\r\n            node.__related_quad = [];\r\n        if (node.__related_quad.indexOf(relation) == -1)\r\n            node.__related_quad.push(relation);\r\n    }\r\n\r\n    _deleteRelationShip(node, relation) {\r\n        if (node.__related_quad) {\r\n            let index = node.__related_quad.indexOf(relation);\r\n            if (index != -1) {\r\n                node.__related_quad.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    insert(node) {\r\n        if (QuadTreeNode.isContacted(node.bounds, this.bounds)) {\r\n            if (this.totalNodesCount >= this.maxNodes) {\r\n                this.totalNodesCount++;\r\n                if (this.currentDeepth == this.maxDeepth) {\r\n                    this.nodes.push(node);\r\n                    this._createRelationShip(node, this);\r\n                    return true;\r\n                } else {\r\n                    this.nodes.forEach((n) => {\r\n                        this._deleteRelationShip(n, this);\r\n                        this.splitInsert(n);\r\n                    });\r\n                    this.splitInsert(node);\r\n                    this._deleteRelationShip(node, this);\r\n                    this.nodes.length = 0;\r\n                    return true;\r\n                }\r\n            } else {\r\n                this.totalNodesCount++;\r\n                this.nodes.push(node);\r\n                this._createRelationShip(node, this);\r\n                return true;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    merge() {\r\n        this.areas.forEach((area) => {\r\n            if (area) {\r\n                area.nodes.forEach((n) => {\r\n                    this.nodes.push(n);\r\n                })\r\n                area.nodes.length = 0;\r\n            }\r\n        })\r\n        for (let i = 0; i < this.areas.length; i++) {\r\n            this.areas[i] = null;\r\n        }\r\n    }\r\n\r\n    static deleteNodeForce(node) {\r\n        if (!node) return;\r\n        let relateds = node.__related_quad;\r\n        if (relateds == null) {\r\n            return;\r\n        }\r\n        let decreased = {};\r\n        let needMerge = {};\r\n        relateds.forEach((relate) => {\r\n            let index = relate.nodes.indexOf(node);\r\n            if (index != -1) {\r\n                relate.nodes.splice(index, 1);\r\n                relate.decreaseTotalNodes(decreased, needMerge);\r\n            }\r\n        });\r\n        relateds.length = 0;\r\n    }\r\n\r\n    decreaseTotalNodes(decreased = {}, needMerge = {}) {\r\n        if (decreased[this]) return;\r\n        decreased[this] = true;\r\n        this.totalNodesCount--;\r\n        if (this.totalNodesCount < this.maxNodes) {\r\n            needMerge[this] = true;\r\n        }\r\n        if (this.parent) {\r\n            this.parent.decreaseTotalNodes(decreased, needMerge);\r\n        }\r\n    }\r\n\r\n    remove(node) {\r\n        if (QuadTreeNode.isContacted(node.bounds, this.bounds)) {\r\n            if (this.nodes.length != 0) {\r\n                let index = this.nodes.indexOf(node);\r\n                if (index == -1) return false;\r\n                this.nodes.splice(index, 1);\r\n                this.totalNodesCount--;\r\n                return true;\r\n            } else {\r\n                let nw = this.areas[0];\r\n                let dr = false;\r\n                if (!nw) {\r\n                    dr |= nw.remove(node);\r\n                }\r\n\r\n                let ne = this.areas[1];\r\n                if (!ne) {\r\n                    dr |= ne.remove(node);\r\n                }\r\n\r\n                let sw = this.areas[2];\r\n                if (!sw) {\r\n                    dr |= sw.remove(node);\r\n                }\r\n\r\n                let se = this.areas[3];\r\n                if (!se) {\r\n                    dr |= se.remove(node);\r\n                }\r\n                if (dr) {\r\n                    this.totalNodesCount--;\r\n                    if (this.totalNodesCount < this.maxNodes) {\r\n                        this.merge();\r\n                    }\r\n                } else {\r\n                    console.warn('这里发生了buuuugggg');\r\n                }\r\n                return dr;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        this.nodes.length = 0;\r\n        this.nodes = null;\r\n        this.areas.forEach((a) => {\r\n            if (a) a.dispose();\r\n        })\r\n        this.areas = null;\r\n    }\r\n\r\n    static containsPoint(x, y, bounds) {\r\n        return utils.containsPoint(x, y, bounds);\r\n    }\r\n\r\n    static isContacted(rect1, rect2) {\r\n        return utils.isContacted(rect1, rect2);\r\n    }\r\n}","import CanvasKitUtils from \"./canvaskit-utils.js\";\r\nimport Drawable from \"./drawable.js\";\r\nimport sat from \"./math/sat.js\";\r\nimport QuadTreeNode from \"./quadtree/quadtree-node.js\";\r\nimport Utils from \"./utils.js\";\r\n\r\nexport default class Figure extends Drawable {\r\n    constructor(props) {\r\n        super(props);\r\n        this.name = props == null || props.name == null ? 'Figure' : props.name;\r\n        this.useQuadTree = false; // 默认不使用QuadTree\r\n        this.quadtree = new QuadTreeNode({ left: 0, top: 0, right: this.width, bottom: this.height });\r\n    }\r\n\r\n    get width() { return super.width }\r\n    set width(w) {\r\n        if (this.width != w) {\r\n            super.width = w;\r\n            this._recreateQuadTree();\r\n        }\r\n    }\r\n\r\n    get height() { return super.height }\r\n    set height(w) {\r\n        if (this.height != w) {\r\n            super.height = w;\r\n            this._recreateQuadTree();\r\n        }\r\n    }\r\n\r\n    // 只克隆自身的大小位置等信息\r\n    simpleClone() { }\r\n\r\n    insertChildQuadNode(child) {\r\n        if (!this.useQuadTree) return;\r\n        if (!this.quadtree) {\r\n            this.quadtree = new QuadTreeNode({\r\n                left: 0, top: 0,\r\n                right: this.width, bottom: this.height\r\n            });\r\n        }\r\n        this.quadtree.insert(child.getQuadTreeNode());\r\n        console.log('新加入quadnode', this.quadtree, this.quadtree.nodes.length);\r\n    }\r\n\r\n    get matrix() {\r\n        if (this._transformDirty) {\r\n            this.updateRelatedQuadTree();\r\n        }\r\n        return super.matrix;\r\n    }\r\n\r\n    updateRelatedQuadTree() {\r\n        if (this._quadTreeNode && this.parent.useQuadTree) {\r\n            console.log('位置改变更新quadnode', this._quadTreeNode);\r\n            QuadTreeNode.deleteNodeForce(this._quadTreeNode);\r\n            console.log('强制删除quadnode', this.parent.quadtree);\r\n            this._quadTreeNode = null;\r\n            // Promise.resolve().then(() => {\r\n            if (this.parent) {\r\n                this.parent.insertChildQuadNode(this);\r\n            }\r\n            // });\r\n        }\r\n    }\r\n\r\n    _recreateQuadTree() {\r\n        if (!this.useQuadTree) return;\r\n        if (this._reQT == null) {\r\n            this._reQT = 0;\r\n        }\r\n        this._reQT++;\r\n        let id = this._reQT;\r\n        // Promise.resolve(id).then((id) => {\r\n        if (id != this._reQT) {\r\n            return;\r\n        }\r\n        if (this.quadtree) this.quadtree.dispose();\r\n        this.quadtree = new QuadTreeNode({\r\n            left: 0, top: 0,\r\n            right: this.width, bottom: this.height\r\n        });\r\n        this.children.forEach((child) => {\r\n            let qn = child.getQuadTreeNode(this.matrix);\r\n            if (qn) this.quadtree.insert(qn);\r\n        });\r\n        this._reQT = null;\r\n        // });\r\n    }\r\n\r\n    getQuadTreeNode() {\r\n        if (!this._quadTreeNode) {\r\n            let b = this.worldBounds;\r\n            this._quadTreeNode = {\r\n                bounds: {\r\n                    left: b.left, top: b.top,\r\n                    right: b.right, bottom: b.bottom\r\n                }, value: this\r\n            };\r\n        }\r\n        return this._quadTreeNode;\r\n    }\r\n\r\n    insertChild(child, index) {\r\n        let flag = super.insertChild(child, index);\r\n        if (!flag) return flag;\r\n        if (this.parent) {\r\n            this.parent.recordAdd(child);\r\n        } else {\r\n            this.recordAdd(child);\r\n        }\r\n        this.insertChildQuadNode(child);\r\n        return flag;\r\n    }\r\n\r\n    recordAdd(child) { };\r\n\r\n    recordRemove(child) { }\r\n\r\n    removeChild(child) {\r\n        let removed = super.removeChild(child);\r\n        if (!removed) return;\r\n        if (this.parent) {\r\n            this.parent.recordRemove(child);\r\n        } else {\r\n            this.recordRemove(child);\r\n        }\r\n        if (child && this.quadtree && this.useQuadTree) {\r\n            QuadTreeNode.deleteNodeForce(child._quadTreeNode);\r\n            console.log('删除quadnode', child._quadTreeNode);\r\n        }\r\n        return removed;\r\n    }\r\n\r\n    /**\r\n     * 只返回自己的子节点，不涉及孙子节点\r\n     * @param {Object} bounds  这是一个world bounds\r\n     */\r\n    findChildren(bounds) {\r\n        let m = this.worldMatrix.clone();\r\n        m.invert();\r\n        try {\r\n            let b = Utils.transformToRelatedBounds(bounds, m);\r\n            if (this.quadtree && this.useQuadTree) {\r\n                let nodes = this.quadtree.findNodes(b);\r\n                return nodes;\r\n            } else {\r\n                let nodes = [];\r\n                this.children.forEach(c => {\r\n                    if (Utils.isContacted(c.worldBounds, bounds)) {\r\n                        nodes.push(c);\r\n                    }\r\n                })\r\n                return nodes;\r\n            }\r\n        } catch (e) {\r\n            console.error(e)\r\n        }\r\n    }\r\n\r\n    findFigure(x, y) {\r\n        if (!this.isVisible) return null;\r\n        let m = this.worldMatrix.clone();\r\n        let realPoint = m.invert().multiplyWithVertexDatas(x, y);\r\n        if (this.containsPoint(realPoint[0], realPoint[1], false)) {\r\n            if (this.quadtree && this.useQuadTree) {\r\n                let qnode = this.quadtree.findSingleNode(realPoint[0], realPoint[1]);\r\n                // 这里四叉树返回结果是一个近似的，需要二次判断哦\r\n                if (qnode) {\r\n                    let figure = qnode.value;\r\n                    return figure.findFigure(x, y);\r\n                }\r\n                return this;\r\n            } else {\r\n                for (let i = this.children.length - 1; i >= 0; i--) {\r\n                    let child = this.children[i];\r\n                    let f = child.findFigure(x, y);\r\n                    if (f) return f;\r\n                }\r\n                return this;\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    drawSelf(ctx) {\r\n        super.drawSelf(ctx);\r\n        // DEBUG:\r\n        // {\r\n        //     let paint = CanvasKitUtils.newPaint();\r\n        //     if (this.useQuadTree) {\r\n        //         paint.setStyle(CanvasKitUtils.strokeStyle);\r\n        //         paint.setColorComponents(1, 0, 0, 1);\r\n        //         drawQuadTreeArea(this.quadtree);\r\n        //         paint.delete();\r\n        //         function drawQuadTreeArea(node) {\r\n        //             if (node) {\r\n        //                 if (node.nodes.length != 0) {\r\n        //                     let b = node.bounds;\r\n        //                     ctx.drawRect(CanvasKitUtils.newXYWHRect(b.left, b.top,\r\n        //                         b.right - b.left, b.bottom - b.top), paint);\r\n        //                 }\r\n        //                 node.areas.forEach(drawQuadTreeArea);\r\n        //             }\r\n        //         }\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    dispose() {\r\n        if (this.quadtree) this.quadtree.dispose();\r\n        super.dispose();\r\n    }\r\n}","import CanvasKitUtils from \"../canvaskit-utils.js\";\r\nimport utils from \"../canvaskit-utils.js\"\r\nimport Figure from \"../figure.js\";\r\nimport u from \"../utils.js\";\r\n\r\nexport default class Shape extends Figure {\r\n    constructor(props) {\r\n        super(props);\r\n        this._paint = utils.newPaint();\r\n        this.setAntiAlias(true);\r\n\r\n        this.r = props == null || props.r == null ? 255 : props.r;\r\n        this.g = props == null || props.g == null ? 255 : props.g;\r\n        this.b = props == null || props.b == null ? 255 : props.b;\r\n        this.a = props == null || props.a == null ? 1 : props.a;\r\n\r\n        this.br = props == null || props.br == null ? 0 : props.br;\r\n        this.bg = props == null || props.bg == null ? 0 : props.bg;\r\n        this.bb = props == null || props.bb == null ? 0 : props.bb;\r\n        this.ba = props == null || props.ba == null ? 1 : props.ba;\r\n\r\n        this.alpha = props == null || props.alpha == null ? 1 : props.alpha;\r\n        this.fill = props == null || props.fill == null ? true : props.fill;\r\n        this.showBorder = props == null || props.showBorder == null ? true : props.showBorder;\r\n        this.borderWidth = props == null || props.borderWidth == null ? 1 : props.borderWidth;\r\n        this.cap = props == null || props.cap == null ? CanvasKitUtils.StrokeCap.Butt : props.cap;\r\n        this.join = props == null || props.join == null ? CanvasKitUtils.StrokeJoin.Bevel : props.join;\r\n        this.miter = props == null || props.miter == null ? 2 : props.miter;\r\n    }\r\n\r\n\r\n    setAntiAlias(f) {\r\n        if (!this._paint) return;\r\n        this.getTarget()._paint.setAntiAlias(f);\r\n    }\r\n\r\n    get cap() {\r\n        if (!this._paint) return;\r\n        return this.getTarget()._paint.getStrokeCap();\r\n    }\r\n\r\n    set cap(c) {\r\n        if (!this._paint) return;\r\n        this.getTarget()._paint.setStrokeCap(c);\r\n    }\r\n\r\n    get join() {\r\n        if (!this._paint) return;\r\n        return this.getTarget()._paint.getStrokeJoin();\r\n    }\r\n\r\n    set join(c) {\r\n        if (!this._paint) return;\r\n        this.getTarget()._paint.setStrokeJoin(c);\r\n    }\r\n\r\n    get miter() {\r\n        if (!this._paint) return;\r\n        return this.getTarget()._paint.getStrokeMiter();\r\n    }\r\n\r\n    set miter(c) {\r\n        if (!this._paint) return;\r\n        this.getTarget()._paint.setStrokeMiter(c);\r\n    }\r\n\r\n    get borderWidth() {\r\n        if (!this._paint) return;\r\n        return this.getTarget()._paint.getStrokeWidth();\r\n    }\r\n\r\n    set borderWidth(w) {\r\n        if (!this._paint) return;\r\n        this.getTarget()._paint.setStrokeWidth(w);\r\n    }\r\n\r\n    get width() {\r\n        return super.width;\r\n    }\r\n\r\n    set width(w) {\r\n        if (w != this.width) {\r\n            super.width = w;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n    get height() {\r\n        return super.height;\r\n    }\r\n\r\n    set height(w) {\r\n        if (w != this.height) {\r\n            super.height = w;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n    deletePath() {\r\n        if (this._path) {\r\n            this.getTarget()._path.delete();\r\n            this._path = null;\r\n        }\r\n    }\r\n\r\n    fireShapeDirty() {\r\n        this.deletePath();\r\n        this.fireBoundsDirty();\r\n        this.updateRelatedQuadTree();\r\n        this.fireEvent('shapeDirty');\r\n    }\r\n\r\n    getPath() {\r\n        if (!this._path) {\r\n            this._path = utils.newPath();\r\n            this.drawPath(this._path);\r\n        }\r\n        return this._path;\r\n    }\r\n\r\n    applyClip(ctx) {\r\n        let path = this.getPath();\r\n        if (path) ctx.clipPath(path, CanvasKitUtils.ClipOp.Intersect, true);\r\n    }\r\n\r\n    drawSelf(canvas) {\r\n        if (this.alpha <= 0) return;\r\n        let path = this.getPath();\r\n        if (path) {\r\n            if (this.a > 0 && this.fill) {\r\n                this._paint.setStyle(utils.fillStyle);\r\n                this._paint.setColorComponents(this.r / 255, this.g / 255, this.b / 255,\r\n                    this.a * this.alpha);\r\n                canvas.drawPath(path, this._paint);\r\n            }\r\n            if (this.showBorder && this.borderWidth > 0 && this.ba > 0) {\r\n                this._paint.setStyle(utils.strokeStyle);\r\n                this._paint.setColorComponents(this.br / 255, this.bg / 255, this.bb / 255,\r\n                    this.ba * this.alpha);\r\n                canvas.drawPath(path, this._paint);\r\n            }\r\n        }\r\n\r\n        //debug: 绘制bounds\r\n        // {\r\n        // let b = this.bounds;\r\n        // canvas.drawRect(CanvasKitUtils.newXYWHRect(b.left, b.top,\r\n        //     b.right - b.left, b.bottom - b.top),\r\n        //     this._paint);\r\n        // }\r\n    }\r\n\r\n    drawPath(path) { }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return;\r\n        this.deletePath();\r\n        this.deletePaint();\r\n        super.dispose();\r\n    }\r\n\r\n    deletePaint() {\r\n        if (this._paint) {\r\n            this.getTarget()._paint.delete();\r\n            this._paint = null;\r\n        }\r\n    }\r\n\r\n    getSVGExtensionString() {\r\n        let str;\r\n        if (this.fill) {\r\n            str = `fill=\"${u.transformRGBToHex(this.r, this.g, this.b)}\"`\r\n            if (this.a != 1) {\r\n                str += ` fill-opacity:\"${this.a}\"`;\r\n            }\r\n        } else {\r\n            str = 'fill=\"none\"';\r\n        }\r\n\r\n        if (this.showBorder) {\r\n            if (!str) str = '';\r\n            str += ` stroke=\"${u.transformRGBToHex(this.br, this.bg, this.bb)}\"`\r\n            str += ` stroke-width=\"${this.borderWidth}\"`\r\n            let join = utils.getJoinText(this.join);\r\n            if (join) str += ` stroke-linejoin=\"${join}\"`\r\n            if (join == 'miter') str += ` stroke-miterlimit=\"${this.miter}\"`\r\n            let cap = utils.getCapText(this.cap);\r\n            if (cap) str += ` stroke-linecap=\"${cap}\"`\r\n            if (this.ba != 1) {\r\n                str += ` stroke-opacity=\"${this.ba}\"`;\r\n            }\r\n        } else {\r\n            if (!str) str = '';\r\n            str += 'stroke=\"none\"';\r\n        }\r\n        return str;\r\n    }\r\n\r\n}","import CanvasKitUtils from \"../canvaskit-utils.js\";\r\nimport Shape from \"./shape.js\";\r\n\r\nexport default class Rect extends Shape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.radiusx = props == null || props.radiusx == null ? 0 : props.radiusx;\r\n        this.radiusy = props == null || props.radiusy == null ? 0 : props.radiusy;\r\n        if (props != null && props.radius != null) {\r\n            this.radius = props.radius;\r\n        }\r\n    }\r\n\r\n    set radius(r) {\r\n        this.radiusy = r;\r\n        this.radiusx = r;\r\n    }\r\n\r\n    get radiusx() {\r\n        return this._radiusx;\r\n    }\r\n\r\n    set radiusx(x) {\r\n        if (this._radiusx != x) {\r\n            this._radiusx = x;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n\r\n    get radiusy() {\r\n        return this._radiusy;\r\n    }\r\n\r\n    set radiusy(y) {\r\n        if (this._radiusy != y) {\r\n            this._radiusy = y;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n\r\n    drawPath(path) {\r\n        let rect = CanvasKitUtils.newXYWHRect(0, 0, this.width, this.height);\r\n        if (this.radiusx != null && this.radiusy != null &&\r\n            (this.radiusx != 0 || this.radiusy != 0)) {\r\n            rect = CanvasKitUtils.newRRectXY(rect, this.radiusx, this.radiusy);\r\n            path.addRRect(rect);\r\n        } else {\r\n            path.addRect(rect);\r\n        }\r\n    }\r\n}","import CanvasKitUtils from \"./canvaskit-utils.js\";\r\nimport Figure from \"./figure.js\";\r\nimport Rect from \"./shape/rect.js\";\r\n\r\nexport default class Group extends Figure {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    get showBorder() {\r\n        return this._getAnyPropertyValue('showBorder', true);\r\n    }\r\n\r\n    set showBorder(s) {\r\n        this._setAllChildren('showBorder', s);\r\n    }\r\n\r\n    get borderWidth() {\r\n        return this._getAnyPropertyValue('borderWidth', 0);\r\n    }\r\n\r\n    set borderWidth(s) {\r\n        this._setAllChildren('borderWidth', s);\r\n    }\r\n\r\n    get miter() {\r\n        return this._getAnyPropertyValue('miter', 0);\r\n    }\r\n\r\n    set miter(s) {\r\n        this._setAllChildren('miter', s);\r\n    }\r\n\r\n    get join() {\r\n        return this._getAnyPropertyValue('join', CanvasKitUtils.StrokeJoin.Bevel);\r\n    }\r\n\r\n    set join(s) {\r\n        this._setAllChildren('join', s);\r\n    }\r\n\r\n\r\n    get cap() {\r\n        return this._getAnyPropertyValue('cap', CanvasKitUtils.StrokeCap.Butt);\r\n    }\r\n\r\n    set cap(s) {\r\n        this._setAllChildren('cap', s);\r\n    }\r\n\r\n    get br() {\r\n        return this._getAnyPropertyValue('br', 0);\r\n    }\r\n\r\n    set br(v) {\r\n        this._setAllChildren('br', v);\r\n    }\r\n\r\n    get bb() {\r\n        return this._getAnyPropertyValue('bb', 0);\r\n    }\r\n\r\n    set bb(v) {\r\n        this._setAllChildren('bb', v);\r\n    }\r\n\r\n    get bg() {\r\n        return this._getAnyPropertyValue('bg', 0);\r\n    }\r\n\r\n    set bg(v) {\r\n        this._setAllChildren('bg', v);\r\n    }\r\n\r\n    get ba() {\r\n        return this._getAnyPropertyValue('ba', 1);\r\n    }\r\n\r\n    set ba(v) {\r\n        this._setAllChildren('ba', v);\r\n    }\r\n\r\n\r\n    get fill() {\r\n        return this._getAnyPropertyValue('fill', true);\r\n    }\r\n\r\n    set fill(v) {\r\n        this._setAllChildren('fill', v);\r\n    }\r\n\r\n    get r() {\r\n        return this._getAnyPropertyValue('r', 0);\r\n    }\r\n\r\n    set r(v) {\r\n        this._setAllChildren('r', v);\r\n    }\r\n\r\n    get b() {\r\n        return this._getAnyPropertyValue('b', 0);\r\n    }\r\n\r\n    set b(v) {\r\n        this._setAllChildren('b', v);\r\n    }\r\n\r\n    get g() {\r\n        return this._getAnyPropertyValue('g', 0);\r\n    }\r\n\r\n    set g(v) {\r\n        this._setAllChildren('g', v);\r\n    }\r\n\r\n    get a() {\r\n        return this._getAnyPropertyValue('a', 1);\r\n    }\r\n\r\n    set a(v) {\r\n        this._setAllChildren('a', v);\r\n    }\r\n\r\n    _getAnyPropertyValue(property, defaultValue) {\r\n        if (this.children.length == 0) return defaultValue;\r\n        let v = this.children[0][property];\r\n        for (let index = 1; index < this.children.length; index++) {\r\n            const child = this.children[index];\r\n            if (child[property] != v) return defaultValue;\r\n        }\r\n        return v;\r\n    }\r\n\r\n    _setAllChildren(property, value) {\r\n        for (let index = 0; index < this.children.length; index++) {\r\n            const child = this.children[index];\r\n            child[property] = value;\r\n        }\r\n    }\r\n\r\n    getPath() {\r\n        if (!this._path) {\r\n            this.getTarget()._path = CanvasKitUtils.newPath();\r\n            this.children.forEach(child => {\r\n                if (child.getPath) {\r\n                    let cp = child.getTarget().getPath().copy();\r\n                    cp.transform(child.matrix.data);\r\n                    this.getTarget()._path.addPath(cp);\r\n                }\r\n            })\r\n        }\r\n        return this._path;\r\n    }\r\n\r\n    insertChild(child, index) {\r\n        let r = super.insertChild(child, index);\r\n        if (r) {\r\n            this.deletePath();\r\n            child.on('transformDirty', this._childDirty)\r\n            child.on('boundsDirty', this._childDirty)\r\n        }\r\n        return r;\r\n    }\r\n\r\n    _childDirty = () => {\r\n        this.deletePath();\r\n    }\r\n\r\n    removeAt(index) {\r\n        let c = super.removeAt(index);\r\n        if (c) {\r\n            this.deletePath();\r\n            c.off('transformDirty', this._childDirty)\r\n            c.off('boundsDirty', this._childDirty)\r\n        }\r\n        return c;\r\n    }\r\n    deletePath() {\r\n        if (this._path) {\r\n            this.getTarget()._path.delete();\r\n            this._path = null;\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return;\r\n        this.deletePath();\r\n        this.children.forEach(c => {\r\n            c.off('transformDirty', this._childDirty)\r\n            c.off('boundsDirty', this._childDirty)\r\n        })\r\n        super.dispose();\r\n    }\r\n}","import EventEmitter from \"./event-emitter.js\";\r\n\r\nexport default class Point extends EventEmitter {\r\n    constructor(x = 0, y = 0, type = 0) {\r\n        super();\r\n        this.x = x == null ? 0 : x;\r\n        this.y = y == null ? 0 : y;\r\n        this._type = type == null ? 0 : type; //表示直连\r\n        this.parent;\r\n    }\r\n\r\n    get type() { return this._type }\r\n\r\n    set type(t) {\r\n        if (this._type != t) {\r\n            this._type = t;\r\n            // 需不需要刷新？？\r\n        }\r\n    }\r\n\r\n    fireDirty() {\r\n        this.fireEvent('dirty', true);\r\n    }\r\n\r\n    get x() { return this._x; }\r\n    set x(v) {\r\n        if (this._x != v) {\r\n            this._x = v;\r\n            this.fireDirty();\r\n        }\r\n    };\r\n\r\n    get y() { return this._y; }\r\n    set y(v) {\r\n        if (this._y != v) {\r\n            this._y = v;\r\n            this.fireDirty();\r\n        }\r\n    };\r\n\r\n    get in() { return this._in; }\r\n    set in(i) {\r\n        if (i != this._in) {\r\n            this._in = i;\r\n            this.fireDirty();\r\n        }\r\n    }\r\n    get out() { return this._out; }\r\n    set out(i) {\r\n        if (i != this._out) {\r\n            this._out = i;\r\n            this.fireDirty();\r\n        }\r\n    }\r\n\r\n    get inX() { if (this.in) return this.in[0] }\r\n    set inX(x) {\r\n        if (this._in == null) this._in = [this.x, this.y];\r\n        if (x != this._in[0]) {\r\n            this._in[0] = x;\r\n            this.fireDirty();\r\n        }\r\n    }\r\n    get inY() { if (this.in) return this.in[1] }\r\n    set inY(y) {\r\n        if (this._in == null) this._in = [this.x, this.y];\r\n        if (y != this._in[1]) {\r\n            this._in[1] = y;\r\n            this.fireDirty();\r\n        }\r\n    }\r\n\r\n    get outX() { if (this.out) return this.out[0] }\r\n    set outX(x) {\r\n        if (this._out == null) this._out = [this.x, this.y];\r\n        if (x != this._out[0]) {\r\n            this._out[0] = x;\r\n            this.fireDirty();\r\n        }\r\n    }\r\n    get outY() { if (this.out) return this.out[1] }\r\n    set outY(y) {\r\n        if (this._out == null) this._out = [this.x, this.y];\r\n        if (y != this._out[1]) {\r\n            this._out[1] = y;\r\n            this.fireDirty();\r\n        }\r\n    }\r\n\r\n    copyFrom(point) {\r\n        if (this.equals(point)) return;\r\n        this.type = point.type;\r\n        this.x = point.x;\r\n        this.y = point.y;\r\n        if (point.in) {\r\n            this.inX = point.inX;\r\n            this.inY = point.inY;\r\n        } else {\r\n            this._in = null;\r\n        }\r\n        if (point.out) {\r\n            this.outX = point.outX;\r\n            this.outY = point.outY;\r\n        } else {\r\n            this._out = null;\r\n        }\r\n    }\r\n\r\n    clone() {\r\n        let p = new Point();\r\n        p.copyFrom(this);\r\n        return p;\r\n    }\r\n\r\n    equals(p) {\r\n        if (!p) return false;\r\n        if (p == this) return true;\r\n        if (p.x != this.x || p.y != this.y) return false;\r\n        if (!((p.in && this.in) || (!p.in && !this.in)) || !((p.out && this.out) || (!p.out && !this.out))) {\r\n            return false;\r\n        }\r\n\r\n        if (p.in && this.in) {\r\n            if (p.inX != this.inX) return false;\r\n            if (p.inY != this.inY) return false;\r\n        }\r\n\r\n        if (p.out && this.out) {\r\n            if (p.outX != this.outX) return false;\r\n            if (p.outY != this.outY) return false;\r\n        }\r\n        return true;\r\n    }\r\n}","import Shape from \"../../lib/shape/shape.js\"\r\nimport Group from \"../../lib/group.js\";\r\nimport Point from \"../../lib/point.js\";\r\n\r\nexport default {\r\n    emits: ['property:change'],\r\n    methods: {\r\n        firePropertyChangeEvents(events = []) {\r\n            this.$emit('property:change', events);\r\n        },\r\n\r\n        canChangeProperty(model) {\r\n            return true;\r\n        },\r\n\r\n        changeProperty(property, value) {\r\n            if (!this.hasSelection) return;\r\n            let events = [];\r\n            this.selections.forEach(selection => {\r\n                if (!this.canChangeProperty(selection)) return;\r\n                events.push({ model: selection, property, value })\r\n            });\r\n            this.firePropertyChangeEvents(events);\r\n        },\r\n\r\n        changeMultipleProperties(properties) {\r\n            if (!this.hasSelection) return;\r\n            let events = [];\r\n            this.selections.forEach(selection => {\r\n                if (!this.canChangeProperty(selection)) return;\r\n                for (let property in properties) {\r\n                    let value = properties[property];\r\n                    events.push({ model: selection, property, value })\r\n                }\r\n            });\r\n            this.firePropertyChangeEvents(events);\r\n        },\r\n        getAnyPropertyValue(property, defaultValue) {\r\n            if (!this.selections || this.selections.length == 0) return defaultValue;\r\n            let v = this.selections[0][property];\r\n            for (let index = 1; index < this.selections.length; index++) {\r\n                const child = this.selections[index];\r\n                if (child[property] != v) return defaultValue;\r\n            }\r\n            return v == null ? defaultValue : v;\r\n        }\r\n    },\r\n    computed: {\r\n        currentSelection() {\r\n            if (this.selections) {\r\n                return this.selections[0];\r\n            }\r\n        },\r\n\r\n        hasSelection() {\r\n            if (!this.selections || this.selections.length == 0) return false;\r\n            return true;\r\n        },\r\n\r\n        hasBorderOrFillProperty() {\r\n            if (this.hasSelection) {\r\n                for (let index = 0; index < this.selections.length; index++) {\r\n                    const selection = this.selections[index];\r\n                    if (selection instanceof Point) return false;\r\n                }\r\n                return true\r\n            }\r\n            return false;\r\n        },\r\n\r\n        isShape() {\r\n            if (this.selections == null || this.selections.length != 1) return false;\r\n            let s = this.currentSelection;\r\n            if (s instanceof Shape) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        isGroup() {\r\n            if (this.selections == null || this.selections.length != 1) return false;\r\n            let s = this.currentSelection;\r\n            if (s instanceof Group) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n    },\r\n    props: {\r\n        selections: {\r\n            type: Array\r\n        }\r\n    }\r\n}","<template>\r\n  <div class=\"property-item\">\r\n    <div class=\"property-lable\" :class=\"disabled ? 'disabled-label' : ''\">\r\n      {{ name }}\r\n    </div>\r\n    <input\r\n      v-if=\"disabled\"\r\n      class=\"form-control form-control-sm property-input\"\r\n      disabled\r\n    />\r\n    <input\r\n      v-else\r\n      class=\"form-control form-control-sm property-input\"\r\n      v-model.lazy=\"pvalue\"\r\n      :type=\"type\"\r\n      :step=\"step\"\r\n      :max=\"max\"\r\n      :min=\"min\"\r\n      @click=\"selectText\"\r\n      @keypress.enter=\"confirm\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: \"Property\",\r\n  \r\n  emits: [\"property:change\"],\r\n  computed: {\r\n    pvalue: {\r\n      get() {\r\n        if (this.disabled) return;\r\n        let selection = this.selections[0];\r\n        let value = selection[this.pk];\r\n        if (value == null) return;\r\n        if (this.transformToAngel) {\r\n          let angle = (value * 180) / Math.PI;\r\n          return angle.toFixed(this.fixed);\r\n        }\r\n        return value.toFixed(this.fixed);\r\n      },\r\n\r\n      set(v) {\r\n        let value = v;\r\n        if (this.type == \"number\") {\r\n          value = Number.parseFloat(v);\r\n        }\r\n        if (this.transformToAngel) {\r\n          value = (v * Math.PI) / 180;\r\n        }\r\n        this.$emit(\"property:change\", [\r\n          {\r\n            model: this.selections[0],\r\n            property: this.pk,\r\n            value: value,\r\n          },\r\n        ]);\r\n      },\r\n    },\r\n    disabled() {\r\n      if (!(this.selections && this.selections.length == 1)) return true;\r\n      let selection = this.selections[0];\r\n      if (selection == null) return true;\r\n      let flag = !this.pk in selection;\r\n      // if (\r\n      //   selection instanceof VerticesShape &&\r\n      //   (this.pk == \"width\" || this.pk == \"height\")\r\n      // )\r\n      //   return true;\r\n      return flag;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    confirm(event) {\r\n      event.target.select();\r\n      //   event.target.blur();\r\n    },\r\n    selectText(event) {\r\n      event.target.select();\r\n    },\r\n  },\r\n\r\n  props: {\r\n    name: \"\",\r\n    fixed: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n    transformToAngel: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    pk: {\r\n      type: String,\r\n    },\r\n    selections: {\r\n      type: Array,\r\n    },\r\n    step: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n    max: {\r\n      type: Number,\r\n    },\r\n    min: {\r\n      type: Number,\r\n    },\r\n    type: {\r\n      type: String,\r\n      default: \"number\",\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./Property.vue?vue&type=template&id=5f23c3ba\"\nimport script from \"./Property.vue?vue&type=script&lang=js\"\nexport * from \"./Property.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"color-container\">\r\n    <div class=\"color-input-container\">\r\n      <small v-if=\"title != null\">{{ title }}</small>\r\n      <input\r\n        type=\"color\"\r\n        class=\"form-control form-control-sm form-control-color my-color-input\"\r\n        @change=\"colorChanged\"\r\n        :value=\"currentColorString\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"color-rgb-container\">\r\n      <div class=\"color-value-container\">\r\n        <small>R</small>\r\n        <input\r\n          class=\"form-control form-control-sm property-input\"\r\n          type=\"number\"\r\n          max=\"255\"\r\n          min=\"0\"\r\n          placeholder=\"R\"\r\n          v-model.lazy=\"r\"\r\n          @click=\"selectText\"\r\n          @keypress.enter=\"confirm\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"color-value-container\">\r\n        <small>G</small>\r\n        <input\r\n          class=\"form-control form-control-sm property-input\"\r\n          placeholder=\"G\"\r\n          type=\"number\"\r\n          max=\"255\"\r\n          min=\"0\"\r\n          v-model.lazy=\"g\"\r\n          @click=\"selectText\"\r\n          @keypress.enter=\"confirm\"\r\n        />\r\n      </div>\r\n      <div class=\"color-value-container\">\r\n        <small>B</small>\r\n        <input\r\n          class=\"form-control form-control-sm property-input\"\r\n          placeholder=\"B\"\r\n          type=\"number\"\r\n          max=\"255\"\r\n          min=\"0\"\r\n          v-model.lazy=\"b\"\r\n          @click=\"selectText\"\r\n          @keypress.enter=\"confirm\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"color-a-container\">\r\n      <small style=\"margin-right: 5px\">Opacity</small>\r\n      <input\r\n        class=\"form-control form-control-sm property-input\"\r\n        type=\"number\"\r\n        max=\"1\"\r\n        min=\"0\"\r\n        step=\"0.1\"\r\n        v-model.lazy=\"a\"\r\n        @click=\"selectText\"\r\n        @keypress.enter=\"confirm\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport textselect from \"./text-click-fullselect.js\";\r\nimport selectionTool from \"./selection-tools\";\r\nimport Point from \"../../lib/point.js\";\r\nimport Utils from \"../../lib/utils.js\";\r\n\r\nexport default {\r\n  name: \"ColorProperty\",\r\n  mixins: [textselect, selectionTool],\r\n  methods: {\r\n    canChangeProperty(model) {\r\n      if (model instanceof Point) return false;\r\n      return true;\r\n    },\r\n    colorChanged(event) {\r\n      let s = this.currentSelection;\r\n      if (!s) return;\r\n      let str = event.target.value;\r\n      if (str && str.length == 7) {\r\n        let r = str.substring(1, 3);\r\n        r = Number.parseInt(r, 16);\r\n        let g = str.substring(3, 5);\r\n        g = Number.parseInt(g, 16);\r\n        let b = str.substring(5, 7);\r\n        b = Number.parseInt(b, 16);\r\n        let properties = {};\r\n        properties[this.rk] = r;\r\n        properties[this.gk] = g;\r\n        properties[this.bk] = b;\r\n        this.changeMultipleProperties(properties);\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    currentColorString() {\r\n      return Utils.transformRGBToHex(this.r, this.g, this.b);\r\n    },\r\n\r\n    r: {\r\n      get() {\r\n        return this.getAnyPropertyValue(this.rk, 0);\r\n      },\r\n      set(v) {\r\n        v = Number.parseInt(v);\r\n        this.changeProperty(this.rk, v);\r\n      },\r\n    },\r\n    g: {\r\n      get() {\r\n        return this.getAnyPropertyValue(this.gk, 0);\r\n      },\r\n      set(v) {\r\n        v = Number.parseInt(v);\r\n        this.changeProperty(this.gk, v);\r\n      },\r\n    },\r\n    b: {\r\n      get() {\r\n        return this.getAnyPropertyValue(this.bk, 0);\r\n      },\r\n      set(v) {\r\n        v = Number.parseInt(v);\r\n        this.changeProperty(this.bk, v);\r\n      },\r\n    },\r\n    a: {\r\n      get() {\r\n        return this.getAnyPropertyValue(this.ak, 0);\r\n      },\r\n      set(v) {\r\n        let s = this.currentSelection;\r\n        this.changeProperty(this.ak, v);\r\n      },\r\n    },\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n    },\r\n    rk: {\r\n      type: String,\r\n      default: \"r\",\r\n    },\r\n    gk: {\r\n      type: String,\r\n      default: \"g\",\r\n    },\r\n    bk: {\r\n      type: String,\r\n      default: \"b\",\r\n    },\r\n    ak: {\r\n      type: String,\r\n      default: \"a\",\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.color-container {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 5px 0 5px 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.color-rgb-container {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: baseline;\r\n  flex: 33% 33% 33%;\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.my-color-input {\r\n  max-width: 100%;\r\n  border: none;\r\n  background-color: transparent;\r\n}\r\n\r\n.my-color-input:focus {\r\n  border: none;\r\n  background-color: transparent;\r\n  box-shadow: none;\r\n}\r\n\r\n.color-input-container {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.color-a-container {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: baseline;\r\n}\r\n\r\n.color-value-container {\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: baseline;\r\n}\r\n</style>","import { render } from \"./ColorProperty.vue?vue&type=template&id=c95e422a\"\nimport script from \"./ColorProperty.vue?vue&type=script&lang=js\"\nexport * from \"./ColorProperty.vue?vue&type=script&lang=js\"\n\nimport \"./ColorProperty.vue?vue&type=style&index=0&id=c95e422a&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./BorderProperty.vue?vue&type=template&id=137f433d\"\nimport script from \"./BorderProperty.vue?vue&type=script&lang=js\"\nexport * from \"./BorderProperty.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import EventEmitter from \"./event-emitter.js\";\r\n\r\nexport default class Path extends EventEmitter {\r\n    constructor(c = false) {\r\n        super();\r\n        this._points = [];\r\n        this._closed = c;\r\n        this.parent;\r\n    }\r\n\r\n    get isClosed() {\r\n        return this._closed;\r\n    }\r\n\r\n    get pointsCount() {\r\n        return this._points.length;\r\n    }\r\n\r\n    get points() {\r\n        return this._points;\r\n    }\r\n\r\n    close() {\r\n        this._closed = true;\r\n    }\r\n\r\n    open() {\r\n        this._closed = false;\r\n    }\r\n\r\n    draw(ctx) {\r\n        if (!ctx || this._points.length <= 1) return;//至少两个点\r\n        let start = this._points[0];\r\n        let prePoint = start;\r\n        let nextPoint;\r\n        if (start == null) return;\r\n        ctx.moveTo(start.x, start.y);\r\n        for (let i = 1; i < this._points.length; i++) {\r\n            nextPoint = this._points[i];\r\n            this._lineToNext(prePoint, nextPoint, ctx);\r\n            prePoint = nextPoint;\r\n        }\r\n        if (this.isClosed) {\r\n            nextPoint = start;\r\n            this._lineToNext(prePoint, nextPoint, ctx);\r\n        }\r\n    }\r\n\r\n    _lineToNext(prePoint, nextPoint, ctx) {\r\n        let pout = prePoint.out;\r\n        let nin = nextPoint.in;\r\n        if (prePoint.type == 0 && nextPoint.type == 0) {\r\n            ctx.lineTo(nextPoint.x, nextPoint.y);\r\n            return;\r\n        }\r\n\r\n        if (pout == null && nin == null) {\r\n            ctx.lineTo(nextPoint.x, nextPoint.y);\r\n        } else {\r\n            let control = pout;\r\n            let control1 = nin;\r\n            if (control == null || control1 == null) {\r\n                let c = control;\r\n                c = c || control1;\r\n                ctx.quadTo(c[0], c[1], nextPoint.x, nextPoint.y);\r\n            } else {\r\n                ctx.cubicTo(control[0], control[1], control1[0], control1[1], nextPoint.x, nextPoint.y);\r\n            }\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        if (this._points) {\r\n            this._points.forEach(p => { p.dispose(); p.parent = null; })\r\n            this._points.length = 0;\r\n        }\r\n        this._points = null;\r\n        super.dispose();\r\n    }\r\n\r\n    getPoint(index) {\r\n        return this.points[index];\r\n    }\r\n\r\n    deleteAt(index) {\r\n        if (index == -1) return;\r\n        let r = this._points.splice(index, 1);\r\n        if (r && r[0]) {\r\n            let point = r[0];\r\n            point.dispose();\r\n            point.parent = null;\r\n            this.fireEvent('dirty');\r\n            return point;\r\n        }\r\n    }\r\n\r\n    deletePoint(point) {\r\n        let index = this.getPointIndex(point);\r\n        return this.deleteAt(index);\r\n    }\r\n\r\n    getPointIndex(point) {\r\n        if (!point) return -1;\r\n        for (let i = 0; i < this._points.length; i++) {\r\n            const p = this._points[i];\r\n            if (p.equals(point)) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n\r\n    addPoint(point) {\r\n        this.insertPoint(point, this._points.length);\r\n    }\r\n\r\n    insertPoint(point, index) {\r\n        if (index == -1 || !point) return false;\r\n        if (index >= this._points.length) {\r\n            this._points.push(point);\r\n            point.parent = this;\r\n            point.on('dirty', () => {\r\n                this.fireEvent('dirty')\r\n            });\r\n            this.fireEvent('dirty')\r\n            return true;\r\n        }\r\n        this._points.push(point);\r\n        point.on('dirty', () => {\r\n            this.fireEvent('dirty')\r\n        });\r\n        for (let i = this._points.length - 1; i > index; i--) {\r\n            let temp = this._points[i];\r\n            this._points[i] = this._points[i - 1];\r\n            this._points[i - 1] = temp;\r\n        }\r\n        this.fireEvent('dirty')\r\n        return true;\r\n    }\r\n}","import Shape from \"./shape.js\"\r\nimport Path from \"../path.js\"\r\n\r\nexport default class VerticesShape extends Shape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.boundsRect = new Float32Array(4);\r\n    }\r\n\r\n    get pointsCount() {\r\n        return this.getPathModel().points.length;\r\n    }\r\n\r\n    deletePathModel() {\r\n        if (this._pathModel) {\r\n            this._pathModel.dispose();\r\n            this._pathModel.parent = null;\r\n            this._pathModel = null;\r\n        }\r\n    }\r\n\r\n    insertPoint(point, index) {\r\n        return this.getPathModel().insertPoint(point, index);\r\n    }\r\n\r\n    deleteAt(index) {\r\n        return this.getPathModel().deleteAt(index);\r\n    }\r\n\r\n    addPoint(point) {\r\n        let pathModel = this.getPathModel();\r\n        return pathModel.addPoint(point);\r\n    }\r\n\r\n    deletePoint(point) {\r\n        let pathModel = this.getPathModel();\r\n        return pathModel.deletePoint(point);\r\n    }\r\n\r\n    drawPath(path) {\r\n        let model = this.getPathModel();\r\n        model.draw(path);\r\n    }\r\n\r\n    _pathModelChanged = () => {\r\n        this.fireShapeDirty();\r\n        // this.fireBoundsDirty();\r\n    }\r\n\r\n    _configPathPoints(path) { }\r\n\r\n\r\n    _createPathModel(close = true) {\r\n        let path = new Path(close);\r\n        this._configPathPoints(path);\r\n        return path;\r\n    }\r\n\r\n    getPathModel() {\r\n        if (this._pathModel == null) {\r\n            this._pathModel = this._createPathModel();\r\n            this._pathModel.parent = this;\r\n            this._pathModel.on('dirty', this._pathModelChanged);\r\n        }\r\n        return this._pathModel;\r\n    }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return;\r\n        this.deletePathModel();\r\n        super.dispose();\r\n    }\r\n\r\n    calculateLocalBounds(out = { left, top, right, bottom }) {\r\n        this.getTarget().getPath().getBounds(this.boundsRect);\r\n        let a = this.boundsRect;\r\n        out.left = a[0];\r\n        out.top = a[1];\r\n        out.right = a[2];\r\n        out.bottom = a[3];\r\n        return out;\r\n    }\r\n\r\n    containsPoint(x, y, isWorld = true) {\r\n        this._containsPoint = undefined;\r\n        let x1 = x;\r\n        let y1 = y;\r\n        if (isWorld) {\r\n            let m = this.worldMatrix.clone();\r\n            let realPoint = m.invert().multiplyWithVertexDatas(x1, y1);\r\n            x1 = realPoint[0]; y1 = realPoint[1];\r\n        }\r\n        return this.getTarget().getPath().contains(x1, y1);\r\n    }\r\n\r\n\r\n    getSVGLabelName() {\r\n        return 'path';\r\n    }\r\n    getSVGDimensionString() { }\r\n\r\n    getSVGExtensionString() {\r\n        let ext = super.getSVGExtensionString();\r\n        let path = this.getTarget().getPath();\r\n        if (path) {\r\n            if (!ext) ext = ''\r\n            ext += ` d=\"${path.toSVGString()}\"`;\r\n        }\r\n        return ext;\r\n    }\r\n}","import VerticesShape from \"./vertices-shape.js\";\r\n\r\nexport default class PathShape extends VerticesShape {\r\n    constructor(props) {\r\n        super(props)\r\n        this.close = props == null || props.close == null ? false : props.close;\r\n    }\r\n\r\n    _createPathModel() {\r\n        return super._createPathModel(this.close);\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    set width(h) { }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    set height(h) { }\r\n\r\n    get isVisible() {\r\n        return this.visible && this.scalex != 0 && this.scaley != 0;\r\n    }\r\n\r\n    get close() { return this._close }\r\n    set close(c) {\r\n        if (this._close != c) {\r\n            this._close = c;\r\n            if (this._close) this.getPathModel().close();\r\n            else this.getPathModel().open();\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n}","import Point from \"../point.js\";\r\nimport VerticesShape from \"./vertices-shape.js\";\r\n\r\nexport default class Polygon extends VerticesShape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.sides = props == null || props.sides == null ? 5 : props.sides;\r\n    }\r\n\r\n    _configPathPoints(path) {\r\n        let a = this.width / 2;\r\n        let b = this.height / 2;\r\n        let theta = -Math.PI / 2;\r\n        let delta = Math.PI * 2 / this.sides;\r\n        let offsetx = this.width / 2;\r\n        let offsety = this.height / 2;\r\n        for (let i = 0; i < this.sides; i++) {\r\n            let x = Math.cos(theta) * a + offsetx;\r\n            let y = Math.sin(theta) * b + offsety;\r\n            path.addPoint(new Point(x, y));\r\n            theta += delta;\r\n        }\r\n    }\r\n\r\n    fireShapeDirty() {\r\n        if (this._pathModel) {\r\n            this._pathModel.dispose();\r\n            this._pathModel = null;\r\n        }\r\n        super.fireShapeDirty();\r\n    }\r\n\r\n    get sides() { return this._sides; }\r\n    set sides(s) {\r\n        if (this._sides != s) {\r\n            this._sides = s;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n}","import Point from \"../point.js\";\r\nimport Transformable from \"../transformable.js\";\r\nimport VerticesShape from \"./vertices-shape.js\";\r\n\r\nexport default class Star extends VerticesShape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.radius = props == null || props.radius == null ? 0.5 : props.radius;\r\n        this.corners = props == null || props.corners == null ? 5 : Math.floor(props.corners);\r\n    }\r\n\r\n    fireShapeDirty() {\r\n        if (this._pathModel) {\r\n            this._pathModel.dispose();\r\n            this._pathModel = null;\r\n        }\r\n        super.fireShapeDirty();\r\n    }\r\n\r\n    _configPathPoints(path) {\r\n        let pointsCount = this.corners * 2;\r\n        for (let i = 0; i < pointsCount; i++) {\r\n            path.addPoint(new Point());\r\n        }\r\n        let count = this.corners;\r\n        let delta = Transformable.PI2 / count;\r\n\r\n        let outAngleOffset = - Transformable.HALF_PI;\r\n        let outIndexOffset = 0;\r\n\r\n        let inAngleOffset = outAngleOffset + delta / 2;\r\n        let inIndexOffset = 1;\r\n\r\n        let a = this.width / 2;\r\n        let a1 = a * this.radius;\r\n        let b = this.height / 2;\r\n        let b1 = b * this.radius;\r\n\r\n        let offsetx = this.width / 2;\r\n        let offsety = this.height / 2;\r\n\r\n        for (let i = 0, angle = 0, index = 0; i < count; i++) {\r\n            let theta = angle + outAngleOffset;\r\n            let x = Math.cos(theta) * a;\r\n            let y = Math.sin(theta) * b;\r\n            let p1 = path.points[index + outIndexOffset];\r\n            p1.x = x + offsetx; p1.y = y + offsety;\r\n\r\n            theta = angle + inAngleOffset;\r\n            x = Math.cos(theta) * a1;\r\n            y = Math.sin(theta) * b1;\r\n            let p2 = path.points[index + inIndexOffset];\r\n            p2.x = x + offsetx; p2.y = y + offsety;\r\n            angle += delta;\r\n            index += 2;\r\n        }\r\n    }\r\n\r\n    get radius() { return this._radius; }\r\n    set radius(r) {\r\n        if (this._radius != r) {\r\n            this._radius = r;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n    get corners() { return this._corners; }\r\n    set corners(r) {\r\n        let ir = Math.floor(r);\r\n        if (this._corners != ir) {\r\n            this._corners = ir;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n}","<template>\r\n  <div>\r\n    <div v-if=\"!hasBorderOrFillProperty\" style=\"text-algin: left; color: grey\">\r\n      <small>Nothing</small>\r\n    </div>\r\n    <div v-else>\r\n      <div class=\"sub-property-row\">\r\n        <div class=\"single-row\">\r\n          <div class=\"form-check form-switch\">\r\n            <label for=\"showBorder\">Fill</label>\r\n            <input\r\n              @change=\"fillChange\"\r\n              :checked=\"canFill\"\r\n              class=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id=\"showBorder\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"gray-splitter\"></div>\r\n        <div v-if=\"canFill\">\r\n          <div style=\"margin-top: 10px; text-align: left\">\r\n            <small>Color</small>\r\n          </div>\r\n          <color-property\r\n            @property:change=\"firePropertyChangeEvents\"\r\n            :selections=\"selections\"\r\n            ak=\"a\"\r\n            rk=\"r\"\r\n            bk=\"b\"\r\n            gk=\"g\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport textselect from \"./text-click-fullselect.js\";\r\nimport selectionTool from \"./selection-tools.js\";\r\nimport ColorProperty from \"./ColorProperty.vue\";\r\n\r\nexport default {\r\n  name: \"FillProperty\",\r\n  mixins: [textselect, selectionTool],\r\n  components: { ColorProperty },\r\n  methods: {\r\n    fillChange(event) {\r\n      let checked = event.target.checked;\r\n      if (this.canFill != checked) {\r\n        this.changeProperty(\"fill\", checked);\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    canFill() {\r\n      return this.getAnyPropertyValue(\"fill\", false);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import { render } from \"./FillProperty.vue?vue&type=template&id=0c64563a\"\nimport script from \"./FillProperty.vue?vue&type=script&lang=js\"\nexport * from \"./FillProperty.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import CanvasKitUtils from \"../canvaskit-utils.js\";\r\nimport Shape from \"./shape.js\";\r\n\r\nexport default class Ellipse extends Shape {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    get radiusx() {\r\n        return this.width / 2;\r\n    }\r\n\r\n    set radiusx(x) {\r\n        this.width = x * 2;\r\n    }\r\n\r\n\r\n    get radiusy() {\r\n        return this.height / 2;\r\n    }\r\n\r\n    set radiusy(y) {\r\n        this.height = y * 2\r\n    }\r\n\r\n    drawPath(path) {\r\n        let rect = CanvasKitUtils.newXYWHRect(0, 0, this.width, this.height);\r\n        path.addOval(rect);\r\n    }\r\n}","const CURSOR = {\r\n    default: 'default',\r\n    select: 'default',\r\n    move: \"move\",\r\n    add: \"crosshair\",\r\n    'e-resize': \"e-resize\",\r\n    's-resize': \"s-resize\",\r\n    'w-resize': \"w-resize\",\r\n    'n-resize': \"n-resize\",\r\n    'se-resize': \"se-resize\",\r\n    'ne-resize': \"ne-resize\",\r\n    'sw-resize': \"sw-resize\",\r\n    'nw-resize': \"nw-resize\",\r\n    rotate: 'url(/assets/images/cursor-rotate.png), auto',\r\n    pen: \"url(/assets/images/add-vertex.png), auto\",\r\n    deleteVertex: \"url(/assets/images/add-vertex.png), auto\",\r\n    'vertex-select': 'url()',\r\n    'move-root': 'grab'\r\n};\r\nimport Rect from \"./lib/shape/rect.js\"\r\nimport Ellipse from \"./lib/shape/ellipse.js\"\r\nimport Star from \"./lib/shape/star.js\"\r\nimport Polygon from \"./lib/shape/polygon.js\"\r\nimport PathShape from \"./lib/shape/path-shape\"\r\nimport Group from \"./lib/group.js\"\r\nimport Point from \"./lib/point.js\";\r\n\r\nexport default class Utils {\r\n    static calculateFiguresBounds(figures, useWorldMatrix = true) {\r\n        if (!figures || figures.length == 0) return { left: 0, top: 0, right: 0, bottom: 0 };\r\n        let tb = { left: Infinity, top: Infinity, right: -Infinity, bottom: -Infinity };\r\n        figures.forEach(figure => {\r\n            if (useWorldMatrix) {\r\n                let wb = figure.worldBounds;\r\n                tb.left = Math.min(wb.left, tb.left);\r\n                tb.right = Math.max(wb.right, tb.right);\r\n                tb.top = Math.min(wb.top, tb.top);\r\n                tb.bottom = Math.max(wb.bottom, tb.bottom);\r\n            } else {\r\n                tb.left = Math.min(figure.x, tb.left);\r\n                tb.right = Math.max(figure.x + figure.width, tb.right);\r\n                tb.top = Math.min(figure.y, tb.top);\r\n                tb.bottom = Math.max(figure.y + figure.height, tb.bottom);\r\n            }\r\n        })\r\n        return tb;\r\n    }\r\n\r\n    static objectIcon(obj) {\r\n        if (!obj) return;\r\n        if (obj instanceof Rect) return \"icon-square\";\r\n        if (obj instanceof Ellipse) return \"icon-circle\";\r\n        if (obj instanceof Star) return \"icon-star\";\r\n        if (obj instanceof Polygon) return \"icon-polygon\";\r\n        if (obj instanceof PathShape) return \"icon-circle\";\r\n        if (obj instanceof Group) return \"icon-group\";\r\n        if (obj instanceof Point) return;\r\n    }\r\n\r\n    static CURSOR = CURSOR;\r\n}","import Shape from \"./shape.js\"\r\nexport default class Line extends Shape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.endX = props == null || props.endX == null ? this.x : props.endX;\r\n        this.endY = props == null || props.endY == null ? this.y : props.endY;\r\n    }\r\n\r\n    isVisible() {\r\n        return this.visible && (this.endX - this.x) != this.x && (this.endY - this.y) != this.y;\r\n    }\r\n\r\n    get showBorder() { return true };\r\n    set showBorder(b) { }\r\n\r\n    get fill() { return false; }\r\n    set fill(f) { }\r\n\r\n    get width() { }\r\n    set width(w) { }\r\n    get height() { }\r\n    set height(h) { }\r\n\r\n    get endX() { return this._endX }\r\n    set endX(x) {\r\n        if (x != this._endX) {\r\n            this._endX = x;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n    get endY() { return this._endY }\r\n    set endY(y) {\r\n        if (y != this._endY) {\r\n            this._endY = y;\r\n            this.fireShapeDirty();\r\n        }\r\n    }\r\n\r\n    calculateLocalBounds(b = { left: 0, top: 0, right: 0, bottom: 0 }) {\r\n        b.left = Math.min(this.x, this.endX) - this.x;\r\n        b.right = Math.max(this.x, this.endX) - this.x;\r\n        b.top = Math.min(this.y, this.endY) - this.y;\r\n        b.bottom = Math.max(this.y, this.endY) - this.y;\r\n        let w = Math.abs(b.bottom - b.top);\r\n        let h = Math.abs(b.right - b.left);\r\n        if (w < 5) {\r\n            let dw = 5 - w;\r\n            b.left -= dw / 2;\r\n            b.right += dw / 2;\r\n        }\r\n        if (h < 5) {\r\n            let dh = 5 - h;\r\n            b.top -= dh / 2;\r\n            b.bottom += dh / 2;\r\n        }\r\n        return b;\r\n    }\r\n\r\n    drawPath(path) {\r\n        path.moveTo(0, 0);\r\n        path.lineTo(this.endX - this.x, this.endY - this.y);\r\n    }\r\n\r\n    getSVGLabelName() {\r\n        return 'path';\r\n    }\r\n\r\n    getSVGDimensionString() { }\r\n\r\n    getSVGExtensionString() {\r\n        let ext = super.getSVGExtensionString();\r\n        let path = this.getTarget().getPath();\r\n        if (path) {\r\n            if (!ext) ext = ''\r\n            ext += ` d=\"${path.toSVGString()}\"`;\r\n        }\r\n        return ext;\r\n    }\r\n}","import { render } from \"./PropertyBar.vue?vue&type=template&id=c5d73c52\"\nimport script from \"./PropertyBar.vue?vue&type=script&lang=js\"\nexport * from \"./PropertyBar.vue?vue&type=script&lang=js\"\n\nimport \"./PropertyBar.vue?vue&type=style&index=0&id=c5d73c52&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div id=\"work-space\" :class=\"canvasBGColor\">\r\n    <div id=\"tools-container\">\r\n      <tools-bar\r\n        @tool:update=\"toolUpdate\"\r\n        :currentTool=\"currentTool\"\r\n        :disabled=\"this.mainRoot == null\"\r\n      />\r\n    </div>\r\n    <div id=\"canvas-space\">\r\n      <div id=\"canvas-toolbar\">\r\n        <action-bar\r\n          ref=\"actionBar\"\r\n          :selections=\"currentSelections\"\r\n          :actionStack=\"actionStack\"\r\n          :rootFigure=\"mainRoot\"\r\n          @canvas:group=\"groupFigures\"\r\n          @canvas:ungroup=\"unGroupFigures\"\r\n          @canvas:clip=\"clipFigures\"\r\n          @canvas:unclip=\"unClipFigures\"\r\n        />\r\n      </div>\r\n      <div\r\n        id=\"canvas-container\"\r\n        :style=\"'cursor:' + cursor\"\r\n        @mousedown=\"mousedown\"\r\n        @mouseleave=\"mouseleave\"\r\n        @mousemove=\"mousemove\"\r\n        @mouseup=\"mouseup\"\r\n        @mouseover=\"mouseover\"\r\n        @mouseout=\"mouseout\"\r\n        @mousewheel=\"mousewheel\"\r\n      >\r\n        <canvas id=\"front-canvas\" class=\"painter-canvas\" style=\"z-index: 2\" />\r\n        <canvas id=\"main-canvas\" class=\"painter-canvas\" style=\"z-index: 1\" />\r\n        <canvas id=\"backend-canvas\" class=\"painter-canvas\" style=\"z-index: 0\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ToolsBar from \"./ToolsBar.vue\";\r\n\r\nimport CanvasKitUtils from \"../../lib/canvaskit-utils.js\";\r\nimport RootFigure from \"../../lib/root-figure.js\";\r\nimport TransformFeedback from \"../../figure/transform-feedback.js\";\r\n\r\nimport ActionStack from \"../../actions/action-stack.js\";\r\nimport ActionFactory from \"../../actions/action-factory.js\";\r\nimport CompositeAction from \"../../actions/compsite-action.js\";\r\n\r\nimport SelectTool from \"../../tool/select-tool.js\";\r\nimport TranslateTool from \"../../tool/transformtools/translate-tool.js\";\r\nimport RotateTool from \"../../tool/transformtools/rotate-tool.js\";\r\nimport EResizeTool from \"../../tool/transformtools/e-resize-tool.js\";\r\nimport WResizeTool from \"../../tool/transformtools/w-resize-tool.js\";\r\nimport NResizeTool from \"../../tool/transformtools/n-resize-tool.js\";\r\nimport SResizeTool from \"../../tool/transformtools/s-resize-tool.js\";\r\nimport SEResizeTool from \"../../tool/transformtools/se-resize-tool.js\";\r\nimport NEResizeTool from \"../../tool/transformtools/ne-resize-tool.js\";\r\nimport SWResizeTool from \"../../tool/transformtools/sw-resize-tool.js\";\r\nimport NWResizeTool from \"../../tool/transformtools/nw-resize-tool.js\";\r\nimport RectTool from \"../../tool/shaptools/rect-tool.js\";\r\nimport EllipseTool from \"../../tool/shaptools/ellipse-tool.js\";\r\nimport StarTool from \"../../tool/shaptools/star-tool.js\";\r\nimport PolygonTool from \"../../tool/shaptools/polygon-tool.js\";\r\nimport PenTool from \"../../tool/pen-tool.js\";\r\nimport VertexSelectTool from \"../../tool/vertex-select-tool.js\";\r\nimport TranslateRootTool from \"../../tool/translate-root-tool.js\";\r\nimport LineTool from \"../../tool/shaptools/line-tool.js\";\r\n\r\nimport ActionBar from \"./ActionBar.vue\";\r\n\r\nimport DocumentRoot from \"../../figure/document-root.js\";\r\n\r\nimport keyboardHandler from \"./keyborad-handler.js\";\r\nimport groupprocess from \"./group-processor.js\";\r\nimport clipprocessor from \"./clip-processor.js\";\r\nimport Point from '../../lib/point';\r\n\r\nexport default {\r\n  name: \"Canvas\",\r\n  mixins: [keyboardHandler, groupprocess, clipprocessor],\r\n  components: {\r\n    ToolsBar,\r\n    ActionBar,\r\n  },\r\n  emits: [\"selection:change\", \"tooltip:update\", \"root:update\"],\r\n  mounted() {\r\n    let el = this.$el;\r\n    let container = el.querySelector(\"#canvas-container\");\r\n    let w = container.clientWidth;\r\n    let h = container.clientHeight;\r\n\r\n    let ratio = window.devicePixelRatio;\r\n\r\n    let front = el.querySelector(\"#front-canvas\");\r\n    let main = el.querySelector(\"#main-canvas\");\r\n    let backend = el.querySelector(\"#backend-canvas\");\r\n    // 初始化Tools：\r\n    this.tools = {};\r\n\r\n    initCanvas(front, w, h, ratio);\r\n    initCanvas(main, w, h, ratio);\r\n    initCanvas(backend, w, h, ratio);\r\n\r\n    let frontSurface = CanvasKitUtils.makeCanvasSurface(\"front-canvas\");\r\n    let fc = frontSurface.getCanvas();\r\n    fc.scale(ratio, ratio);\r\n    this.frontRoot = new RootFigure(frontSurface, {\r\n      width: w,\r\n      height: h,\r\n    });\r\n\r\n    this.mainSurface = CanvasKitUtils.makeCanvasSurface(\"main-canvas\");\r\n    let mc = this.mainSurface.getCanvas();\r\n    mc.scale(window.devicePixelRatio, window.devicePixelRatio);\r\n\r\n    this.createTools(this.frontRoot, this.mainRoot);\r\n\r\n    function initCanvas(canvas, w, h, radio) {\r\n      canvas.width = w * radio;\r\n      canvas.height = h * radio;\r\n    }\r\n  },\r\n  methods: {\r\n    createNewMainRoot(width, height) {\r\n      this.disposeMainRoot();\r\n      if (this.mainRoot == null) {\r\n        if (this.actionStack == null) {\r\n          this.actionStack = new ActionStack();\r\n        }\r\n        this.mainRoot = new DocumentRoot(\r\n          this.mainSurface,\r\n          this.frontRoot.width,\r\n          this.frontRoot.height,\r\n          {\r\n            width: width,\r\n            height: height,\r\n            name: \"Document Root\",\r\n          }\r\n        );\r\n        this.mainRoot.surface = this.mainSurface;\r\n        this.mainRoot.on(\"addChild\", this.figureAdded);\r\n        this.mainRoot.on(\"removeChild\", this.figureRemoved);\r\n        this.configToolsMainRoot(this.mainRoot);\r\n        this.currentTool = \"select\";\r\n        this.mainRoot.init();\r\n        this.$el.focus();\r\n        this.$emit(\"root:update\", this.mainRoot);\r\n      }\r\n    },\r\n\r\n    disposeMainRoot() {\r\n      if (this.mainRoot != null) {\r\n        let temp = this.currentSelections;\r\n        this.currentSelections = [];\r\n        temp.length = 0;\r\n        this.mainRoot.off(\"addChild\", this.figureAdded);\r\n        this.mainRoot.off(\"removeChild\", this.figureRemoved);\r\n        this.mainRoot.dispose();\r\n        this.mainRoot = null;\r\n        this.configToolsMainRoot(null);\r\n        this.actionStack.dispose();\r\n        this.actionStack = null;\r\n      }\r\n    },\r\n\r\n    configToolsMainRoot(main) {\r\n      for (let id in this.tools) {\r\n        let tool = this.tools[id];\r\n        tool.mainRoot = main;\r\n      }\r\n    },\r\n    createTools(frontRoot, mainRoot, back) {\r\n      let me = this;\r\n      register(new SelectTool(frontRoot, mainRoot, back));\r\n\r\n      register(new RotateTool(frontRoot, mainRoot, back));\r\n      register(new EResizeTool(frontRoot, mainRoot, back));\r\n      register(new NResizeTool(frontRoot, mainRoot, back));\r\n      register(new WResizeTool(frontRoot, mainRoot, back));\r\n      register(new SResizeTool(frontRoot, mainRoot, back));\r\n      register(new SEResizeTool(frontRoot, mainRoot, back));\r\n      register(new NEResizeTool(frontRoot, mainRoot, back));\r\n      register(new SWResizeTool(frontRoot, mainRoot, back));\r\n      register(new NWResizeTool(frontRoot, mainRoot, back));\r\n      register(new TranslateTool(frontRoot, mainRoot, back));\r\n\r\n      register(new TranslateRootTool(frontRoot, mainRoot, back));\r\n\r\n      register(new PenTool(frontRoot, mainRoot, back));\r\n      register(new RectTool(frontRoot, mainRoot, back));\r\n      register(new StarTool(frontRoot, mainRoot, back));\r\n      register(new EllipseTool(frontRoot, mainRoot, back));\r\n      register(new PolygonTool(frontRoot, mainRoot, back));\r\n      register(new VertexSelectTool(frontRoot, mainRoot, back));\r\n      register(new LineTool(frontRoot, mainRoot, back));\r\n\r\n      function register(tool) {\r\n        if (me.registedTools == null) {\r\n          me.registedTools = [];\r\n        }\r\n        me.tools[tool.id] = tool;\r\n        tool.on(\"transformFigure\", me.figureTransform);\r\n        tool.on(\"complete\", me.toolCompleted);\r\n        tool.on(\"active\", me.toolActived);\r\n        tool.on(\"selectionChange\", (e) => {\r\n          me.selectionChange(e.event);\r\n        });\r\n        tool.on(\"toolSwitch\", me.toolSwitch);\r\n        tool.on(\"updateTooltip\", me.toolTipUpdated);\r\n        tool.on(\"cursorChange\", me.cursorChange);\r\n        me.registedTools.push(tool);\r\n      }\r\n    },\r\n    mousewheel(event) {\r\n      if (!event.altKey) return;\r\n      if (this._zoomId) {\r\n        cancelAnimationFrame(this._zoomId);\r\n      }\r\n      this._zoomId = requestAnimationFrame(() => {\r\n        if (event.altKey) {\r\n          this.zoomMainRoot(event.deltaY < 0);\r\n        }\r\n      });\r\n    },\r\n    mousedown(event) {\r\n      if (this.spacePressed && this.mainRoot) {\r\n        this.toolSwitch({\r\n          event: {\r\n            id: \"move-root\",\r\n            x: event.offsetX,\r\n            y: event.offsetY,\r\n          },\r\n        });\r\n        return;\r\n      }\r\n      this.activeTool(\r\n        this.getCurrentTool(),\r\n        event.offsetX,\r\n        event.offsetY,\r\n        event\r\n      );\r\n    },\r\n    mousemove(event) {\r\n      // BUG： 有时候会出现能点击但不能移动的情况，可能是焦点方面的问题\r\n      // 注意，当前tool不一定就是tool instance，有些tool会内部切换\r\n      let current = this.getCurrentTool();\r\n      current =\r\n        this.currentActivedTool == null ? current : this.currentActivedTool;\r\n      if (current) {\r\n        current.move(event.offsetX, event.offsetY, event);\r\n      }\r\n    },\r\n\r\n    deactiveCurrentTool(event) {\r\n      // deactive tool必须是active tool：\r\n      if (this.currentActivedTool) {\r\n        // console.log(`deactive ${this.currentActivedTool.id} tool`);\r\n        this.currentActivedTool.deactive(event.offsetX, event.offsetY, event);\r\n      }\r\n      this.currentActivedTool = null;\r\n    },\r\n\r\n    mouseout(event) {\r\n      this.deactiveCurrentTool(event);\r\n    },\r\n    mouseover(event) {\r\n      this.deactiveCurrentTool(event);\r\n    },\r\n    mouseup(event) {\r\n      this.deactiveCurrentTool(event);\r\n    },\r\n    mouseleave(event) {\r\n      this.deactiveCurrentTool(event);\r\n    },\r\n\r\n    zoomMainRoot(zoomIn) {\r\n      if (this.mainRoot) {\r\n        let delta = 0.05;\r\n        if (!zoomIn) delta *= -1;\r\n        // ??? 为什么修改了main root会引发selection change？\r\n        // 难道是因为selection里的数据的parent修改会引发变化？\r\n        this.mainRoot.zoom += delta;\r\n        this.mainRoot.refresh();\r\n      }\r\n    },\r\n\r\n    getCurrentTool() {\r\n      return this.tools[this.currentTool];\r\n    },\r\n\r\n    cursorChange(e) {\r\n      this.$nextTick(() => {\r\n        this.cursor = e.event.cursor;\r\n      });\r\n    },\r\n\r\n    useTool(tool, args) {\r\n      tool.prepare(args);\r\n      tool.updateCurrentSelections(this.currentSelections);\r\n      this.cursor = tool.defaultCursor;\r\n    },\r\n\r\n    unUseTool(tool, args) {\r\n      tool.unUse(args);\r\n      tool.updateCurrentSelections();\r\n      this.cursor = \"default\";\r\n    },\r\n\r\n    toolTipUpdated(event) {\r\n      let tooltip = event.event.tooltip;\r\n      this.$emit(\"tooltip:update\", tooltip);\r\n    },\r\n\r\n    activeTool(tool, x, y, event) {\r\n      if (tool) {\r\n        // console.log(`active ${tool.id} tool`);\r\n        this.cursor = tool.defaultCursor;\r\n        tool.active(x, y, event);\r\n      }\r\n    },\r\n\r\n    toolSwitch(event) {\r\n      let source = event.source;\r\n      let data = event.event;\r\n      let id = data.id;\r\n      let x = data.x;\r\n      let y = data.y;\r\n      let args = data.args;\r\n      let tool = this.tools[id];\r\n      if (tool) {\r\n        if (source) {\r\n          source.deactive(x, y);\r\n        }\r\n        this.useTool(tool, args);\r\n        // console.log(`swtich to ${tool.id} tool`);\r\n        this.activeTool(tool, x, y);\r\n      }\r\n    },\r\n\r\n    toolActived(event) {\r\n      this.currentActivedTool = event.source;\r\n      // console.log(`${event.source.id} tool was actived`);\r\n    },\r\n\r\n    isAddShapeTool(id) {\r\n      return (\r\n        id == \"rect\" ||\r\n        id == \"ellipse\" ||\r\n        id == \"star\" ||\r\n        id == \"polygon\" ||\r\n        id == \"line\"\r\n      );\r\n    },\r\n\r\n    isTransformTool(id) {\r\n      return (\r\n        id == \"rotate\" ||\r\n        id == \"e-resize\" ||\r\n        id == \"s-resize\" ||\r\n        id == \"n-resize\" ||\r\n        id == \"w-resize\" ||\r\n        id == \"se-resize\" ||\r\n        id == \"sw-resize\" ||\r\n        id == \"ne-resize\" ||\r\n        id == \"nw-resize\"\r\n      );\r\n    },\r\n\r\n    processVertexSelectResult(result) {\r\n      let type = result.type;\r\n      let shape = result.figure;\r\n      let point = result.point;\r\n      if (type == \"move\") {\r\n        let action = ActionFactory.newTranslateAction(\r\n          result.figures,\r\n          result.dx,\r\n          result.dy\r\n        );\r\n        this.actionStack.excute(action);\r\n      }\r\n      if (type == \"vertex\") {\r\n        let vertex = result.vertex;\r\n        let copy = result.copy;\r\n        // return { type: 'vertex', vertex: selection, copy: this._lastVertexHover.model };\r\n        let action = new CompositeAction();\r\n        if (vertex.x != copy.x)\r\n          action.add(\r\n            ActionFactory.newChangePropertyAction(vertex, \"x\", copy.x)\r\n          );\r\n        if (vertex.y != copy.y)\r\n          action.add(\r\n            ActionFactory.newChangePropertyAction(vertex, \"y\", copy.y)\r\n          );\r\n        if (vertex.type != copy.type)\r\n          action.add(\r\n            ActionFactory.newChangePropertyAction(vertex, \"type\", copy.type)\r\n          );\r\n        if (copy.in != vertex.in) {\r\n          action.add(\r\n            ActionFactory.newChangePropertyAction(vertex, \"in\", copy.in)\r\n          );\r\n        }\r\n        if (copy.out != vertex.out) {\r\n          action.add(\r\n            ActionFactory.newChangePropertyAction(vertex, \"out\", copy.out)\r\n          );\r\n        }\r\n        this.actionStack.excute(action);\r\n      }\r\n    },\r\n\r\n    processPenResult(result) {\r\n      let type = result.type;\r\n      let shape = result.figure;\r\n      let point = result.point;\r\n      let path = result.path;\r\n      let index = result.index;\r\n      let action;\r\n      if (type == \"add\") {\r\n        if (shape) {\r\n          action = ActionFactory.newAddFigureAction(\r\n            shape,\r\n            this.mainRoot,\r\n            \"路径图形\"\r\n          );\r\n        } else if (point) {\r\n          action = ActionFactory.newInsertPointAction(point, path, index);\r\n        }\r\n      }\r\n      if (type == \"close\") {\r\n        action = ActionFactory.newChangePropertyAction(path, \"close\", true);\r\n      }\r\n      if (type == \"minus\") {\r\n        action = ActionFactory.newDeletePointAction(path, index);\r\n      }\r\n      if (action) this.actionStack.excute(action);\r\n      if (type == \"close\") {\r\n        this.selectionChange({ type: \"new\", selections: [] });\r\n      }\r\n      this.mainRoot.refresh();\r\n    },\r\n\r\n    toolCompleted(e) {\r\n      let event = e.event;\r\n      let id = event.id;\r\n      // console.log(`${id} tool was completed`);\r\n      let result = event.result;\r\n      if (result && this.isAddShapeTool(id)) {\r\n        this.addShape(result, \"添加图形\");\r\n      }\r\n      if (result && id == \"pen\") {\r\n        this.processPenResult(result);\r\n      }\r\n      if (result && id == \"vertex-select\") {\r\n        this.processVertexSelectResult(result);\r\n      }\r\n      if (id == \"move\" && result) {\r\n        let action = ActionFactory.newTranslateAction(\r\n          result.figures,\r\n          result.dx,\r\n          result.dy\r\n        );\r\n        this.actionStack.excute(action);\r\n      }\r\n      if (result && this.isTransformTool(id)) {\r\n        let action = ActionFactory.newPoseChangeAction(result);\r\n        this.actionStack.excute(action);\r\n      }\r\n      if (result && id == \"select\") {\r\n        // console.log(\"select tool update selections\");\r\n        this.selectionChange(result);\r\n      }\r\n      this.mainRoot.refresh();\r\n      let tool = this.getCurrentTool();\r\n      if (this.currentActivedTool.id != tool.id) {\r\n        this.unUseTool(this.currentActivedTool);\r\n        // this.useTool(tool);\r\n        tool.updateCurrentSelections(this.currentSelections);\r\n        this.cursor = tool.defaultCursor;\r\n      }\r\n      this.currentActivedTool = null;\r\n    },\r\n\r\n    getTransformFeedback() {\r\n      if (this.transformFeedback == null) {\r\n        this.transformFeedback = new TransformFeedback();\r\n        this.frontRoot.addChild(this.transformFeedback);\r\n        this.frontRoot.transformFeedback = this.transformFeedback;\r\n      }\r\n      return this.transformFeedback;\r\n    },\r\n\r\n    changeFigureProperty(events) {\r\n      let action = new CompositeAction();\r\n      events.forEach((event) => {\r\n        let model = event.model;\r\n        let property = event.property;\r\n        let value = event.value;\r\n        if (!model || !property) return;\r\n        action.add(\r\n          ActionFactory.newChangePropertyAction(model, property, value)\r\n        );\r\n      });\r\n      this.actionStack.excute(action);\r\n      this.mainRoot.refresh();\r\n      this.frontRoot.refresh();\r\n    },\r\n\r\n    addShape(event) {\r\n      if (!event) return;\r\n      let figure = event.figure;\r\n      if (!figure) return;\r\n      let name = event.name;\r\n      let action = ActionFactory.newAddFigureAction(\r\n        figure,\r\n        this.mainRoot,\r\n        name\r\n      );\r\n      this.excuteAction(action);\r\n    },\r\n\r\n    vertexAdded(point) {},\r\n\r\n    vertexRemoved(point) {},\r\n\r\n    figureAdded(event) {\r\n      let newFigure = event.event.child;\r\n      this.selectionChange({ type: \"new\", selections: [newFigure] });\r\n      this.$emit(\"root:update\", this.mainRoot);\r\n      // this.currentSelections.push(newFigure);\r\n    },\r\n\r\n    figureRemoved(event) {\r\n      let removed = event.event.child;\r\n      let index = this.currentSelections.indexOf(removed);\r\n      if (index != -1) {\r\n        this.currentSelections.splice(index, 1);\r\n      }\r\n      this.$emit(\"root:update\", this.mainRoot);\r\n    },\r\n\r\n    selectionChange(event) {\r\n      if (!event) return;\r\n      if (event.type == \"new\") {\r\n        this.currentSelections = event.selections;\r\n      }\r\n      if (event.type == \"plus\") {\r\n        this.currentSelections.concat(event.selections);\r\n      }\r\n      if (event.type == \"minus\") {\r\n        event.selections.forEach((selection) => {\r\n          let index = this.currentSelections.indexOf(selection);\r\n          if (index != -1) this.currentSelections.splice(index, 1);\r\n        });\r\n      }\r\n    },\r\n\r\n    excuteAction(action) {\r\n      if (action) {\r\n        return this.actionStack.excute(action);\r\n      }\r\n    },\r\n    toolUpdate(id) {\r\n      this.currentTool = id;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      actionStack: null,\r\n      cursor: \"auto\",\r\n      currentSelections: [],\r\n      currentTool: null,\r\n      mainRoot: null,\r\n    };\r\n  },\r\n  computed: {\r\n    canvasBGColor() {\r\n      if (this.mainRoot) {\r\n        return \"graybg\";\r\n      } else {\r\n        return \"blackbg\";\r\n      }\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    currentTool(c, old) {\r\n      if (c == old) return;\r\n      let tool = this.tools[c];\r\n      let oldTool = this.tools[old];\r\n      if (oldTool) {\r\n        this.unUseTool(oldTool);\r\n      }\r\n      if (tool) {\r\n        this.useTool(tool);\r\n      }\r\n    },\r\n    currentSelections: {\r\n      handler(c, old) {\r\n        this.currentSelections.sort((a, b) => {\r\n          if (a instanceof Point || b instanceof Point) return 0;\r\n          this.mainRoot.indexOfChild(b) - this.mainRoot.indexOfChild(a);\r\n        });\r\n        let tool = this.getCurrentTool();\r\n        if (tool) tool.updateCurrentSelections(c);\r\n        this.mainRoot.refresh();\r\n        this.frontRoot.refresh();\r\n        this.$emit(\"selection:change\", { selections: c });\r\n      },\r\n      deep: true,\r\n    },\r\n\r\n    actionStack: {\r\n      handler() {\r\n        this.frontRoot.refresh();\r\n        this.mainRoot.refresh();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  props: {\r\n    // currentTool: {\r\n    //   type: String,\r\n    //   default: null,\r\n    // },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#work-space {\r\n  display: flex;\r\n  align-content: stretch;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n#canvas-space {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n\r\n#canvas-toolbar {\r\n  width: 100%;\r\n}\r\n\r\n#canvas-container {\r\n  position: relative;\r\n  flex-grow: 1;\r\n  padding: 0px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n}\r\n\r\n.painter-canvas {\r\n  position: absolute;\r\n  left: 0px;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  right: 0px;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.action-icon {\r\n  cursor: pointer;\r\n}\r\n\r\n.disable-icon {\r\n  color: #777777;\r\n  cursor: auto;\r\n}\r\n\r\n.canvas-action-spliter {\r\n  border-left: #777777 solid 1px;\r\n}\r\n</style>","import CanvasKitUtils from \"./canvaskit-utils.js\";\r\nimport Figure from \"./figure.js\";\r\n\r\nexport default class RootFigure extends Figure {\r\n    constructor(surface, props) {\r\n        super(props);\r\n        this.surface = surface;\r\n        this._rAFid;\r\n        this._figureMap = new Map();\r\n    }\r\n\r\n    isVisible() {\r\n        return true;\r\n    }\r\n\r\n    recordAdd(child) {\r\n        if (!child || !this._figureMap) return;\r\n        this._figureMap.set(child.id, child);\r\n    }\r\n\r\n    recordRemove(child) {\r\n        if (!child || !this._figureMap) return;\r\n        this._figureMap.delete(child.id);\r\n    }\r\n\r\n    getFigureById(id) {\r\n        if (!id || !this._figureMap) return;\r\n        return this._figureMap.get(id);\r\n    }\r\n\r\n    // drawOnce() {\r\n    //     this.surface.drawOnce((canvas) => {\r\n    //         this.draw(canvas);\r\n    //     })\r\n    // }\r\n\r\n    // drawrAF() {\r\n    //     if (this._rAFid) {\r\n    //         this.surface.cancelAnimationFrame(this._rAFid);\r\n    //     }\r\n    //     this._rAFid = this.surface.requestAnimationFrame((canvas) => {\r\n    //         this.draw(canvas);\r\n    //     })\r\n    // }\r\n\r\n    clear() {\r\n        if (!this.surface) return;\r\n        if (this._rAFid) {\r\n            this.getTarget().surface.cancelAnimationFrame(this._rAFid);\r\n        }\r\n        this._rAFid = this.getTarget().surface.requestAnimationFrame((canvas) => {\r\n            canvas.clear(CanvasKitUtils.TRANSPARENT);\r\n        })\r\n    }\r\n\r\n    refresh(beforeDraw) {\r\n        if (!this.surface) return;\r\n        if (this._rAFid) {\r\n            this.getTarget().surface.cancelAnimationFrame(this._rAFid);\r\n        }\r\n        this._rAFid = this.getTarget().surface.requestAnimationFrame((canvas) => {\r\n            if (beforeDraw) beforeDraw();\r\n            canvas.clear(CanvasKitUtils.TRANSPARENT);\r\n            this.getTarget().draw(canvas);\r\n        })\r\n    }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return;\r\n        this.surface = null;\r\n        if (this._rAFid) cancelAnimationFrame(this._rAFid);\r\n        this._rAFid = null;\r\n        this._figureMap.clear();\r\n        super.dispose();\r\n    }\r\n\r\n    getSVGPositionString() { }\r\n\r\n    getSVGTransformString() { }\r\n\r\n    getSVGLabelName() {\r\n        return 'svg';\r\n    }\r\n\r\n    getSVGExtensionString() {\r\n        return `viewbox=\"0 0 ${this.width} ${this.height}\" ${SVG_XMLNS_STR} style=\"background-color:gray\"`;\r\n    }\r\n}\r\n\r\nconst SVG_XMLNS_STR = 'xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"';","import CanvasKitUtils from \"../canvaskit-utils.js\";\r\nimport Rect from \"./rect.js\";\r\n\r\nexport default class CenterRect extends Rect {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n\r\n    drawPath(path) {\r\n        let rect = CanvasKitUtils.newXYWHRect(-this.width / 2, -this.height / 2,\r\n            this.width, this.height);\r\n        if (this.radiusx != null && this.radiusy != null &&\r\n            (this.radiusx != 0 || this.radiusy != 0)) {\r\n            rect = CanvasKitUtils.newRRectXY(rect, this.radiusx, this.radiusy);\r\n            path.addRRect(rect);\r\n        } else {\r\n            path.addRect(rect);\r\n        }\r\n    }\r\n\r\n    calculateLocalBounds(out = { left: 0, top: 0, right: 0, bottom: 0 }) {\r\n        out.left = -this.width / 2;\r\n        out.top = -this.height / 2;\r\n        out.right = this.width / 2;\r\n        out.bottom = this.height / 2;\r\n        return out;\r\n    }\r\n\r\n    getSVGLabelName() {\r\n        return 'rect';\r\n    }\r\n\r\n    getSVGPositionString() {\r\n        return `x=\"${- this.width / 2}\" y=\"${- this.height / 2}\"`;\r\n    }\r\n}","import CenterRect from \"../lib/shape/center-rect.js\";\r\n\r\nexport default class ResizeAnchor extends CenterRect {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    calculateLocalBounds(b = { left, right, top, bottom }) {\r\n        let r = super.calculateLocalBounds(b);\r\n        r.left -= this.width;\r\n        r.top -= this.height;\r\n        r.right += this.width;\r\n        r.bottom += this.height;\r\n        return r;\r\n    }\r\n}","import CanvasKitUtils from \"../canvaskit-utils.js\";\r\nimport Ellipse from \"./ellipse.js\";\r\n\r\nexport default class CenterEllipse extends Ellipse {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    drawPath(path) {\r\n        let rect = CanvasKitUtils.newXYWHRect(-this.width / 2, -this.height / 2,\r\n            this.width, this.height);\r\n        path.addOval(rect);\r\n    }\r\n\r\n    calculateLocalBounds(out = { left: 0, top: 0, right: 0, bottom: 0 }) {\r\n        out.left = -this.width / 2;\r\n        out.top = -this.height / 2;\r\n        out.right = this.width / 2;\r\n        out.bottom = this.height / 2;\r\n        return out;\r\n    }\r\n\r\n    getSVGLabelName() { return 'ellipse' }\r\n\r\n    getSVGPositionString() { return `cx=\"0\" cy=\"0\"` }\r\n\r\n    getSVGDimensionString() {\r\n        return `rx=\"${this.width / 2}\" ry=\"${this.height / 2}\"`\r\n    }\r\n}","import CenterEllipse from \"../lib/shape/center-ellipse.js\";\r\n\r\nexport default class RotateAnchor extends CenterEllipse {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    calculateLocalBounds(b = { left, right, top, bottom }) {\r\n        let r = super.calculateLocalBounds(b);\r\n        r.left -= this.width;\r\n        r.top -= this.height;\r\n        r.right += this.width;\r\n        r.bottom += this.height;\r\n        return r;\r\n    }\r\n}","import Rect from \"../lib/shape/rect\";\r\n\r\nexport default class NoboundsRect extends Rect {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    containsPoint(x,y,flag){\r\n        return false;\r\n    }\r\n}","import CanvasKitUtils from \"../lib/canvaskit-utils.js\";\r\nimport Shape from \"../lib/shape/shape.js\";\r\n\r\nexport default class FeedbackFigure extends Shape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.relatedSelection;\r\n        this.relateFigure;\r\n    }\r\n\r\n    fireShapeDirty() { }\r\n\r\n    copyPath(target) {\r\n        if (this._path) this.getTarget()._path.delete();\r\n        if (target.getPath) {\r\n            this.getTarget()._path = target.getTarget().getPath().copy();\r\n        } else {\r\n            this.getTarget()._path = CanvasKitUtils.newPath();\r\n            this.getTarget()._path.addRect(CanvasKitUtils.newXYWHRect(0, 0, target.width, target.height));\r\n        }\r\n\r\n    }\r\n\r\n    isVisible() {\r\n        return this.visible && (this.scalex != 0 || this.scaley != 0);\r\n    }\r\n}","import EventEmitter from \"../lib/event-emitter.js\";\r\nimport Utils from \"../utils.js\";\r\nimport u from \"../lib/utils.js\";\r\nimport FeedbackFigure from \"../figure/feedback-figure.js\";\r\n\r\nexport default class Tool extends EventEmitter {\r\n    constructor(frontRoot, mainRoot, backendRoot, id) {\r\n        super();\r\n        this.frontRoot = frontRoot;\r\n        this.mainRoot = mainRoot;\r\n        this.backendRoot = backendRoot;\r\n        this.id = id;\r\n        this.actived = false;\r\n        this.using = false;\r\n        this.currentFeedbacks;\r\n    }\r\n\r\n    set currentSelections(selections) {\r\n        this._selections = selections;\r\n    }\r\n\r\n    get currentSelections() { return this._selections };\r\n\r\n    get defaultCursor() {\r\n        let c = Utils.CURSOR[this.id];\r\n        if (c) return c;\r\n        return 'default';\r\n    }\r\n\r\n    toolTipUpdate(msg) {\r\n        this.fireEvent('updateTooltip', { tooltip: msg });\r\n    }\r\n\r\n    updateCurrentSelections(selections) {\r\n        this.currentSelections = selections;\r\n    }\r\n\r\n    addNewFigure(figure, name = '图形') {\r\n        this.fireEvent('addFigure', { figure, name });\r\n    }\r\n\r\n    changeCursor(cursor) {\r\n        this.fireEvent('cursorChange', { cursor });\r\n    }\r\n\r\n    switchTool(toolId, x, y, args) {\r\n        this.fireEvent('toolSwitch', { id: toolId, x, y, args });\r\n    }\r\n\r\n    fireSelectionChangeEvent(selections, type = 'new') {\r\n        this.fireEvent('selectionChange', { type: type, selections: selections });\r\n    }\r\n\r\n    prepare(args) {\r\n        this.using = true;\r\n    }\r\n\r\n    unUse(args) {\r\n        this.using = false;\r\n        cancelAnimationFrame(this._moveRefreshId);\r\n        this._moveRefreshId = null;\r\n    }\r\n\r\n    active(x, y, event) {\r\n        // if (this.actived) return; 这里不知道为什么，actived属性有时候会是false\r\n        if (this._moveRefreshId)\r\n            cancelAnimationFrame(this._moveRefreshId);\r\n        this.sx = x;\r\n        this.sy = y;\r\n        this.lx = x;\r\n        this.ly = y;\r\n        this.actived = true;\r\n        this.fireEvent('active', { id: this.id, x, y });\r\n        this.toolActived(x, y, event);\r\n    }\r\n\r\n    move(x, y, event) {\r\n        if (this._moveRefreshId) {\r\n            cancelAnimationFrame(this._moveRefreshId);\r\n        }\r\n        this._moveRefreshId = requestAnimationFrame(() => {\r\n            let tooltip;\r\n            if (this.actived) {\r\n                let dx = x - this.lx;\r\n                let dy = y - this.ly;\r\n                let l = Math.min(x, this.sx);\r\n                let t = Math.min(y, this.sy);\r\n                let r = Math.max(x, this.sx);\r\n                let b = Math.max(y, this.sy);\r\n                tooltip = this.activeMove(x, y, l, t, r, b, dx, dy, event);\r\n                this.lx = x;\r\n                this.ly = y;\r\n            } else {\r\n                tooltip = this.hoverMove(x, y, event);\r\n            }\r\n            if (!tooltip) tooltip = `x:${x},y:${y}`;\r\n            this.toolTipUpdate(tooltip);\r\n        })\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy, event) {\r\n    }\r\n\r\n    hoverMove(x, y, event) {\r\n    }\r\n\r\n    deactive(x, y, event) {\r\n        if (!this.actived) return;\r\n        if (this._moveRefreshId)\r\n            cancelAnimationFrame(this._moveRefreshId);\r\n        this.ex = x;\r\n        this.ey = y;\r\n        try {\r\n            let result = this.toolDeactived(x, y, event);\r\n            this.fireEvent('complete', { id: this.id, result });\r\n        } catch (e) {\r\n            console.error(e);\r\n        } finally {\r\n            this.reset();\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.actived = false;\r\n        cancelAnimationFrame(this._moveRefreshId);\r\n        this._moveRefreshId = null;\r\n        this.sx = this.sy = this.ex = this.ey = this.lx = this.ly = null;\r\n    }\r\n\r\n    toolActived(x, y, event) { }\r\n\r\n    toolDeactived(x, y, event) { }\r\n\r\n    static createDelegateFigure(target, copyPose = true) {\r\n        let f = new FeedbackFigure();\r\n        f.copyPath(target);\r\n        f.relatedSelection = target;\r\n        this.setFeedbackColors(f);\r\n        if (copyPose) {\r\n            let m = target.worldMatrix;\r\n            let pose = m.decompose();\r\n            u.applyPose(f, pose);\r\n        }\r\n        return f;\r\n    }\r\n\r\n    static setFeedbackColors(f) {\r\n\r\n        f.br = this.FEEDBACK_B_COLOR[0];\r\n        f.bg = this.FEEDBACK_B_COLOR[1];\r\n        f.bb = this.FEEDBACK_B_COLOR[2];\r\n        f.ba = 1;\r\n\r\n        f.r = this.FEEDBACK_COLOR[0];\r\n        f.g = this.FEEDBACK_COLOR[1];\r\n        f.b = this.FEEDBACK_COLOR[2];\r\n        f.a = 0.3;\r\n    }\r\n\r\n\r\n    static setErrorColors(f) {\r\n        f.showBorder = false;\r\n        f.r = 255;\r\n        f.g = 0;\r\n        f.b = 0;\r\n        f.a = 1;\r\n    }\r\n\r\n    static copyPoseDatas(from, to) {\r\n        if (!from || !to) return;\r\n        to.x = from.x;\r\n        to.y = from.y;\r\n        to.scalex = from.scalex;\r\n        to.scaley = from.scaley;\r\n        to.skewx = from.skewx;\r\n        to.skewy = from.skewy;\r\n        to.rotation = from.rotation;\r\n        to.width = from.width;\r\n        to.height = from.height;\r\n    }\r\n\r\n    static get FEEDBACK_COLOR() {\r\n        return FB_COLOR;\r\n    }\r\n\r\n    static get FEEDBACK_B_COLOR() {\r\n        return FB_B_COLOR;\r\n    }\r\n}\r\n\r\nconst FB_COLOR = [9, 124, 244];\r\nconst FB_B_COLOR = [14, 98, 234];","import CanvasKitUtils from \"../lib/canvaskit-utils\";\r\nimport Rect from \"../lib/shape/rect\";\r\nimport ResizeAnchor from \"./resize-anchor.js\";\r\nimport RotateAnchor from \"./rotate-anchor\";\r\nimport NoboundsRect from \"./nobounds-rect\";\r\nimport Tool from \"../tool/tool\";\r\n\r\nexport default class TransformFeedback extends Rect {\r\n    constructor(props) {\r\n        super(props);\r\n        this.anchorSize = props == null || props.as == null ? 6 : props.as;\r\n        this.padding = props == null || props.padding == null ? 5 : props.padding;\r\n        this.feedbackContainer = new NoboundsRect({ a: 0, showBorder: false });\r\n        this.addChild(this.feedbackContainer);\r\n\r\n        this.rotateAnchor = new RotateAnchor({\r\n            width: this.anchorSize, height: this.anchorSize,\r\n            r: 22, g: 199, b: 154\r\n        });\r\n        this.addChild(this.rotateAnchor);\r\n\r\n        this.topAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.topAnchor);\r\n        this.bottomAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.bottomAnchor);\r\n        this.leftAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.leftAnchor);\r\n        this.rightAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.rightAnchor);\r\n        this.seAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.seAnchor);\r\n        this.neAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.neAnchor);\r\n        this.swAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.swAnchor);\r\n        this.nwAnchor = new ResizeAnchor({ width: this.anchorSize, height: this.anchorSize });\r\n        this.addChild(this.nwAnchor);\r\n\r\n        this.anchor = { x: 0.5, y: 0.5 };\r\n\r\n        let bcolor = Tool.FEEDBACK_B_COLOR;\r\n        this.br = bcolor[0]; this.bg = bcolor[1]; this.bb = bcolor[2];\r\n        this.a = 0;\r\n    }\r\n\r\n    initFeedbackContainer() {\r\n        if (!this.feedbackContainer) return;\r\n        this.feedbackContainer.width = this.width;\r\n        this.feedbackContainer.height = this.height;\r\n        this.feedbackContainer.rotation = 0;\r\n        this.feedbackContainer.scalex = this.feedbackContainer.scaley = 1;\r\n        this.feedbackContainer.skewx = this.feedbackContainer.skewy = 0;\r\n    }\r\n\r\n    addFeedback(figure) {\r\n        this.feedbackContainer.addChild(figure);\r\n    }\r\n\r\n    removeFeedback(figure) {\r\n        this.feedbackContainer.removeChild(figure);\r\n    }\r\n\r\n    updateAnchorsPostion() {\r\n        if (this.topAnchor) {\r\n            this.topAnchor.y = - this.padding;\r\n            this.topAnchor.x = this.width / 2;\r\n        }\r\n        if (this.bottomAnchor) {\r\n            this.bottomAnchor.y = this.height + this.padding;\r\n            this.bottomAnchor.x = this.width / 2;\r\n        }\r\n        if (this.leftAnchor) {\r\n            this.leftAnchor.y = this.height / 2;\r\n            this.leftAnchor.x = - this.padding;\r\n        }\r\n        if (this.rightAnchor) {\r\n            this.rightAnchor.y = this.height / 2;\r\n            this.rightAnchor.x = this.width + this.padding;\r\n        }\r\n        if (this.seAnchor) {\r\n            this.seAnchor.y = this.height + this.padding;\r\n            this.seAnchor.x = this.width + this.padding;\r\n        }\r\n        if (this.neAnchor) {\r\n            this.neAnchor.y = -this.padding;\r\n            this.neAnchor.x = this.width + this.padding;\r\n        }\r\n        if (this.swAnchor) {\r\n            this.swAnchor.y = this.height + this.padding;\r\n            this.swAnchor.x = - this.padding;\r\n        }\r\n\r\n        if (this.nwAnchor) {\r\n            this.nwAnchor.y = -this.padding;\r\n            this.nwAnchor.x = -this.padding;\r\n        }\r\n\r\n        if (this.rotateAnchor) {\r\n            this.rotateAnchor.y = - this.padding - this.rotateAnchor.width * 2;\r\n            this.rotateAnchor.x = this.width + this.padding + this.rotateAnchor.height * 2;\r\n        }\r\n\r\n        if (this.feedbackContainer) {\r\n            let w = this.feedbackContainer.width;\r\n            let h = this.feedbackContainer.height;\r\n            if (this.width == 0) this.feedbackContainer.scalex = 0;\r\n            if (this.height == 0) this.feedbackContainer.scaley = 0;\r\n            if (w != 0) this.feedbackContainer.scalex = this.width / w;\r\n            if (h != 0) this.feedbackContainer.scaley = this.height / h;\r\n        }\r\n    }\r\n\r\n    get width() { return super.width }\r\n    set width(w) {\r\n        if (w != super.width) {\r\n            super.width = w;\r\n            this.updateAnchorsPostion();\r\n        }\r\n    }\r\n\r\n    get height() { return super.height }\r\n    set height(h) {\r\n        if (h != super.height) {\r\n            super.height = h;\r\n            this.updateAnchorsPostion();\r\n        }\r\n    }\r\n\r\n    calculateLocalBounds(b = { left, top, right, bottom }) {\r\n        b.left = -this.padding - this.anchorSize / 2 - this.anchorSize;\r\n        b.top = -this.padding - this.anchorSize / 2 - this.anchorSize * 3;\r\n        b.right = this.width + this.padding + this.anchorSize / 2 + this.anchorSize * 3;\r\n        b.bottom = this.height + this.padding + this.anchorSize / 2 + this.anchorSize;\r\n        return b;\r\n    }\r\n\r\n    drawPath(path) {\r\n        let p = this.padding;\r\n        path.addRect(CanvasKitUtils.newXYWHRect(-p, -p, this.width + p * 2, this.height + p * 2));\r\n    }\r\n\r\n    drawSelf(canvas) {\r\n        super.drawSelf(canvas);\r\n        this._paint.setStyle(CanvasKitUtils.strokeStyle);\r\n\r\n        let x1 = this.width / 2;\r\n        let x2 = x1;\r\n        let y1 = this.height / 2 - this.anchorSize;\r\n        let y2 = y1 + this.anchorSize * 2;\r\n        canvas.drawLine(x1, y1, x2, y2, this._paint);\r\n\r\n        x1 = this.width / 2 - this.anchorSize;\r\n        x2 = x1 + this.anchorSize * 2;\r\n        y1 = this.height / 2;\r\n        y2 = y1;\r\n        canvas.drawLine(x1, y1, x2, y2, this._paint);\r\n    }\r\n\r\n}","export default class ActionStack {\r\n    constructor(max = 100) {\r\n        this.max = max;\r\n        this.redos = [];\r\n        this.undos = [];\r\n    }\r\n\r\n    excute(action) {\r\n        action.excute();\r\n        if (this.undos.length >= this.max) {\r\n            let a = this.undos.shift();\r\n            a.disposeUndo();\r\n        }\r\n        this.undos.push(action);\r\n        this.redos.forEach(redo => {\r\n            redo.disposeRedo();\r\n        })\r\n        this.redos.length = 0;\r\n    }\r\n\r\n    canRedo() {\r\n        return this.redos.length > 0;\r\n    }\r\n\r\n    canUndo() {\r\n        return this.undos.length > 0;\r\n    }\r\n\r\n    redo() {\r\n        if (this.canRedo()) {\r\n            let action = this.redos.pop();\r\n            action.redo();\r\n            this.undos.push(action);\r\n        }\r\n    }\r\n\r\n    undo() {\r\n        if (this.canUndo()) {\r\n            let action = this.undos.pop();\r\n            action.undo();\r\n            this.redos.push(action);\r\n        }\r\n    }\r\n    // 这个dispose后还能继续使用\r\n    dispose() {\r\n        this.undos.forEach(undo => {\r\n            undo.dispose();\r\n        })\r\n        this.undos.length = 0;\r\n        this.redos.forEach(redo => {\r\n            redo.dispose();\r\n        })\r\n        this.redos.length = 0;\r\n    }\r\n}","export default class Action {\r\n    constructor(name) {\r\n        this.name = name;\r\n    }\r\n\r\n    excute() { }\r\n    redo() { }\r\n    undo() { }\r\n    disposeRedo() { }\r\n    disposeUndo() { }\r\n    dispose() { }\r\n}","import Action from \"./action.js\";\r\n\r\nexport default class AddFigureAction extends Action {\r\n    constructor(child, parent, name = '添加图形') {\r\n        super(name);\r\n        this.child = child;\r\n        this.parent = parent;\r\n    }\r\n\r\n    excute() {\r\n        if (this.index != null) {\r\n            this.parent.insertChild(this.child, this.index);\r\n        } else\r\n            this.parent.addChild(this.child);\r\n    }\r\n\r\n    redo() {\r\n        this.excute();\r\n    }\r\n\r\n    undo() {\r\n        this.index = this.parent.children.indexOf(this.child);\r\n        this.parent.removeChild(this.child);\r\n    }\r\n\r\n    dispose() {\r\n        if (this.parent)\r\n            this.parent.dispose();\r\n        if (this.child)\r\n            this.child.dispose();\r\n        this.parent = null;\r\n        this.child = null;\r\n    }\r\n\r\n    disposeRedo() {\r\n        if (this.child)\r\n            this.child.dispose();\r\n        this.child = null;\r\n    }\r\n\r\n    disposeUndo() {\r\n\r\n    }\r\n}","import Action from \"./action.js\";\r\n\r\nexport default class TranslateAction extends Action {\r\n    constructor(figure, dx, dy, name = '移动图形') {\r\n        super(name);\r\n        this.figure = figure;\r\n        this.dx = dx;\r\n        this.dy = dy;\r\n    }\r\n\r\n    excute() {\r\n        let f = this.figure;\r\n        f.x += this.dx;\r\n        f.y += this.dy;\r\n\r\n    }\r\n\r\n    redo() {\r\n        this.excute();\r\n    }\r\n\r\n    undo() {\r\n        let f = this.figure;\r\n        f.x -= this.dx;\r\n        f.y -= this.dy;\r\n    }\r\n\r\n    dispose() {\r\n        if (this.figure) {\r\n            this.figure.dispose();\r\n        }\r\n        this.figure = null;\r\n    }\r\n}","import Action from \"./action.js\";\r\n\r\nexport default class CompositeAction extends Action {\r\n    constructor(name=\"Composite Actions\") {\r\n        super(name)\r\n        this.actions = [];\r\n    }\r\n\r\n    add(action) {\r\n        if (!action) return;\r\n        this.actions.push(action);\r\n    }\r\n\r\n    remove(action) {\r\n        if (!action) return;\r\n        let index = this.actions.indexOf(action);\r\n        if (index != -1) {\r\n            this.actions.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    excute() {\r\n        this.actions.forEach((action) => {\r\n            action.excute();\r\n        })\r\n    }\r\n\r\n    redo() {\r\n        this.excute();\r\n    }\r\n\r\n    undo() {\r\n        for (let i = this.actions.length - 1; i >= 0; i--) {\r\n            let a = this.actions[i];\r\n            a.undo();\r\n        }\r\n    }\r\n\r\n    // TODO: Composite action是一组action，很有可能dispose的时候误删一些数据，怎么处理？\r\n    disposeRedo() {\r\n        // this.actions.forEach(action => {\r\n        //     action.disposeRedo();\r\n        // })\r\n    }\r\n\r\n    disposeUndo() {\r\n        // this.actions.forEach(action => {\r\n        //     action.diposeUndo();\r\n        // })\r\n    }\r\n\r\n    dispose() {\r\n        this.actions.forEach(action => {\r\n            action.dispose();\r\n        })\r\n    }\r\n}","import Action from \"./action.js\";\r\n\r\nexport default class PoseChangeAction extends Action {\r\n    constructor(figure, pose) {\r\n        super('姿势更改');\r\n        this.pose = pose;\r\n        this.figure = figure;\r\n        this.old = {\r\n            x: figure.x,\r\n            y: figure.y,\r\n            rotation: figure.rotation,\r\n            scalex: figure.scalex,\r\n            scaley: figure.scaley,\r\n            skewx: figure.skewx,\r\n            skewy: figure.skewy\r\n        }\r\n    }\r\n\r\n    excute() {\r\n        this.figure.x = this.pose.translation.x;\r\n        this.figure.y = this.pose.translation.y;\r\n        this.figure.rotation = this.pose.rotation;\r\n        this.figure.scalex = this.pose.scale.x;\r\n        this.figure.scaley = this.pose.scale.y;\r\n        this.figure.skewx = this.pose.skew.x;\r\n        this.figure.skewy = this.pose.skew.y;\r\n    }\r\n\r\n    redo() {\r\n        this.excute();\r\n    }\r\n\r\n    undo() {\r\n        this.figure.x = this.old.x;\r\n        this.figure.y = this.old.y;\r\n        this.figure.rotation = this.old.rotation;\r\n        this.figure.scalex = this.old.scalex;\r\n        this.figure.scaley = this.old.scaley;\r\n        this.figure.skewx = this.old.skewx;\r\n        this.figure.skewy = this.old.skewy;\r\n    }\r\n\r\n    dispose() {\r\n        if (this.figure) {\r\n            this.figure.dispose();\r\n        }\r\n        this.figure = null;\r\n    }\r\n}","import Action from \"./action.js\";\r\nexport default class InsertPointAction extends Action {\r\n    constructor(point, path, index, name = '添加顶点') {\r\n        super(name);\r\n        this.point = point;\r\n        this.path = path;\r\n        this.index = index;\r\n    }\r\n\r\n    excute() {\r\n        this.path.insertPoint(this.point, this.index);\r\n    }\r\n\r\n    redo() {\r\n        this.path.insertPoint(this.point.clone(), this.index);\r\n    }\r\n\r\n    undo() {\r\n        this.path.deleteAt(this.index);\r\n    }\r\n\r\n    dispose() {\r\n        if (this.path) {\r\n            this.path.dispose();\r\n        }\r\n        this.path = null;\r\n        this.point = null;\r\n    }\r\n}","import Action from \"./action.js\";\r\n\r\nexport default class ChangePropertyAction extends Action {\r\n    constructor(model, property, value) {\r\n        super('更改属性值')\r\n        this.model = model;\r\n        this.property = property;\r\n        this.value = value;\r\n    }\r\n\r\n    excute() {\r\n        if (this.oldValue == undefined) {\r\n            this.oldValue = this.model[this.property];\r\n        }\r\n        this.model[this.property] = this.value;\r\n    }\r\n\r\n    redo() {\r\n        this.excute();\r\n    }\r\n\r\n    undo() {\r\n        this.model[this.property] = this.oldValue;\r\n    }\r\n\r\n\r\n    dispose() {\r\n        if (this.model && this.model.dispose) {\r\n            this.model.dispose();\r\n        }\r\n        this.model = null;\r\n    }\r\n\r\n    disposeRedo() {\r\n    }\r\n\r\n    disposeUndo() {\r\n    }\r\n}","import Action from \"./action.js\";\r\nexport default class DeletePointAction extends Action {\r\n    constructor(path, index, name = '删除顶点') {\r\n        super(name);\r\n        this.path = path;\r\n        this.index = index;\r\n    }\r\n\r\n    excute() {\r\n        this.point = this.path.deleteAt(this.index);\r\n    }\r\n\r\n    undo() {\r\n        this.path.insertPoint(this.point.clone(), this.index);\r\n    }\r\n\r\n    redo() {\r\n        this.path.deleteAt(this.index);\r\n    }\r\n\r\n    dispose() {\r\n        if (this.path) {\r\n            this.path.dispose();\r\n        }\r\n        this.path = null;\r\n        this.point = null;\r\n    }\r\n}","import Action from \"./action.js\";\r\n\r\nexport default class RemoveFigureAction extends Action {\r\n    constructor(child, parent, name = '删除图形') {\r\n        super(name);\r\n        this.child = child;\r\n        this.parent = parent;\r\n    }\r\n\r\n    excute() {\r\n        this.index = this.parent.children.indexOf(this.child);\r\n        this.parent.removeChild(this.child);\r\n    }\r\n\r\n    redo() {\r\n        this.excute();\r\n    }\r\n\r\n    undo() {\r\n        this.parent.insertChild(this.child, this.index);\r\n    }\r\n\r\n    dispose() {\r\n        if (this.parent) {\r\n            this.parent.dispose();\r\n        }\r\n        this.parent = null;\r\n        if (this.figure) {\r\n            this.figure.dispose();\r\n        }\r\n        this.figure = null;\r\n    }\r\n\r\n    disposeUndo() {\r\n        if (this.figure) {\r\n            this.figure.dispose();\r\n        }\r\n        this.figure = null;\r\n    }\r\n}","import Action from \"./action.js\"\r\nexport default class ChangeIndexAction extends Action {\r\n    constructor(figure, index) {\r\n        super('Change Index');\r\n        this.figure = figure;\r\n        this.index = index;\r\n        this.oldIndex = this.figure.parent.indexOfChild(this.figure);\r\n    }\r\n\r\n    excute() {\r\n        let parent = this.figure.parent;\r\n        parent.removeChild(this.figure);\r\n        parent.insertChild(this.figure, this.index);\r\n    }\r\n\r\n    redo() { this.excute() }\r\n\r\n    undo() {\r\n        let parent = this.figure.parent;\r\n        parent.removeChild(this.figure);\r\n        parent.insertChild(this.figure, this.oldIndex);\r\n    }\r\n\r\n    dispose() {\r\n        if (this.figure) this.figure.dispose();\r\n        this.figure = null;\r\n    }\r\n}","import AddFigureAction from \"./add-figure-action.js\";\r\nimport TranslateAction from \"./translate-action.js\";\r\nimport CompositeAction from \"./compsite-action.js\"\r\nimport PoseChangeAction from \"./pose-change-action.js\";\r\nimport InsertPointAction from \"./insert-point-action.js\";\r\nimport ChangePropertyAction from \"./change-property-action.js\";\r\nimport DeletePointAction from \"./delete-point-action.js\";\r\nimport RemoveFigureAction from \"./remove-figure-action.js\";\r\nimport ChangeIndexAction from \"./change-index-action.js\";\r\n\r\nexport default class ActionFactory {\r\n\r\n    static newChangeIndexAction(figure, newIndex) {\r\n        return new ChangeIndexAction(figure, newIndex);\r\n    }\r\n\r\n    static newRemoveFigureAction(figure, parent) {\r\n        return new RemoveFigureAction(figure, parent);\r\n    }\r\n\r\n    static newChangePropertyAction(model, property, value) {\r\n        return new ChangePropertyAction(model, property, value);\r\n    }\r\n\r\n    static newInsertPointAction(point, path, index) {\r\n        return new InsertPointAction(point, path, index);\r\n    }\r\n\r\n    static newDeletePointAction(path, index) {\r\n        return new DeletePointAction(path, index);\r\n    }\r\n\r\n    static newAddFigureAction(child, parent, name = '添加图形') {\r\n        return new AddFigureAction(child, parent, name);\r\n    }\r\n\r\n    static newTranslateAction(figures, dx, dy) {\r\n        let action = new CompositeAction();\r\n        figures.forEach(f => {\r\n            action.add(new TranslateAction(f, dx, dy));\r\n        });\r\n        return action;\r\n    }\r\n\r\n    static newPoseChangeAction(events) {\r\n        let action = new CompositeAction();\r\n        events.forEach(e => {\r\n            action.add(new PoseChangeAction(e.figure, e.pose));\r\n        })\r\n        return action;\r\n    }\r\n}","export default class Vector2 {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    get magnitude() {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y);\r\n    }\r\n\r\n\r\n    get radian() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n\r\n    normalize() {\r\n        let m = this.magnitude;\r\n        if (m == 0) return;\r\n        this.x = this.x / m;\r\n        this.y = this.y / m;\r\n        return this;\r\n    }\r\n\r\n    scale(v) {\r\n        this.x *= v;\r\n        this.y *= v;\r\n        return this;\r\n    }\r\n\r\n    dot(x, y) {\r\n        return this.x * x + this.y * y;\r\n    }\r\n\r\n    plus(v) {\r\n        this.x += v.x;\r\n        this.y += v.y;\r\n        return this;\r\n    }\r\n\r\n    rotate(radian) {\r\n        let cos = Math.cos(radian), sin = Math.sin(radian);\r\n        let y = this.x * sin + this.y * cos;\r\n        let x = this.x * cos - this.y * sin;\r\n        this.x = x;\r\n        this.y = y;\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        return new Vector2(this.x, this.y);\r\n    }\r\n}","import Tool from \"./tool.js\";\r\nimport TransformFeedback from \"../figure/transform-feedback.js\";\r\nimport Utils from \"../utils.js\";\r\nimport u from \"../lib/utils.js\"\r\nimport Vector2 from \"../lib/math/vector2.js\";\r\n\r\nexport default class TransformFeedbackTool extends Tool {\r\n    constructor(f, m, b, id) {\r\n        super(f, m, b, id);\r\n        this.currentFeedbacks;\r\n    }\r\n\r\n    prepare(args) {\r\n        super.prepare(args)\r\n        if (args && args.transformFeedback) this._transformFeedback = args.transformFeedback;\r\n        if (args && args.currentFeedbacks) this.currentFeedbacks = args.currentFeedbacks;\r\n    }\r\n\r\n    unUse(args) {\r\n        if (this.updateFeedbackId) cancelAnimationFrame(this.updateFeedbackId);\r\n        this.updateFeedbackId = null;\r\n        if (!args || !args.keepFeedback) {\r\n            if (this._transformFeedback) {\r\n                this.frontRoot.removeChild(this._transformFeedback);\r\n                this.transformFeedback.dispose();\r\n                this._transformFeedback = null;\r\n                this.frontRoot.refresh();\r\n            }\r\n        }\r\n        super.unUse(args);\r\n    }\r\n\r\n    requestUpdateFeedbackFigures() {\r\n        if (!this.using) return;\r\n        let transfromFeedback = this.transformFeedback;\r\n        if (this.updateFeedbackId) {\r\n            cancelAnimationFrame(this.updateFeedbackId);\r\n        }\r\n        this.updateFeedbackId = requestAnimationFrame(() => {\r\n            transfromFeedback.visible = false;\r\n            transfromFeedback.rotation = 0;\r\n            transfromFeedback.scalex = transfromFeedback.scaley = 1;\r\n            transfromFeedback.skewx = transfromFeedback.skewy = 0;\r\n            if (!this.currentFeedbacks) this.currentFeedbacks = [];\r\n            // TODO : 找个更好的办法让选择的图形根据z进行排序\r\n            this.currentSelections.sort((a, b) => {\r\n                let ap = a.parent;\r\n                let bp = b.parent;\r\n                if (ap && bp) {\r\n                    return ap.indexOfChild(a) - bp.indexOfChild(b)\r\n                }\r\n                return 0;\r\n            });\r\n            this.currentFeedbacks.forEach(feedback => {\r\n                if (feedback.parent) feedback.parent.removeChild(feedback);\r\n                feedback.dispose();\r\n                feedback.parent = null;\r\n                feedback.relatedSelection = null;\r\n            });\r\n            this.currentFeedbacks.length = 0;\r\n\r\n            this.currentSelections.forEach(selection => {\r\n                while (selection.parent != this.mainRoot) {\r\n                    selection = selection.parent;\r\n                }\r\n                let feedback = Tool.createDelegateFigure(selection, false);\r\n                this.transformFeedback.addFeedback(feedback);\r\n                this.currentFeedbacks.push(feedback);\r\n            })\r\n\r\n            if (this.currentFeedbacks && this.currentFeedbacks.length != 0) {\r\n                this.transformFeedback.visible = true;\r\n                let sameRotation = true;\r\n                let testRotation = this.currentSelections[0].rotation;\r\n                for (let i = 1; i < this.currentSelections.length; i++) {\r\n                    let selection = this.currentSelections[i];\r\n                    while (selection.parent != this.mainRoot) {\r\n                        selection = selection.parent;\r\n                    }\r\n                    // 计算有误差怎么办？\r\n                    if (!TransformFeedbackTool.isSameRadian(testRotation, selection.rotation)) {\r\n                        sameRotation = false;\r\n                        break;\r\n                    }\r\n                }\r\n                let transformBounds;\r\n                if (sameRotation) {\r\n                    // TODO ： 改进计算方法！\r\n                    let vx = new Vector2(1, 0).rotate(testRotation);\r\n                    let vy = new Vector2(0, 1).rotate(testRotation);\r\n                    let projectx = [Infinity, -Infinity];\r\n                    let projecty = [Infinity, -Infinity];\r\n                    this.currentSelections.forEach(selection => {\r\n                        while (selection.parent != this.mainRoot) {\r\n                            selection = selection.parent;\r\n                        }\r\n                        let wvs = selection.worldVertices;\r\n                        wvs.forEach(wv => {\r\n                            let px = vx.dot(wv[0], wv[1]);\r\n                            projectx[0] = Math.min(projectx[0], px);\r\n                            projectx[1] = Math.max(projectx[1], px);\r\n\r\n                            let py = vy.dot(wv[0], wv[1]);\r\n                            projecty[0] = Math.min(projecty[0], py);\r\n                            projecty[1] = Math.max(projecty[1], py);\r\n                        });\r\n                    });\r\n\r\n                    let vx1 = vx.clone().scale(projectx[0]);\r\n                    let vx2 = vx.clone().scale(projectx[1]);\r\n                    let vy1 = vy.clone().scale(projecty[0]);\r\n                    let vy2 = vy.clone().scale(projecty[1]);\r\n\r\n                    let tpv = new Vector2(vx1.x - vy1.x, vx1.y - vy1.y);\r\n                    let t = tpv.dot(vx.x, vx.y);\r\n                    tpv.x = t * vx.x + vy1.x;\r\n                    tpv.y = t * vx.y + vy1.y;\r\n\r\n                    let rbv = new Vector2(vx2.x - vy2.x, vx2.y - vy2.y);\r\n                    t = rbv.dot(vx.x, vx.y);\r\n                    rbv.x = t * vx.x + vy2.x;\r\n                    rbv.y = t * vx.y + vy2.y;\r\n\r\n                    let dpv = new Vector2(rbv.x - tpv.x, rbv.y - tpv.y);\r\n                    let w = vx.dot(dpv.x, dpv.y);\r\n                    let h = vy.dot(dpv.x, dpv.y);\r\n                    // let centerx = (rbv.x + tpv.x) / 2;\r\n                    // let centery = (rbv.y + tpv.y) / 2;\r\n                    this.transformFeedback.rotation = testRotation;\r\n                    transformBounds = { left: tpv.x, top: tpv.y, right: tpv.x + w, bottom: tpv.y + h };\r\n\r\n                } else {\r\n                    transformBounds = Utils.calculateFiguresBounds(this.currentSelections);\r\n                }\r\n\r\n                this.transformFeedback.x = transformBounds.left;\r\n                this.transformFeedback.y = transformBounds.top;\r\n                this.transformFeedback.width = transformBounds.right - transformBounds.left;\r\n                this.transformFeedback.height = transformBounds.bottom - transformBounds.top;\r\n                this.transformFeedback.initFeedbackContainer();\r\n                let tim = this.transformFeedback.worldMatrix.clone().invert();\r\n                this.currentFeedbacks.forEach((feedback) => {\r\n                    let fm = tim.clone().multiply(feedback.relatedSelection.worldMatrix);\r\n                    let pose = fm.decompose();\r\n                    u.applyPose(feedback, pose);\r\n                });\r\n\r\n            }\r\n            this.feedbackFiguresUpdated();\r\n            this.frontRoot.refresh();\r\n            this.updateFeedbackId = null;\r\n        });\r\n    }\r\n\r\n    feedbackFiguresUpdated() { }\r\n\r\n    updateCurrentSelections(selections) {\r\n        super.updateCurrentSelections(selections);\r\n        this.requestUpdateFeedbackFigures();\r\n    }\r\n\r\n    get transformFeedback() {\r\n        if (this._transformFeedback == null) {\r\n            this._transformFeedback = new TransformFeedback();\r\n            this.frontRoot.addChild(this._transformFeedback);\r\n            // this.frontRoot.transformFeedback = this._transformFeedback;\r\n        }\r\n        return this._transformFeedback;\r\n    }\r\n\r\n    static isSameRadian(r1, r2) {\r\n        return r1 == r2 || Math.abs(r1 - r2) <= EPSILON;\r\n    }\r\n}\r\n\r\nconst EPSILON = 0.00001","import Rect from \"../lib/shape/rect.js\";\r\nimport Tool from \"./tool.js\";\r\nimport SAT from \"../lib/math/sat.js\";\r\nimport Utils from \"../utils.js\";\r\nimport u from \"../lib/utils.js\"\r\nimport TransformFeedbackTool from \"./transform-feedback-tool.js\";\r\nimport QuadTreeNode from \"../lib/quadtree/quadtree-node.js\";\r\nimport Group from \"../lib/group.js\";\r\n\r\nexport default class SelectTool extends TransformFeedbackTool {\r\n    constructor(fr, mr, br) {\r\n        super(fr, mr, br, 'select');\r\n        this.notifySelectionChange = true;\r\n    }\r\n\r\n    get rect() {\r\n        if (!this._selectRect) {\r\n            let color = Tool.FEEDBACK_COLOR;\r\n            let bcolor = Tool.FEEDBACK_B_COLOR;\r\n            this._selectRect = new Rect({\r\n                r: color[0], g: color[1], b: color[2], a: 0.5,\r\n                showBorder: true,\r\n                br: bcolor[0], bg: bcolor[1], bb: bcolor[2],\r\n                borderWidth: 1\r\n            });\r\n            this.frontRoot.addChild(this._selectRect);\r\n        }\r\n        return this._selectRect;\r\n    }\r\n\r\n    toolActived(x, y) {\r\n        this.rect.visible = false;\r\n        this.deleteHoverFigure();\r\n        let figure = this.frontRoot.findFigure(x, y);\r\n        figure = figure == this.frontRoot ? null : figure;\r\n        let transformId = this.getTransformToolId(figure);\r\n        if (transformId) {\r\n            this.notifySelectionChange = false;\r\n            this.switchTool(transformId, x, y, {\r\n                currentFeedbacks: this.currentFeedbacks,\r\n                transformFeedback: this.transformFeedback,\r\n                keepFeedback: true\r\n            });\r\n        } else {\r\n            figure = this.mainRoot.findFigure(x, y);\r\n            figure = figure == this.mainRoot ? null : figure;\r\n            if (figure /*&& !(figure instanceof Group)*/) {\r\n                while (figure.parent != this.mainRoot) {\r\n                    figure = figure.parent;\r\n                }\r\n                if (this.currentSelections\r\n                    && this.currentSelections.indexOf(figure) != -1) {\r\n                    this.notifySelectionChange = false;\r\n                }\r\n                this.switchTool('move', x, y, {\r\n                    currentFeedbacks: this.currentFeedbacks,\r\n                    transformFeedback: this.transformFeedback,\r\n                    keepFeedback: true\r\n                });\r\n            } else {\r\n                this.rect.width = this.rect.height = 0;\r\n                this.rect.visible = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    toolDeactived(x, y) {\r\n        if (!this.notifySelectionChange) return;\r\n        let l = Math.min(this.sx, this.ex);\r\n        let t = Math.min(this.sy, this.ey);\r\n        let r = Math.max(this.sx, this.ex);\r\n        let b = Math.max(this.sy, this.ey);\r\n        if (l == r && t == b) {\r\n            let select = this.mainRoot.findFigure(l, t);\r\n            select = select == this.mainRoot ? null : select;\r\n            // 如果是Group的话，点击到子figure，那么返回的要是Group\r\n            if (select) {\r\n                while (select.parent != this.mainRoot) select = select.parent;\r\n            }\r\n            let selections = [];\r\n            if (select) selections.push(select);\r\n            return { selections: selections, type: 'new' };\r\n        } else {\r\n            let blur = this.mainRoot.findChildren({ left: l, top: t, right: r, bottom: b });\r\n            let selections = [];\r\n            if (blur && blur.length != 0) {\r\n                blur.forEach(node => {\r\n                    let f = node instanceof QuadTreeNode ? node.value : node;\r\n                    // 选择框的轴是固定的\r\n                    if (SAT.contactTest(f.worldVertices, f.worldAxis,\r\n                        this.rect.worldVertices, [[0, 1], [1, 0]])) {\r\n                        selections.push(f);\r\n                    }\r\n                })\r\n            }\r\n            return { selections: selections, type: 'new' };\r\n        }\r\n    }\r\n\r\n    hoverMove(x, y) {\r\n        if (this.mainRoot.children.length == 0) return;\r\n        let transform = this.frontRoot.findFigure(x, y);\r\n        let transformId = this.getTransformToolId(transform);\r\n        this.changeCursor(this.defaultCursor);\r\n        if (transformId) {\r\n            let cursor = Utils.CURSOR[transformId];\r\n            if (cursor) this.changeCursor(cursor);\r\n            this.deleteHoverFigure();\r\n            this.frontRoot.refresh();\r\n            return `变换:${transformId}`;\r\n        } else {\r\n            let figure = this.mainRoot.findFigure(x, y);\r\n            figure = figure == this.mainRoot ? null : figure;\r\n            if (figure instanceof Group) figure = null;\r\n            if (this.currentSelectionsContains(figure)) {\r\n                this.changeCursor(Utils.CURSOR['move']);\r\n            }\r\n            this.updateHoverFigure(figure);\r\n            this.frontRoot.refresh();\r\n            if (figure) return `${figure.name} [x:${figure.x.toFixed(0)},y:${figure.y.toFixed(0)},w:${figure.width},h:${figure.height}]`;\r\n        }\r\n    }\r\n\r\n    feedbackFiguresUpdated() {\r\n        this.updateHoverFigure();\r\n    }\r\n\r\n    currentSelectionsContains(figure) {\r\n        if (!this.currentSelections || !figure) return false;\r\n        for (let i = 0; i < this.currentSelections.length; i++) {\r\n            const c = this.currentSelections[i];\r\n            if (c.id == figure.id) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getTransformToolId(figure) {\r\n        if (!figure) return;\r\n        let t = this.transformFeedback;\r\n        if (t != null) {\r\n            if (figure == t.rotateAnchor) return 'rotate';\r\n            if (figure == t.topAnchor) return 'n-resize'\r\n            if (figure == t.bottomAnchor) return 's-resize'\r\n            if (figure == t.leftAnchor) return 'w-resize'\r\n            if (figure == t.rightAnchor) return 'e-resize'\r\n            if (figure == t.seAnchor) return 'se-resize'\r\n            if (figure == t.neAnchor) return 'ne-resize'\r\n            if (figure == t.swAnchor) return 'sw-resize'\r\n            if (figure == t.nwAnchor) return 'nw-resize'\r\n        }\r\n    }\r\n\r\n    isTransformTool(figure) {\r\n        let t = this.transformFeedback;\r\n        if (t != null) {\r\n            return figure == t.topAnchor || figure == t.rotateAnchor\r\n                || figure == t.bottomAnchor || figure == t.rightAnchor\r\n                || figure == t.leftAnchor || figure == t.seAnchor || figure == t.neAnchor\r\n                || figure == t.swAnchor || figure == t.nwAnchor;\r\n        }\r\n    }\r\n\r\n    deleteHoverFigure() {\r\n        if (this._lastHoverDelegate) {\r\n            this._lastHoverDelegate.dispose();\r\n            this.frontRoot.removeChild(this._lastHoverDelegate);\r\n            this._lastHoverDelegate.parent = null;\r\n            this._lastHoverDelegate.relatedSelection = null;\r\n            this._lastHoverDelegate = null;\r\n        }\r\n    }\r\n\r\n    updateHoverFigure(figure) {\r\n        if (!figure) {\r\n            this.deleteHoverFigure();\r\n        } else {\r\n            if (!this._lastHoverDelegate) {\r\n                if (!this.isTransformTool(figure)) {\r\n                    this._lastHoverDelegate = Tool.createDelegateFigure(figure);\r\n                    this.frontRoot.addChild(this._lastHoverDelegate);\r\n                }\r\n            } else {\r\n                if (this._lastHoverDelegate.relatedSelection.id != figure.id) {\r\n                    this.deleteHoverFigure();\r\n                    this._lastHoverDelegate = Tool.createDelegateFigure(figure);\r\n                    this.frontRoot.addChild(this._lastHoverDelegate);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b) {\r\n        this.rect.x = l;\r\n        this.rect.y = t;\r\n        this.rect.width = r - l;\r\n        this.rect.height = b - t;\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    reset() {\r\n        super.reset();\r\n        this.deleteHoverFigure();\r\n        this.notifySelectionChange = true;\r\n        this.rect.visible = false;\r\n        this.rect.width = this.rect.height = 0;\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    unUse() {\r\n        this.deleteHoverFigure();\r\n        super.unUse();\r\n    }\r\n}","import Tool from \"../tool.js\";\r\n\r\nexport default class TranslateTool extends Tool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'move');\r\n        this.startPosition = {};\r\n    }\r\n\r\n    prepare(args) {\r\n        if (args) {\r\n            this.currentFeedbacks = args.currentFeedbacks;\r\n            this.transformFeedback = args.transformFeedback;\r\n        }\r\n    }\r\n\r\n    toolActived(x, y) {\r\n        super.toolActived(x, y);\r\n        if (this.currentFeedbacks && this.currentFeedbacks.length > 0) {\r\n            let first = this.currentFeedbacks[0];\r\n            this.startPosition = first.worldMatrix.decompose().translation;\r\n        }\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b);\r\n        if (this.currentFeedbacks && this.transformFeedback) {\r\n            let m = this.transformFeedback.worldMatrix.invert();\r\n            let lp = m.multiplyWithVertexDatas(this.lx, this.ly);\r\n            let p = m.multiplyWithVertexDatas(x, y);\r\n            dx = p[0] - lp[0];\r\n            dy = p[1] - lp[1];\r\n            this.currentFeedbacks.forEach(fb => {\r\n                fb.x += dx;\r\n                fb.y += dy;\r\n            });\r\n            this.frontRoot.refresh();\r\n        }\r\n    }\r\n\r\n    toolDeactived(x, y) {\r\n        super.toolDeactived(x, y);\r\n        let dx = this.ex - this.sx;\r\n        let dy = this.ey - this.sy;\r\n        if (dx == 0 && dy == 0) return;\r\n        let figures = [];\r\n        this.currentSelections.forEach(s => figures.push(s));\r\n        // 这里默认移动元素都是mainroot的子节点\r\n        return {\r\n            figures: figures, dx: dx / this.mainRoot.scalex,\r\n            dy: dy / this.mainRoot.scaley\r\n        };\r\n    }\r\n}","import Matrix3 from \"../../lib/math/matrix3.js\";\r\nimport Tool from \"../tool.js\";\r\n\r\nexport default class PoseChangeTool extends Tool {\r\n    constructor(f, m, b, id) {\r\n        super(f, m, b, id);\r\n    }\r\n\r\n    prepare(args) {\r\n        if (args) {\r\n            this.currentFeedbacks = args.currentFeedbacks;\r\n            this.transformFeedback = args.transformFeedback;\r\n        }\r\n    }\r\n\r\n    get isIllegalData() {\r\n        return false;\r\n    }\r\n\r\n    processFinalResult(pose) { }\r\n\r\n    toolDeactived(x, y) {\r\n        super.toolDeactived(x, y);\r\n        if (this.isIllegalData) return;\r\n        let result = [];\r\n        this.currentFeedbacks.forEach(feedback => {\r\n            try {\r\n                let applyFigure = feedback.relatedSelection;\r\n                if (applyFigure == null) {\r\n                    console.error('发生错误，没有找到feedbackfigure id对应的figure');\r\n                    return;\r\n                }\r\n                let ipm2;\r\n                if (applyFigure.parent) {\r\n                    ipm2 = applyFigure.parent.worldMatrix.clone().invert();\r\n                } else {\r\n                    ipm2 = new Matrix3();\r\n                }\r\n                let fm = feedback.worldMatrix;\r\n                ipm2.multiply(fm);\r\n                let pose = ipm2.decompose();\r\n                this.processFinalResult(pose);\r\n                result.push({\r\n                    figure: applyFigure, pose: pose\r\n                });\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n\r\n        });\r\n        \r\n        return result;\r\n    }\r\n}","import Matrix3 from \"../../lib/math/matrix3.js\";\r\nimport Utils from \"../../lib/utils.js\";\r\nimport PoseChangeTool from \"./pose-change-tool.js\";\r\n\r\n// TODO : 改造成可以指定旋转锚点坐标\r\nexport default class RotateTool extends PoseChangeTool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'rotate');\r\n        this.sr;\r\n        this.anchor = { x: 0.5, y: 0.5 };\r\n    }\r\n\r\n    prepare(args) {\r\n        super.prepare(args);\r\n        this.anchor = args != null && args.anchor != null ? args.anchor : this.anchor;\r\n    }\r\n\r\n    active(x, y) {\r\n        super.active(x, y);\r\n        if (!this.transformFeedback) return;\r\n        let figure = this.transformFeedback;\r\n        let m = figure.worldMatrix.clone();\r\n        this.cx = this.w = this.anchor.x * figure.width;\r\n        this.cy = this.h = this.anchor.y * figure.height;\r\n        let p = m.multiplyWithVertexDatas(this.cx, this.cy);\r\n        this.cx = p[0]; this.cy = p[1];\r\n        this.sr = Math.atan2(y - this.cy, x - this.cx);\r\n        this.startRotation = this.transformFeedback.rotation;\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!this.transformFeedback) return;\r\n        let feedback = this.transformFeedback;\r\n        let cr = Math.atan2(y - this.cy, x - this.cx);\r\n        let delta = cr - this.sr;\r\n        let pose = new Matrix3().translate(this.cx, this.cy)\r\n            .rotate(delta + this.startRotation)\r\n            .translate(-this.w, -this.h).decompose();\r\n        Utils.applyPose(feedback, pose);\r\n        // 这里由于计算误差，所以设置一下。变换框是不会拉伸和倾斜的\r\n        feedback.scalex = feedback.scaley = 1;\r\n        feedback.skewx = feedback.skewy = 0;\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    get isIllegalData() {\r\n        if (!this.transformFeedback) return;\r\n        return this.transformFeedback.rotation - this.startRotation == 0\r\n    }\r\n\r\n    reset() {\r\n        super.reset();\r\n        this.startRotation = null;\r\n        this.sr = null;\r\n        this.cx = this.cy = null;\r\n    }\r\n}","import Utils from \"../../lib/utils.js\";\r\nimport PoseChangeTool from \"./pose-change-tool.js\";\r\n\r\nexport default class EResizeTool extends PoseChangeTool {\r\n    constructor(f, n, b) {\r\n        super(f, n, b, 'e-resize');\r\n    }\r\n\r\n    get isIllegalData() {\r\n        return this.ex - this.sx == 0;\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!this.transformFeedback) return;\r\n        let dis = Utils.distance(this.lx, this.ly, x, y);\r\n        if (dx == 0) dis = 0;\r\n        if (dx < 0) dis *= -1;\r\n        this.transformFeedback.width += dis;\r\n        this.frontRoot.refresh();\r\n    }\r\n}","import Vector2 from \"../../lib/math/vector2.js\";\r\nimport Utils from \"../../lib/utils.js\";\r\nimport PoseChangeTool from \"./pose-change-tool.js\";\r\n\r\nexport default class WResizeTool extends PoseChangeTool {\r\n    constructor(f, n, b) {\r\n        super(f, n, b, 'w-resize');\r\n    }\r\n\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!this.transformFeedback) return;\r\n        let dis = Utils.distance(this.lx, this.ly, x, y);\r\n        if (dx == 0) dis = 0;\r\n        if (dx > 0) dis *= -1;\r\n        this.transformFeedback.width += dis;\r\n        let v = new Vector2(-1, 0).rotate(this.transformFeedback.rotation);\r\n        v.scale(dis);\r\n        this.transformFeedback.y += v.y;\r\n        this.transformFeedback.x += v.x;\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    get isIllegalData() {\r\n        return this.ex - this.sx == 0;\r\n    }\r\n}","import Vector2 from \"../../lib/math/vector2.js\";\r\nimport Utils from \"../../lib/utils.js\";\r\nimport PoseChangeTool from \"./pose-change-tool.js\";\r\n\r\nexport default class NResizeTool extends PoseChangeTool {\r\n    constructor(f, n, b) {\r\n        super(f, n, b, 'n-resize');\r\n    }\r\n\r\n    get isIllegalData() {\r\n        return this.ey - this.sy == 0;\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!this.transformFeedback) return;\r\n        let dis = Utils.distance(this.lx, this.ly, x, y);\r\n        if (dy == 0) dis = 0;\r\n        if (dy > 0) dis *= -1;\r\n        this.transformFeedback.height += dis;\r\n        let v = new Vector2(0, -1).rotate(this.transformFeedback.rotation);\r\n        v.scale(dis);\r\n        this.transformFeedback.y += v.y;\r\n        this.transformFeedback.x += v.x;\r\n        this.frontRoot.refresh();\r\n    }\r\n}","import Utils from \"../../lib/utils.js\";\r\nimport PoseChangeTool from \"./pose-change-tool.js\";\r\n\r\nexport default class SResizeTool extends PoseChangeTool {\r\n    constructor(f, n, b) {\r\n        super(f, n, b, 's-resize');\r\n    }\r\n\r\n    get isIllegalData() {\r\n        return this.ey - this.sy == 0;\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!this.transformFeedback) return;\r\n        let dis = Utils.distance(this.lx, this.ly, x, y);\r\n        if (dy == 0) dis = 0;\r\n        if (dy < 0) dis *= -1;\r\n        this.transformFeedback.height += dis;\r\n        this.frontRoot.refresh();\r\n    }\r\n}","import PoseChangeTool from \"./pose-change-tool.js\";\r\n\r\nexport default class ConerResizeTool extends PoseChangeTool {\r\n    constructor(f, m, b, id) {\r\n        super(f, m, b, id);\r\n    }\r\n\r\n    get isIllegalData() {\r\n        return this.ex - this.sx == 0 && this.ey - this.ex == 0;\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!this.transformFeedback) return;\r\n        let m = this.transformFeedback.worldMatrix.clone().invert();\r\n        let p1 = m.multiplyWithVertexDatas(this.lx, this.ly);\r\n        let p2 = m.multiplyWithVertexDatas(x, y);\r\n        dx = p2[0] - p1[0], dy = p2[1] - p1[1];\r\n        this.updateTransformFeedback(this.transformFeedback, dx, dy, x, y);\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    updateTransformFeedback(feedback, dx, dy) {\r\n\r\n    }\r\n}","import ConerResizeTool from \"./coner-resize-tool.js\";\r\n\r\nexport default class SEResizeTool extends ConerResizeTool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'se-resize');\r\n    }\r\n\r\n    updateTransformFeedback(feedback, dx, dy) {\r\n        feedback.height += dy;\r\n        feedback.width += dx;\r\n    }\r\n}","import ConerResizeTool from \"./coner-resize-tool.js\";\r\n\r\nexport default class NEResizeTool extends ConerResizeTool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'ne-resize');\r\n    }\r\n\r\n    updateTransformFeedback(feedback, dx, dy) {\r\n        feedback.height -= dy;\r\n        feedback.width += dx;\r\n        feedback.y += dy * Math.cos(feedback.rotation);\r\n        feedback.x -= dy * Math.sin(feedback.rotation);\r\n    }\r\n}","import ConerResizeTool from \"./coner-resize-tool.js\";\r\n\r\nexport default class SWResizeTool extends ConerResizeTool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'sw-resize');\r\n    }\r\n\r\n    updateTransformFeedback(feedback, dx, dy) {\r\n        feedback.height += dy;\r\n        feedback.width -= dx;\r\n\r\n        feedback.x += dx * Math.cos(feedback.rotation);\r\n        feedback.y += dx * Math.sin(feedback.rotation);\r\n    }\r\n}","import ConerResizeTool from \"./coner-resize-tool.js\";\r\n\r\nexport default class NWResizeTool extends ConerResizeTool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'nw-resize');\r\n    }\r\n\r\n    updateTransformFeedback(feedback, dx, dy, x, y) {\r\n        feedback.height -= dy;\r\n        feedback.width -= dx;\r\n\r\n        feedback.y -= this.ly - y\r\n        feedback.x -= this.lx - x\r\n    }\r\n}","import Utils from \"../../utils.js\";\r\nimport Tool from \"../tool.js\"\r\n\r\nexport default class ShapeTool extends Tool {\r\n    constructor(f, m, b, id) {\r\n        super(f, m, b, id);\r\n    }\r\n\r\n    get defaultCursor() {\r\n        return Utils.CURSOR.add;\r\n    }\r\n\r\n    prepare() { this.fireSelectionChangeEvent([], 'new'); }\r\n\r\n    createShape(x, y) {\r\n    }\r\n\r\n    toolActived(x, y) {\r\n        this.fireSelectionChangeEvent([], 'new');\r\n        this._newShape = this.createShape(x, y);\r\n        if (!this._newShape) return;\r\n        this._newShape.alpha = 0.8;\r\n        this.frontRoot.addChild(this._newShape);\r\n    }\r\n\r\n    updateShapeBounds(shape, l, t, r, b, event) {\r\n        let w = r - l;\r\n        let h = b - t;\r\n        if (event.altKey) {\r\n            shape.width = w * 2;\r\n            shape.height = h * 2;\r\n            shape.x = this.sx;\r\n            shape.y = this.sy;\r\n        } else {\r\n            shape.width = w;\r\n            shape.height = h;\r\n            shape.x = l + w / 2;\r\n            shape.y = t + h / 2\r\n        }\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy, event) {\r\n        if (!this._newShape) return;\r\n        this.updateShapeBounds(this._newShape, l, t, r, b, event);\r\n        this.frontRoot.refresh();\r\n        return `Create ${this._newShape.name} [x:${l},y:${t},w:${r - l},h:${b - t}]`;\r\n    }\r\n\r\n    toolDeactived(x, y) {\r\n        if (!this._newShape || !this.mainRoot) return;\r\n        let m = this._newShape.worldMatrix.clone();\r\n        this.frontRoot.removeChild(this._newShape);\r\n        this._newShape.alpha = 1;\r\n        this.frontRoot.refresh();\r\n        if (this._newShape.width == 0 || this._newShape.height == 0) {\r\n            this._newShape.dispose();\r\n            this._newShape = null;\r\n            return;\r\n        }\r\n        let mm = this.mainRoot.worldMatrix.clone().invert();\r\n        let pose = mm.multiply(m).decompose();\r\n        this._newShape.x = pose.translation.x;\r\n        this._newShape.y = pose.translation.y;\r\n        this._newShape.width = this._newShape.width * pose.scale.x;\r\n        this._newShape.height = this._newShape.height * pose.scale.y;\r\n        // this.addNewFigure(this._newShape, this.figureName);\r\n        return { figure: this._newShape, name: this.figureName };\r\n    }\r\n\r\n    get figureName() {\r\n        return 'Shape';\r\n    }\r\n\r\n    reset() {\r\n        this._newShape = null;\r\n        super.reset();\r\n    }\r\n}","import CenterRect from \"../../lib/shape/center-rect.js\";\r\nimport ShapeTool from \"./shape-tool.js\";\r\n\r\nexport default class RectTool extends ShapeTool {\r\n    constructor(fr, mr, br, id = 'rect') {\r\n        super(fr, mr, br, id);\r\n    }\r\n    createShape(x, y) {\r\n        return new CenterRect({ name: 'Rectangle' });\r\n    }\r\n}","import CenterEllipse from \"../../lib/shape/center-ellipse.js\";\r\nimport ShapeTool from \"./shape-tool.js\";\r\n\r\nexport default class EllipseTool extends ShapeTool {\r\n    constructor(fr, mr, br, id = 'ellipse') {\r\n        super(fr, mr, br, id);\r\n    }\r\n\r\n    createShape(x, y) {\r\n        return new CenterEllipse({ name: 'Ellipse' });\r\n    }\r\n}","import Point from \"../point.js\";\r\nimport Transformable from \"../transformable.js\";\r\nimport Star from \"./star.js\";\r\n\r\nexport default class CenterStar extends Star {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    _configPathPoints(path) {\r\n        let pointsCount = this.corners * 2;\r\n        for (let i = 0; i < pointsCount; i++) {\r\n            path.addPoint(new Point());\r\n        }\r\n        let count = this.corners;\r\n        let delta = Transformable.PI2 / count;\r\n\r\n        let outAngleOffset = - Transformable.HALF_PI;\r\n        let outIndexOffset = 0;\r\n\r\n        let inAngleOffset = outAngleOffset + delta / 2;\r\n        let inIndexOffset = 1;\r\n\r\n        let a = this.width / 2;\r\n        let a1 = a * this.radius;\r\n        let b = this.height / 2;\r\n        let b1 = b * this.radius;\r\n\r\n        let offsetx = 0;  //this.width / 2;\r\n        let offsety = 0; //this.height / 2;\r\n\r\n        for (let i = 0, angle = 0, index = 0; i < count; i++) {\r\n            let theta = angle + outAngleOffset;\r\n            let x = Math.cos(theta) * a;\r\n            let y = Math.sin(theta) * b;\r\n            let p1 = path.points[index + outIndexOffset];\r\n            p1.x = x + offsetx; p1.y = y + offsety;\r\n\r\n            theta = angle + inAngleOffset;\r\n            x = Math.cos(theta) * a1;\r\n            y = Math.sin(theta) * b1;\r\n            let p2 = path.points[index + inIndexOffset];\r\n            p2.x = x + offsetx; p2.y = y + offsety;\r\n            angle += delta;\r\n            index += 2;\r\n        }\r\n    }\r\n}","import CenterStar from \"../../lib/shape/center-star.js\";\r\nimport ShapeTool from \"./shape-tool.js\";\r\n\r\nexport default class StarTool extends ShapeTool {\r\n    constructor(f, m, b, id = 'star') {\r\n        super(f, m, b, id);\r\n    }\r\n    createShape() {\r\n        return new CenterStar({ name: 'Star' });\r\n    }\r\n}","import Point from \"../point.js\";\r\nimport Polygon from \"./polygon.js\";\r\n\r\nexport default class CenterPolygon extends Polygon {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n\r\n    _configPathPoints(path) {\r\n        let a = this.width / 2;\r\n        let b = this.height / 2;\r\n        let theta = -Math.PI / 2;\r\n        let delta = Math.PI * 2 / this.sides;\r\n        let offsetx = 0;//this.width / 2;\r\n        let offsety = 0;//this.height / 2;\r\n        for (let i = 0; i < this.sides; i++) {\r\n            let x = Math.cos(theta) * a + offsetx;\r\n            let y = Math.sin(theta) * b + offsety;\r\n            path.addPoint(new Point(x, y));\r\n            theta += delta;\r\n        }\r\n    }\r\n}","import ShapeTool from \"./shape-tool.js\";\r\nimport CenterPolygon from \"../../lib/shape/center-polygon.js\";\r\n\r\nexport default class PolygonTool extends ShapeTool {\r\n    constructor(fr, mr, br, id = 'polygon') {\r\n        super(fr, mr, br, id);\r\n    }\r\n\r\n    createShape(x, y) {\r\n        return new CenterPolygon({ name: 'Polygon' });\r\n    }\r\n}","import CenterEllipse from \"../lib/shape/center-ellipse.js\";\r\n\r\nexport default class VertexController extends CenterEllipse {\r\n    constructor(model, isOut = false, props) {\r\n        super(props);\r\n        this.model = model;\r\n        this.isOut = isOut\r\n        this.r = 122;\r\n        this.g = 255;\r\n        this.b = 0;\r\n        this.master;\r\n        this._isfocus = false;\r\n    }\r\n\r\n    focus() {\r\n        this._isfocus = true;\r\n    }\r\n\r\n    blur() {\r\n        this._isfocus = false;\r\n    }\r\n\r\n\r\n    dispose() {\r\n        this.master = null;\r\n        this.relate = null;\r\n        super.dispose();\r\n    }\r\n\r\n    update(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        let m = this.master.worldMatrix.clone().invert();\r\n        let p = m.multiplyWithVertexDatas(x, y);\r\n        if (this.isOut) {\r\n            this.model.outX = p[0];\r\n            this.model.outY = p[1];\r\n        } else {\r\n            this.model.inX = p[0];\r\n            this.model.inY = p[1];\r\n        }\r\n    }\r\n\r\n    calculateLocalBounds(b = { left, top, right, bottom }) {\r\n        let bounds = super.calculateLocalBounds(b);\r\n        bounds.left -= this.width;\r\n        bounds.top -= this.height;\r\n        bounds.right += this.width;\r\n        bounds.bottom += this.height;\r\n        return bounds\r\n    }\r\n\r\n    drawSelf(ctx) {\r\n        if (this._isfocus) {\r\n            this.r = 255, this.g = 0, this.b = 0;\r\n        } else {\r\n            this.r = 122;\r\n            this.g = 255;\r\n            this.b = 0;\r\n        }\r\n        super.drawSelf(ctx);\r\n    }\r\n}","import CanvasKitUtils from \"../lib/canvaskit-utils.js\";\r\nimport CenterRect from \"../lib/shape/center-rect.js\";\r\nimport VertexController from \"./vertex-controller.js\";\r\n\r\nexport default class Vertex extends CenterRect {\r\n    constructor(pointModel, props) {\r\n        super(props);\r\n        this.model = pointModel;\r\n        this._linePaint = CanvasKitUtils.newPaint();\r\n        this._linePaint.setStyle(CanvasKitUtils.strokeStyle);\r\n        this._linePaint.setColorComponents(0, 0, 255, 1);\r\n        this._linePaint.setAntiAlias(false);\r\n        this._isfocus = false;\r\n    }\r\n\r\n    get type() {\r\n        if (this.model) return this.model.type\r\n    }\r\n\r\n    set type(t) {\r\n        if (this.model && this.model.type != t) {\r\n            this.model.type = t;\r\n        }\r\n    }\r\n\r\n    focus() {\r\n        this._isfocus = true;\r\n    }\r\n\r\n    blur() {\r\n        this._isfocus = false;\r\n    }\r\n\r\n    hideController(flagIn = true, flagOut = true) {\r\n        if (this.inController) this.inController.visible = true;\r\n        if (this.outController) this.outController.visible = true;\r\n        if (this.inController && flagIn) this.inController.visible = false;\r\n        if (this.outController && flagOut) this.outController.visible = false;\r\n    }\r\n\r\n    showController(in1 = true, out = true) {\r\n        if (this.inController) this.inController.visible = false;\r\n        if (this.outController) this.outController.visible = false;\r\n        if (this.inController && in1) this.inController.visible = true;\r\n        if (this.outController && out) this.outController.visible = true;\r\n    }\r\n\r\n    initControllerPoints() {\r\n        let m = this.master.worldMatrix;\r\n        if (!this.inController && this.model && this.model.in) {\r\n            let x = this.x;\r\n            let y = this.y;\r\n            if (this.model.in) {\r\n                x = this.model.inX;\r\n                y = this.model.inY;\r\n                let p = m.multiplyWithVertexDatas(x, y);\r\n                x = p[0], y = p[1];\r\n            }\r\n            this.inController = new VertexController(this.model, false, {\r\n                x: x, y: y,\r\n                width: this.width, height: this.height\r\n            });\r\n            this.inController.master = this.master;\r\n            this.inController.relate = this;\r\n            this.parent.addChild(this.inController);\r\n        }\r\n        if (!this.outController && this.model && this.model.out) {\r\n            let x = this.x;\r\n            let y = this.y;\r\n            if (this.model.out) {\r\n                x = this.model.outX;\r\n                y = this.model.outY;\r\n                let p = m.multiplyWithVertexDatas(x, y);\r\n                x = p[0], y = p[1];\r\n            }\r\n            this.outController = new VertexController(this.model, true, {\r\n                x: x, y: y,\r\n                width: this.width, height: this.height\r\n            });\r\n            this.outController.master = this.master;\r\n            this.outController.relate = this;\r\n            this.parent.addChild(this.outController);\r\n        }\r\n    }\r\n\r\n    drawSelf(ctx) {\r\n\r\n        let x = 0;\r\n        let y = 0;\r\n        if (this.inController && this.inController.isVisible) {\r\n            let x1 = this.inController.x - this.x;\r\n            let y1 = this.inController.y - this.y;\r\n            ctx.drawLine(x, y, x1, y1, this._linePaint);\r\n        }\r\n\r\n        if (this.outController && this.outController.isVisible) {\r\n            let x2 = this.outController.x - this.x;\r\n            let y2 = this.outController.y - this.y;\r\n            ctx.drawLine(x, y, x2, y2, this._linePaint);\r\n        }\r\n        this.br = 255, this.bb = 255, this.bg = 255;\r\n        if (this._isfocus) {\r\n            this.r = 255, this.g = 0, this.b = 0;\r\n        } else {\r\n            this.r = 0, this.g = 0, this.b = 0;\r\n        }\r\n        super.drawSelf(ctx);\r\n    }\r\n\r\n\r\n    dispose() {\r\n        this.master = null;\r\n        if (this.model) this.model.dispose();\r\n        if (this._linePaint) {\r\n            this.getTarget()._linePaint.delete();\r\n        }\r\n        if (this.inController) {\r\n            this.inController.parent.removeChild(this.inController);\r\n            this.inController.dispose();\r\n            this.inController = null;\r\n        }\r\n        if (this.outController) {\r\n            this.outController.parent.removeChild(this.outController);\r\n            this.outController.dispose();\r\n            this.outController = null;\r\n        }\r\n        super.dispose();\r\n    }\r\n\r\n    update(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n        let m = this.master.worldMatrix.clone().invert();\r\n        let p = m.multiplyWithVertexDatas(x, y);\r\n        this.model.x = p[0];\r\n        this.model.y = p[1];\r\n    }\r\n\r\n    calculateLocalBounds(b = { left, top, right, bottom }) {\r\n        let bounds = super.calculateLocalBounds(b);\r\n        bounds.left -= this.width;\r\n        bounds.top -= this.height;\r\n        bounds.right += this.width;\r\n        bounds.bottom += this.height;\r\n        return bounds\r\n    }\r\n}","import PathShape from \"../lib/shape/path-shape.js\";\r\nimport Vertex from \"./vertex.js\";\r\n\r\nexport default class VerticesPathFeedback extends PathShape {\r\n    constructor(props) {\r\n        super(props);\r\n        this.vertexSize = props == null || props.vertexSize == null ? 7 : props.vertexSize;\r\n        this.vertexFigures = [];// 它们的关系不是父子\r\n    }\r\n\r\n    deletePathModel() {\r\n        super.deletePathModel();\r\n        this.vertexFigures.forEach(v => {\r\n            let p = v.parent;\r\n            if (p) p.removeChild(v);\r\n            v.dispose();\r\n        });\r\n        this.vertexFigures.length = 0;\r\n    }\r\n\r\n    applyWorkingVisible() {\r\n        this.hideAllVertex();\r\n        this.visible = true;\r\n        this.a = 0.2;\r\n        let v = this.getLastPreVertexFigure();\r\n        if (v) {\r\n            v.visible = true;\r\n            v.showController(false, true);\r\n        }\r\n        let v2 = this.getLastVertexFigure();\r\n        if (v2) {\r\n            v2.visible = true;\r\n            v2.showController(true, true);\r\n        }\r\n    }\r\n\r\n    applyRestingVisible() {\r\n        this.showAllVertex()\r\n        this.hideAllVertexController();\r\n        this.visible = true;\r\n        this.a = 0;\r\n    }\r\n\r\n    indexOfVertex(figure) {\r\n        for (let i = 0; i < this.vertexFigures.length; i++) {\r\n            const element = this.vertexFigures[i];\r\n            if (figure == element) return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    hideAllVertex() {\r\n        this.vertexFigures.forEach(v => v.visible = false);\r\n    }\r\n\r\n\r\n    showAllVertex() {\r\n        this.vertexFigures.forEach(v => v.visible = true);\r\n    }\r\n\r\n    hideAllVertexController() {\r\n        this.vertexFigures.forEach(v => {\r\n            v.hideController(true, true);\r\n        });\r\n    }\r\n\r\n    getVertexFigure(index) {\r\n        return this.vertexFigures[index];\r\n    }\r\n\r\n    getFirstVertexFigure() {\r\n        return this.vertexFigures[0];\r\n    }\r\n\r\n    getLastVertexFigure() {\r\n        return this.vertexFigures[this.vertexFigures.length - 1];\r\n    }\r\n\r\n    getLastPreVertexFigure() {\r\n        return this.vertexFigures[this.vertexFigures.length - 2];\r\n    }\r\n\r\n    getVertexFigureCount() { return this.vertexFigures.length }\r\n\r\n    addVertexFigure(point) {\r\n        if (this.parent && point) {\r\n            let vertex = new Vertex(point, {\r\n                width: this.vertexSize, height: this.vertexSize,\r\n                r: 0, g: 0, b: 0\r\n            });\r\n            vertex.master = this;\r\n            let w = this.worldMatrix;\r\n            let p = w.multiplyWithVertexDatas(point.x, point.y);\r\n            vertex.x = p[0], vertex.y = p[1];\r\n\r\n            this.parent.addChild(vertex);\r\n            this.vertexFigures.push(vertex);\r\n            vertex.initControllerPoints();\r\n            return vertex;\r\n        }\r\n    }\r\n\r\n    removeVertexFigure(point) {\r\n        if (this.parent) {\r\n            for (let i = 0; i < this.vertexFigures.length; i++) {\r\n                const figure = this.vertexFigures[i];\r\n                if (figure.model.equals(point)) {\r\n                    this.vertexFigures.splice(i, 1);\r\n                    this.parent.removeChild(figure);\r\n                    figure.dispose();\r\n                    return figure;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    addPoint(point) {\r\n        super.addPoint(point);\r\n        return this.addVertexFigure(point);\r\n    }\r\n\r\n    insertPoint(point, index) {\r\n        super.insertPoint(point, index);\r\n        return this.addVertexFigure(point);\r\n    }\r\n\r\n    deletePoint(point) {\r\n        super.deletePoint(point);\r\n        return this.removeVertexFigure(point);\r\n    }\r\n\r\n    deleteAt(index) {\r\n        let point = super.deleteAt(index);\r\n        return this.removeVertexFigure(point);\r\n    }\r\n}","import Vertex from \"../figure/vertex.js\";\r\nimport VerticesPathFeedback from \"../figure/vertices-path-feedback.js\";\r\nimport Point from \"../lib/point.js\";\r\nimport PathShape from \"../lib/shape/path-shape.js\";\r\nimport Utils from \"../lib/utils.js\";\r\nimport Tool from \"./tool.js\";\r\n\r\nexport default class PenTool extends Tool {\r\n    constructor(f, m, b, id = 'pen') {\r\n        super(f, m, b, id);\r\n        this.vertices = [];\r\n        this.vertexSize = 4;\r\n    }\r\n\r\n    updateCurrentSelections(selections) {\r\n        super.updateCurrentSelections(selections);\r\n        if (!selections || !(selections[selections.length - 1] instanceof PathShape)) {\r\n            this.currentPath = null; // 不销毁，因为会有redo操作\r\n            this.disposeCurrentShadow();\r\n        } else {\r\n            if (this.currentPath == null && !selections[selections.length - 1].close) {\r\n                this.currentPath = selections[selections.length - 1];\r\n                this.createShadowPath(this.currentPath);\r\n            }\r\n        }\r\n        this.updateVertexShapeFeedback();\r\n    }\r\n\r\n    updateVertexShapeFeedback() {\r\n        if (this._updateFeedbackid) {\r\n            cancelAnimationFrame(this._updateFeedbackid);\r\n        }\r\n        if (this.shadowPath) this.shadowPath.visible = false;\r\n        this._updateFeedbackid = requestAnimationFrame(() => {\r\n            if (this.shadowPath == null) return;\r\n            let selection = this.currentSelections[this.currentSelections.length - 1];\r\n            if (selection.id == this.shadowPath.id && selection) {\r\n                this.shadowPath.visible = true;\r\n                Utils.applyPose(this.shadowPath, selection.worldMatrix.decompose());\r\n                this.shadowPath.deletePathModel(); // 清空重新生成\r\n                selection.getPathModel().points.forEach(p => {\r\n                    let p1 = p.clone();\r\n                    this.shadowPath.addPoint(p1);\r\n                });\r\n                this.shadowPath.applyRestingVisible();\r\n                this.frontRoot.refresh();\r\n            }\r\n        });\r\n    }\r\n\r\n    prepare(args) {\r\n        // this.fireSelectionChangeEvent([], 'new');\r\n    }\r\n\r\n    unUse(args) {\r\n        cancelAnimationFrame(this._updateFeedbackid);\r\n        this._updateFeedbackid = null;\r\n        this.disposeCurrentShadow();\r\n        this.currentPath = null;\r\n    }\r\n\r\n    createShadowPath(figure) {\r\n        this.disposeCurrentShadow();\r\n        this.shadowPath = new VerticesPathFeedback({\r\n            x: figure.x, y: figure.y, a: 0, borderWidth: 1\r\n        });\r\n        this.shadowPath.id = figure.id;\r\n        Tool.setFeedbackColors(this.shadowPath);\r\n        this.frontRoot.addChild(this.shadowPath);\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    addNewPoint(x, y) {\r\n        if (this.currentPath == null) {\r\n            this.currentPath = new PathShape({\r\n                x: x, y: y\r\n            });\r\n            this.currentPath.name = 'Path Shape';\r\n            this.createShadowPath(this.currentPath);\r\n            let m = this.currentPath.worldMatrix.clone().invert();\r\n            let p = m.multiplyWithVertexDatas(x, y);\r\n            let point = new Point(p[0], p[1]);\r\n            this.currentPath.addPoint(point);\r\n            let point2 = point.clone();\r\n            this.shadowPath.addPoint(point2);\r\n            this.currentAdded = this.currentPath;\r\n            this.frontRoot.refresh();\r\n            return;\r\n        }\r\n        let m = this.currentPath.worldMatrix.clone().invert();\r\n        let p = m.multiplyWithVertexDatas(x, y);\r\n        let point = new Point(p[0], p[1]);\r\n        this.shadowPath.addPoint(point);\r\n        this.currentAdded = point;\r\n        {\r\n            this.shadowPath.applyWorkingVisible();\r\n            this.frontRoot.refresh();\r\n        }\r\n    }\r\n\r\n    toolActived(x, y) {\r\n        super.toolActived(x, y);\r\n        this.completeType = null;\r\n        let clickFigure = this.frontRoot.findFigure(x, y);\r\n        clickFigure = (clickFigure == this.frontRoot || clickFigure == this.shadowPath) ? null : clickFigure;\r\n        if (clickFigure) {\r\n            this.updateHoverFigure();\r\n            if (!this.shadowPath) return;\r\n            let index = this.shadowPath.indexOfVertex(clickFigure);\r\n            // TODO: 如果是最后一个节点,修改顶点类型\r\n            if (index != -1 && index != this.shadowPath.getPathModel().length - 1) {\r\n                this.completeType = 'minus';\r\n                this.minusIndex = index;\r\n                if (index == 0) {\r\n                    this.completeType = 'close';\r\n                }\r\n                return;\r\n            }\r\n        } else {\r\n            this.completeType = 'add';\r\n            this.addNewPoint(x, y);\r\n        }\r\n\r\n    }\r\n\r\n    toolDeactived(x, y) {\r\n        super.toolDeactived(x, y);\r\n        let event;\r\n        if (this.completeType == 'add') {\r\n            if (this.currentAdded instanceof PathShape) {\r\n                let m1 = this.currentAdded.getPathModel();\r\n                let m2 = this.shadowPath.getPathModel();\r\n                let firstPoint = m1.getPoint(0);\r\n                firstPoint.copyFrom(m2.getPoint(0));\r\n                let matrix = this.currentAdded.worldMatrix;\r\n                let pm = this.mainRoot.worldMatrix.clone().invert();\r\n                let translation = pm.multiply(matrix).decompose().translation;\r\n                let temp = this.currentAdded;\r\n                this.currentAdded = null;\r\n                temp.x = translation.x;\r\n                temp.y = translation.y;\r\n                event = {\r\n                    type: 'add', figure: temp, point: firstPoint\r\n                };\r\n            }\r\n            if (this.currentAdded instanceof Point) {\r\n                let p = this.currentAdded.clone();\r\n                this.currentAdded = null;\r\n                event = {\r\n                    type: 'add', point: p,\r\n                    path: this.currentPath, index: this.currentPath.pointsCount\r\n                };\r\n            }\r\n        }\r\n\r\n        if (this.completeType == 'close') {\r\n            this.disposeCurrentShadow();\r\n            let temp = this.getSelectionById(this.currentPath.id);\r\n            this.currentPath = null; //完成一个曲线图形\r\n            event = { type: this.completeType, path: temp };\r\n        }\r\n        if (this.completeType == 'minus') {\r\n            let temp = this.getSelectionById(this.currentPath.id);\r\n            event = { type: this.completeType, index: this.minusIndex, path: temp };\r\n        }\r\n        if (this.shadowPath) this.shadowPath.applyRestingVisible();\r\n        this.frontRoot.refresh();\r\n        return event;\r\n    }\r\n\r\n    getSelectionById(id) {\r\n        if (!this.currentSelections) return;\r\n        for (let i = 0; i < this.currentSelections.length; i++) {\r\n            const selection = this.currentSelections[i];\r\n            if (selection.id == id) return selection;\r\n        }\r\n    }\r\n\r\n    disposeCurrentShadow() {\r\n        if (this.shadowPath == null) return;\r\n        this.frontRoot.removeChild(this.shadowPath);\r\n        this.shadowPath.dispose();\r\n        this.shadowPath = null;\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    hoverMove(x, y) {\r\n        let current = this.frontRoot.findFigure(x, y);\r\n        if (current == this._lastHover && current != null) return;\r\n        current = (current instanceof Vertex) ? current : null;\r\n        this.updateHoverFigure(current);\r\n    }\r\n\r\n    updateHoverFigure(current) {\r\n        if (this._lastHover != current) {\r\n            if (this._lastHover) this._lastHover.blur();\r\n            this._lastHover = current;\r\n            if (this._lastHover) this._lastHover.focus();\r\n            this.frontRoot.refresh();\r\n        }\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (!(this.completeType == 'add')) return;\r\n        let vertex = this.shadowPath.getLastVertexFigure();\r\n        if (vertex) {\r\n            if (!vertex.outController || !vertex.inController) {\r\n                vertex.type = 1;\r\n                vertex.model.inX = vertex.model.x;\r\n                vertex.model.inY = vertex.model.y;\r\n                vertex.model.outX = vertex.model.x;\r\n                vertex.model.outY = vertex.model.y;\r\n                vertex.initControllerPoints();\r\n            }\r\n\r\n            let out = vertex.outController;\r\n            out.update(out.x + dx, out.y + dy);\r\n            let in1 = vertex.inController;\r\n            in1.update(in1.x - dx, in1.y - dy);\r\n            this.frontRoot.refresh();\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        super.reset();\r\n        cancelAnimationFrame(this._updateFeedbackid);\r\n        this._updateFeedbackid = null;\r\n        this.completeType = null;\r\n        this.minusIndex = -1;\r\n    }\r\n}","import VertexController from \"../figure/vertex-controller.js\";\r\nimport Vertex from \"../figure/vertex.js\";\r\nimport VerticesPathFeedback from \"../figure/vertices-path-feedback.js\";\r\nimport Point from \"../lib/point.js\";\r\nimport PathShape from \"../lib/shape/path-shape.js\";\r\nimport Tool from \"./tool.js\";\r\nimport Utils from \"../lib/utils.js\"\r\nimport VerticesShape from \"../lib/shape/vertices-shape.js\";\r\n\r\nexport default class VertexSelectTool extends Tool {\r\n    constructor(f, m, b, id = 'vertex-select') {\r\n        super(f, m, b, id);\r\n    }\r\n\r\n    unUse() {\r\n        this.stopUpdate();\r\n        this.disposeShadowPath();\r\n        this.deleteLastHover();\r\n        if (this.currentSelections && this.currentSelections[0] instanceof Point) {\r\n            let p = this.currentSelections[0];\r\n            let parent = p.parent;\r\n            while (true) {\r\n                if (parent == null || parent instanceof VerticesShape) {\r\n                    break;\r\n                }\r\n                parent = parent.parent;\r\n            }\r\n            if (parent) {\r\n                this.fireSelectionChangeEvent([parent]);\r\n            }\r\n            else {\r\n                this.fireSelectionChangeEvent([]);\r\n            }\r\n        }\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    get shadowPath() {\r\n        if (this._shadowPath == null) {\r\n            this._shadowPath = new VerticesPathFeedback({\r\n                a: 0, borderWidth: 1\r\n            });\r\n            Tool.setFeedbackColors(this._shadowPath);\r\n            this.frontRoot.addChild(this._shadowPath);\r\n        }\r\n        return this._shadowPath;\r\n    }\r\n\r\n    updateShadowPath(figure) {\r\n        this.shadowPath = null;\r\n        if (!figure) return;\r\n        if (figure instanceof VertexController) {\r\n            figure = figure.parent;\r\n        }\r\n        if (figure instanceof Vertex) {\r\n            this.shadowPath = figure.master;\r\n        }\r\n    }\r\n\r\n    disposeShadowPath() {\r\n        if (!this._shadowPath) return;\r\n        this.frontRoot.removeChild(this._shadowPath);\r\n        this._shadowPath.parent = null;\r\n        this._shadowPath.dispose();\r\n        this._shadowPath.relatedPath = null;\r\n        this._shadowPath = null;\r\n        this._selectedVertex = null;\r\n        this._selectedVertexType = null;\r\n    }\r\n\r\n    updateVertexShapeFeedback(path) {\r\n        if (!path) return;\r\n        this.shadowPath.id = path.id;\r\n        this.shadowPath.visible = true;\r\n        this.shadowPath.close = path.close;\r\n        this.shadowPath.relatedPath = path;\r\n        this.shadowPath.deletePathModel(); // 清空重新生成\r\n        let pose = path.worldMatrix.decompose();\r\n        Utils.applyPose(this.shadowPath, pose);\r\n        path.getPathModel().points.forEach(p => {\r\n            let p1 = p.clone();\r\n            this.shadowPath.addPoint(p1);\r\n        });\r\n        this.shadowPath.applyRestingVisible();\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    updateCurrentSelections(selections) {\r\n        super.updateCurrentSelections(selections);\r\n        if (this.shadowPath) this.shadowPath.visible = false\r\n        if (this._updateId) {\r\n            cancelAnimationFrame(this._updateId);\r\n        }\r\n        this._updateId = requestAnimationFrame(() => {\r\n            if (this.currentSelections && this.currentSelections.length == 1) {\r\n                let s = this.currentSelections[0];\r\n                if (s instanceof PathShape) {\r\n                    this.updateVertexShapeFeedback(s);\r\n                    if (this._selectedVertex) this._selectedVertex.blur();\r\n                    this._selectedVertex = null;\r\n                    this._selectedVertexType = null;\r\n                }\r\n                if (s instanceof Point) {\r\n                    if (s.parent == null) {\r\n                        // 说明这个是被删除的点，重新发送selection：\r\n                        if (this.shadowPath) {\r\n                            this.fireSelectionChangeEvent([this.shadowPath.relatedPath]);\r\n                        }\r\n                        return;\r\n                    }\r\n                    let path = this.shadowPath.relatedPath;\r\n                    this.updateVertexShapeFeedback(path);\r\n                    let pathmodel = path.getPathModel();\r\n                    let index = pathmodel.points.indexOf(s);\r\n                    let f = this.shadowPath.getVertexFigure(index);\r\n                    if (this._lastVertexHover) this._lastVertexHover.blur();\r\n                    if (this._lastVertexHover == f) this._lastVertexHover = null;\r\n                    if (this._selectedVertex) this._selectedVertex.blur();\r\n                    this._selectedVertex = f;\r\n                    this._selectedVertex.focus();\r\n                    this.focusVertex(this._selectedVertex);\r\n                }\r\n            } else {\r\n                this.disposeShadowPath();\r\n                this.deleteLastHover();\r\n                this.frontRoot.refresh();\r\n            }\r\n        });\r\n    }\r\n\r\n    findRealModel(vertex) {\r\n        if (vertex instanceof VertexController) {\r\n            vertex = vertex.relate;\r\n        }\r\n\r\n        let index = this.shadowPath.indexOfVertex(vertex);\r\n        let path = this.mainRoot.getFigureById(this.shadowPath.id);\r\n        return path.getPathModel().getPoint(index);\r\n    }\r\n\r\n    toolActived(x, y, args) {\r\n        super.toolActived(x, y, args);\r\n        this.actionType = null;\r\n        let figure = this.frontRoot.findFigure(x, y);\r\n        figure = figure == this.frontRoot ? null : figure;\r\n        if (figure instanceof Vertex || figure instanceof VertexController) {\r\n            let model = this.findRealModel(figure);\r\n            let selection = this.currentSelections[0];\r\n            let isnew = !model.equals(selection);\r\n            if (figure instanceof Vertex) {\r\n                this.focusVertex(figure);\r\n                this.actionType = 'changevertex';\r\n\r\n            }\r\n            if (figure instanceof VertexController) {\r\n                this.actionType = 'changevertexcontroller';\r\n            }\r\n            if (isnew) {\r\n                this.fireSelectionChangeEvent([model]);\r\n            }\r\n            if (this.actionType == 'changevertex') {\r\n                this._selectedVertexType = 'v';\r\n            }\r\n            if (this.actionType == 'changevertexcontroller') {\r\n                let isin = figure == figure.relate.inController;\r\n                this._selectedVertexType = isin ? 'in' : 'out';\r\n            }\r\n            return;\r\n        } else {\r\n            figure = this.mainRoot.findFigure(x, y);\r\n            figure = figure == this.mainRoot ? null : figure;\r\n            if (figure instanceof PathShape) {\r\n                if (!this._shadowPath || this.shadowPath.id != figure.id || this._selectedVertex) {\r\n                    this.fireSelectionChangeEvent([figure]);\r\n                }\r\n                this.actionType = 'move';\r\n                return;\r\n            }\r\n        }\r\n        this.fireSelectionChangeEvent([]);\r\n    }\r\n\r\n    focusVertex(vertex) {\r\n        if (!vertex) return;\r\n        this.shadowPath.applyRestingVisible();\r\n        this.shadowPath.a = 0.2;\r\n        vertex.showController(true, true);\r\n        let index = this.shadowPath.indexOfVertex(vertex);\r\n        let nv = this.shadowPath.getVertexFigure(index + 1);\r\n        if (nv) nv.showController(true, false);\r\n        let pv = this.shadowPath.getVertexFigure(index - 1);\r\n        if (pv) pv.showController(false, true);\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    stopUpdate() {\r\n        if (this._updateId) cancelAnimationFrame(this._updateId);\r\n        this._updateId = null;\r\n    }\r\n\r\n    toolDeactived(x, y) {\r\n        super.toolDeactived(x, y);\r\n        this.stopUpdate();\r\n        if (this.actionType == null) {\r\n            return;\r\n        }\r\n        if (this.ex - this.sx == 0 && this.ey - this.sy == 0) return;\r\n        if (this.actionType == 'move') {\r\n            let selection = this.currentSelections[0];\r\n            if (selection && selection instanceof PathShape) {\r\n                let m = selection.parent.worldMatrix.clone().invert();\r\n                let lp = m.multiplyWithVertexDatas(this.sx, this.sy);\r\n                let p = m.multiplyWithVertexDatas(this.ex, this.ey);\r\n                let dx = p[0] - lp[0];\r\n                let dy = p[1] - lp[1];\r\n                return { type: 'move', figures: [selection], dx: dx, dy: dy };\r\n            }\r\n        }\r\n        if (this.actionType == 'changevertex' || this.actionType == 'changevertexcontroller') {\r\n            let selection = this.currentSelections[0];\r\n            if (selection && selection instanceof Point && this._selectedVertex) {\r\n                return {\r\n                    type: 'vertex', vertex: selection,\r\n                    copy: this._selectedVertex.model.clone()\r\n                };\r\n            }\r\n        }\r\n    }\r\n\r\n    updateVertexHover(f) {\r\n        if (this._lastVertexHover == f) return;\r\n        if (this._lastVertexHover != null) this._lastVertexHover.blur();\r\n        this._lastVertexHover = f;\r\n        if (this._lastVertexHover) this._lastVertexHover.focus();\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    hoverMove(x, y) {\r\n        super.hoverMove(x, y);\r\n        let cf = this.frontRoot.findFigure(x, y);\r\n        cf = cf == this.frontRoot ? null : cf;\r\n        if (cf instanceof Vertex || cf instanceof VertexController) {\r\n            this.updateHoverFigure();\r\n            this.updateVertexHover(cf);\r\n            if (this._selectedVertex) this._selectedVertex.focus()\r\n            return;\r\n        }\r\n        let figure = this.mainRoot.findFigure(x, y);\r\n        figure = figure == this.mainRoot ? null : figure;\r\n        if (figure instanceof PathShape || !figure) {\r\n            this.updateVertexHover();\r\n            this.updateHoverFigure(figure);\r\n        }\r\n        if (this._selectedVertex) this._selectedVertex.focus()\r\n    }\r\n\r\n    deleteLastHover() {\r\n        if (this.lastHoverFigure) {\r\n            this.frontRoot.removeChild(this.lastHoverFigure);\r\n            this.lastHoverFigure.parent = null;\r\n            this.lastHoverFigure.dispose();\r\n            this.lastHoverFigure.relatedSelection = null;\r\n            this.lastHoverFigure = null;\r\n        }\r\n    }\r\n\r\n\r\n    updateHoverFigure(figure) {\r\n        if (!figure) {\r\n            this.deleteLastHover();\r\n        } else {\r\n            if (this.lastHoverFigure && this.lastHoverFigure.relatedSelection.id == figure.id) {\r\n                return;\r\n            }\r\n            this.deleteLastHover();\r\n            this.lastHoverFigure = Tool.createDelegateFigure(figure);\r\n            if (this._shadowPath)\r\n                this.frontRoot.insertChild(this.lastHoverFigure, this.frontRoot.indexOfChild(this._shadowPath));\r\n            else this.frontRoot.addChild(this.lastHoverFigure);\r\n        }\r\n\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy);\r\n        if (this.actionType == 'move') {\r\n            if (!this.lastHoverFigure) {\r\n                let selection = this.currentSelections[0];\r\n                if (selection && selection instanceof PathShape) {\r\n                    this.lastHoverFigure = Tool.createDelegateFigure(selection);\r\n                    this.frontRoot.addChild(this.lastHoverFigure);\r\n                }\r\n            }\r\n            if (this.lastHoverFigure) {\r\n                this.lastHoverFigure.x += dx;\r\n                this.lastHoverFigure.y += dy;\r\n            }\r\n        }\r\n        if (this.actionType == 'changevertex') {\r\n            if (this._selectedVertex) {\r\n                this._selectedVertex.update(this._selectedVertex.x + dx, this._selectedVertex.y + dy);\r\n                let in1 = this._selectedVertex.inController;\r\n                if (in1) {\r\n                    in1.update(in1.x + dx, in1.y + dy);\r\n                }\r\n                let out = this._selectedVertex.outController;\r\n                if (out) {\r\n                    out.update(out.x + dx, out.y + dy);\r\n                }\r\n            }\r\n        }\r\n        if (this.actionType == 'changevertexcontroller') {\r\n            let controller = this._selectedVertex.inController;\r\n            let another = this._selectedVertex.outController;\r\n            if (this._selectedVertexType == 'out') {\r\n                let t = controller;\r\n                controller = another;\r\n                another = t;\r\n            }\r\n            if (controller)\r\n                controller.update(controller.x + dx, controller.y + dy);\r\n            if (this._selectedVertex.type == 1) {\r\n                if (another)\r\n                    another.update(another.x - dx, another.y - dy);\r\n            }\r\n        }\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    getAnotherController(controller) {\r\n        let p = controller.parent;\r\n        if (p instanceof Vertex) {\r\n            if (controller == p.inController) return p.outController;\r\n            if (controller == p.outController) return p.inController;\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.stopUpdate();\r\n        this.deleteLastHover();\r\n        super.reset();\r\n    }\r\n}","import Tool from \"./tool.js\";\r\n\r\nexport default class TranslateRootTool extends Tool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'move-root');\r\n    }\r\n\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy) {\r\n        if (this.mainRoot) {\r\n            // let m = this.mainRoot.worldMatrix.clone().invert();\r\n            // let p1 = m.multiplyWithVertexDatas(x, y);\r\n            // let p2 = m.multiplyWithVertexDatas(this.lx, this.ly);\r\n            // let dx1 = p1[0] - p2[0];\r\n            // let dy1 = p1[1] - p2[1];\r\n            // console.log(dx, dy, dx1, dy1, dx / this.mainRoot.scalex);\r\n            this.mainRoot.x += dx / this.mainRoot.scalex;\r\n            this.mainRoot.y += dy / this.mainRoot.scaley;\r\n            this.mainRoot.refresh();\r\n        }\r\n    }\r\n}","import Line from \"../../lib/shape/line.js\";\r\nimport Tool from \"../tool.js\";\r\n\r\nexport default class LineTool extends Tool {\r\n    constructor(f, m, b) {\r\n        super(f, m, b, 'line');\r\n    }\r\n\r\n    deleteLine() {\r\n        if (this.line) {\r\n            this.line.parent.removeChild(this.line);\r\n            this.line.dispose();\r\n            this.line.parent = null;\r\n            this.line = null;\r\n        }\r\n    }\r\n\r\n    createLine() {\r\n        this.deleteLine();\r\n        if (!this.line) {\r\n            this.line = new Line();\r\n            this.frontRoot.addChild(this.line);\r\n        }\r\n        return this.line;\r\n    }\r\n\r\n    toolActived(x, y, event) {\r\n        super.toolActived(x, y, event);\r\n        let line = this.createLine();\r\n        line.x = x;\r\n        line.y = y;\r\n        line.endX = x;\r\n        line.endY = y;\r\n    }\r\n\r\n    activeMove(x, y, l, t, r, b, dx, dy, event) {\r\n        super.activeMove(x, y, l, t, r, b, dx, dy, event);\r\n        this.line.endX += dx;\r\n        this.line.endY += dy;\r\n        this.frontRoot.refresh();\r\n    }\r\n\r\n    toolDeactived(x, y, event) {\r\n        super.toolDeactived(x, y, event);\r\n        if (!this.line || !this.mainRoot) return;\r\n        let start = [this.line.x, this.line.y];\r\n        let end = [this.line.endX, this.line.endY];\r\n        let m = this.mainRoot.worldMatrix.clone().invert();\r\n        start = m.multiplyWithVertexDatas(start[0], start[1]);\r\n        end = m.multiplyWithVertexDatas(end[0], end[1]);\r\n        this.deleteLine();\r\n        this.frontRoot.refresh();\r\n        if (this.ex - this.sx == 0 && this.ey - this.sy == 0) {\r\n            return;\r\n        }\r\n        return {\r\n            figure: new Line({ x: start[0], y: start[1], endX: end[0], endY: end[1] }),\r\n            name: 'Line'\r\n        };\r\n    }\r\n\r\n    reset() {\r\n        this.deleteLine();\r\n        super.reset();\r\n    }\r\n\r\n    unUse() {\r\n        this.deleteLine();\r\n        super.unUse();\r\n    }\r\n}","<template>\r\n  <div class=\"canvas-action-bar graybg\">\r\n    <div class=\"action-bar-main\">\r\n      <div class=\"action-container\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          @click=\"deleteSelections\"\r\n          :class=\"hasSelection ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-trash\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"action-container\"><div class=\"action-spliter\"></div></div>\r\n\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"undo\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canUndo ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-undo\"></i>\r\n        </button>\r\n      </div>\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"redo\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canRedo ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-redo\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"action-container\"><div class=\"action-spliter\"></div></div>\r\n\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"groupFigures\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canGroup ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-group\"></i>\r\n        </button>\r\n      </div>\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"unGroup\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canUnGroup ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-ungroup\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"action-container\"><div class=\"action-spliter\"></div></div>\r\n\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"clip\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canClip ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-mask-clip larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"unClip\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canUnClip ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-mask-unclip larger-action-icon\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"action-container\"><div class=\"action-spliter\"></div></div>\r\n\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"bringFront\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canBringFront ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-bring-front larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"sendBack\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canSendBack ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-send-back larger-action-icon\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"action-container\"><div class=\"action-spliter\"></div></div>\r\n\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"alignLeft\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canAlign ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-align-left more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"alignCenter(true, 'Align Center')\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canAlign ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-align-center more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"alignRight\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canAlign ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-align-right more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"alignTop\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canAlign ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-align-top more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"alignCenter(false, 'Align V-Center')\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canAlign ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-align-v-center more-larger-action-icon\"></i>\r\n        </button>\r\n\r\n        <button\r\n          @click=\"alignBottom\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canAlign ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-align-bottom more-larger-action-icon\"></i>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"action-container\"><div class=\"action-spliter\"></div></div>\r\n\r\n      <div class=\"action-container\">\r\n        <button\r\n          @click=\"distribute('left', true)\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canDistribute ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-distribute-left more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"distribute('center', true)\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canDistribute ? '' : 'disabled'\"\r\n        >\r\n          <i\r\n            class=\"iconfont icon-distribute-center more-larger-action-icon\"\r\n          ></i>\r\n        </button>\r\n        <button\r\n          @click=\"distribute('right', true)\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canDistribute ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-distribute-right more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"distribute('top', false)\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canDistribute ? '' : 'disabled'\"\r\n        >\r\n          <i class=\"iconfont icon-distribute-top more-larger-action-icon\"></i>\r\n        </button>\r\n        <button\r\n          @click=\"distribute('center', false)\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canDistribute ? '' : 'disabled'\"\r\n        >\r\n          <i\r\n            class=\"iconfont icon-distribute-v-center more-larger-action-icon\"\r\n          ></i>\r\n        </button>\r\n\r\n        <button\r\n          @click=\"distribute('bottom', false)\"\r\n          type=\"button\"\r\n          class=\"btn btn-primary action-button\"\r\n          :class=\"canDistribute ? '' : 'disabled'\"\r\n        >\r\n          <i\r\n            class=\"iconfont icon-distribute-bottom more-larger-action-icon\"\r\n          ></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"action-bar-other\">\r\n      <input\r\n        v-show=\"hasRootFigure\"\r\n        class=\"form-control form-control-sm property-input\"\r\n        v-model.lazy=\"mainScale\"\r\n        @click=\"selectText\"\r\n        @keypress.enter=\"confirm\"\r\n        style=\"width: 6em; text-align: center\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ActionFactory from \"../../actions/action-factory\";\r\nimport CompositeAction from \"../../actions/compsite-action\";\r\nimport RemoveFigureAction from \"../../actions/remove-figure-action\";\r\nimport Figure from \"../../lib/figure\";\r\nimport Group from \"../../lib/group\";\r\nimport Point from \"../../lib/point\";\r\nimport Shape from \"../../lib/shape/shape\";\r\nimport VerticesShape from \"../../lib/shape/vertices-shape\";\r\nimport textselect from \"../property/text-click-fullselect.js\";\r\nimport changeindex from \"./change-index-processor.js\";\r\nimport alignprocessor from \"./align-processor.js\";\r\nimport distributeprocessor from \"./distribute-processor\";\r\n\r\nexport default {\r\n  name: \"ActionBar\",\r\n  mixins: [textselect, changeindex, alignprocessor, distributeprocessor],\r\n  emits: [\r\n    \"canvas:refresh\",\r\n    \"canvas:group\",\r\n    \"canvas:ungroup\",\r\n    \"canvas:clip\",\r\n    \"canvas:unclip\",\r\n  ],\r\n\r\n  computed: {\r\n    hasRootFigure() {\r\n      let r = this.rootFigure != null;\r\n      return r;\r\n    },\r\n    mainScale: {\r\n      get() {\r\n        if (this.rootFigure) {\r\n          let zoom = this.rootFigure.zoom;\r\n          let r = (zoom * 100).toFixed(2) + \"%\";\r\n          return r;\r\n        }\r\n      },\r\n      set(v) {\r\n        if (this.rootFigure) {\r\n          let z = Number.parseFloat(v);\r\n          if (isNaN(z)) return;\r\n          this.rootFigure.zoom = z / 100;\r\n          this.rootFigure.placeAtCenter();\r\n          this.rootFigure.refresh();\r\n        }\r\n      },\r\n    },\r\n    canRedo() {\r\n      if (this.actionStack) return this.actionStack.canRedo();\r\n    },\r\n    canUndo() {\r\n      if (this.actionStack) return this.actionStack.canUndo();\r\n    },\r\n    hasSelection() {\r\n      if (!this.selections) return;\r\n      return this.selections.length > 0;\r\n    },\r\n    canGroup() {\r\n      if (!this.selections) return false;\r\n      return this.selections.length > 1;\r\n    },\r\n    canUnGroup() {\r\n      if (!this.selections) return false;\r\n      if (this.selections.length == 0) return false;\r\n      for (let i = 0; i < this.selections.length; i++) {\r\n        const selection = this.selections[i];\r\n        if (!(selection instanceof Group)) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n\r\n    clipMask() {\r\n      if (this.selections && this.selections.length > 1) {\r\n        let index = -1;\r\n        let mask;\r\n        for (let i = 0; i < this.selections.length; i++) {\r\n          const selection = this.selections[i];\r\n          let sp = selection.parent;\r\n          if (sp) {\r\n            let si = sp.indexOfChild(selection);\r\n            if (si > index) {\r\n              index = si;\r\n              mask = selection;\r\n            }\r\n          }\r\n        }\r\n        if (mask instanceof Shape) return mask;\r\n      }\r\n    },\r\n\r\n    canClip() {\r\n      return this.clipMask != null;\r\n    },\r\n    canUnClip() {\r\n      if (this.selections) {\r\n        //只要选中图形里有剪切蒙版，就可以反操作\r\n        for (let i = 0; i < this.selections.length; i++) {\r\n          const selection = this.selections[i];\r\n          if (selection.clip && selection.children.length >= 1) return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    clip() {\r\n      let mask = this.clipMask;\r\n      let figures = [];\r\n      this.selections.forEach((s) => {\r\n        if (mask != s) figures.push(s);\r\n      });\r\n      // 这里排序\r\n      figures.sort((a, b) => {\r\n        let ep = a.parent;\r\n        let a1 = ep.indexOfChild(a);\r\n        ep = b.parent;\r\n        let b1 = ep.indexOfChild(b);\r\n        return a1 - b1;\r\n      });\r\n      this.$emit(\"canvas:clip\", { mask: mask, figures: figures });\r\n    },\r\n    unClip() {\r\n      if (!this.canUnClip) return;\r\n      let masks = [];\r\n      this.selections.forEach((selection) => {\r\n        if (selection.clip && selection.children.length >= 1) {\r\n          masks.push(selection);\r\n        }\r\n      });\r\n      this.$emit(\"canvas:unclip\", masks);\r\n    },\r\n    unGroup() {\r\n      if (this.canUnGroup) {\r\n        this.$emit(\"canvas:ungroup\", this.selections);\r\n      }\r\n    },\r\n    groupFigures(event) {\r\n      if (!this.canGroup) return;\r\n      this.$emit(\"canvas:group\", this.selections);\r\n    },\r\n\r\n    deleteSelections(event) {\r\n      if (!this.hasSelection || !this.actionStack) return;\r\n      let composite = new CompositeAction();\r\n\r\n      this.selections.forEach((selection) => {\r\n        if (selection instanceof Figure) {\r\n          let action = new RemoveFigureAction(selection, selection.parent);\r\n          composite.add(action);\r\n        }\r\n        if (selection instanceof Point) {\r\n          let parent = selection.parent;\r\n          while (true) {\r\n            if (parent == null || parent instanceof VerticesShape) {\r\n              break;\r\n            }\r\n            parent = parent.parent;\r\n          }\r\n          if (parent) {\r\n            let index = parent.getPathModel().points.indexOf(selection);\r\n            if (index != -1) {\r\n              let action = new ActionFactory.newDeletePointAction(\r\n                parent,\r\n                index\r\n              );\r\n              composite.add(action);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      this.actionStack.excute(composite);\r\n    },\r\n\r\n    undo() {\r\n      if (this.canUndo) {\r\n        this.actionStack.undo();\r\n      }\r\n    },\r\n\r\n    redo() {\r\n      if (this.canRedo) {\r\n        this.actionStack.redo();\r\n      }\r\n    },\r\n\r\n    triggerCanvasRefresh() {\r\n      this.$emit(\"canvas:refresh\");\r\n    },\r\n  },\r\n\r\n  props: {\r\n    actionStack: null,\r\n    selections: null,\r\n    rootFigure: null,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.canvas-action-bar {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  padding: 2px 10px 2px 10px;\r\n  box-sizing: border-box;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: #777777 solid 1px;\r\n}\r\n\r\n.action-bar-main {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n}\r\n\r\n.action-spliter {\r\n  width: 1px;\r\n  height: 1.5em;\r\n  background-color: #777777;\r\n}\r\n\r\n.action-container {\r\n  padding: 0 5px 0 5px;\r\n  box-sizing: border-box;\r\n}\r\n.more-larger-action-container {\r\n  /* padding: 0 5px 0 5px; */\r\n  box-sizing: border-box;\r\n  font-size: 2em;\r\n}\r\n\r\n.action-button {\r\n  padding: 2px;\r\n  border: none;\r\n  box-shadow: none;\r\n  background-color: transparent;\r\n  color: #dddddd;\r\n}\r\n\r\n.action-button:focus {\r\n  background-color: transparent;\r\n  border: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.btn-primary.disabled,\r\n.btn-primary:disabled {\r\n  background-color: transparent;\r\n  border-color: transparent;\r\n  color: #313131;\r\n}\r\n\r\n.action-button:hover {\r\n  background-color: transparent;\r\n  border: none;\r\n  box-shadow: none;\r\n}\r\n\r\n.larger-action-icon {\r\n  font-size: 1.2em;\r\n}\r\n\r\n.more-larger-action-icon {\r\n  font-size: 1.5em;\r\n}\r\n</style>","import ActionFactory from \"../../actions/action-factory.js\";\r\nimport Figure from \"../../lib/figure.js\";\r\n\r\nexport default {\r\n    methods: {\r\n        bringFront() {\r\n            if (!this.selections) return;\r\n            let s = this.selections[0];\r\n            let index = this.rootFigure.indexOfChild(s);\r\n            index += 1;\r\n            let action = ActionFactory.newChangeIndexAction(s, index);\r\n            this.actionStack.excute(action);\r\n        },\r\n        sendBack() {\r\n            if (!this.selections) return;\r\n            let s = this.selections[0];\r\n            let index = this.rootFigure.indexOfChild(s);\r\n            index -= 1;\r\n            let action = ActionFactory.newChangeIndexAction(s, index);\r\n            this.actionStack.excute(action);\r\n        },\r\n    },\r\n    computed: {\r\n        canBringFront() {\r\n            if (this.selections && this.selections.length == 1) {\r\n                let s = this.selections[0];\r\n                if (s instanceof Figure) {\r\n                    if (\r\n                        this.rootFigure.children[this.rootFigure.children.length - 1] != s\r\n                    )\r\n                        return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        canSendBack() {\r\n            if (this.selections && this.selections.length == 1) {\r\n                let s = this.selections[0];\r\n                if (s instanceof Figure) {\r\n                    if (this.rootFigure.children[0] != s) return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n    }\r\n}\r\n","import ActionFactory from \"../../actions/action-factory\";\r\nimport CompositeAction from \"../../actions/compsite-action\";\r\nimport Utils from \"../../utils\";\r\n\r\nexport default {\r\n    computed: {\r\n        canAlign() {\r\n            return (this.actionStack && this.selections && this.selections.length > 1)\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        alignCenter(h = true, actionName = \"align\") {\r\n            let totalBounds = Utils.calculateFiguresBounds(this.selections);\r\n            let cx = totalBounds.left + (totalBounds.right - totalBounds.left) / 2;\r\n            let cy = totalBounds.top + (totalBounds.bottom - totalBounds.top) / 2;\r\n\r\n            let composite = new CompositeAction(actionName);\r\n            this.selections.forEach(selection => {\r\n                let b = selection.worldBounds;\r\n                let bcx = b.left + (b.right - b.left) / 2;\r\n                let bcy = b.top + (b.bottom - b.top) / 2;\r\n                let deltax = cx - bcx, deltay = cy - bcy;\r\n                let action;\r\n                if (h)\r\n                    action = ActionFactory.newTranslateAction([selection], deltax / this.rootFigure.scalex, 0);\r\n                else action = ActionFactory.newTranslateAction([selection], 0, deltay / this.rootFigure.scaley);\r\n                composite.add(action);\r\n            })\r\n            this.actionStack.excute(composite);\r\n        },\r\n        alignLeft() {\r\n            this.align('left', 'Align Left', true, true);\r\n        },\r\n\r\n        alignRight() {\r\n            this.align('right', 'Align right', false, true);\r\n        },\r\n\r\n        alignTop() {\r\n            this.align('top', 'Align top', true, false);\r\n        },\r\n\r\n        alignBottom() {\r\n            this.align('bottom', 'Align bottom', false, false);\r\n        },\r\n\r\n        align(property, actionName = \"align\", min = true, hf = true) {\r\n            let value = this.selections[0].worldBounds[property];\r\n            let bounds = {};\r\n            this.selections.forEach(selection => {\r\n                let b = bounds[selection.id];\r\n                if (b == null) {\r\n                    bounds[selection.id] = selection.worldBounds;\r\n                    b = bounds[selection.id];\r\n                }\r\n                if (min)\r\n                    value = Math.min(value, b[property]);\r\n                else value = Math.max(value, b[property]);\r\n            });\r\n\r\n            let composite = new CompositeAction(actionName);\r\n            this.selections.forEach(selection => {\r\n                let b = bounds[selection.id];\r\n                let delta = value - b[property];\r\n                let action;\r\n                if (hf)\r\n                    action = ActionFactory.newTranslateAction([selection], delta / this.rootFigure.scalex, 0);\r\n                else action = ActionFactory.newTranslateAction([selection], 0, delta / this.rootFigure.scaley);\r\n                composite.add(action);\r\n            })\r\n            for (let p in bounds) delete bounds[p];\r\n            bounds = null;\r\n            this.actionStack.excute(composite);\r\n        }\r\n    }\r\n}","import ActionFactory from \"../../actions/action-factory\";\r\nimport CompositeAction from \"../../actions/compsite-action\";\r\n\r\nexport default {\r\n    computed: {\r\n        canDistribute() {\r\n            return this.actionStack && this.selections && this.selections.length > 2;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        distribute(property = 'left', isH = true) {\r\n            let figures = this.selections.map(f => f);\r\n            let composite = new CompositeAction();\r\n            function getPropertyValue(property, isH, bounds) {\r\n                if (property == 'center') {\r\n                    if (isH) {\r\n                        return bounds.left + (bounds.right - bounds.left) / 2;\r\n                    } else {\r\n                        return bounds.top + (bounds.bottom - bounds.top) / 2;\r\n                    }\r\n                } else {\r\n                    return bounds[property];\r\n                }\r\n            }\r\n            figures.sort((a, b) => {\r\n                let wb1 = a.worldBounds;\r\n                let wb2 = b.worldBounds;\r\n                return getPropertyValue(property, isH, wb1) - getPropertyValue(property, isH, wb2);\r\n            });\r\n            let f1 = figures[0], f2 = figures[figures.length - 1];\r\n            let wb1 = f1.worldBounds;\r\n            let wb2 = f2.worldBounds;\r\n            let cx1 = getPropertyValue(property, isH, wb1);\r\n            let cx2 = getPropertyValue(property, isH, wb2);\r\n\r\n            let width = cx2 - cx1;\r\n            let delta = width / (figures.length - 1);\r\n            let rcx = cx1 + delta;\r\n            for (let i = 1; i < figures.length - 1; i++) {\r\n                let f = figures[i];\r\n                let wb1 = f.worldBounds;\r\n                let cx1 = getPropertyValue(property, isH, wb1)\r\n                let dx = rcx - cx1;\r\n                if (isH)\r\n                    composite.add(ActionFactory.newTranslateAction([f], dx / this.rootFigure.scalex, 0));\r\n                else composite.add(ActionFactory.newTranslateAction([f], 0, dx / this.rootFigure.scaley));\r\n                rcx += delta;\r\n            }\r\n            this.actionStack.excute(composite);\r\n        },\r\n\r\n        distributeLeft() {\r\n            this.distribute('left', true);\r\n        }\r\n    }\r\n}","import { render } from \"./ActionBar.vue?vue&type=template&id=e3b2954a\"\nimport script from \"./ActionBar.vue?vue&type=script&lang=js\"\nexport * from \"./ActionBar.vue?vue&type=script&lang=js\"\n\nimport \"./ActionBar.vue?vue&type=style&index=0&id=e3b2954a&lang=css\"\nscript.render = render\n\nexport default script","import CanvasKitUtils from \"../lib/canvaskit-utils.js\";\r\nimport RootFigure from \"../lib/root-figure.js\";\r\n\r\n\r\nconst MAX_SIZE = 16382;\r\n\r\nexport default class DocumentRoot extends RootFigure {\r\n    constructor(surface, width, height, props) {\r\n        super(surface, props);\r\n        this.screanWidth = width;\r\n        this.screanHeight = height;\r\n        this.zoom = props.zoom == null ? 1 : props.zoom;\r\n        this.padding = 50;\r\n    }\r\n\r\n\r\n    init() {\r\n        let screanWidth = this.screanWidth;\r\n        let screanHeight = this.screanHeight;\r\n        let disW = this.width + this.padding * 2;\r\n        let disH = this.height + this.padding * 2;\r\n        let zx = disW > screanWidth ? screanWidth / disW : 1;\r\n        let zy = disH > screanHeight ? screanHeight / disH : 1;\r\n        let z = Math.min(zy, zx);\r\n        if (z < 1) {\r\n            z = Math.max(z, 0.25);\r\n            this.zoom = z;\r\n        } else {\r\n            let minW = screanWidth * 0.5 + this.padding * 2;\r\n            let minH = screanHeight * 0.5 + this.padding * 2;\r\n            zy = disH < minH ? minH / this.width : 1;\r\n            zx = disW < minW ? minW / this.height : 1;\r\n            let z1 = Math.min(zy, zx);\r\n            z1 = Math.min(z1, 5);\r\n            this.zoom = z1;\r\n        }\r\n        this.placeAtCenter();\r\n    }\r\n\r\n    placeAtCenter() {\r\n        let screanWidth = this.screanWidth;\r\n        let screanHeight = this.screanHeight;\r\n        let cw = this.width * this.zoom;\r\n        let ch = this.height * this.zoom;\r\n        let dw = (screanWidth - cw) / 2;\r\n        let dh = (screanHeight - ch) / 2;\r\n        this.x = dw;\r\n        this.y = dh;\r\n    }\r\n\r\n\r\n    get zoom() { return this._zoom }\r\n    set zoom(z) {\r\n        this._zoom = z;\r\n        this.scalex = z;\r\n        this.scaley = z;\r\n    }\r\n\r\n    configPath(path) {\r\n        path.addRect(CanvasKitUtils.newXYWHRect(0, 0, this.width, this.height));\r\n    }\r\n\r\n    calculateLocalBounds(b = { left: 0, top: 0, right: 0, bottom: 0 }) {\r\n        b.left = -(MAX_SIZE - this.width) / 2;\r\n        b.top = -(MAX_SIZE - this.height) / 2;\r\n        b.right = b.left + MAX_SIZE;\r\n        b.bottom = b.top + MAX_SIZE;\r\n        return b;\r\n    }\r\n\r\n\r\n    getDocPath() {\r\n        if (this._path == null) {\r\n            this._path = CanvasKitUtils.newPath();\r\n            this.configPath(this._path);\r\n        }\r\n        return this._path;\r\n    }\r\n\r\n    getPaint() {\r\n        if (this._paint == null) {\r\n            this._paint = CanvasKitUtils.newPaint();\r\n        }\r\n        return this._paint;\r\n    }\r\n\r\n\r\n    drawSelf(canvas) {\r\n        super.drawSelf(canvas);\r\n        let path = this.getDocPath();\r\n        let paint = this.getPaint();\r\n        paint.setColorComponents(1, 1, 1, 1);\r\n        paint.setStyle(CanvasKitUtils.fillStyle);\r\n        canvas.drawPath(path, paint);\r\n\r\n        paint.setColorComponents(0, 0, 0, 1);\r\n        paint.setStyle(CanvasKitUtils.strokeStyle);\r\n        canvas.drawPath(path, paint);\r\n    }\r\n\r\n    deletePath() {\r\n        if (this._path) {\r\n            this.getTarget()._path.delete();\r\n            this._path = null;\r\n        }\r\n    }\r\n\r\n    dispose() {\r\n        if (this.isDisposed) return;\r\n        this.deletePath();\r\n        let p = this.getTarget()._paint;\r\n        if (p) p.delete();\r\n        this._paint = null;\r\n        super.dispose();\r\n    }\r\n}","export default {\r\n    methods: {\r\n        keydown(event) {\r\n            if (event.code == 'Delete') {\r\n                if (this._deleteAction) {\r\n                    cancelAnimationFrame(this._deleteAction);\r\n                }\r\n                this._deleteAction = requestAnimationFrame(() => {\r\n                    this.deleteActionFired();\r\n                })\r\n            }\r\n            if (event.code == 'Space') {\r\n                this.spacePressed = true;\r\n            }\r\n        },\r\n        keyup(event) {\r\n            if (event.code == 'Space') {\r\n                this.spacePressed = false;\r\n            }\r\n        },\r\n\r\n        keypress(event) {\r\n            if (this._keyPressId) {\r\n                cancelAnimationFrame(this._keyPressId);\r\n            }\r\n            this._keyPressId = requestAnimationFrame(() => {\r\n                if (event.code == 'KeyZ') {\r\n                    if (event.ctrlKey && !event.shiftKey) {\r\n                        this.undoActionFired();\r\n                        return;\r\n                    }\r\n                    if (event.ctrlKey && event.shiftKey) {\r\n                        this.redoActionFired();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (event.code == 'KeyV') {\r\n                    this.currentTool = 'select'\r\n                }\r\n                if (event.code == 'KeyA') {\r\n                    this.currentTool = 'vertex-select'\r\n                }\r\n                if (event.code == 'KeyW') {\r\n                    this.currentTool = 'pen'\r\n                }\r\n                if (event.code == 'KeyG') {\r\n                    if (event.ctrlKey && !event.shiftKey) {\r\n                        this.groupActionFired();\r\n                        return;\r\n                    }\r\n                    if (event.ctrlKey && event.shiftKey) {\r\n                        this.ungroupActionFired();\r\n                        return;\r\n                    }\r\n                }\r\n            })\r\n        },\r\n\r\n        groupActionFired() {\r\n            let actionbar = this.$refs[\"actionBar\"];\r\n            if (actionbar) actionbar.groupFigures();\r\n        },\r\n\r\n        ungroupActionFired() {\r\n            let actionbar = this.$refs[\"actionBar\"];\r\n            if (actionbar) actionbar.unGroup();\r\n        },\r\n\r\n        deleteActionFired() {\r\n            let actionbar = this.$refs[\"actionBar\"];\r\n            if (actionbar) actionbar.deleteSelections();\r\n        },\r\n        redoActionFired() {\r\n            let actionbar = this.$refs[\"actionBar\"];\r\n            if (actionbar) actionbar.redo();\r\n        },\r\n        undoActionFired() {\r\n            let actionbar = this.$refs[\"actionBar\"];\r\n            if (actionbar) actionbar.undo();\r\n        }\r\n    },\r\n    mounted() {\r\n        window.addEventListener(\"keydown\", this.keydown);\r\n        window.addEventListener(\"keyup\", this.keyup);\r\n        window.addEventListener('keypress', this.keypress);\r\n    },\r\n    data() {\r\n        return {\r\n            spacePressed: false\r\n        }\r\n    }\r\n}","import CompositeAction from \"../../actions/compsite-action.js\";\r\nimport ActionFactory from \"../../actions/action-factory\";\r\nimport Utils from \"../../utils.js\";\r\nimport Group from \"../../lib/group.js\";\r\nexport default {\r\n    computed: {\r\n    },\r\n    methods: {\r\n        unGroupFigures(selections = this.currentSelections) {\r\n            if (!this.mainRoot) return;\r\n            let action = new CompositeAction();\r\n            selections.forEach((group) => {\r\n                if (!(group instanceof Group)) return;\r\n                let ga = new CompositeAction();\r\n                let fs = group.children;\r\n                fs.forEach((figure) => {\r\n                    let m = figure.worldMatrix;\r\n                    // 默认是在mainroot的figure：\r\n                    let pm = this.mainRoot.worldMatrix.clone().invert();\r\n                    let pose = pm.multiply(m).decompose();\r\n                    let fa = new CompositeAction();\r\n                    // 先删除， 再加入到根 最后修改pose，\r\n                    let ra = ActionFactory.newRemoveFigureAction(figure, group);\r\n                    fa.add(ra);\r\n                    let aa = ActionFactory.newAddFigureAction(figure, this.mainRoot);\r\n                    fa.add(aa);\r\n                    let pa = ActionFactory.newPoseChangeAction([\r\n                        {\r\n                            figure: figure,\r\n                            pose: pose,\r\n                        },\r\n                    ]);\r\n                    fa.add(pa);\r\n                    ga.add(fa);\r\n                });\r\n                let ra = ActionFactory.newRemoveFigureAction(group, this.mainRoot);\r\n                ga.add(ra);\r\n                action.add(ga);\r\n            });\r\n\r\n            this.actionStack.excute(action);\r\n        },\r\n\r\n        groupFigures(selections = this.currentSelections) {\r\n            if (!this.mainRoot) return;\r\n            let group = new Group({ name: \"Group\" });\r\n\r\n            let figures = selections.map((v) => v);\r\n            let bounds = Utils.calculateFiguresBounds(figures);\r\n            let m = this.mainRoot.worldMatrix.clone().invert();\r\n            let p1 = m.multiplyWithVertexDatas(bounds.left, bounds.top);\r\n            let p2 = m.multiplyWithVertexDatas(bounds.right, bounds.bottom);\r\n            group.x = p1[0];\r\n            group.y = p1[1];\r\n            group.width = p2[0] - p1[0];\r\n            group.height = p2[1] - p1[1];\r\n            let action = new CompositeAction();\r\n            let add = ActionFactory.newAddFigureAction(group, this.mainRoot);\r\n            action.add(add);\r\n\r\n            figures.forEach((figure) => {\r\n                let ca = new CompositeAction();\r\n                let ta = ActionFactory.newTranslateAction(\r\n                    [figure],\r\n                    -group.x,\r\n                    -group.y\r\n                );\r\n                ca.add(ta);\r\n                if (figure.parent) {\r\n                    let ra = ActionFactory.newRemoveFigureAction(figure, figure.parent);\r\n                    ca.add(ra);\r\n                }\r\n                // 这里注意，Vue的proxy加入作为节点，在真实绘制调用的时候就会出问题\r\n                let aa = ActionFactory.newAddFigureAction(figure.getTarget(), group);\r\n                ca.add(aa);\r\n\r\n                action.add(ca);\r\n            });\r\n\r\n            this.actionStack.excute(action);\r\n            this.mainRoot.refresh();\r\n        },\r\n    },\r\n\r\n}","import CompositeAction from \"../../actions/compsite-action.js\";\r\nimport ActionFactory from \"../../actions/action-factory\";\r\nexport default {\r\n    methods: {\r\n        clipFigures(event) {\r\n            let mask = event.mask;\r\n            let figures = event.figures;\r\n            if (!mask || !figures || figures.length == 0 || !this.mainRoot) return;\r\n            let m = mask.worldMatrix.invert();\r\n            let actions = new CompositeAction();\r\n            figures.forEach((f) => {\r\n                let ca = new CompositeAction();\r\n                let mf = f.worldMatrix;\r\n                let fm = m.clone().multiply(mf);\r\n                let ta = ActionFactory.newPoseChangeAction([\r\n                    { figure: f, pose: fm.decompose() },\r\n                ]);\r\n                ca.add(ta);\r\n                let ra = ActionFactory.newRemoveFigureAction(f, f.parent);\r\n                ca.add(ra);\r\n                let aa = ActionFactory.newAddFigureAction(f, mask);\r\n                ca.add(aa);\r\n\r\n                actions.add(ca);\r\n            });\r\n            if (!mask.clip) {\r\n                actions.add(ActionFactory.newChangePropertyAction(mask, \"clip\", true));\r\n            }\r\n            if (mask.showBorder) {\r\n                actions.add(\r\n                    ActionFactory.newChangePropertyAction(mask, \"showBorder\", false)\r\n                );\r\n            }\r\n            if (mask.fill) {\r\n                actions.add(ActionFactory.newChangePropertyAction(mask, \"fill\", false));\r\n            }\r\n\r\n            this.actionStack.excute(actions);\r\n            this.mainRoot.refresh();\r\n        },\r\n\r\n        unClipFigures(masks) {\r\n            if (!masks || masks.length == 0 || !this.mainRoot) return;\r\n            let action = new CompositeAction();\r\n            masks.forEach((mask) => {\r\n                let figures = mask.children;\r\n                let mca = new CompositeAction();\r\n                figures.forEach((figure) => {\r\n                    let m = figure.worldMatrix;\r\n                    let pm = this.mainRoot.worldMatrix.clone().invert();\r\n                    let pose = pm.multiply(m).decompose();\r\n                    let ca = new CompositeAction();\r\n\r\n                    ca.add(ActionFactory.newRemoveFigureAction(figure, mask));\r\n                    ca.add(ActionFactory.newAddFigureAction(figure, this.mainRoot));\r\n                    ca.add(ActionFactory.newPoseChangeAction([{ figure, pose }]));\r\n\r\n                    mca.add(ca);\r\n                });\r\n\r\n                if (mask.clip) {\r\n                    mca.add(ActionFactory.newChangePropertyAction(mask, \"clip\", false));\r\n                }\r\n                if (!mask.showBorder) {\r\n                    mca.add(\r\n                        ActionFactory.newChangePropertyAction(mask, \"showBorder\", true)\r\n                    );\r\n                }\r\n                if (!mask.fill) {\r\n                    mca.add(ActionFactory.newChangePropertyAction(mask, \"fill\", true));\r\n                }\r\n                action.add(mca);\r\n            });\r\n            this.actionStack.excute(action);\r\n            this.mainRoot.refresh();\r\n        },\r\n    },\r\n\r\n}","import { render } from \"./Canvas.vue?vue&type=template&id=4d39b810\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=4d39b810&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"document-root\">\r\n    <div class=\"document-header\">\r\n      <i class=\"iconfont icon-document\" style=\"margin-right: 5px\"></i\r\n      ><span style=\"font-weight: bold\">Shape Structure</span>\r\n    </div>\r\n    <div\r\n      style=\"\r\n        background-color: #777777;\r\n        height: 1px;\r\n        margin-top: 5px;\r\n        margin-bottom: 10px;\r\n      \"\r\n    ></div>\r\n    <div class=\"document-content\">\r\n      <tree-node v-for=\"node in nodes\" v-bind:key=\"node.id\" :model=\"node\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TreeNode from \"./TreeNode.vue\";\r\nexport default {\r\n  components: { TreeNode },\r\n  name: \"Document\",\r\n  props: {\r\n    nodes: {\r\n      type: Array,\r\n    },\r\n  },\r\n  watch: {\r\n    nodes: {\r\n      handler() {},\r\n      deep: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.document-root {\r\n  box-sizing: border-box;\r\n  height: 61.8%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.document-header {\r\n  box-sizing: border-box;\r\n  color: whitesmoke;\r\n  text-align: left;\r\n}\r\n\r\n.document-content {\r\n  flex-grow: 1;\r\n  width: 100%;\r\n  overflow: scroll;\r\n  box-sizing: border-box;\r\n  padding: 5px 0px 5px 0px;\r\n  /* background-color: #444444; */\r\n}\r\n\r\n.document-content::-webkit-scrollbar {\r\n  width: 12px; /* width of the entire scrollbar */\r\n  height: 12px;\r\n}\r\n\r\n.document-content::-webkit-scrollbar-track {\r\n  background: #313131; /* color of the tracking area */\r\n}\r\n\r\n.document-content::-webkit-scrollbar-thumb {\r\n  background: #525252;\r\n  padding: 5px;\r\n  /* border: transparent solid 5px; */\r\n  /* background-color: blue;  */\r\n}\r\n\r\n.document-content::-webkit-scrollbar-corner {\r\n  background: #313131;\r\n}\r\n</style>","<template>\r\n  <div>\r\n    <div class=\"tree-node\" v-if=\"model != null\">\r\n      <div class=\"tree-node-label\" @click=\"expand\">\r\n        <div\r\n          :id=\"'collapse-icon-' + model.id\"\r\n          v-if=\"hasChildren\"\r\n          class=\"collapse-icon\"\r\n          :class=\"collapsed ? 'collapse-icon-rotate' : ''\"\r\n        >\r\n          <i class=\"iconfont icon-arrow-right\" style=\"font-size: 1em\"></i>\r\n        </div>\r\n        <div v-else style=\"width: 1.4em\"></div>\r\n        <i class=\"iconfont node-icon\" :class=\"nodeIcon\"></i>\r\n        <small>{{ model.name }}</small>\r\n      </div>\r\n      <div class=\"tree-node-contents\" :style=\"'padding-left:2em'\">\r\n        <div v-if=\"collapsed\">\r\n          <tree-node\r\n            v-for=\"child in children\"\r\n            v-bind:key=\"child.id\"\r\n            :model=\"child\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Utils from \"../../utils\";\r\nexport default {\r\n  name: \"TreeNode\",\r\n  data() {\r\n    return {\r\n      iconWidth: 0,\r\n    };\r\n  },\r\n  updated() {\r\n    if (!this.model) return;\r\n    let e = this.$el;\r\n    let a = e.querySelector(\"#collapse-icon-\" + this.model.id);\r\n    if (a == null) return;\r\n    this.iconWidth = a.clientWidth;\r\n  },\r\n  computed: {\r\n    collapsed() {\r\n      if (!this.model) return false;\r\n      if (this.model.collapsed == null) {\r\n        this.model.collapsed = true;\r\n      }\r\n      return this.model.collapsed;\r\n    },\r\n\r\n    nodeIcon() {\r\n      return Utils.objectIcon(this.model);\r\n    },\r\n\r\n    children() {\r\n      if (this.hasChildren) return this.model.children;\r\n    },\r\n\r\n    hasChildren() {\r\n      if (this.model && this.model.children)\r\n        return this.model.children.length > 0;\r\n    },\r\n  },\r\n  methods: {\r\n    expand(event) {\r\n      if (!this.hasChildren) return;\r\n      if (this.model.collapsed == null) {\r\n        this.model.collapsed = true;\r\n      } else this.model.collapsed = !this.model.collapsed;\r\n    },\r\n  },\r\n  props: {\r\n    model: {\r\n      type: Object,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.tree-node {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.tree-node-label {\r\n  padding: 5px 0 5px 0;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  color: #aaaaaa;\r\n  width: 100%;\r\n}\r\n\r\n.tree-node-label:hover {\r\n  color: whitesmoke;\r\n  cursor: pointer;\r\n}\r\n\r\n.tree-node-contents {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.collapse-icon,\r\n.collapse-icon-rotate {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 0 0.2em 0 0.2em;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.collapse-icon-rotate {\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.node-icon {\r\n  margin-right: 2px;\r\n  font-size: 1em;\r\n}\r\n</style>","import { render } from \"./TreeNode.vue?vue&type=template&id=178b387e\"\nimport script from \"./TreeNode.vue?vue&type=script&lang=js\"\nexport * from \"./TreeNode.vue?vue&type=script&lang=js\"\n\nimport \"./TreeNode.vue?vue&type=style&index=0&id=178b387e&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Document.vue?vue&type=template&id=6ea5c962\"\nimport script from \"./Document.vue?vue&type=script&lang=js\"\nexport * from \"./Document.vue?vue&type=script&lang=js\"\n\nimport \"./Document.vue?vue&type=style&index=0&id=6ea5c962&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./Main.vue?vue&type=template&id=6ccac119\"\nimport script from \"./Main.vue?vue&type=script&lang=js\"\nexport * from \"./Main.vue?vue&type=script&lang=js\"\n\nimport \"./Main.vue?vue&type=style&index=0&id=6ccac119&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div id=\"footer\" class=\"bluebg\">\r\n    <div>\r\n      <small>{{ tooltip }}</small>\r\n    </div>\r\n    <div>\r\n      <small>v0.0.1</small>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Footer\",\r\n  props: {\r\n    tooltip: {\r\n      type: String,\r\n      default: \"NONE\",\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n#footer {\r\n  width: 100%;\r\n  padding: 2px 20px 2px 20px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: baseline;\r\n  color: #dddddd;\r\n}\r\n</style>","import { render } from \"./Footer.vue?vue&type=template&id=a1d2e318\"\nimport script from \"./Footer.vue?vue&type=script&lang=js\"\nexport * from \"./Footer.vue?vue&type=script&lang=js\"\n\nimport \"./Footer.vue?vue&type=style&index=0&id=a1d2e318&lang=css\"\nscript.render = render\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=5221b968\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5221b968&lang=css\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"home\">\n    <img alt=\"Vue logo\" src=\"../assets/logo.png\" />\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nexport default {\n  name: \"Home\",\n};\n</script>\n","import { render } from \"./Home.vue?vue&type=template&id=e90068e0\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { createRouter, createWebHistory } from 'vue-router'\nimport Home from '../views/Home.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/about',\n    name: 'About',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue')\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n})\n\nexport default router\n","import { createStore } from 'vuex'\n\nexport default createStore({\n  state: {\n  },\n  mutations: {\n  },\n  actions: {\n  },\n  modules: {\n  }\n})\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './store'\r\n\r\n\r\ncreateApp(App).use(store).use(router).mount('#app')\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Canvas.vue?vue&type=style&index=0&id=4d39b810&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=5221b968&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Footer.vue?vue&type=style&index=0&id=a1d2e318&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToolsBar.vue?vue&type=style&index=0&id=fd936df8&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NewDocDialog.vue?vue&type=style&index=0&id=6d9dceaf&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Header.vue?vue&type=style&index=0&id=64586dd8&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PropertyBar.vue?vue&type=style&index=0&id=c5d73c52&lang=css\"","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TreeNode.vue?vue&type=style&index=0&id=178b387e&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActionBar.vue?vue&type=style&index=0&id=e3b2954a&lang=css\""],"sourceRoot":""}