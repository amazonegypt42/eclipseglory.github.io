(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],h=0,u=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(u.length)u.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var s=i[o];0!==r[s]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=i[0]))}return t}var n={},o={app:0},r={app:0},a=[];function s(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"8cad312d","chunk-612782da":"369055e6","chunk-612875a8":"f6eb9578","chunk-61290602":"bda8cfed","chunk-61525b2c":"bb343ed7","chunk-6154291e":"3f8cb88e","chunk-7b911dc8":"c7ae0241"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(t){var e=[],i={"chunk-7b911dc8":1};o[t]?e.push(o[t]):0!==o[t]&&i[t]&&e.push(o[t]=new Promise((function(e,i){for(var n="css/"+({about:"about"}[t]||t)+"."+{about:"31d6cfe0","chunk-612782da":"31d6cfe0","chunk-612875a8":"31d6cfe0","chunk-61290602":"31d6cfe0","chunk-61525b2c":"31d6cfe0","chunk-6154291e":"31d6cfe0","chunk-7b911dc8":"860e42f8"}[t]+".css",r=c.p+n,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var l=a[s],h=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(h===n||h===r))return e()}var u=document.getElementsByTagName("style");for(s=0;s<u.length;s++){l=u[s],h=l.getAttribute("data-href");if(h===n||h===r)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||r,a=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=n,delete o[t],d.parentNode.removeChild(d),i(a)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){o[t]=0})));var n=r[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=a);var l,h=document.createElement("script");h.charset="utf-8",h.timeout=120,c.nc&&h.setAttribute("nonce",c.nc),h.src=s(t);var u=new Error;l=function(e){h.onerror=h.onload=null,clearTimeout(d);var i=r[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,i[1](u)}r[t]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:h})}),12e4);h.onerror=h.onload=l,document.head.appendChild(h)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],h=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=h;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"025e":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("d4ec"),o=i("bee2"),r=i("ade3"),a=(i("159b"),i("3a84")),s={default:"default",select:"default",move:"move",add:"crosshair","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","n-resize":"n-resize","se-resize":"se-resize","ne-resize":"ne-resize","sw-resize":"sw-resize","nw-resize":"nw-resize",rotate:"url(assets/images/cursor-rotate.png), auto","vertex-select":"url()","move-root":"grab"},c=function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,null,[{key:"calculateFiguresBounds",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||0==t.length)return{left:0,top:0,right:0,bottom:0};var i={left:1/0,top:1/0,right:-1/0,bottom:-1/0};return t.forEach((function(t){if(e){var n=t.worldBounds;i.left=Math.min(n.left,i.left),i.right=Math.max(n.right,i.right),i.top=Math.min(n.top,i.top),i.bottom=Math.max(n.bottom,i.bottom)}else i.left=Math.min(t.x,i.left),i.right=Math.max(t.x+t.width,i.right),i.top=Math.min(t.y,i.top),i.bottom=Math.max(t.y+t.height,i.bottom)})),i}},{key:"objectIcon",value:function(t){if(t)return t instanceof a["m"].Rect?"icon-square":t instanceof a["m"].Ellipse?"icon-circle":t instanceof a["m"].Star?"icon-star":t instanceof a["m"].Polygon?"icon-polygon":t instanceof a["m"].PathShape?"icon-path-shape":t instanceof a["e"]?"icon-group":t instanceof a["m"].Line?"icon-line":t instanceof a["i"]?"icon-text":t instanceof a["g"]?"icon-vertices":void 0}}]),t}();Object(r["a"])(c,"CURSOR",s)},"080b":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("1da1"),o=(i("96cf"),i("159b"),i("a15b"),i("3a84")),r=i("90a2"),a=i("0fda");function s(t){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e&&null!=e.type){t.next=2;break}return t.abrupt("return");case 2:if(i=l(e),!i){t.next=21;break}if(null!=e.showChildren&&(i.showChildren=e.showChildren),null!=e.visible&&(i.visible=e.visible),null!=e.clip&&(i.clip=e.clip),e.border&&(i.br=e.border.r,i.bb=e.border.b,i.bg=e.border.g,i.ba=e.border.a,i.borderWidth=e.border.width,e.border.cap==r["a"].StrokeCap.Butt.value&&(i.cap=r["a"].StrokeCap.Butt),e.border.cap==r["a"].StrokeCap.Round.value&&(i.cap=r["a"].StrokeCap.Round),e.border.cap==r["a"].StrokeCap.Square.value&&(i.cap=r["a"].StrokeCap.Square),e.border.cap==r["a"].StrokeJoin.Bevel.value&&(i.join=r["a"].StrokeJoin.Bevel),e.border.cap==r["a"].StrokeJoin.Round.value&&(i.join=r["a"].StrokeJoin.Round),e.border.cap==r["a"].StrokeJoin.Miter.value&&(i.join=r["a"].StrokeJoin.Miter),i.miter=e.border.miter),!e.children){t.next=20;break}n=0;case 10:if(!(n<e.children.length)){t.next=20;break}return o=e.children[n],t.t0=i,t.next=15,s(o);case 15:t.t1=t.sent,t.t0.addChild.call(t.t0,t.t1);case 17:n++,t.next=10;break;case 20:return t.abrupt("return",i);case 21:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function l(t){var e;if(null!=t&&null!=t.type)return"document"==t.type&&(e=new o["b"](null,0,0,t)),"root"==t.type&&(e=new o["h"](null,t)),"line"==t.type&&(e=new a["Line"](t)),"text"!=t.type&&"v-text"!=t.type||(e=new o["i"](t)),"rect"==t.type&&(e=new a["Rect"](t)),"ellipse"==t.type&&(e=new a["Ellipse"](t)),"star"==t.type&&(e=new a["Star"](t)),"polygon"==t.type&&(e=new a["Polygon"](t)),"center-rect"==t.type&&(e=new a["CenterRect"](t)),"center-ellipse"==t.type&&(e=new a["CenterEllipse"](t)),"center-star"==t.type&&(e=new a["CenterStar"](t)),"center-polygon"==t.type&&(e=new a["CenterPolygon"](t)),"group"==t.type&&(e=new o["e"](t)),"path-shape"==t.type&&(e=new a["PathShape"](t)),h(e,t),e}function h(t,e){if(t&&e&&e.type){if("document"==e.type&&(t.zoom=e.zoom,t.padding=e.padding),"center-rect"==e.type&&(t.x=e.cx,t.y=e.cy),e.type,"center-ellipse"==e.type&&(t.x=e.cx,t.y=e.cy),"center-polygon"==e.type&&(t.x=e.cx,t.y=e.cy),"center-star"==e.type&&(t.x=e.cx,t.y=e.cy),"line"==e.type){var i=e.from;i&&t.getPathModel().addPoint(new o["g"](i.x,i.y));var n=e.to;n&&t.getPathModel().addPoint(new o["g"](n.x,n.y))}if("path-shape"==e.type){var r=e.points;if(r){var a=t.getPathModel();r.forEach((function(t){var e=new o["g"](t.x,t.y,t.type);t.in&&(e.inX=t.in.x,e.inY=t.in.y),t.out&&(e.outX=t.out.x,e.outY=t.out.y),a.addPoint(e)}))}}}}},"0829":function(t,e,i){"use strict";i("5ce9")},"0d3f":function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("53ca"),o=i("d4ec"),r=i("bee2"),a=(i("159b"),i("a434"),i("f8ec")),s=0,c=1,l=2,h=3,u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0,right:0,bottom:0},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(Object(o["a"])(this,t),null==e)throw"QuadTree Bounds can not be null";this.totalNodesCount=0,this.bounds=e,this.maxNodes=i,this.currentDeepth=n,this.maxDeepth=r,this.nodes=[],this.areas=Array(4),this.parent}return Object(r["a"])(t,[{key:"findNodes",value:function(e){var i=this;if(!t.isContacted(e,this.bounds))return null;if(0!=this.nodes.length)return this.nodes;var o=function(){for(var t=[],n=i.areas.length-1;n>=0;n--){var o=i.areas[n];if(o){var r=o.findNodes(e);null!=r&&r.forEach((function(e){-1==t.indexOf(e)&&t.push(e)}))}}return{v:t}}();return"object"===Object(n["a"])(o)?o.v:void 0}},{key:"findSingleNode",value:function(e,i){if(t.containsPoint(e,i,this.bounds)){if(0==this.nodes.length){for(var n=this.areas.length-1;n>=0;n--){var o=this.areas[n];if(o){var r=o.findSingleNode(e,i);if(null!=r)return r}}return null}for(var a=this.nodes.length-1;a>=0;a--){var s=this.nodes[a];if(t.containsPoint(e,i,s.bounds))return s}return null}return null}},{key:"_getArea",value:function(t){return this.areas[t]}},{key:"splitInsert",value:function(e){var i=this.bounds.left,n=this.bounds.right,o=this.bounds.top,r=this.bounds.bottom,a=Math.floor((n+i)/2),u=Math.floor((r+o)/2),d=this.areas[s];d||(d=new t({left:i,top:o,right:a,bottom:u},this.maxNodes,this.currentDeepth+1,this.maxDeepth),this.areas[s]=d),d.insert(e);var f=this.areas[c];f||(f=new t({left:a,top:o,right:n,bottom:u},this.maxNodes,this.currentDeepth+1,this.maxDeepth),this.areas[c]=f),f.insert(e);var p=this.areas[l];p||(p=new t({left:i,top:u,right:a,bottom:r},this.maxNodes,this.currentDeepth+1,this.maxDeepth),this.areas[l]=p),p.insert(e);var v=this.areas[h];v||(v=new t({left:a,top:u,right:n,bottom:r},this.maxNodes,this.currentDeepth+1,this.maxDeepth),this.areas[h]=v),v.insert(e)}},{key:"_createRelationShip",value:function(t,e){t.__related_quad||(t.__related_quad=[]),-1==t.__related_quad.indexOf(e)&&t.__related_quad.push(e)}},{key:"_deleteRelationShip",value:function(t,e){if(t.__related_quad){var i=t.__related_quad.indexOf(e);-1!=i&&t.__related_quad.splice(i,1)}}},{key:"insert",value:function(e){var i=this;return!!t.isContacted(e.bounds,this.bounds)&&(this.totalNodesCount>=this.maxNodes?(this.totalNodesCount++,this.currentDeepth==this.maxDeepth?(this.nodes.push(e),this._createRelationShip(e,this),!0):(this.nodes.forEach((function(t){i._deleteRelationShip(t,i),i.splitInsert(t)})),this.splitInsert(e),this._deleteRelationShip(e,this),this.nodes.length=0,!0)):(this.totalNodesCount++,this.nodes.push(e),this._createRelationShip(e,this),!0))}},{key:"merge",value:function(){var t=this;this.areas.forEach((function(e){e&&(e.nodes.forEach((function(e){t.nodes.push(e)})),e.nodes.length=0)}));for(var e=0;e<this.areas.length;e++)this.areas[e]=null}},{key:"decreaseTotalNodes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t[this]||(t[this]=!0,this.totalNodesCount--,this.totalNodesCount<this.maxNodes&&(e[this]=!0),this.parent&&this.parent.decreaseTotalNodes(t,e))}},{key:"remove",value:function(e){if(t.isContacted(e.bounds,this.bounds)){if(0!=this.nodes.length){var i=this.nodes.indexOf(e);return-1!=i&&(this.nodes.splice(i,1),this.totalNodesCount--,!0)}var n=this.areas[0],o=!1;n||(o|=n.remove(e));var r=this.areas[1];r||(o|=r.remove(e));var a=this.areas[2];a||(o|=a.remove(e));var s=this.areas[3];return s||(o|=s.remove(e)),o?(this.totalNodesCount--,this.totalNodesCount<this.maxNodes&&this.merge()):console.warn("这里发生了buuuugggg"),o}return!1}},{key:"dispose",value:function(){this.nodes.length=0,this.nodes=null,this.areas.forEach((function(t){t&&t.dispose()})),this.areas=null}}],[{key:"deleteNodeForce",value:function(t){if(t){var e=t.__related_quad;if(null!=e){var i={},n={};e.forEach((function(e){var o=e.nodes.indexOf(t);-1!=o&&(e.nodes.splice(o,1),e.decreaseTotalNodes(i,n))})),e.length=0}}}},{key:"containsPoint",value:function(t,e,i){return a["a"].containsPoint(t,e,i)}},{key:"isContacted",value:function(t,e){return a["a"].isContacted(t,e)}}]),t}()},"0fda":function(t,e,i){"use strict";i.r(e),i.d(e,"Rect",(function(){return p})),i.d(e,"Ellipse",(function(){return b})),i.d(e,"Star",(function(){return x})),i.d(e,"Polygon",(function(){return C})),i.d(e,"CenterRect",(function(){return v})),i.d(e,"CenterEllipse",(function(){return g})),i.d(e,"CenterStar",(function(){return S})),i.d(e,"CenterPolygon",(function(){return _})),i.d(e,"PathShape",(function(){return P})),i.d(e,"Line",(function(){return A})),i.d(e,"VerticesShape",(function(){return w})),i.d(e,"Shape",(function(){return f}));var n=i("d4ec"),o=i("bee2"),r=i("262e"),a=i("2caf"),s=(i("99af"),i("90a2")),c=i("1da1"),l=i("45eb"),h=i("7e84"),u=(i("96cf"),i("1341")),d=(i("a15b"),i("cb29"),i("760e")),f=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),o.setAntiAlias(!0),o.borderWidth=null==t||null==t.borderWidth?1:t.borderWidth,o.cap=null==t||null==t.cap?s["a"].StrokeCap.Butt:t.cap,o.join=null==t||null==t.join?s["a"].StrokeJoin.Bevel:t.join,o.miter=null==t||null==t.miter?2:t.miter,o}return Object(o["a"])(i,[{key:"setAntiAlias",value:function(t){this._paint&&this.getTarget()._paint.setAntiAlias(t)}},{key:"cap",get:function(){if(this._paint)return this.getTarget()._paint.getStrokeCap()},set:function(t){this._paint&&this.getTarget()._paint.setStrokeCap(t)}},{key:"join",get:function(){if(this._paint)return this.getTarget()._paint.getStrokeJoin()},set:function(t){this._paint&&this.getTarget()._paint.setStrokeJoin(t)}},{key:"miter",get:function(){if(this._paint)return this.getTarget()._paint.getStrokeMiter()},set:function(t){this._paint&&this.getTarget()._paint.setStrokeMiter(t)}},{key:"width",get:function(){return Object(l["a"])(Object(h["a"])(i.prototype),"width",this)},set:function(t){t!=this.width&&(Object(u["a"])(Object(h["a"])(i.prototype),"width",t,this,!0),this.fireShapeDirty())}},{key:"height",get:function(){return Object(l["a"])(Object(h["a"])(i.prototype),"height",this)},set:function(t){t!=this.height&&(Object(u["a"])(Object(h["a"])(i.prototype),"height",t,this,!0),this.fireShapeDirty())}},{key:"deletePath",value:function(){this._path&&(this.getTarget()._path.delete(),this._path=null)}},{key:"fireShapeDirty",value:function(){this.deletePath(),this.fireBoundsDirty(),this.updateRelatedQuadTree(),this.fireEvent("shapeDirty")}},{key:"getPath",value:function(){return this._path||(this._path=s["a"].newPath(),this.drawPath(this._path)),this._path}},{key:"applyClip",value:function(t){var e=this.getPath();e&&t.clipPath(e,s["a"].ClipOp.Intersect,!0)}},{key:"drawSelf",value:function(t){if(!(this.alpha<=0)){var e=this.getPath(),i=this.getPathEffect();if(i&&this._paint.setPathEffect(i),e){if(this.a>0&&this.fill>0){if(this._paint.setShader(null),this._paint.setStyle(s["a"].fillStyle),1==this.fill&&this._paint.setColorComponents(this.r/255,this.g/255,this.b/255,this.a*this.alpha),2==this.fill){var n=this.linearGradient.getShader();n&&this._paint.setShader(n)}if(3==this.fill){var o=this.radialGradient.getShader();o&&this._paint.setShader(o)}t.drawPath(e,this._paint)}if(this.showBorder>0&&this.borderWidth>0&&this.ba>0){if(this._paint.setStrokeWidth(this.borderWidth),this._paint.setShader(null),this._paint.setStyle(s["a"].strokeStyle),1==this.showBorder&&this._paint.setColorComponents(this.br/255,this.bg/255,this.bb/255,this.ba*this.alpha),2==this.showBorder){var r=this.borderLinearGradient.getShader();r&&this._paint.setShader(r)}if(3==this.showBorder){var a=this.borderRadialGradient.getShader();a&&this._paint.setShader(a)}t.drawPath(e,this._paint)}}}}},{key:"drawPath",value:function(t){}},{key:"dispose",value:function(){this.isDisposed||(this.deletePath(),Object(l["a"])(Object(h["a"])(i.prototype),"dispose",this).call(this))}},{key:"clone",value:function(){var t=Object(l["a"])(Object(h["a"])(i.prototype),"clone",this).call(this);if(t)return t.borderWidth=this.borderWidth,t.cap=this.cap,t.join=this.join,t.miter=this.miter,t}},{key:"getJsonObjectName",value:function(){return"shape"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,n=e.border,n&&(n.width=this.borderWidth,n.cap=this.cap.value,n.join=this.join.value,n.miter=this.miter),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGExtensionString",value:function(){var t=Object(l["a"])(Object(h["a"])(i.prototype),"getSVGExtensionString",this).call(this);if(this.showBorder>0){var e=s["a"].getJoinText(this.join);e&&(t+=' stroke-linejoin="'.concat(e,'"')),"miter"==e&&(t+=' stroke-miterlimit="'.concat(this.miter,'"'));var n=s["a"].getCapText(this.cap);n&&(t+=' stroke-linecap="'.concat(n,'"'))}return t}}]),i}(d["a"]),p=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),o.radiusx=null==t||null==t.radiusx?0:t.radiusx,o.radiusy=null==t||null==t.radiusy?0:t.radiusy,null!=t&&null!=t.radius&&(o.radius=t.radius),o}return Object(o["a"])(i,[{key:"radius",set:function(t){this.radiusy=t,this.radiusx=t}},{key:"radiusx",get:function(){return this._radiusx},set:function(t){this._radiusx!=t&&(this._radiusx=t,this.fireShapeDirty())}},{key:"radiusy",get:function(){return this._radiusy},set:function(t){this._radiusy!=t&&(this._radiusy=t,this.fireShapeDirty())}},{key:"drawPath",value:function(t){var e=s["a"].newXYWHRect(0,0,this.width,this.height);null==this.radiusx||null==this.radiusy||0==this.radiusx&&0==this.radiusy?t.addRect(e):(e=s["a"].newRRectXY(e,this.radiusx,this.radiusy),t.addRRect(e))}},{key:"createMySelf",value:function(){return new i({radiusx:this.radiusx,radiusy:this.radiusy})}},{key:"getJsonObjectName",value:function(){return"rect"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.radiusx=this.radiusx,e.radiusy=this.radiusy,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(f),v=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){return Object(n["a"])(this,i),e.call(this,t)}return Object(o["a"])(i,[{key:"createMySelf",value:function(){return new i({radiusx:this.radiusx,radiusy:this.radiusy})}},{key:"drawPath",value:function(t){var e=s["a"].newXYWHRect(-this.width/2,-this.height/2,this.width,this.height);null==this.radiusx||null==this.radiusy||0==this.radiusx&&0==this.radiusy?t.addRect(e):(e=s["a"].newRRectXY(e,this.radiusx,this.radiusy),t.addRRect(e))}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0,right:0,bottom:0};return t.left=-this.width/2,t.top=-this.height/2,t.right=this.width/2,t.bottom=this.height/2,t}},{key:"getJsonObjectName",value:function(){return"center-rect"}},{key:"getSVGLabelName",value:function(){return"rect"}},{key:"getSVGPositionString",value:function(){return'x="'.concat(-this.width/2,'" y="').concat(-this.height/2,'"')}}]),i}(p),b=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){return Object(n["a"])(this,i),e.call(this,t)}return Object(o["a"])(i,[{key:"radiusx",get:function(){return this.width/2},set:function(t){this.width=2*t}},{key:"radiusy",get:function(){return this.height/2},set:function(t){this.height=2*t}},{key:"drawPath",value:function(t){var e=s["a"].newXYWHRect(0,0,this.width,this.height);t.addOval(e)}},{key:"createMySelf",value:function(){return new i({radiusx:this.radiusx,radiusy:this.radiusy})}},{key:"getJsonObjectName",value:function(){return"ellipse"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.radiusx=this.radiusx,e.radiusy=this.radiusy,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(f),g=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){return Object(n["a"])(this,i),e.call(this,t)}return Object(o["a"])(i,[{key:"drawPath",value:function(t){var e=s["a"].newXYWHRect(-this.width/2,-this.height/2,this.width,this.height);t.addOval(e)}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0,right:0,bottom:0};return t.left=-this.width/2,t.top=-this.height/2,t.right=this.width/2,t.bottom=this.height/2,t}},{key:"createMySelf",value:function(){return new i({radiusx:this.radiusx,radiusy:this.radiusy})}},{key:"getJsonObjectName",value:function(){return"center-ellipse"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.cx=e.x,e.cy=e.y,delete e.x,delete e.y,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGLabelName",value:function(){return"ellipse"}},{key:"getSVGPositionString",value:function(){return'cx="0" cy="0"'}},{key:"getSVGDimensionString",value:function(){return'rx="'.concat(this.width/2,'" ry="').concat(this.height/2,'"')}}]),i}(b),y=i("6ed4"),m=i("f106"),O=i("257e"),k=i("ade3"),j=(i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("92e6")),w=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),Object(k["a"])(Object(O["a"])(o),"_pathModelChanged",(function(){o.fireShapeDirty()})),o.boundsRect=new Float32Array(4),o}return Object(o["a"])(i,[{key:"pointsCount",get:function(){return this.getPathModel().points.length}},{key:"deletePathModel",value:function(){this._pathModel&&(this._pathModel.off("dirty",this._pathModelChanged),this._pathModel.dispose(),this._pathModel.parent=null,this._pathModel=null)}},{key:"insertPoint",value:function(t,e){return this.getPathModel().insertPoint(t,e)}},{key:"deleteAt",value:function(t){return this.getPathModel().deleteAt(t)}},{key:"addPoint",value:function(t){var e=this.getPathModel();return e.addPoint(t)}},{key:"deletePoint",value:function(t){var e=this.getPathModel();return e.deletePoint(t)}},{key:"drawPath",value:function(t){var e=this.getPathModel();e.draw(t)}},{key:"_configPathPoints",value:function(t){}},{key:"_createPathModel",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=new j["a"](t);return this._configPathPoints(e),e}},{key:"getPathModel",value:function(){return null==this._pathModel&&(this._pathModel=this._createPathModel(),this._pathModel.parent=this,this._pathModel.on("dirty",this._pathModelChanged)),this._pathModel}},{key:"dispose",value:function(){this.isDisposed||(delete this.boundsRect,this.deletePathModel(),Object(l["a"])(Object(h["a"])(i.prototype),"dispose",this).call(this))}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom};this.getTarget().getPath().getBounds(this.boundsRect);var e=this.boundsRect,i=e[2]-e[0];i<6&&(e[0]-=3,e[2]+=3);var n=e[3]-e[1];return n<6&&(e[1]-=3,e[3]+=3),t.left=e[0],t.top=e[1],t.right=e[2],t.bottom=e[3],t}},{key:"containsPoint",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._containsPoint=void 0;var n=t,o=e;if(i){var r=this.worldMatrix.clone(),a=r.invert().multiplyWithVertexDatas(n,o);n=a[0],o=a[1]}var s=this.getPathModel().pointsCount;if(2==s){var c=this.getPathModel().getPoint(0),l=this.getPathModel().getPoint(1);if(null==c.in&&null==c.out&&null==l.in&&null==l.out){var h=this.borderWidth;h<6&&(h=6);var u=Math.sqrt((c.x-l.x)*(c.x-l.x)+(c.y-l.y)*(c.y-l.y));u<6&&(u=6);var d=Math.min(c.x,l.x),f=Math.max(c.x,l.x),p=Math.min(c.y,l.y),v=Math.max(c.y,l.y);return n>d&&n<f&&o>p&&o<v}}var b=this.getTarget().getPath().contains(n,o);return b}},{key:"clone",value:function(){var t=Object(l["a"])(Object(h["a"])(i.prototype),"clone",this).call(this);if(t)return t._pathModel=this.getPathModel().clone(),t._pathModel.on("dirty",t._pathModelChanged),t._pathModel.parent=t,t}},{key:"getSVGLabelName",value:function(){return"path"}},{key:"getSVGDimensionString",value:function(){}},{key:"getSVGExtensionString",value:function(){var t=Object(l["a"])(Object(h["a"])(i.prototype),"getSVGExtensionString",this).call(this),e=this.getTarget().getPath();return e&&(t||(t=""),t+=' d="'.concat(e.toSVGString(),'"')),t}}]),i}(f),x=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),o.radius=null==t||null==t.radius?.5:t.radius,o.corners=null==t||null==t.corners?5:Math.floor(t.corners),o}return Object(o["a"])(i,[{key:"createMySelf",value:function(){return new i({radius:this.radius,corners:this.corners})}},{key:"fireShapeDirty",value:function(){this._pathModel&&(this._pathModel.dispose(),this._pathModel=null),Object(l["a"])(Object(h["a"])(i.prototype),"fireShapeDirty",this).call(this)}},{key:"_configPathPoints",value:function(t){for(var e=2*this.corners,i=0;i<e;i++)t.addPoint(new y["a"]);for(var n=this.corners,o=m["a"].PI2/n,r=-m["a"].HALF_PI,a=0,s=r+o/2,c=1,l=this.width/2,h=l*this.radius,u=this.height/2,d=u*this.radius,f=this.width/2,p=this.height/2,v=0,b=0,g=0;v<n;v++){var O=b+r,k=Math.cos(O)*l,j=Math.sin(O)*u,w=t.points[g+a];w.x=k+f,w.y=j+p,O=b+s,k=Math.cos(O)*h,j=Math.sin(O)*d;var x=t.points[g+c];x.x=k+f,x.y=j+p,b+=o,g+=2}}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius!=t&&(this._radius=t,this.fireShapeDirty())}},{key:"corners",get:function(){return this._corners},set:function(t){var e=Math.floor(t);this._corners!=e&&(this._corners=e,this.fireShapeDirty())}},{key:"getJsonObjectName",value:function(){return"star"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.corners=this.corners,e.radius=this.radius,t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(w),S=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){return Object(n["a"])(this,i),e.call(this,t)}return Object(o["a"])(i,[{key:"createMySelf",value:function(){return new i({radius:this.radius,corners:this.corners})}},{key:"_configPathPoints",value:function(t){for(var e=2*this.corners,i=0;i<e;i++)t.addPoint(new y["a"]);for(var n=this.corners,o=m["a"].PI2/n,r=-m["a"].HALF_PI,a=0,s=r+o/2,c=1,l=this.width/2,h=l*this.radius,u=this.height/2,d=u*this.radius,f=0,p=0,v=0,b=0,g=0;v<n;v++){var O=b+r,k=Math.cos(O)*l,j=Math.sin(O)*u,w=t.points[g+a];w.x=k+f,w.y=j+p,O=b+s,k=Math.cos(O)*h,j=Math.sin(O)*d;var x=t.points[g+c];x.x=k+f,x.y=j+p,b+=o,g+=2}}},{key:"getJsonObjectName",value:function(){return"center-star"}}]),i}(x),C=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),o.sides=null==t||null==t.sides?5:t.sides,o}return Object(o["a"])(i,[{key:"_configPathPoints",value:function(t){for(var e=this.width/2,i=this.height/2,n=-Math.PI/2,o=2*Math.PI/this.sides,r=this.width/2,a=this.height/2,s=0;s<this.sides;s++){var c=Math.cos(n)*e+r,l=Math.sin(n)*i+a;t.addPoint(new y["a"](c,l)),n+=o}}},{key:"fireShapeDirty",value:function(){this._pathModel&&(this._pathModel.dispose(),this._pathModel=null),Object(l["a"])(Object(h["a"])(i.prototype),"fireShapeDirty",this).call(this)}},{key:"sides",get:function(){return this._sides},set:function(t){this._sides!=t&&(this._sides=t,this.fireShapeDirty())}},{key:"createMySelf",value:function(){return new i({sides:this.sides})}},{key:"getJsonObjectName",value:function(){return"polygon"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.sides=this.sides,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(w),_=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){return Object(n["a"])(this,i),e.call(this,t)}return Object(o["a"])(i,[{key:"createMySelf",value:function(){return new i({sides:this.sides})}},{key:"getJsonObjectName",value:function(){return"center-polygon"}},{key:"_configPathPoints",value:function(t){for(var e=this.width/2,i=this.height/2,n=-Math.PI/2,o=2*Math.PI/this.sides,r=0,a=0,s=0;s<this.sides;s++){var c=Math.cos(n)*e+r,l=Math.sin(n)*i+a;t.addPoint(new y["a"](c,l)),n+=o}}}]),i}(C),P=(i("159b"),function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),o.close=null!=t&&null!=t.close&&t.close,o}return Object(o["a"])(i,[{key:"_createPathModel",value:function(){return Object(l["a"])(Object(h["a"])(i.prototype),"_createPathModel",this).call(this,this.close)}},{key:"createMySelf",value:function(){return new i({close:this.close})}},{key:"clone",value:function(){var t=Object(l["a"])(Object(h["a"])(i.prototype),"clone",this).call(this);if(t){var e=t.getPathModel();return this.close?e.close():e.open(),t}}},{key:"width",get:function(){return this._width},set:function(t){}},{key:"height",get:function(){return this._height},set:function(t){}},{key:"isVisible",get:function(){return this.visible&&0!=this.scalex&&0!=this.scaley}},{key:"close",get:function(){return this._close},set:function(t){this._close!=t&&(this._close=t,this._close?this.getPathModel().close():this.getPathModel().open(),this.fireShapeDirty())}},{key:"getJsonObjectName",value:function(){return"path-shape"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,delete e.width,delete e.height,e.close=this.close,e.pathSvg=this.getTarget().getPath().toSVGString(),e.points=[],n=this.getPathModel(),n.points.forEach((function(t){var i={x:t.x,y:t.y,type:t.type};t.in&&(i.in={x:t.inX,y:t.inY}),t.out&&(i.out={x:t.outX,y:t.outY}),e.points.push(i)})),t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(w)),A=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){return Object(n["a"])(this,i),e.call(this,t)}return Object(o["a"])(i,[{key:"close",get:function(){return!1},set:function(t){}},{key:"isVisible",value:function(){return this.visible}},{key:"showBorder",get:function(){return!0},set:function(t){}},{key:"fill",get:function(){return!1},set:function(t){}},{key:"getJsonObjectName",value:function(){return"line"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(h["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,delete e.width,delete e.height,delete e.fill,delete e.close,delete e.points,delete e.a,delete e.r,delete e.b,delete e.g,n=this.getPathModel().getPoint(0),o=this.getPathModel().getPoint(1),n&&(e.from={x:n.x,y:n.y}),o&&(e.to={x:o.x,y:o.y}),t.abrupt("return",e);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGLabelName",value:function(){return"line"}},{key:"getSVGPositionString",value:function(){var t=this.getPathModel().getPoint(0),e=this.getPathModel().getPoint(1);return'x1="'.concat(t.x,'" y1="').concat(t.y,'" x2="').concat(e.x,'" y2="').concat(e.y,'"')}},{key:"getSVGDimensionString",value:function(){}}]),i}(P)},"0ff7":function(t,e,i){"use strict";var n=i("5530"),o=(i("b0c0"),i("5502"));e["a"]={computed:Object(n["a"])(Object(n["a"])({},Object(o["e"])({document:function(t){return t.document},documentChildren:function(t){if(null!=t.document)return t.document.children},documentIsEmpty:function(t){if(null!=t.document)return t.document.name},status:function(t){return t.status},selections:function(t){return t.selections},actionStack:function(t){return t.actionStack}})),Object(o["c"])(["documentIsEmpty","isEmptySelections","fonts","images"])),methods:Object(n["a"])(Object(n["a"])({},Object(o["d"])(["updateDocument","updateStatus","updateSelections","addImage","removeImage"])),Object(o["b"])(["cleanActionStack","redo","undo","excuteAction","addSelection","removeSelection","removeSelections","concatSelections","cleanSelections"]))}},1576:function(t,e,i){},"1b62":function(t,e,i){"use strict";i.d(e,"h",(function(){return j})),i.d(e,"g",(function(){return k})),i.d(e,"j",(function(){return p})),i.d(e,"k",(function(){return y})),i.d(e,"d",(function(){return r})),i.d(e,"a",(function(){return s})),i.d(e,"e",(function(){return h})),i.d(e,"b",(function(){return u})),i.d(e,"c",(function(){return f})),i.d(e,"f",(function(){return v})),i.d(e,"i",(function(){return b})),i.d(e,"l",(function(){return g}));i("d81d");var n=i("d3d6"),o=i("3411"),r={computed:{canDistribute:function(){return this.actionStack&&this.selections&&this.selections.length>2}},methods:{distribute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"left",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.selections.map((function(t){return t})),r=new o["a"];function a(t,e,i){return"center"==t?e?i.left+(i.right-i.left)/2:i.top+(i.bottom-i.top)/2:i[t]}i.sort((function(i,n){var o=i.worldBounds,r=n.worldBounds;return a(t,e,o)-a(t,e,r)}));for(var s=i[0],c=i[i.length-1],l=s.worldBounds,h=c.worldBounds,u=a(t,e,l),d=a(t,e,h),f=d-u,p=f/(i.length-1),v=u+p,b=1;b<i.length-1;b++){var g=i[b],y=g.worldBounds,m=a(t,e,y),O=v-m;e?r.add(n["a"].newTranslateAction([g],O/this.document.scalex,0)):r.add(n["a"].newTranslateAction([g],0,O/this.document.scaley)),v+=p}this.excuteAction(r)}}},a=(i("159b"),i("025e")),s={computed:{canAlign:function(){return this.actionStack&&this.selections&&this.selections.length>1}},methods:{alignCenter:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"align",r=a["a"].calculateFiguresBounds(this.selections),s=r.left+(r.right-r.left)/2,c=r.top+(r.bottom-r.top)/2,l=new o["a"](i);this.selections.forEach((function(i){var o,r=i.worldBounds,a=r.left+(r.right-r.left)/2,h=r.top+(r.bottom-r.top)/2,u=s-a,d=c-h;o=e?n["a"].newTranslateAction([i],u/t.document.scalex,0):n["a"].newTranslateAction([i],0,d/t.document.scaley),l.add(o)})),this.excuteAction(l)},alignLeft:function(){this.align("left","Align Left",!0,!0)},alignRight:function(){this.align("right","Align right",!1,!0)},alignTop:function(){this.align("top","Align top",!0,!1)},alignBottom:function(){this.align("bottom","Align bottom",!1,!1)},align:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"align",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=this.selections[0].worldBounds[t],c={};this.selections.forEach((function(e){var i=c[e.id];null==i&&(c[e.id]=e.worldBounds,i=c[e.id]),s=r?Math.min(s,i[t]):Math.max(s,i[t])}));var l=new o["a"](i);for(var h in this.selections.forEach((function(i){var o,r=c[i.id],h=s-r[t];o=a?n["a"].newTranslateAction([i],h/e.document.scalex,0):n["a"].newTranslateAction([i],0,h/e.document.scaley),l.add(o)})),c)delete c[h];c=null,this.excuteAction(l)}}},c=i("3a84"),l=i("f40b"),h={computed:{canGroup:function(){return!!(this.selections&&this.actionStack&&this.document)&&this.selections.length>1},canUnGroup:function(){if(!this.selections||!this.actionStack||!this.document)return!1;if(0==this.selections.length)return!1;for(var t=0;t<this.selections.length;t++){var e=this.selections[t];if(!(e instanceof c["e"]))return!1}return!0}},methods:{unGroupFigures:function(){var t=this,e=new l["b"];this.selections.forEach((function(i){if(i instanceof c["e"]){var n=new l["b"],o=i.children;o.forEach((function(e){var o=e.worldMatrix,r=t.document.worldMatrix.clone().invert(),a=r.multiply(o).decompose(),s=new l["b"],c=l["a"].newRemoveFigureAction(e,i);s.add(c);var h=l["a"].newAddFigureAction(e,t.document);s.add(h);var u=l["a"].newPoseChangeAction([{figure:e,pose:a}]);s.add(u),n.add(s)}));var r=l["a"].newRemoveFigureAction(i,t.document);n.add(r),e.add(n)}})),this.excuteAction(e)},groupFigures:function(){var t=new c["e"]({name:"Group"}),e=this.selections.map((function(t){return t})),i=a["a"].calculateFiguresBounds(e),n=this.document.worldMatrix.clone().invert(),o=n.multiplyWithVertexDatas(i.left,i.top),r=n.multiplyWithVertexDatas(i.right,i.bottom);t.x=o[0],t.y=o[1],t.width=r[0]-o[0],t.height=r[1]-o[1];var s=new l["b"],h=l["a"].newAddFigureAction(t,this.document);s.add(h),e.forEach((function(e){var i=new l["b"],n=l["a"].newTranslateAction([e],-t.x,-t.y);if(i.add(n),e.parent){var o=l["a"].newRemoveFigureAction(e,e.parent);i.add(o)}var r=l["a"].newAddFigureAction(e.getTarget(),t);i.add(r),s.add(i)})),this.excuteAction(s)}}},u={methods:{bringFront:function(){if(this.selections&&this.actionStack){var t=this.selections[0],e=this.document.indexOfChild(t);e+=1;var i=n["a"].newChangeIndexAction(t,e);this.excuteAction(i)}},sendBack:function(){if(this.selections&&this.actionStack){var t=this.selections[0],e=this.document.indexOfChild(t);e-=1;var i=n["a"].newChangeIndexAction(t,e);this.excuteAction(i)}}},computed:{canBringFront:function(){if(this.selections&&1==this.selections.length&&null!=this.actionStack){var t=this.selections[0];if(t instanceof c["d"]&&this.document.children[this.document.children.length-1]!=t)return!0}return!1},canSendBack:function(){if(this.selections&&1==this.selections.length&&null!=this.actionStack){var t=this.selections[0];if(t instanceof c["d"]){this.document.children[0];if(this.document.children[0]!=t)return!0}}return!1}}},d=(i("cb29"),i("0fda")),f={computed:{canClip:function(){return null!=this.clipMask&&null!=this.actionStack&&null!=this.document},canUnClip:function(){if(this.selections&&null!=this.actionStack&&null!=this.document)for(var t=0;t<this.selections.length;t++){var e=this.selections[t];if(e.clip&&e.children.length>0)return!0}return!1},clipMask:function(){if(!this.isEmptySelections&&this.selections.length>1){for(var t,e=-1,i=0;i<this.selections.length;i++){var n=this.selections[i],o=n.parent;if(o){var r=o.indexOfChild(n);r>e&&(e=r,t=n)}}if(t instanceof d["Shape"])return t}}},methods:{clip:function(){var t=this.clipMask,e=[];this.selections.forEach((function(i){t!=i&&e.push(i)}));var i=t.worldMatrix.invert(),r=new o["a"];e.forEach((function(e){var a=new o["a"],s=e.worldMatrix,c=i.clone().multiply(s),l=n["a"].newPoseChangeAction([{figure:e,pose:c.decompose()}]);a.add(l);var h=n["a"].newRemoveFigureAction(e,e.parent);a.add(h);var u=n["a"].newAddFigureAction(e,t);a.add(u),r.add(a)})),t.clip||r.add(n["a"].newChangePropertyAction(t,"clip",!0)),0!=t.showBorder&&r.add(n["a"].newChangePropertyAction(t,"showBorder",0)),0!=t.fill&&r.add(n["a"].newChangePropertyAction(t,"fill",0)),this.excuteAction(r)},unClip:function(){var t=this,e=[];this.selections.forEach((function(t){t.clip&&t.children.length>=1&&e.push(t)}));var i=new o["a"];e.forEach((function(e){var r=e.children,a=new o["a"];r.forEach((function(i){var r=i.worldMatrix,s=t.document.worldMatrix.clone().invert(),c=s.multiply(r).decompose(),l=new o["a"];l.add(n["a"].newRemoveFigureAction(i,e)),l.add(n["a"].newAddFigureAction(i,t.document)),l.add(n["a"].newPoseChangeAction([{figure:i,pose:c}])),a.add(l)})),e.clip&&a.add(n["a"].newChangePropertyAction(e,"clip",!1)),0==e.showBorder&&a.add(n["a"].newChangePropertyAction(e,"showBorder",1)),0==e.fill&&a.add(n["a"].newChangePropertyAction(e,"fill",1)),i.add(a)})),this.excuteAction(i)}}},p={computed:{canDelete:function(){return!(!this.actionStack||!this.document)&&!this.isEmptySelections}},methods:{deleteSelections:function(){if(!this.isEmptySelections&&this.actionStack){var t=new l["b"];this.selections.forEach((function(e){if(e instanceof c["d"]){var i=l["a"].newRemoveFigureAction(e,e.parent);t.add(i)}if(e instanceof c["g"]){var n=e.parent;while(1){if(null==n||n instanceof d["VerticesShape"])break;n=n.parent}if(n){var o=n.getPathModel().points.indexOf(e);if(-1!=o){var r=new l["a"].newDeletePointAction(n,o);t.add(r)}}}})),this.excuteAction(t)}}}},v={mixins:[h,p],methods:{keydown:function(t){var e=this;this.canHandlerInput&&(this._deleteAction&&cancelAnimationFrame(this._deleteAction),this._deleteAction=requestAnimationFrame((function(){if("Delete"==t.code&&e.deleteActionFired(),"KeyZ"==t.code){if(t.ctrlKey&&!t.shiftKey)return void e.undoActionFired();if(t.ctrlKey&&t.shiftKey)return void e.redoActionFired()}if("Escape"==t.code&&(e.currentTool="select"),"KeyV"==t.code&&(e.currentTool="select"),"KeyT"==t.code&&(e.currentTool="text"),"KeyA"==t.code&&(e.currentTool="vertex-select"),"KeyW"==t.code&&(e.currentTool="pen"),"KeyG"==t.code){if(t.shiftKey)return void e.groupActionFired();if(t.altKey&&t.shiftKey)return void e.ungroupActionFired()}})),"Space"==t.code&&(this.spacePressed=!0))},keyup:function(t){this.canHandlerInput&&"Space"==t.code&&(this.spacePressed=!1)},keypress:function(t){},groupActionFired:function(){this.canGroup&&this.groupFigures&&this.groupFigures()},ungroupActionFired:function(){this.canUnGroup&&this.unGroupFigures&&this.unGroupFigures()},deleteActionFired:function(){this.canDelete&&this.deleteSelections&&this.deleteSelections()},redoActionFired:function(){this.actionStack&&this.document&&this.actionStack.canRedo()&&this.redo()},undoActionFired:function(){this.actionStack&&this.document&&this.actionStack.canUndo()&&this.undo()}},mounted:function(){window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("keypress",this.keypress)},data:function(){return{spacePressed:!1,canHandlerInput:!0}}},b={mounted:function(){var t=this;window.addEventListener("resize",(function(){t.loading=!0,t._resizeUpdateId&&clearTimeout(t._resizeUpdateId),t._resizeUpdateId=setTimeout((function(){t.initCanvas(),t.frontRoot&&t.frontRoot.refresh(),t.mainRoot&&(t.mainRoot.init(),t.mainRoot.refresh()),t.loading=!1}),500)})),this.initCanvas()},methods:{initCanvas:function(){var t=this.$el,e=t.querySelector("#canvas-container"),i=e.clientWidth,n=e.clientHeight,o=window.devicePixelRatio,r=t.querySelector("#front-canvas"),a=t.querySelector("#main-canvas"),s=t.querySelector("#backend-canvas");u(r,i,n,o),u(a,i,n,o),u(s,i,n,o),this.frontSurface&&this.frontSurface.delete(),this.frontSurface=c["a"].makeCanvasSurface("front-canvas");var l=this.frontSurface.getCanvas();l.scale(o,o),this.frontRoot?(this.frontRoot.getTarget().surface=this.frontSurface,this.frontRoot.width=i,this.frontRoot.height=n):this.frontRoot=new c["h"](this.frontSurface,{width:i,height:n}),this.mainSurface&&this.mainSurface.delete(),this.mainSurface=c["a"].makeCanvasSurface("main-canvas");var h=this.mainSurface.getCanvas();function u(t,e,i,n){t.width=e*n,t.height=i*n}h.scale(o,o),this.mainRoot&&(this.mainRoot.getTarget().surface=this.mainSurface,this.mainRoot.screanWidth=i,this.mainRoot.screanHeight=n)}}},g={methods:{confirm:function(t){t.target.select()},selectText:function(t){t.target.select()}}},y={computed:{isSingleSelection:function(){return this.selections&&1==this.selections.length},currentSelection:function(){if(this.selections)return this.selections[0]},hasSelection:function(){return!(!this.selections||0==this.selections.length)},hasBorderOrFillProperty:function(){if(this.hasSelection){for(var t=0;t<this.selections.length;t++){var e=this.selections[t];if(e instanceof c["g"]||e instanceof c["f"])return!1}return!0}return!1},isLine:function(){if(!this.isSingleSelection)return!1;var t=this.currentSelection;return t instanceof d["Line"]},isImage:function(){if(!this.isSingleSelection)return!1;var t=this.currentSelection;return t instanceof c["f"]},isText:function(){if(!this.isSingleSelection)return!1;var t=this.currentSelection;return t instanceof c["i"]},isShape:function(){if(!this.isSingleSelection)return!1;var t=this.currentSelection;return t instanceof d["Shape"]},isGroup:function(){if(!this.isSingleSelection)return!1;var t=this.currentSelection;return t instanceof c["e"]},isVertex:function(){return!!this.isSingleSelection&&this.currentSelection instanceof c["g"]},isRect:function(){if(this.isSingleSelection){var t=this.currentSelection;return t instanceof d["Rect"]}return!1},isStar:function(){if(this.isSingleSelection){var t=this.currentSelection;return t instanceof d["Star"]}return!1},isPolygon:function(){if(this.isSingleSelection){var t=this.currentSelection;return t instanceof d["Polygon"]}return!1},isPath:function(){if(this.isSingleSelection){var t=this.currentSelection;if(t instanceof d["PathShape"])return!this.isStar&&!this.isPolygon}return!1}}},m=i("0ff7"),O=[m["a"]],k={mixins:O,methods:{canChangeProperty:function(t,e){return!0},changeProperty:function(t,e,i){this.document&&this.actionStack&&this.canChangeProperty(t,e)&&this.excuteAction(l["a"].newChangePropertyAction(t,e,i))},changeModelsProperty:function(t,e,i){var n=this;if(this.document&&this.actionStack){var o=new l["b"];t.forEach((function(t){n.canChangeProperty(t,e)&&o.add(l["a"].newChangePropertyAction(t,e,i))})),this.excuteAction(o)}},changeProperies:function(t,e){if(this.document&&this.actionStack){var i=new l["b"];for(var n in e)if(this.canChangeProperty(t,n)){var o=e[n];i.add(l["a"].newChangePropertyAction(t,n,o))}this.excuteAction(i)}},changeModelsProperties:function(t,e){var i=this;if(this.document&&this.actionStack){var n=new l["b"];t.forEach((function(t){var o=new l["b"];for(var r in e)if(i.canChangeProperty(t,r)){var a=e[r];o.add(l["a"].newChangePropertyAction(t,r,a))}n.add(o)})),this.excuteAction(n)}},getAnyPropertyValue:function(t,e,i){if(!t||0==t.length)return i;for(var n=t[0][e],o=1;o<t.length;o++){var r=t[o];if(r[e]!=n)return i}return null==n?i:n}}},j={mixins:[k],methods:{propertyChange:function(t){var e=new l["b"];t.forEach((function(t){var i=t.model,n=t.property,o=t.value;i&&n&&e.add(l["a"].newChangePropertyAction(i,n,o))})),this.excuteAction(e)}}}},"1bea":function(t,e,i){"use strict";i("d135")},"1d51":function(t,e,i){"use strict";i.r(e),i.d(e,"BezierEasing",(function(){return d})),i.d(e,"Matrix3",(function(){return f["a"]})),i.d(e,"SAT",(function(){return p["a"]})),i.d(e,"Vector2",(function(){return v}));var n=i("d4ec"),o=i("bee2"),r=(i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),4),a=.001,s=1e-7,c=10,l=11,h=1/(l-1),u="function"===typeof Float32Array,d=function(){function t(e,i,o,r){if(Object(n["a"])(this,t),!(0<=e&&e<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(this.mY1=i,this.mY2=r,this.mX1=e,this.mX2=o,this.linearEasing=!1,e===i&&o===r)this.linearEasing=!0;else{this.sampleValues=u?new Float32Array(l):new Array(l);for(var a=0;a<l;++a)this.sampleValues[a]=this.calcBezier(a*h,e,o)}}return Object(o["a"])(t,[{key:"easing",value:function(t){return 0===t||1===t||this.linearEasing?t:this.calcBezier(this.getTForX(t,this.mX1,this.mX2),this.mY1,this.mY2)}},{key:"getTForX",value:function(t,e,i){for(var n=0,o=1,r=l-1,s=this.sampleValues;o!==r&&s[o]<=t;++o)n+=h;--o;var c=(t-s[o])/(s[o+1]-s[o]),u=n+c*h,d=this.getSlope(u,e,i);return d>=a?this.newtonRaphsonIterate(t,u,e,i):0===d?u:this.binarySubdivide(t,n,n+h,e,i)}},{key:"A",value:function(t,e){return 1-3*e+3*t}},{key:"B",value:function(t,e){return 3*e-6*t}},{key:"C",value:function(t){return 3*t}},{key:"calcBezier",value:function(t,e,i){return((this.A(e,i)*t+this.B(e,i))*t+this.C(e))*t}},{key:"getSlope",value:function(t,e,i){return 3*this.A(e,i)*t*t+2*this.B(e,i)*t+this.C(e)}},{key:"binarySubdivide",value:function(t,e,i,n,o){var r,a,l=0;do{a=e+(i-e)/2,r=this.calcBezier(a,n,o)-t,r>0?i=a:e=a}while(Math.abs(r)>s&&++l<c);return a}},{key:"newtonRaphsonIterate",value:function(t,e,i,n){for(var o=0;o<r;++o){var a=this.getSlope(e,i,n);if(0===a)return e;var s=this.calcBezier(e,i,n)-t;e-=s/a}return e}}]),t}(),f=i("ea73"),p=i("d427"),v=function(){function t(e,i){Object(n["a"])(this,t),this.x=e,this.y=i}return Object(o["a"])(t,[{key:"magnitude",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"radian",get:function(){return Math.atan2(this.y,this.x)}},{key:"normalize",value:function(){var t=this.magnitude;if(0!=t)return this.x=this.x/t,this.y=this.y/t,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"dot",value:function(t,e){return this.x*t+this.y*e}},{key:"plus",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.x*i+this.y*e,o=this.x*e-this.y*i;return this.x=o,this.y=n,this}},{key:"clone",value:function(){return new t(this.x,this.y)}}]),t}()},2124:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("d4ec"),o=i("bee2"),r=(i("b0c0"),function(){function t(e){Object(n["a"])(this,t),this.name=e}return Object(o["a"])(t,[{key:"excute",value:function(){}},{key:"redo",value:function(){}},{key:"undo",value:function(){}},{key:"disposeRedo",value:function(){}},{key:"disposeUndo",value:function(){}},{key:"dispose",value:function(){}}]),t}())},2814:function(t,e,i){"use strict";i("93b2")},"29c8":function(t,e,i){},"2b62":function(t,e,i){"use strict";i("c96b")},"2f19":function(t,e,i){},"320e":function(t,e,i){"use strict";i("877c")},3411:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("d4ec"),o=i("bee2"),r=i("262e"),a=i("2caf"),s=(i("a434"),i("159b"),i("2124")),c=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Composite Actions";return Object(n["a"])(this,i),t=e.call(this,o),t.actions=[],t}return Object(o["a"])(i,[{key:"isEmpty",get:function(){return 0==this.actions.length}},{key:"add",value:function(t){t&&this.actions.push(t)}},{key:"remove",value:function(t){if(t){var e=this.actions.indexOf(t);-1!=e&&this.actions.splice(e,1)}}},{key:"excute",value:function(){this.actions.forEach((function(t){t.excute()}))}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){for(var t=this.actions.length-1;t>=0;t--){var e=this.actions[t];e.undo()}}},{key:"disposeRedo",value:function(){}},{key:"disposeUndo",value:function(){}},{key:"dispose",value:function(){this.actions.forEach((function(t){t.dispose()}))}}]),i}(s["a"])},"3a84":function(t,e,i){"use strict";i.d(e,"f",(function(){return _})),i.d(e,"b",(function(){return C})),i.d(e,"m",(function(){return o})),i.d(e,"k",(function(){return r})),i.d(e,"l",(function(){return n})),i.d(e,"d",(function(){return s["a"]})),i.d(e,"e",(function(){return y})),i.d(e,"i",(function(){return x})),i.d(e,"a",(function(){return g["a"]})),i.d(e,"h",(function(){return m})),i.d(e,"g",(function(){return k["a"]})),i.d(e,"j",(function(){return j["a"]})),i.d(e,"c",(function(){return w["a"]}));var n={};i.r(n),i.d(n,"QuadTreeNode",(function(){return a["a"]}));var o=i("0fda"),r=i("1d51"),a=i("0d3f"),s=i("760e"),c=i("1da1"),l=i("d4ec"),h=i("bee2"),u=i("257e"),d=i("45eb"),f=i("7e84"),p=i("262e"),v=i("2caf"),b=i("ade3"),g=(i("96cf"),i("159b"),i("90a2")),y=function(t){Object(p["a"])(i,t);var e=Object(v["a"])(i);function i(t){var n;return Object(l["a"])(this,i),n=e.call(this,t),Object(b["a"])(Object(u["a"])(n),"_childDirty",(function(){n.deletePath()})),n._dontApplyToChildren=!1,n}return Object(h["a"])(i,[{key:"showBorder",get:function(){return this._getAnyPropertyValue("showBorder",!0)},set:function(t){this._setAllChildren("showBorder",t)}},{key:"borderWidth",get:function(){return this._getAnyPropertyValue("borderWidth",0)},set:function(t){this._setAllChildren("borderWidth",t)}},{key:"miter",get:function(){return this._getAnyPropertyValue("miter",0)},set:function(t){this._setAllChildren("miter",t)}},{key:"join",get:function(){return this._getAnyPropertyValue("join",g["a"].StrokeJoin.Bevel)},set:function(t){this._setAllChildren("join",t)}},{key:"cap",get:function(){return this._getAnyPropertyValue("cap",g["a"].StrokeCap.Butt)},set:function(t){this._setAllChildren("cap",t)}},{key:"br",get:function(){return this._getAnyPropertyValue("br",0)},set:function(t){this._setAllChildren("br",t)}},{key:"bb",get:function(){return this._getAnyPropertyValue("bb",0)},set:function(t){this._setAllChildren("bb",t)}},{key:"bg",get:function(){return this._getAnyPropertyValue("bg",0)},set:function(t){this._setAllChildren("bg",t)}},{key:"ba",get:function(){return this._getAnyPropertyValue("ba",1)},set:function(t){this._setAllChildren("ba",t)}},{key:"fill",get:function(){return this._getAnyPropertyValue("fill",!0)},set:function(t){this._setAllChildren("fill",t)}},{key:"r",get:function(){return this._getAnyPropertyValue("r",0)},set:function(t){this._setAllChildren("r",t)}},{key:"b",get:function(){return this._getAnyPropertyValue("b",0)},set:function(t){this._setAllChildren("b",t)}},{key:"g",get:function(){return this._getAnyPropertyValue("g",0)},set:function(t){this._setAllChildren("g",t)}},{key:"a",get:function(){return this._getAnyPropertyValue("a",1)},set:function(t){this._setAllChildren("a",t)}},{key:"_getAnyPropertyValue",value:function(t,e){if(0==this.children.length)return e;for(var i=this.children[0][t],n=1;n<this.children.length;n++){var o=this.children[n];if(o[t]!=i)return e}return i}},{key:"_setAllChildren",value:function(t,e){if(!this._dontApplyToChildren)for(var i=0;i<this.children.length;i++){var n=this.children[i];n[t]=e}}},{key:"getPath",value:function(){var t=this;return this._path||(this.getTarget()._path=g["a"].newPath(),this.children.forEach((function(e){if(e.getPath){var i=e.getTarget().getPath().copy();i.transform(e.matrix.data),t.getTarget()._path.addPath(i)}else{var n=e.bounds,o=e.matrix.clone(),r=o.multiplyWithVertexDatas(n.left,n.top),a=o.multiplyWithVertexDatas(n.right,n.bottom),s=g["a"].newXYWHRect(r[0],r[1],a[0]-r[0],a[1]-r[1]);t.getTarget()._path.addRect(s)}}))),this._path}},{key:"insertChild",value:function(t,e){var n=Object(d["a"])(Object(f["a"])(i.prototype),"insertChild",this).call(this,t,e);return n&&(this.deletePath(),t.on("transformDirty",this._childDirty),t.on("boundsDirty",this._childDirty)),n}},{key:"removeAt",value:function(t){var e=Object(d["a"])(Object(f["a"])(i.prototype),"removeAt",this).call(this,t);return e&&(this.deletePath(),e.off("transformDirty",this._childDirty),e.off("boundsDirty",this._childDirty)),e}},{key:"deletePath",value:function(){this._path&&(this.getTarget()._path.delete(),this._path=null)}},{key:"dispose",value:function(){var t=this;this.isDisposed||(this.deletePath(),this.children.forEach((function(e){e.off("transformDirty",t._childDirty),e.off("boundsDirty",t._childDirty)})),Object(d["a"])(Object(f["a"])(i.prototype),"dispose",this).call(this))}},{key:"clone",value:function(){this._dontApplyToChildren=!0;var t=Object(d["a"])(Object(f["a"])(i.prototype),"clone",this).call(this);return this._dontApplyToChildren=!1,t}},{key:"createMySelf",value:function(){return new i}},{key:"getJsonObjectName",value:function(){return"group"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["a"])(Object(f["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,delete e.alpha,delete e.a,delete e.r,delete e.g,delete e.b,t.abrupt("return",e);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGLabelName",value:function(){return"g"}},{key:"getSVGDimensionString",value:function(){}}]),i}(s["a"]),m=(i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("99af"),function(t){Object(p["a"])(i,t);var e=Object(v["a"])(i);function i(t,n){var o;return Object(l["a"])(this,i),o=e.call(this,n),o.surface=t,o._rAFid,o._figureMap=new Map,o}return Object(h["a"])(i,[{key:"isVisible",value:function(){return!0}},{key:"recordAdd",value:function(t){t&&this._figureMap&&this._figureMap.set(t.id,t)}},{key:"recordRemove",value:function(t){t&&this._figureMap&&this._figureMap.delete(t.id)}},{key:"getFigureById",value:function(t){if(t&&this._figureMap)return this._figureMap.get(t)}},{key:"clear",value:function(){this.surface&&(this._rAFid&&this.getTarget().surface.cancelAnimationFrame(this._rAFid),this._rAFid=this.getTarget().surface.requestAnimationFrame((function(t){t.clear(g["a"].TRANSPARENT)})))}},{key:"refresh",value:function(t){var e=this;this.surface&&(this._rAFid&&this.getTarget().surface.cancelAnimationFrame(this._rAFid),this._rAFid=this.getTarget().surface.requestAnimationFrame((function(i){t&&t(),i.clear(g["a"].TRANSPARENT),e.getTarget().draw(i)})))}},{key:"dispose",value:function(){this.isDisposed||(this.surface=null,this._rAFid&&cancelAnimationFrame(this._rAFid),this._rAFid=null,this._figureMap.clear(),Object(d["a"])(Object(f["a"])(i.prototype),"dispose",this).call(this))}},{key:"getJsonObjectName",value:function(){return"root"}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["a"])(Object(f["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGPositionString",value:function(){}},{key:"getSVGTransformString",value:function(){}},{key:"getSVGAppendContents",value:function(t){if(t&&0!=t.length){var e="";return e+="<defs>\n",t.forEach((function(t){e+="\n".concat(t)})),e+="\n</defs>",e}}},{key:"getSVGLabelName",value:function(){return"svg"}},{key:"getSVGExtensionString",value:function(){return'viewbox="0 0 '.concat(this.width," ").concat(this.height,'" ').concat(O,' style="background-color:gray"')}}]),i}(s["a"])),O='xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"',k=i("6ed4"),j=(i("92e6"),i("f8ec")),w=i("4e40"),x=(i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ac1f"),i("1276"),i("cb29"),function(t){Object(p["a"])(i,t);var e=Object(v["a"])(i);function i(t){var n;return Object(l["a"])(this,i),n=e.call(this,t),n.r=null==t||null==t.r?0:t.r,n.g=null==t||null==t.g?0:t.g,n.b=null==t||null==t.b?0:t.b,n.a=null==t||null==t.a?1:t.a,n.showBorder=null==t||null==t.showBorder?0:t.showBorder,n.size=null==t||null==t.size?10:t.size,n.text=null==t||null==t.text?"":t.text,n.fontFamily=null==t||null==t.fontFamily?"Arial":t.fontFamily,n.lineSpace=null==t||null==t.lineSpace?0:t.lineSpace,n.letterSpace=null==t||null==t.letterSpace?0:t.letterSpace,n.hAlign=null==t||null==t.hAlign?"left":t.hAlign,n.vAlign=null==t||null==t.vAlign?"middle":t.vAlign,n.leftToRight=null!=t&&null!=t.leftToRight&&t.leftToRight,n.vertical=null!=t&&null!=t.vertical&&t.vertical,n.glyphsArray=null,n}return Object(h["a"])(i,[{key:"isVisible",get:function(){return this.visible&&0!=this.size&&null!=this.text&&0!=this.text.length}},{key:"getFont",value:function(){return null==this._font&&(this._font=g["a"].newFont({family:this.fontFamily},this.size)),this._font}},{key:"_createVerticalGlyphs",value:function(t,e,i,n,o){for(var r=-1/0,a=0;a<e.length;a++){var s=e[a];if(null!=s&&0!=s.length){var c={},l=g["a"].getGlyphIdsAndBounds(i,s),h=l.ids;c.ids=h,c.text=s,c.bounds=l.bounds,c.maxLetterWidth=n;for(var u=0,d=0;d<l.bounds.length;d++)u+=n+this.letterSpace,c.maxLetterWidth=Math.max(l.bounds[d][4],c.maxLetterWidth);u-=this.letterSpace,c.height=u,c.count=s.length,t.push(c),r=Math.max(r,u)}}this.height=r,this.width=n*this.glyphsArray.length,this.width+=this.lineSpace*(this.glyphsArray.length-1);for(var f=-this.width/2,p=-this.height/2,v=g["a"].getFontTopBottom(i),b=0,y=0;y<t.length;y++){var m=t[y],O=new Float32Array(2*m.count),k=-v.top*o;"center"==this.hAlign&&(k+=(r-m.height)/2),"right"==this.hAlign&&(k+=r-m.height),m.offsetX=b+f,m.offsetY=k+p;for(var j=0;j<m.bounds.length;j++){var w=m.bounds[j];"middle"==this.vAlign&&(O[2*j]=b+(m.maxLetterWidth-w[4])/2*o+f),"top"==this.vAlign&&(O[2*j]=b+f),"bottom"==this.vAlign&&(O[2*j]=b+(m.maxLetterWidth-w[4])*o+f),O[2*j+1]=k+p,k+=n+this.letterSpace}b+=n+this.lineSpace,m.positions=O}}},{key:"_createHorizontalGlyphs",value:function(t,e,i,n,o){for(var r=-1/0,a=0;a<e.length;a++){var s=e[a];if(null!=s&&0!=s.length){var c={},l=g["a"].getGlyphIdsAndBounds(i,s),h=l.ids;c.ids=h,c.text=s,c.bounds=l.bounds;for(var u=0,d=0;d<l.bounds.length;d++){var f=l.bounds[d];u+=f[4]*o+this.letterSpace}u-=this.letterSpace,c.width=u,c.count=s.length,t.push(c),r=Math.max(r,u)}}this.width=r,this.height=n*this.glyphsArray.length,this.height+=this.lineSpace*(this.glyphsArray.length-1);for(var p=-this.width/2,v=-this.height/2,b=g["a"].getFontTopBottom(i),y=0,m=0;m<t.length;m++,y+=n+this.lineSpace){var O=t[m],k=new Float32Array(2*O.count),j=0;"center"==this.hAlign&&(j=r-O.width,j*=.5),"right"==this.hAlign&&(j=r-O.width),O.offsetX=j+p,O.offsetY=y+v;for(var w=0;w<O.bounds.length;w++){var x=O.bounds[w];if("middle"==this.vAlign&&(k[2*w+1]=y-b.top*o+v),"top"==this.vAlign&&(k[2*w+1]=-x[1]*o+y+v),"bottom"==this.vAlign){var S=(b.bottom-x[3])*o;k[2*w+1]=y-b.top*o+S+v}k[2*w]=j+p,j+=x[4]*o+this.letterSpace}O.positions=k}}},{key:"getGlyphsMap",value:function(){if(this.isVisible){if(null==this.glyphsArray){this.glyphsArray=[];var t=this.getFont();if(!t)return;var e=this.text.split("\n"),i=this.size/100,n=g["a"].getFontLineHeight(t);null==n?n=1.5*this.size:n*=i,this.vertical?this._createVerticalGlyphs(this.glyphsArray,e,t,n,i):this._createHorizontalGlyphs(this.glyphsArray,e,t,n,i)}return this.glyphsArray}}},{key:"deleteGlyphsMap",value:function(){this.glyphsArray&&(this.glyphsArray.forEach((function(t){for(var e in t)delete t[e]})),this.glyphsArray.length=0,this.glyphsArray=null)}},{key:"deleteFont",value:function(){this._font&&this.getTarget()._font.delete(),this._font=null}},{key:"drawSelf",value:function(t){var e=this,i=this.getGlyphsMap();if(i&&0!=i.length){var n=this.getPathEffect();if(n&&this._paint.setPathEffect(n),this._paint.setShader(null),this.fill>0){if(this._paint.setStyle(g["a"].fillStyle),1==this.fill&&this._paint.setColorComponents(this.r/255,this.g/255,this.b/255,this.alpha*this.a),2==this.fill){var o=this.linearGradient.getShader();o&&this._paint.setShader(o)}if(3==this.fill){var r=this.radialGradient.getShader();r&&this._paint.setShader(r)}i.forEach((function(i){t.drawGlyphs(i.ids,i.positions,0,0,e.getFont(),e._paint)}))}if(this.showBorder>0&&null!=this.borderWidth&&this.borderWidth>0&&this.ba>0){if(this._paint.setStrokeWidth(this.borderWidth),this._paint.setStyle(g["a"].strokeStyle),1==this.showBorder&&this._paint.setColorComponents(this.br/255,this.bg/255,this.bb/255,this.alpha*this.ba),2==this.showBorder){var a=this.borderLinearGradient.getShader();a&&this._paint.setShader(a)}if(3==this.showBorder){var s=this.borderRadialGradient.getShader();s&&this._paint.setShader(s)}i.forEach((function(i){t.drawGlyphs(i.ids,i.positions,0,0,e.getFont(),e._paint)}))}}}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){t!=this._fontFamily&&(this._fontFamily=t,this.deleteFont(),this.deleteGlyphsMap())}},{key:"size",get:function(){return this._size},set:function(t){t!=this._size&&(this._size=t,this.deleteFont(),this.deleteGlyphsMap())}},{key:"text",get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this.deleteGlyphsMap())}},{key:"lineSpace",get:function(){return this._lineSpace},set:function(t){t!=this._lineSpace&&(this._lineSpace=t,this.deleteGlyphsMap())}},{key:"letterSpace",get:function(){return this._letterSpace},set:function(t){t!=this._letterSpace&&(this._letterSpace=t,this.deleteGlyphsMap())}},{key:"hAlign",get:function(){return this._hAlign},set:function(t){t!=this._hAlign&&(this._hAlign=t,this.deleteGlyphsMap())}},{key:"vAlign",get:function(){return this._vAlign},set:function(t){t!=this._vAlign&&(this._vAlign=t,this.deleteGlyphsMap())}},{key:"leftToRight",get:function(){return this._leftToRight},set:function(t){t!=this._leftToRight&&(this._leftToRight=t,this.deleteGlyphsMap())}},{key:"vertical",get:function(){return this._vertical},set:function(t){t!=this._vertical&&(this._vertical=t,this.deleteGlyphsMap())}},{key:"children",get:function(){},set:function(t){}},{key:"showChildren",get:function(){return!1},set:function(t){}},{key:"clip",get:function(){return!1},set:function(t){}},{key:"dispose",value:function(){this.isDisposed||(this.deleteGlyphsMap(),this.deleteFont(),Object(d["a"])(Object(f["a"])(i.prototype),"dispose",this).call(this))}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom};return t.left=-this.width/2,t.top=-this.height/2,t.right=this.width/2,t.bottom=this.height/2,t}},{key:"createMySelf",value:function(){return new i({r:this.r,b:this.b,g:this.g,a:this.a,size:this.size,text:this.text,fontFamily:this.fontFamily,lineSpace:this.lineSpace,letterSpace:this.letterSpace,hAlign:this.hAlign,vAlign:this.vAlign,leftToRight:this.leftToRight,vertical:this.vertical})}},{key:"getJsonObjectName",value:function(){return this.vertical?"v-text":"text"}},{key:"getSVGLabelName",value:function(){return"text"}},{key:"getSVGPositionString",value:function(){return'x="'.concat(-this.width/2,'" y="').concat(-this.height/2,'"')}},{key:"getSVGDimensionString",value:function(){}},{key:"getSVGExtensionString",value:function(){var t=Object(d["a"])(Object(f["a"])(i.prototype),"getSVGExtensionString",this).call(this);return t+=' dominant-baseline="hanging" font-size="'.concat(this.size,'" font-family="').concat(this.fontFamily,'"'),this.vertical&&(t+=' writing-mode="tb"'),t}},{key:"getSVGCDATA",value:function(){var t=this,e=this.getGlyphsMap();if(e&&e.length>0){var i="";return e.forEach((function(e){t.vertical?i+='\n<tspan glyph-orientation-vertical="0" x="'.concat(e.offsetX,'" y="').concat(e.offsetY,'" letter-spacing="').concat(t.letterSpace,'">').concat(e.text,"</tspan>"):i+='\n<tspan x="'.concat(e.offsetX,'" y="').concat(e.offsetY,'" letter-spacing="').concat(t.letterSpace,'">').concat(e.text,"</tspan>")})),i}}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["a"])(Object(f["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.size=this.size,e.text=this.text,e.fontFamily=this.fontFamily,e.lineSpace=this.lineSpace,e.letterSpace=this.letterSpace,e.hAlign=this.hAlign,e.vAlign=this.vAlign,e.leftToRight=this.leftToRight,e.vertical=this.vertical,t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(s["a"])),S=16382,C=function(t){Object(p["a"])(i,t);var e=Object(v["a"])(i);function i(t,n,o,r){var a;return Object(l["a"])(this,i),a=e.call(this,t,r),a.screanWidth=n,a.screanHeight=o,a.zoom=null==r||null==r.zoom?1:r.zoom,a.padding=50,a}return Object(h["a"])(i,[{key:"init",value:function(){var t=this.screanWidth,e=this.screanHeight,i=this.width+2*this.padding,n=this.height+2*this.padding,o=i>t?t/i:1,r=n>e?e/n:1,a=Math.min(r,o);if(a<1)a=Math.max(a,.25),this.zoom=a;else{var s=.5*t+2*this.padding,c=.5*e+2*this.padding;r=n<c?c/this.width:1,o=i<s?s/this.height:1;var l=Math.min(r,o);l=Math.min(l,5),this.zoom=l}this.placeAtCenter()}},{key:"placeAtCenter",value:function(){var t=this.screanWidth,e=this.screanHeight,i=this.width*this.zoom,n=this.height*this.zoom,o=(t-i)/2,r=(e-n)/2;this.x=o,this.y=r}},{key:"zoom",get:function(){return this._zoom},set:function(t){this._zoom=t,this.scalex=t,this.scaley=t}},{key:"configPath",value:function(t){t.addRect(g["a"].newXYWHRect(0,0,this.width,this.height))}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0,right:0,bottom:0};return t.left=-(S-this.width)/2,t.top=-(S-this.height)/2,t.right=t.left+S,t.bottom=t.top+S,t}},{key:"getDocPath",value:function(){return null==this._path&&(this._path=g["a"].newPath(),this.configPath(this._path)),this._path}},{key:"getPaint",value:function(){return null==this._paint&&(this._paint=g["a"].newPaint()),this._paint}},{key:"drawSelf",value:function(t){Object(d["a"])(Object(f["a"])(i.prototype),"drawSelf",this).call(this,t);var e=this.getDocPath(),n=this.getPaint();n.setColorComponents(1,1,1,1),n.setStyle(g["a"].fillStyle),t.drawPath(e,n),n.setColorComponents(0,0,0,1),n.setStyle(g["a"].strokeStyle),t.drawPath(e,n)}},{key:"deletePath",value:function(){this._path&&(this.getTarget()._path.delete(),this._path=null)}},{key:"dispose",value:function(){if(!this.isDisposed){this.deletePath();var t=this.getTarget()._paint;t&&t.delete(),this._paint=null,Object(d["a"])(Object(f["a"])(i.prototype),"dispose",this).call(this)}}},{key:"toJsonObject",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["a"])(Object(f["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.zoom=this.zoom,e.padding=this.padding,e.type="document",t.abrupt("return",e);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(m),_=(i("080b"),i("3fee"),i("c363"),function(t){Object(p["a"])(i,t);var e=Object(v["a"])(i);function i(t){var n;return Object(l["a"])(this,i),n=e.call(this,t),n.image=null==t?null:t.image,n.srcWidth=null==t||null==t.srcWidth?0:t.srcWidth,n.srcHeight=null==t||null==t.srcHeight?0:t.srcHeight,n.srcX=null==t||null==t.srcX?0:t.srcX,n.srcY=null==t||null==t.srcY?0:t.srcY,n}return Object(h["a"])(i,[{key:"clip",get:function(){return!1},set:function(t){}},{key:"drawSelf",value:function(t){if(this.image){var e=g["a"].newXYWHRect(-this.width/2,-this.height/2,this.width,this.height),i=g["a"].newXYWHRect(this.srcX,this.srcY,this.srcWidth,this.srcHeight);t.drawImageRect(this.image,i,e,this._paint)}}},{key:"createMySelf",value:function(){return new i({image:this.getTarget().image})}},{key:"clone",value:function(){var t=Object(d["a"])(Object(f["a"])(i.prototype),"clone",this).call(this);return t.srcWidth=this.srcWidth,t.srcHeight=this.srcHeight,t.srcX=this.srcX,t.srcY=this.srcY,t}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom};return t.left=-this.width/2,t.top=-this.height/2,t.right=this.width/2,t.bottom=this.height/2,t}}]),i}(s["a"]))},"3f6e":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("d4ec"),o=i("bee2"),r=(i("159b"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;Object(n["a"])(this,t),this.max=e,this.redos=[],this.undos=[]}return Object(o["a"])(t,[{key:"excute",value:function(t){if(t.excute(),this.undos.length>=this.max){var e=this.undos.shift();e.disposeUndo()}this.undos.push(t),this.redos.forEach((function(t){t.disposeRedo()})),this.redos.length=0}},{key:"canRedo",value:function(){return this.redos.length>0}},{key:"canUndo",value:function(){return this.undos.length>0}},{key:"redo",value:function(){if(this.canRedo()){var t=this.redos.pop();t.redo(),this.undos.push(t)}}},{key:"undo",value:function(){if(this.canUndo()){var t=this.undos.pop();t.undo(),this.redos.push(t)}}},{key:"dispose",value:function(){this.undos.forEach((function(t){t.dispose()})),this.undos.length=0,this.redos.forEach((function(t){t.dispose()})),this.redos.length=0}}]),t}())},"3fee":function(t,e,i){"use strict";i("1da1"),i("96cf"),i("99af")},"49aa":function(t,e,i){},"4e40":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("d4ec"),o=i("bee2"),r=(i("159b"),i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("a434"),function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,[{key:"dispose",value:function(){this._eventHandlers&&(this._eventHandlers.forEach((function(t,e){t.length=0})),this._eventHandlers.clear(),this._eventHandlers=null,delete this._eventHandlers)}},{key:"fireEvent",value:function(t,e){var i=this;if(null!=this._eventHandlers){var n=this._eventHandlers.get(t);n&&n.forEach((function(t){t({source:i,event:e})}))}}},{key:"on",value:function(t,e){null==this._eventHandlers&&(this._eventHandlers=new Map);var i=this._eventHandlers.get(t);i||(i=[],this._eventHandlers.set(t,i)),i.push(e)}},{key:"off",value:function(t,e){if(this._eventHandlers){var i=this._eventHandlers.get(t);if(i){var n=i.indexOf(e);-1!=n&&i.splice(n,1)}}}}]),t}())},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("7a23"),o={id:"app",class:"blackbg"},r={id:"loadingMessage"},a={class:"progress",style:{height:"1px",width:"20%"}},s={key:1,id:"main-workspace"};function c(t,e,i,c,l,h){var u=Object(n["w"])("Header"),d=Object(n["w"])("Main"),f=Object(n["w"])("Footer");return Object(n["r"])(),Object(n["d"])("div",o,[l.showLoader?(Object(n["r"])(),Object(n["d"])("div",{key:0,id:"main-loader",class:["blackbg",l.initCompleted?"fadeout":""]},[Object(n["h"])("div",r,[Object(n["h"])("small",null,Object(n["A"])(l.loadingMessage),1)]),Object(n["h"])("div",a,[Object(n["h"])("div",{id:"progress-bar",class:"progress-bar",role:"progressbar",style:"width:"+h.progressWidth,"aria-valuenow":l.currentProgress,"aria-valuemin":"0","aria-valuemax":l.totalProgress},null,12,["aria-valuenow","aria-valuemax"])])],2)):(Object(n["r"])(),Object(n["d"])("div",s,[Object(n["h"])(u,{"onDocument:new":h.newDocument,"onDocument:update":h.updateDoc,"onSvg:create":h.createSVG,"onImage:imported":h.imageImported},null,8,["onDocument:new","onDocument:update","onSvg:create","onImage:imported"]),Object(n["h"])(d,{ref:"main","onTooltip:update":h.tooltipUpdate},null,8,["onTooltip:update"]),Object(n["h"])(f,{tooltip:l.tooltip},null,8,["tooltip"])]))])}i("159b"),i("d3b7"),i("b0c0"),i("b680");var l={id:"header",class:"darkbg navbar navbar-expand-sm navbar-dark"},h={ref:"downloadLink",style:{display:"none"}},u={class:"container-fluid"},d=Object(n["f"])('<label class="navbar-brand"><span style="font-weight:bold;">MU</span><span style="color:#aaaaaa;">LIN</span></label><button class="navbar-toggler btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDarkDropdown" aria-controls="navbarNavDarkDropdown" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>',2),f={class:"collapse navbar-collapse",id:"navbarNavDarkDropdown"},p={class:"navbar-nav"},v={class:"nav-item dropdown"},b=Object(n["h"])("a",{class:"nav-link dropdown-toggle",id:"fileMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[Object(n["h"])("small",null,[Object(n["h"])("label",null,"File")])],-1),g={class:"dropdown-menu","aria-labelledby":"fileMenuLink"},y=Object(n["h"])("small",null,[Object(n["h"])("label",null,"New")],-1),m=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Load")],-1),O=Object(n["h"])("li",null,[Object(n["h"])("hr",{class:"dropdown-divider"})],-1),k=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Import Image")],-1),j=Object(n["h"])("li",null,[Object(n["h"])("hr",{class:"dropdown-divider"})],-1),w=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Download Document")],-1),x=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Export to SVG")],-1),S={class:"navbar-nav"},C={class:"nav-item dropdown"},_=Object(n["h"])("a",{class:"nav-link dropdown-toggle",id:"editMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[Object(n["h"])("small",null,[Object(n["h"])("label",null,"Edit")])],-1),P={class:"dropdown-menu","aria-labelledby":"editMenuLink"},A={class:"navbar-nav"},M={class:"nav-item dropdown"},F=Object(n["h"])("a",{class:"nav-link dropdown-toggle",id:"figureMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[Object(n["h"])("small",null,[Object(n["h"])("label",null,"Figures")])],-1),R={class:"dropdown-menu","aria-labelledby":"figureMenuLink"},T={class:"form-inline"},D=Object(n["h"])("i",{class:"iconfont icon-GitHub"},null,-1);function E(t,e,i,o,r,a){var s=Object(n["w"])("edit-menu"),c=Object(n["w"])("figure-menu"),E=Object(n["w"])("new-doc-dialog"),V=Object(n["w"])("load-dialog"),G=Object(n["w"])("image-import-dialog");return Object(n["r"])(),Object(n["d"])("nav",l,[Object(n["h"])("a",h,null,512),Object(n["h"])("div",u,[d,Object(n["h"])("div",f,[Object(n["h"])("ul",p,[Object(n["h"])("li",v,[b,Object(n["h"])("ul",g,[Object(n["h"])("li",null,[Object(n["h"])("a",{class:"dropdown-item",onClick:e[1]||(e[1]=function(){return a.openNewDocDialog&&a.openNewDocDialog.apply(a,arguments)})},[y])]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:"dropdown-item",onClick:e[2]||(e[2]=function(){return a.openLoadDialog&&a.openLoadDialog.apply(a,arguments)})},[m])]),O,Object(n["h"])("li",null,[Object(n["h"])("a",{class:"dropdown-item",onClick:e[3]||(e[3]=function(){return a.openImgImportDialog&&a.openImgImportDialog.apply(a,arguments)})},[k])]),j,Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",a.canSave?"":"disabled"],onClick:e[4]||(e[4]=function(){return a.save&&a.save.apply(a,arguments)})},[w],2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",a.canGenerateSVG?"":"disabled"],onClick:e[5]||(e[5]=function(){return a.generateSVG&&a.generateSVG.apply(a,arguments)})},[x],2)])])])]),Object(n["h"])("ul",S,[Object(n["h"])("li",C,[_,Object(n["h"])("ul",P,[Object(n["h"])(s)])])]),Object(n["h"])("ul",A,[Object(n["h"])("li",M,[F,Object(n["h"])("ul",R,[Object(n["h"])(c)])])])]),Object(n["h"])("form",T,[Object(n["h"])("a",{href:t.$root.$GITHUB,class:"nav-link action-button",target:"_blank"},[D],8,["href"])]),Object(n["h"])(E,{show:r.showDocDialog,"onDialog:hidden":a.docDialogHidden},null,8,["show","onDialog:hidden"]),Object(n["h"])(V,{show:r.showLoadDialog,"onDialog:hidden":a.loadDialogHidden},null,8,["show","onDialog:hidden"]),Object(n["h"])(G,{show:r.showImageImportDialog,"onDialog:hidden":a.imgImportDialogHidden},null,8,["show","onDialog:hidden"])])])}var V={class:"modal fade",id:"new-doc-dialog",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},G={class:"modal-dialog modal-dialog-centered doc-root"},B={class:"modal-content"},L=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("small",{class:"modal-title modal-title-sm",id:"staticBackdropLabel"},[Object(n["h"])("i",{class:"iconfont icon-document"}),Object(n["g"])(" New Document ")]),Object(n["h"])("button",{type:"button",class:"btn-close btn-sm","data-bs-dismiss":"modal","aria-label":"Close"})],-1),I={class:"modal-body"},H={class:"row g-3"},N={class:"col-12"},z={class:"input-group input-group-sm"},K=Object(n["h"])("label",{class:"input-group-text"},"Name",-1),W={class:"invalid-feedback dialog-label",style:{width:"100%"}},U={class:"col-12"},J={class:"input-group input-group-sm"},q=Object(n["h"])("label",{class:"input-group-text"},"Size Templates",-1),X={class:"col-md-6"},Y={class:"input-group input-group-sm"},$=Object(n["h"])("label",{class:"input-group-text"},"Width",-1),Q=Object(n["h"])("span",{class:"input-group-text"},"px",-1),Z={class:"invalid-feedback dialog-label",style:{width:"100%"}},tt={class:"col-md-6"},et={class:"input-group input-group-sm"},it=Object(n["h"])("span",{class:"input-group-text"},"Height",-1),nt=Object(n["h"])("span",{class:"input-group-text"},"px",-1),ot={class:"invalid-feedback dialog-label",style:{width:"100%"}},rt={class:"modal-footer"},at=Object(n["h"])("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal"}," Close ",-1);function st(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",V,[Object(n["h"])("div",G,[Object(n["h"])("div",B,[L,Object(n["h"])("div",I,[Object(n["h"])("form",H,[Object(n["h"])("div",N,[Object(n["h"])("div",z,[K,Object(n["J"])(Object(n["h"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return r.documentName=t}),type:"text",class:["form-control",a.docNameValidated?"":"is-invalid"],id:"docName",required:""},null,2),[[n["G"],r.documentName]]),Object(n["h"])("div",W,Object(n["A"])(a.docNameErrorMsg),1)])]),Object(n["h"])("div",U,[Object(n["h"])("div",J,[q,Object(n["J"])(Object(n["h"])("select",{id:"size-templates",class:"form-select form-select-sm","aria-label":"Default select example","onUpdate:modelValue":e[2]||(e[2]=function(t){return r.selectedTemplate=t})},[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.sizeTemplate,(function(t){return Object(n["r"])(),Object(n["d"])("option",{key:t.name},Object(n["A"])(t.name),1)})),128))],512),[[n["F"],r.selectedTemplate]])])]),Object(n["h"])("div",X,[Object(n["h"])("div",Y,[$,Object(n["J"])(Object(n["h"])("input",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return r.width=t}),type:"number",class:["form-control",a.widthValidated?"":"is-invalid"],"aria-label":"document height",min:8,max:16382,required:""},null,2),[[n["G"],r.width]]),Q,Object(n["h"])("div",Z,Object(n["A"])(a.widthErrorMsg),1)])]),Object(n["h"])("div",tt,[Object(n["h"])("div",et,[it,Object(n["J"])(Object(n["h"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return r.height=t}),type:"number",class:["form-control",a.heightValidated?"":"is-invalid"],"aria-label":"document width",min:8,max:16382,required:""},null,2),[[n["G"],r.height]]),nt,Object(n["h"])("div",ot,Object(n["A"])(a.heightErrorMsg),1)])])])]),Object(n["h"])("div",rt,[at,Object(n["h"])("button",{type:"button",class:["btn btn-primary btn-sm",a.canCreateDoc?"":"disabled"],onClick:e[5]||(e[5]=function(){return a.createDocument&&a.createDocument.apply(a,arguments)})}," Create ",2)])])])])}i("c35a"),i("a9e3");var ct={name:"NewDocumentDialog",emits:["dialog:hidden","dialog:shown"],mounted:function(){var t=this,e=document.getElementById("new-doc-dialog");e&&(e.addEventListener("hidden.bs.modal",(function(e){t.$emit("dialog:hidden",{type:t.type,width:Number.parseFloat(t.width),height:Number.parseFloat(t.height),name:t.documentName})})),e.addEventListener("shown.bs.modal",(function(e){t.$emit("dialog:shown")})),this.dialog=new bootstrap.Modal(e))},methods:{createDocument:function(){this.type="create",this.dialog.hide()},validateDimension:function(t,e){if(null==t||0==t.length)return"Please input ".concat(e);var i=Number.parseFloat(t);return isNaN(i)?"Input must be a number":i<8?"".concat(e," should larger than 8 "):i>16382?"".concat(e," should larger than 16382"):void 0}},data:function(){return{dialog:null,width:300,height:300,documentName:"Mydocument",type:"cancel",sizeTemplate:[{name:"Default",width:300,height:300},{name:"Letter",width:612,height:792},{name:"A4",width:595.28,height:841.89},{name:"A3",width:841.89,height:1190.55},{name:"B5",width:515.91,height:728.5},{name:"B4",width:728.5,height:1031.81}],selectedTemplate:"Default"}},computed:{canCreateDoc:function(){return null==this.docNameErrorMsg&&null==this.heightErrorMsg&&null==this.widthErrorMsg},docNameErrorMsg:function(){if(null==this.documentName||0==this.documentName.length)return"Name can not be empty"},docNameValidated:function(){return null==this.docNameErrorMsg},heightErrorMsg:function(){return this.validateDimension(this.height,"height")},heightValidated:function(){return null==this.heightErrorMsg},widthErrorMsg:function(){return this.validateDimension(this.width,"width")},widthValidated:function(){return null==this.widthErrorMsg}},watch:{show:function(t,e){this.dialog&&(t?(this.type="cancel",this.dialog.show()):this.dialog.hide())},selectedTemplate:function(t,e){var i=this;this.sizeTemplate.forEach((function(e){e.name==t&&(i.width=e.width,i.height=e.height)}))}},props:{show:{type:Boolean,default:!1}}};i("9e8b");ct.render=st;var lt=ct,ht=i("0ff7"),ut={class:"modal fade",id:"load-dialog",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},dt={class:"modal-dialog modal-dialog-centered doc-root"},ft={class:"modal-content"},pt=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("small",{class:"modal-title modal-title-sm",id:"staticBackdropLabel"},[Object(n["h"])("i",{class:"iconfont icon-document"}),Object(n["g"])(" Load ")]),Object(n["h"])("button",{type:"button",class:"btn-close btn-sm","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vt={class:"modal-body"},bt={class:"row g-3"},gt={class:"col-12"},yt={class:"input-group input-group-sm"},mt={class:"invalid-feedback dialog-label",style:{width:"100%"}},Ot={class:"modal-footer"},kt=Object(n["h"])("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal"}," Close ",-1),jt={key:0,class:"spinner-grow spinner-grow-sm",role:"status"};function wt(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",ut,[Object(n["h"])("div",dt,[Object(n["h"])("div",ft,[pt,Object(n["h"])("div",vt,[Object(n["h"])("form",bt,[Object(n["h"])("div",gt,[Object(n["h"])("div",yt,[Object(n["h"])("input",{ref:"localFile",class:["form-control form-control-sm",a.loadLocalFileSuccess?"":"is-invalid"],id:"formFileSm",type:"file"},null,2),Object(n["h"])("div",mt,Object(n["A"])(r.loadFileErrorMsg),1)])])])]),Object(n["h"])("div",Ot,[kt,Object(n["h"])("button",{type:"button",class:["btn btn-primary btn-sm",a.canLoad?"":"disabled"],onClick:e[1]||(e[1]=function(){return a.loadFile&&a.loadFile.apply(a,arguments)})},[r.localLoading?(Object(n["r"])(),Object(n["d"])("span",jt)):Object(n["e"])("",!0),Object(n["g"])(" "+Object(n["A"])(r.localLoading?"Load...":"Load"),1)],2)])])])])}i("25f0");var xt=i("080b"),St={name:"load-dialog",emits:["dialog:hidden","dialog:shown"],mounted:function(){var t=this,e=document.getElementById("load-dialog");e&&(e.addEventListener("hidden.bs.modal",(function(e){t.$emit("dialog:hidden",{doc:t.doc})})),e.addEventListener("shown.bs.modal",(function(e){t.doc=null,t.$emit("dialog:shown")})),this.dialog=new bootstrap.Modal(e))},methods:{loadFile:function(){var t=this,e=this.$refs["localFile"];if(e){var i=e.files[0];if(!i)return;this.localLoading=!0;var n=new FileReader;n.onload=function(e){var i=e.target.result;new Promise((function(t,n){try{t(JSON.parse(i))}catch(e){n(e)}})).then((function(t){return Object(xt["a"])(t)})).then((function(e){t.doc=e,t.$nextTick((function(){t.dialog.hide()}))})).catch((function(e){t.loadFileErrorMsg=e.toString()})).finally((function(e){t.localLoading=!1}))},n.onabort=function(e){t.localLoading=!1},n.onerror=function(e){t.localLoading=!1},n.readAsText(i)}}},data:function(){return{doc:null,dialog:null,localLoading:!1,loadFileErrorMsg:null}},computed:{canLoad:function(){return!0},loadLocalFileSuccess:function(){return null==this.loadFileErrorMsg}},watch:{show:function(t,e){this.dialog&&(t?(this.type="cancel",this.dialog.show()):this.dialog.hide())}},props:{show:{type:Boolean,default:!1}}};i("98da");St.render=wt;var Ct=St,_t=(i("3fee"),Object(n["h"])("small",null,[Object(n["h"])("label",null,"Undo")],-1)),Pt=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Redo")],-1),At=Object(n["h"])("li",null,[Object(n["h"])("hr",{class:"dropdown-divider"})],-1),Mt=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Delete")],-1);function Ft(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",a.canUndo?"":"disabled"],onClick:e[1]||(e[1]=function(){return t.undo&&t.undo.apply(t,arguments)})},[_t],2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",a.canRedo?"":"disabled"],onClick:e[2]||(e[2]=function(){return t.redo&&t.redo.apply(t,arguments)})},[Pt],2)]),At,Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",t.canDelete?"":"disabled"],onClick:e[3]||(e[3]=function(){return t.deleteSelections&&t.deleteSelections.apply(t,arguments)})},[Mt],2)])],64)}var Rt=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Undo")],-1),Tt=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Redo")],-1);function Dt(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])(n["a"],null,[Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",t.canUndo?"":"disabled"],onClick:e[1]||(e[1]=function(){return t.undo&&t.undo.apply(t,arguments)})},[Rt],2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",t.canRedo?"":"disabled"],onClick:e[2]||(e[2]=function(){return t.redo&&t.redo.apply(t,arguments)})},[Tt],2)])],64)}var Et=[ht["a"]],Vt={mixins:Et};Vt.render=Dt;var Gt=Vt,Bt=i("1b62"),Lt=[Bt["j"]],It={extends:Gt,mixins:Lt,computed:{canRedo:function(){if(this.actionStack)return this.actionStack.canRedo()},canUndo:function(){if(this.actionStack)return this.actionStack.canUndo()}}};It.render=Ft;var Ht=It,Nt=Object(n["h"])("a",{class:"dropdown-item"},[Object(n["h"])("small",null,[Object(n["h"])("label",null,"Symmetry")]),Object(n["h"])("label",{class:"float-end"},"»")],-1),zt={class:"submenu dropdown-menu"},Kt=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Horizontal")],-1),Wt=Object(n["h"])("small",null,[Object(n["h"])("label",null,"Vertical")],-1);function Ut(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("li",null,[Nt,Object(n["h"])("ul",zt,[Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",t.isEmptySelections?"disabled":""],onClick:e[1]||(e[1]=function(){return a.horizontalFigures&&a.horizontalFigures.apply(a,arguments)})},[Kt],2)]),Object(n["h"])("li",null,[Object(n["h"])("a",{class:["dropdown-item",t.isEmptySelections?"disabled":""],onClick:e[2]||(e[2]=function(){return a.verticalFigures&&a.verticalFigures.apply(a,arguments)})},[Wt],2)])])])}var Jt=i("f40b"),qt={extends:Gt,methods:{horizontalFigures:function(){if(console.log(this.selections),this.selections){var t=new Jt["b"];this.selections.forEach((function(e){var i=e.scalex;t.add(Jt["a"].newChangePropertyAction(e,"scalex",-i))})),this.excuteAction(t)}},verticalFigures:function(){if(this.selections){var t=new Jt["b"];this.selections.forEach((function(e){var i=e.scaley;t.add(Jt["a"].newChangePropertyAction(e,"scaley",-i))})),this.excuteAction(t)}}}};qt.render=Ut;var Xt=qt,Yt={class:"modal fade",id:"import-image",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},$t={class:"modal-dialog modal-dialog-centered doc-root"},Qt={class:"modal-content"},Zt=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("small",{class:"modal-title modal-title-sm",id:"staticBackdropLabel"},[Object(n["h"])("i",{class:"iconfont icon-document"}),Object(n["g"])(" Load ")]),Object(n["h"])("button",{type:"button",class:"btn-close btn-sm","data-bs-dismiss":"modal","aria-label":"Close"})],-1),te={class:"modal-body"},ee={class:"row g-3"},ie={class:"col-12"},ne={class:"input-group input-group-sm"},oe={class:"invalid-feedback dialog-label",style:{width:"100%"}},re={class:"modal-footer"},ae=Object(n["h"])("button",{type:"button",class:"btn btn-secondary btn-sm","data-bs-dismiss":"modal"}," Close ",-1),se={key:0,class:"spinner-grow spinner-grow-sm",role:"status"};function ce(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",Yt,[Object(n["h"])("div",$t,[Object(n["h"])("div",Qt,[Zt,Object(n["h"])("div",te,[Object(n["h"])("form",ee,[Object(n["h"])("div",ie,[Object(n["h"])("div",ne,[Object(n["h"])("input",{ref:"localFile",class:["form-control form-control-sm",a.loadLocalFileSuccess?"":"is-invalid"],id:"imageinput",type:"file",accept:"image/png, image/gif, image/jpeg",multiple:"true"},null,2),Object(n["h"])("div",oe,Object(n["A"])(r.loadFileErrorMsg),1)])])])]),Object(n["h"])("div",re,[ae,Object(n["h"])("button",{type:"button",class:["btn btn-primary btn-sm",a.canLoad?"":"disabled"],onClick:e[1]||(e[1]=function(){return a.loadFile&&a.loadFile.apply(a,arguments)})},[r.localLoading?(Object(n["r"])(),Object(n["d"])("span",se)):Object(n["e"])("",!0),Object(n["g"])(" "+Object(n["A"])(r.localLoading?"Load...":"Load"),1)],2)])])])])}i("820e"),i("3ca3"),i("ddb0");var le=i("3a84"),he={emits:["dialog:hidden","dialog:shown"],methods:{loadFile:function(){var t=this,e=this.$refs["localFile"];if(e){var i=e.files;if(!i||0==i.length)return;this.localLoading=!0;var n=[];i.forEach((function(t){n.push(new Promise((function(e,i){var n=new FileReader;n.onload=function(i){var o=i.target.result,r=le["a"].CanvasKit.MakeImageFromEncoded(o);n.onload=function(i){e({image:r,width:r.width(),height:r.height(),dataUrl:i.target.result,name:t.name})},n.readAsDataURL(t)},n.onabort=function(t){i(t)},n.onerror=function(t){i(t)},n.readAsArrayBuffer(t)})))})),Promise.allSettled(n).then((function(e){e.forEach((function(e){"fulfilled"==e.status&&t.image.push(e.value)}))})).finally((function(){t.localLoading=!1,t.$nextTick((function(){t.dialog.hide()}))}))}}},data:function(){return{dialog:null,localLoading:!1,loadFileErrorMsg:null,image:null}},mounted:function(){var t=this,e=document.getElementById("import-image");e&&(e.addEventListener("hidden.bs.modal",(function(e){t.$emit("dialog:hidden",{images:t.image})})),e.addEventListener("shown.bs.modal",(function(e){t.image=[],t.$emit("dialog:shown")})),this.dialog=new bootstrap.Modal(e))},watch:{show:function(t,e){this.dialog&&(t?(this.type="cancel",this.dialog.show()):this.dialog.hide())}},props:{show:{type:Boolean,default:!1}},computed:{canLoad:function(){return!0},loadLocalFileSuccess:function(){return null==this.loadFileErrorMsg}}};i("0829");he.render=ce;var ue=he,de={mixins:[ht["a"]],name:"Header",components:{NewDocDialog:lt,LoadDialog:Ct,EditMenu:Ht,FigureMenu:Xt,ImageImportDialog:ue},emits:["document:new","svg:create","document:update","image:imported"],data:function(){return{showDocDialog:!1,showLoadDialog:!1,showImageImportDialog:!1}},methods:{save:function(){var t=this;this.canSave&&this.document.toJsonObject().then((function(e){var i=JSON.stringify(e);if(t.downloadLink){var n=t.downloadLink;n.setAttribute("href","data:json/plain;charset=utf-8,"+encodeURIComponent(i)),n.setAttribute("download","".concat(t.document.name,".json")),n.click()}}))},openNewDocDialog:function(t){this.showDocDialog||(this.showDocDialog=!0)},openLoadDialog:function(t){this.showLoadDialog||(this.showLoadDialog=!0)},openImgImportDialog:function(t){this.showImageImportDialog||(this.showImageImportDialog=!0)},loadDialogHidden:function(t){this.showLoadDialog=!1,t.doc&&this.$emit("document:update",t.doc)},imgImportDialogHidden:function(t){this.showImageImportDialog=!1,null!=t.images&&t.images.length>0&&this.$emit("image:imported",t.images)},docDialogHidden:function(t){this.showDocDialog=!1,"create"==t.type&&this.$emit("document:new",t)},generateSVG:function(){var t=this;this.document&&this.document.getSVGString().then((function(e){var i=t.downloadLink;i.setAttribute("href","data:xml/plain;charset=utf-8,"+encodeURIComponent(e)),i.setAttribute("download","".concat(t.document.name,".svg")),i.click()}))}},computed:{downloadLink:function(){return this.$refs["downloadLink"]},canGenerateSVG:function(){return null!=this.document&&this.documentChildren.length>0},canSave:function(){return null!=this.document&&this.documentChildren.length>0}}};i("fc85");de.render=E;var fe=de,pe={id:"editor-main"},ve={id:"main-left",class:"darkbg main-left-panel"},be={style:{width:"100%","min-height":"61.8%","max-height":"61.8%"}},ge={style:{width:"100%","min-height":"37%","max-height":"37%"},class:"resource-panel"},ye={id:"main-center"},me={id:"main-right"};function Oe(t,e,i,o,r,a){var s=Object(n["w"])("document"),c=Object(n["w"])("resource-panel"),l=Object(n["w"])("Canvas"),h=Object(n["w"])("PropertyBar");return Object(n["r"])(),Object(n["d"])("div",pe,[Object(n["h"])("div",ve,[Object(n["h"])("div",be,[Object(n["h"])(s)]),Object(n["h"])("div",ge,[Object(n["h"])(c)])]),Object(n["h"])("div",ye,[Object(n["h"])(l,{ref:"canvas","onSelection:change":a.selectionChange,"onTooltip:update":a.tooltipUpdate},null,8,["onSelection:change","onTooltip:update"])]),Object(n["h"])("div",me,[Object(n["h"])(h)])])}var ke={id:"tool",class:"darkbg"};function je(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",ke,[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.groups,(function(t){return Object(n["r"])(),Object(n["d"])("div",{class:"tools-group",key:t.name},[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(t.tools,(function(t){return Object(n["r"])(),Object(n["d"])("div",{class:"tool-container",key:t.id},[Object(n["h"])("button",{id:t.id,type:"button",class:"btn btn-primary action-button",onClick:e[1]||(e[1]=function(){return a.click&&a.click.apply(a,arguments)})},[Object(n["h"])("span",{class:t.id==i.currentTool?"":"deactive-icon"},[Object(n["h"])("i",{class:["iconfont",t.icon],style:{"font-size":"20px"}},null,2)],2)],8,["id"])])})),128))])})),128))])}var we={name:"ToolsBar",emits:["tool:update"],props:{currentTool:{type:String,default:null},disabled:{type:Boolean,default:!0}},data:function(){return{groups:[{name:"Select Tools",tools:[{id:"select",icon:"icon-mousepointer"},{id:"vertex-select",icon:"icon-vertexpointer"}]},{name:"Pen Tools",tools:[{id:"pen",icon:"icon-pen"},{id:"curve",icon:"icon-pen-curve"}]},{name:"Text Tools",tools:[{id:"text",icon:"icon-text"},{id:"v-text",icon:"icon-v-text"}]},{name:"Line Tools",tools:[{id:"line",icon:"icon-line"}]},{name:"Shape Tools",tools:[{id:"rect",icon:"icon-square"},{id:"ellipse",icon:"icon-circle"},{id:"star",icon:"icon-star"},{id:"polygon",icon:"icon-polygon"}]},{name:"Gradient Tools",tools:[{id:"linearGradient",icon:"icon-l-gradient"},{id:"radialGradient",icon:"icon-r-gradient"}]}]}},methods:{click:function(t){if(!this.disabled){var e=t.currentTarget.id;e&&this.currentTool!=e&&this.$emit("tool:update",e)}},iconClass:function(t){return this.disabled?"deactive-icon":this.isActive(t)?"active-tool":"deactive-icon clickable-icon"},isActive:function(t){return t==this.currentTool&&!this.disabled}}};i("c92a");we.render=je;var xe=we,Se={id:"property-view",class:"darkbg"},Ce={id:"selection-title"},_e={id:"properties-accordions-container"},Pe={class:"accordion accordion-flush properties-accordion-root",id:"collapse-root"},Ae={class:"accordion-item properties-accordion-item"},Me=Object(n["h"])("div",{class:"accordion-header",id:"basic-properties"},[Object(n["h"])("button",{id:"accordion-button1",class:"accordion-button properties-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"true","aria-controls":"flush-collapseOne"},[Object(n["h"])("small",null,[Object(n["h"])("i",{class:"iconfont icon-position",style:{"margin-right":"5px"}}),Object(n["h"])("span",null,"General")])])],-1),Fe={id:"flush-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"basic-properties","data-bs-parent":"#collapse-root"},Re={class:"property-accordion-contents"},Te={key:0},De={key:0,class:"property-row"},Ee={key:1,class:"property-row"},Ve={key:2,class:"property-row"},Ge={key:3,class:"property-row"},Be={key:4,class:"property-row"},Le={style:{width:"50%"}},Ie=Object(n["h"])("div",{class:"gray-splitter"},null,-1),He={key:1,style:{color:"#777777"}},Ne={class:"accordion-item properties-accordion-item"},ze=Object(n["h"])("h2",{class:"accordion-header",id:"border-property"},[Object(n["h"])("button",{class:"accordion-button collapsed properties-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo","aria-expanded":"false","aria-controls":"flush-collapseTwo"},[Object(n["h"])("small",null,[Object(n["h"])("i",{class:"iconfont icon-border",style:{"margin-right":"5px"}}),Object(n["h"])("span",null,"Border")])])],-1),Ke={id:"flush-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"border-property","data-bs-parent":"#collapse-root"},We={class:"property-accordion-contents"},Ue={class:"accordion-item properties-accordion-item"},Je=Object(n["h"])("h2",{class:"accordion-header",id:"flush-headingThree"},[Object(n["h"])("button",{class:"accordion-button collapsed properties-accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseThree","aria-expanded":"false","aria-controls":"flush-collapseThree"},[Object(n["h"])("small",null,[Object(n["h"])("i",{class:"iconfont icon-fill",style:{"margin-right":"5px"}}),Object(n["h"])("span",null,"Fill")])])],-1),qe={id:"flush-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"flush-headingThree","data-bs-parent":"#collapse-root"},Xe={class:"property-accordion-contents"};function Ye(t,e,i,o,r,a){var s=Object(n["w"])("Property"),c=Object(n["w"])("BorderProperty"),l=Object(n["w"])("fill-property");return Object(n["r"])(),Object(n["d"])("small",null,[Object(n["h"])("div",Se,[Object(n["h"])("div",Ce,[Object(n["h"])("i",{id:"title-icon",class:["iconfont",a.titleIcon]},null,2),Object(n["h"])("strong",null,Object(n["A"])(a.title),1)]),Object(n["h"])("div",_e,[Object(n["h"])("div",Pe,[Object(n["h"])("div",Ae,[Me,Object(n["h"])("div",Fe,[Object(n["h"])("div",Re,[a.canShow?(Object(n["r"])(),Object(n["d"])("div",Te,[a.canShow?(Object(n["r"])(),Object(n["d"])("div",De,[Object(n["h"])(s,{name:"X",pk:"x",fixed:0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{name:"Y",pk:"y",fixed:0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),a.showDimension?(Object(n["r"])(),Object(n["d"])("div",Ee,[Object(n["h"])(s,{icon:"icon-width",name:"Width",pk:"width",fixed:0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{icon:"icon-height",name:"Height",pk:"height",fixed:0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),a.showScale?(Object(n["r"])(),Object(n["d"])("div",Ve,[Object(n["h"])(s,{icon:"icon-scaly-x",name:"ScaleX",pk:"scalex",step:.1,models:t.selections,"onProperty:change":t.propertyChange},null,8,["step","models","onProperty:change"]),Object(n["h"])(s,{icon:"icon-scale-y",name:"ScaleY",pk:"scaley",step:.1,models:t.selections,"onProperty:change":t.propertyChange},null,8,["step","models","onProperty:change"])])):Object(n["e"])("",!0),a.showSkew?(Object(n["r"])(),Object(n["d"])("div",Ge,[Object(n["h"])(s,{icon:"icon-x-skew",name:"Skew X",pk:"skewx",transformToAngel:!0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{icon:"icon-y-skew",name:"Skew Y",pk:"skewy",transformToAngel:!0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),a.showRotation?(Object(n["r"])(),Object(n["d"])("div",Be,[Object(n["h"])("div",Le,[Object(n["h"])(s,{icon:"icon-rotation",name:"Rotation",pk:"rotation",transformToAngel:!0,models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"])])])):Object(n["e"])("",!0),Ie,(Object(n["r"])(),Object(n["d"])(Object(n["x"])(a.specialPropertiesComponent)))])):(Object(n["r"])(),Object(n["d"])("small",He,"Invalidate"))])])]),Object(n["h"])("div",Ne,[ze,Object(n["h"])("div",Ke,[Object(n["h"])("div",We,[Object(n["h"])(c)])])]),Object(n["h"])("div",Ue,[Je,Object(n["h"])("div",qe,[Object(n["h"])("div",Xe,[Object(n["h"])(l)])])])])])])])}var $e={key:0,style:{"text-algin":"left",color:"grey"}},Qe=Object(n["h"])("small",null,"Invalidate",-1),Ze={key:1},ti={class:"property-row"},ei={class:"single-row"},ii={class:"property-item"},ni=Object(n["h"])("div",{class:"property-label"},[Object(n["h"])("label",{title:"Line Join Type"},[Object(n["h"])("i",{class:"iconfont icon-join-bevel"})])],-1),oi={class:"property-value",style:{width:"50%"}},ri={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic radio toggle button group"},ai=Object(n["h"])("label",{class:"btn btn-outline-secondary",for:"btnradio1",title:"Miter Join"},[Object(n["h"])("i",{class:"iconfont icon-join-miter"})],-1),si=Object(n["h"])("label",{class:"btn btn-outline-secondary",for:"btnradio2",title:"Round Join"},[Object(n["h"])("i",{class:"iconfont icon-join-round"})],-1),ci=Object(n["h"])("label",{class:"btn btn-outline-secondary",for:"btnradio3",title:"Bevel Join"},[Object(n["h"])("i",{class:"iconfont icon-join-bevel"})],-1),li={class:"single-row"},hi={class:"property-item"},ui=Object(n["h"])("div",{class:"property-label"},[Object(n["h"])("label",{title:"Line Cap"},[Object(n["h"])("i",{class:"iconfont icon-cap-butt"})])],-1),di={class:"property-value",style:{width:"50%"}},fi={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic radio toggle button group"},pi=Object(n["h"])("label",{class:"btn btn-outline-secondary",for:"cap-btnradio1",title:"Butt Cap"},[Object(n["h"])("i",{class:"iconfont icon-cap-butt"})],-1),vi=Object(n["h"])("label",{class:"btn btn-outline-secondary",for:"cap-btnradio2",title:"Round Cap"},[Object(n["h"])("i",{class:"iconfont icon-cap-round"})],-1),bi=Object(n["h"])("label",{class:"btn btn-outline-secondary",for:"cap-btnradio3",title:"Square Cap"},[Object(n["h"])("i",{class:"iconfont icon-cap-square"})],-1),gi={class:"property-row"},yi=Object(n["h"])("div",{class:"gray-splitter"},null,-1);function mi(t,e,i,o,r,a){var s=Object(n["w"])("Property"),c=Object(n["w"])("color-config-property");return Object(n["r"])(),Object(n["d"])("div",null,[a.hasBorderProperty?(Object(n["r"])(),Object(n["d"])("div",Ze,[Object(n["h"])("div",ti,[Object(n["h"])(s,{multiple:!0,defaultValue:"0",name:"Width",pk:"borderWidth",models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{multiple:!0,defaultValue:"2",name:"Miter",pk:"miter",models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"])]),Object(n["h"])("div",ei,[Object(n["h"])("div",ii,[ni,Object(n["h"])("div",oi,[Object(n["h"])("div",ri,[Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",name:"btnradio1",id:"btnradio1",autocomplete:"off",value:0,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.joinValue=t})},null,512),[[n["E"],a.joinValue]]),ai,Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",name:"btnradio1",id:"btnradio2",autocomplete:"off",value:1,"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.joinValue=t})},null,512),[[n["E"],a.joinValue]]),si,Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",name:"btnradio1",id:"btnradio3",autocomplete:"off",value:2,"onUpdate:modelValue":e[3]||(e[3]=function(t){return a.joinValue=t})},null,512),[[n["E"],a.joinValue]]),ci])])])]),Object(n["h"])("div",li,[Object(n["h"])("div",hi,[ui,Object(n["h"])("div",di,[Object(n["h"])("div",fi,[Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",name:"btnradio",id:"cap-btnradio1",autocomplete:"off",value:0,"onUpdate:modelValue":e[4]||(e[4]=function(t){return a.capValue=t})},null,512),[[n["E"],a.capValue]]),pi,Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",name:"btnradio",id:"cap-btnradio2",autocomplete:"off",value:1,"onUpdate:modelValue":e[5]||(e[5]=function(t){return a.capValue=t})},null,512),[[n["E"],a.capValue]]),vi,Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",name:"btnradio",id:"cap-btnradio3",autocomplete:"off",value:2,"onUpdate:modelValue":e[6]||(e[6]=function(t){return a.capValue=t})},null,512),[[n["E"],a.capValue]]),bi])])])]),Object(n["h"])("div",gi,[Object(n["h"])(s,{multiple:!0,defaultValue:"0",name:"Offset",pk:"dashOffset",models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{multiple:!0,defaultValue:"0",name:"Length",pk:"dashLength",models:t.selections,"onProperty:change":t.propertyChange},null,8,["models","onProperty:change"])]),yi,Object(n["h"])(c,{id:"border-",models:a.currentModels,colorTypeProperty:"showBorder","onColor:change":a.colorChanged,"onColorType:change":a.colorTypeChanged,"onLinearGradient:change":a.linearGradientChanged,"onRadialGradient:change":a.radialGradientChanged,"onLinearGradient:stopschange":a.gradientStopsChanged,"onRadialGradient:stopschange":a.gradientStopsChanged,rpk:"br",gpk:"bg",bpk:"bb",apk:"ba",linearGradientKey:"borderLinearGradient",radialGradientKey:"borderRadialGradient"},null,8,["models","onColor:change","onColorType:change","onLinearGradient:change","onRadialGradient:change","onLinearGradient:stopschange","onRadialGradient:stopschange"])])):(Object(n["r"])(),Object(n["d"])("div",$e,[Qe]))])}i("a15b"),i("25eb");var Oi=i("c1cd"),ki={class:"color-container"},ji={class:"color-input-container"},wi={style:{"margin-right":"20px"}},xi={key:0},Si={style:{width:"100%"}},Ci={class:"color-rgb-container"},_i={class:"color-value-container"},Pi=Object(n["h"])("label",null,"R",-1),Ai={class:"color-value-container"},Mi=Object(n["h"])("label",null,"G",-1),Fi={class:"color-value-container"},Ri=Object(n["h"])("label",null,"B",-1),Ti={class:"color-a-container"},Di=Object(n["h"])("label",{style:{"margin-right":"5px"}},"Opacity",-1);function Ei(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",ki,[Object(n["h"])("div",ji,[Object(n["h"])("div",wi,[null!=i.title?(Object(n["r"])(),Object(n["d"])("label",xi,Object(n["A"])(i.title),1)):Object(n["e"])("",!0)]),Object(n["h"])("div",Si,[Object(n["h"])("input",{type:"color",class:"form-control form-control-sm form-control-color my-color-input",onChange:e[1]||(e[1]=function(){return a.colorChanged&&a.colorChanged.apply(a,arguments)}),value:a.currentColorString},null,40,["value"])])]),Object(n["h"])("div",Ci,[Object(n["h"])("div",_i,[Pi,Object(n["J"])(Object(n["h"])("input",{class:"form-control form-control-sm property-input",type:"number",max:"255",min:"0",placeholder:"R","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.r=t}),onClick:e[3]||(e[3]=function(){return t.selectText&&t.selectText.apply(t,arguments)}),onKeypress:e[4]||(e[4]=Object(n["K"])((function(){return t.confirm&&t.confirm.apply(t,arguments)}),["enter"]))},null,544),[[n["G"],a.r,void 0,{lazy:!0}]])]),Object(n["h"])("div",Ai,[Mi,Object(n["J"])(Object(n["h"])("input",{class:"form-control form-control-sm property-input",placeholder:"G",type:"number",max:"255",min:"0","onUpdate:modelValue":e[5]||(e[5]=function(t){return a.g=t}),onClick:e[6]||(e[6]=function(){return t.selectText&&t.selectText.apply(t,arguments)}),onKeypress:e[7]||(e[7]=Object(n["K"])((function(){return t.confirm&&t.confirm.apply(t,arguments)}),["enter"]))},null,544),[[n["G"],a.g,void 0,{lazy:!0}]])]),Object(n["h"])("div",Fi,[Ri,Object(n["J"])(Object(n["h"])("input",{class:"form-control form-control-sm property-input",placeholder:"B",type:"number",max:"255",min:"0","onUpdate:modelValue":e[8]||(e[8]=function(t){return a.b=t}),onClick:e[9]||(e[9]=function(){return t.selectText&&t.selectText.apply(t,arguments)}),onKeypress:e[10]||(e[10]=Object(n["K"])((function(){return t.confirm&&t.confirm.apply(t,arguments)}),["enter"]))},null,544),[[n["G"],a.b,void 0,{lazy:!0}]])])]),Object(n["h"])("div",Ti,[Di,Object(n["J"])(Object(n["h"])("input",{class:"form-control form-control-sm property-input",type:"number",max:"1",min:"0",step:"0.1","onUpdate:modelValue":e[11]||(e[11]=function(t){return a.a=t}),onClick:e[12]||(e[12]=function(){return t.selectText&&t.selectText.apply(t,arguments)}),onKeypress:e[13]||(e[13]=Object(n["K"])((function(){return t.confirm&&t.confirm.apply(t,arguments)}),["enter"]))},null,544),[[n["G"],a.a,void 0,{lazy:!0}]])])])}var Vi={name:"ColorProperty",emits:["property:change"],mixins:[Bt["l"],Bt["g"]],methods:{canChangeProperty:function(t){return!(t instanceof le["g"])},colorChanged:function(t){var e=this,i=t.target.value;if(i&&7==i.length){var n=i.substring(1,3);n=Number.parseInt(n,16);var o=i.substring(3,5);o=Number.parseInt(o,16);var r=i.substring(5,7);r=Number.parseInt(r,16);var a={};a[this.rk]=n,a[this.gk]=o,a[this.bk]=r;var s=[];this.models.forEach((function(t){s.push({model:t,property:e.rk,value:n}),s.push({model:t,property:e.gk,value:o}),s.push({model:t,property:e.bk,value:r})})),this.$emit("property:change",s)}}},computed:{currentColorString:function(){return le["j"].transformRGBToHex(this.r,this.g,this.b)},r:{get:function(){return this.getAnyPropertyValue(this.models,this.rk,0)},set:function(t){var e=this;t=Number.parseInt(t);var i=[];this.models.forEach((function(n){i.push({model:n,property:e.rk,value:t})})),this.$emit("property:change",i)}},g:{get:function(){return this.getAnyPropertyValue(this.models,this.gk,0)},set:function(t){var e=this;t=Number.parseInt(t);var i=[];this.models.forEach((function(n){i.push({model:n,property:e.gk,value:t})})),this.$emit("property:change",i)}},b:{get:function(){return this.getAnyPropertyValue(this.models,this.bk,0)},set:function(t){var e=this;t=Number.parseInt(t);var i=[];this.models.forEach((function(n){i.push({model:n,property:e.bk,value:t})})),this.$emit("property:change",i)}},a:{get:function(){return this.getAnyPropertyValue(this.models,this.ak,0)},set:function(t){var e=this,i=[];this.models.forEach((function(n){i.push({model:n,property:e.ak,value:t})})),this.$emit("property:change",i)}}},props:{models:{type:Array},title:{type:String},rk:{type:String,default:"r"},gk:{type:String,default:"g"},bk:{type:String,default:"b"},ak:{type:String,default:"a"}}};i("2814");Vi.render=Ei;var Gi=Vi,Bi={class:"single-row"},Li={class:"color-config-root",style:{width:"100%"}},Ii={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic radio toggle button group"},Hi=Object(n["h"])("i",{class:"iconfont icon-cancel"},null,-1),Ni=Object(n["h"])("i",{class:"iconfont icon-fill"},null,-1),zi=Object(n["h"])("i",{class:"iconfont icon-l-gradient"},null,-1),Ki=Object(n["h"])("i",{class:"iconfont icon-r-gradient"},null,-1),Wi={key:0,class:"single-row"},Ui={key:0,class:"property-row"},Ji={key:1,class:"property-row"},qi={key:2,class:"property-row"},Xi={key:3,class:"single-row"},Yi={class:"color-stops-container"},$i={class:"color-strip"},Qi=Object(n["h"])("i",{class:"iconfont icon-trash"},null,-1),Zi={key:1},tn={key:2,class:"single-row"};function en(t,e,i,o,r,a){var s=Object(n["w"])("Property"),c=Object(n["w"])("color-property");return Object(n["r"])(),Object(n["d"])("div",null,[Object(n["h"])("div",Bi,[Object(n["h"])("div",Li,[Object(n["h"])("div",Ii,[Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",id:i.id+"fill_none",autocomplete:"off","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.colorType=t}),value:0},null,8,["id"]),[[n["E"],a.colorType]]),Object(n["h"])("label",{class:"btn btn-outline-secondary",for:i.id+"fill_none",title:"None"},[Hi],8,["for"]),Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",id:i.id+"fill",autocomplete:"off","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.colorType=t}),value:1},null,8,["id"]),[[n["E"],a.colorType]]),Object(n["h"])("label",{class:"btn btn-outline-secondary",for:i.id+"fill",title:"Regular Fill"},[Ni],8,["for"]),Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",id:i.id+"l-gradient",autocomplete:"off","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.colorType=t}),value:2},null,8,["id"]),[[n["E"],a.colorType]]),Object(n["h"])("label",{class:"btn btn-outline-secondary",for:i.id+"l-gradient",title:"Linear Gradient"},[zi],8,["for"]),Object(n["J"])(Object(n["h"])("input",{type:"radio",class:"btn-check",id:i.id+"r-gradient",autocomplete:"off","onUpdate:modelValue":e[4]||(e[4]=function(t){return a.colorType=t}),value:3},null,8,["id"]),[[n["E"],a.colorType]]),Object(n["h"])("label",{class:"btn btn-outline-secondary",for:i.id+"r-gradient",title:"Radial Gradient"},[Ki],8,["for"])])])]),a.colorType>1?(Object(n["r"])(),Object(n["d"])("div",Wi,[2==a.colorType&&a.isSingleModel?(Object(n["r"])(),Object(n["d"])("div",Ui,[Object(n["h"])(s,{models:[a.currentSingleModel[i.linearGradientKey]],name:"Sx",pk:"x1","onProperty:change":a.linearGradientChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{models:[a.currentSingleModel[i.linearGradientKey]],name:"Sy",pk:"y1","onProperty:change":a.linearGradientChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),2==a.colorType&&a.isSingleModel?(Object(n["r"])(),Object(n["d"])("div",Ji,[Object(n["h"])(s,{models:[a.currentSingleModel[i.linearGradientKey]],name:"Ex",pk:"x2","onProperty:change":a.linearGradientChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{models:[a.currentSingleModel[i.linearGradientKey]],name:"Ey",pk:"y2","onProperty:change":a.linearGradientChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),3==a.colorType&&a.isSingleModel?(Object(n["r"])(),Object(n["d"])("div",qi,[Object(n["h"])(s,{models:[a.currentSingleModel[i.radialGradientKey]],name:"X",pk:"x","onProperty:change":a.radialGradientChange},null,8,["models","onProperty:change"]),Object(n["h"])(s,{models:[a.currentSingleModel[i.radialGradientKey]],name:"Y",pk:"y","onProperty:change":a.radialGradientChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),3==a.colorType&&a.isSingleModel?(Object(n["r"])(),Object(n["d"])("div",Xi,[Object(n["h"])(s,{models:[a.currentSingleModel[i.radialGradientKey]],name:"r",pk:"radius","onProperty:change":a.radialGradientChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0),Object(n["h"])("div",Yi,[Object(n["h"])("div",$i,[Object(n["h"])("div",{class:"color-stops",ref:"colorStrip",style:a.stripStyle,onMousedown:e[10]||(e[10]=function(){return a.addColorStop&&a.addColorStop.apply(a,arguments)})},[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(r.colorStops,(function(t,i){return Object(n["r"])(),Object(n["d"])("div",{key:i,stop:t,style:a.getStopPosition(t),class:"color-stop",id:i,onMousedown:e[5]||(e[5]=Object(n["L"])((function(){return a.colorStopMousedown&&a.colorStopMousedown.apply(a,arguments)}),["prevent","stop"])),onMousemove:e[6]||(e[6]=Object(n["L"])((function(){return a.colorStopMousemove&&a.colorStopMousemove.apply(a,arguments)}),["prevent"])),onMouseup:e[7]||(e[7]=Object(n["L"])((function(){return a.colorStopMouseup&&a.colorStopMouseup.apply(a,arguments)}),["prevent"])),onMouseout:e[8]||(e[8]=Object(n["L"])((function(){return a.colorStopdeactive&&a.colorStopdeactive.apply(a,arguments)}),["prevent"])),onMouseleave:e[9]||(e[9]=Object(n["L"])((function(){return a.colorStopdeactive&&a.colorStopdeactive.apply(a,arguments)}),["prevent"]))},null,44,["stop","id"])})),128))],36)]),Object(n["h"])("button",{class:["btn btn-secondary btn-sm",a.canDeleteStop?"":"disabled"],onClick:e[11]||(e[11]=function(){return a.deleteCurrentStop&&a.deleteCurrentStop.apply(a,arguments)})},[Qi],2)])])):Object(n["e"])("",!0),a.canFill?(Object(n["r"])(),Object(n["d"])("div",Zi,[Object(n["h"])(c,{title:"Color","onProperty:change":a.colorChanged,models:a.currentModels,ak:i.apk,rk:i.rpk,bk:i.bpk,gk:i.gpk},null,8,["onProperty:change","models","ak","rk","bk","gk"])])):Object(n["e"])("",!0),null!=r.currentSelectStop?(Object(n["r"])(),Object(n["d"])("div",tn,[Object(n["h"])(s,{models:[r.currentSelectStop],name:"Pos",pk:"pos","onProperty:change":a.currentStopPosChange},null,8,["models","onProperty:change"])])):Object(n["e"])("",!0)])}i("d81d"),i("a434"),i("99af");var nn=i("c363"),on=[Bt["l"],Bt["h"],Bt["k"]],rn={components:{ColorProperty:Gi,Property:Oi["a"]},mixins:on,emits:["colorType:change","color:change","linear-gradient:change","radial-gradient:change","linear-gradient:stopschange","radial-gradient:stopschange"],data:function(){return{currentSelectStop:null,stripWidth:0,colorStops:null}},mounted:function(){this.createColorStops()},updated:function(){this.models;var t=this.$refs["colorStrip"];if(t){var e=t.clientWidth;e!=this.stripWidth&&(this.stripWidth=e)}},methods:{isSameColorStop:function(t,e){return t.color[0]==e.color[0]&&t.color[1]==e.color[1]&&t.color[2]==e.color[2]&&t.color[3]==e.color[3]&&t.pos==e.pos},getModelGradient:function(t){return 2==this.colorType?t[this.linearGradientKey]:3==this.colorType?t[this.radialGradientKey]:void 0},createColorStops:function(){if(this.colorStops=null,this.models&&0!=this.models.length&&this.colorType>1){var t=this.models[0],e=this.getModelGradient(t),i=[{color:[0,0,0,1],pos:0},{color:[1,1,1,1],pos:1}];e&&(i=e.colorStops.map((function(t){return{color:[t.color[0],t.color[1],t.color[2],t.color[3]],pos:t.pos}})));for(var n=!1,o=1;o<this.models.length;o++){var r=this.models[o],a=this.getModelGradient(r);if(a.colorStops.length!=i.length){n=!0;break}for(var s=0;s<i.length;s++){var c=a.colorStops[s];if(!this.isSameColorStop(c,i[s])){n=!0;break}}}if(this.colorStops=n?[{color:[0,0,0,1],pos:0},{color:[1,1,1,1],pos:1}]:i,this.currentSelectStop)for(var l=0;l<this.colorStops.length;l++){var h=this.colorStops[l];if(this.isSameColorStop(h,this.currentSelectStop)){this.currentSelectStop=h;break}}}},currentStopPosChange:function(t){if(this.currentSelectStop){var e=t[0],i=e.value;i<0&&(i=0),i>1&&(i=1),this.currentSelectStop.pos=i,this.updateColorStops()}},deleteCurrentStop:function(){if(this.currentSelectStop){var t=this.colorStops.indexOf(Object(n["B"])(this.currentSelectStop));-1!=t&&this.colorStops.splice(t,1),this.updateColorStops(),this.currentSelectStop=null}},colorChanged:function(t){var e=this;1!=this.colorType?this.colorType>1&&this.currentSelectStop&&(t.forEach((function(t){t.property==e.rpk&&(e.currentSelectStop.color[0]=t.value),t.property==e.gpk&&(e.currentSelectStop.color[1]=t.value),t.property==e.bpk&&(e.currentSelectStop.color[2]=t.value),t.property==e.apk&&(e.currentSelectStop.color[3]=t.value)})),this.updateColorStops()):this.$emit("color:change",t)},colorStopsChanged:function(t,e){var i,n=!1;if(2==this.fillType&&(i=t[this.linearGradientKey].colorStops),3==this.fillType&&(i=t[this.radialGradientKey].colorStops),!i)return!1;if(i.length!=e.length&&(n=!0),!n)for(var o=0;o<i.length;o++){var r=i[o],a=e[o];if(!r.equals(a)){n=!0;break}}return n},updateColorStops:function(){for(var t=this.colorStops.map((function(t){return new nn["a"](t.color[0],t.color[1],t.color[2],t.color[3],t.pos)})),e={models:[],stops:t},i=0;i<this.models.length;i++){var n=this.models[i];this.colorStopsChanged(n,t)&&e.models.push(n)}e.models.length>0&&(2==this.colorType&&this.$emit("linear-gradient:stopschange",e),3==this.colorType&&this.$emit("radial-gradient:stopschange",e))},linearGradientChange:function(t){this.$emit("linear-gradient:change",t)},radialGradientChange:function(t){this.$emit("radial-gradient:change",t)},addColorStop:function(t){var e=t.offsetX,i=e/this.stripWidth,n={color:[0,0,0,1],pos:i};this.colorStops.push(n),this.colorStops.sort((function(t,e){return t.pos-e.pos}));var o=this.colorStops.indexOf(n);if(0==o){var r=this.colorStops[1];n.color=[r.color[0],r.color[1],r.color[2],r.color[3]]}if(o==this.colorStops.length-1){var a=this.colorStops[this.colorStops.length-2];n.color=[a.color[0],a.color[1],a.color[2],a.color[3]]}if(0!=o&&o!=this.colorStops.length-1){var s=o-1,c=o+1,l=this.colorStops[s],h=this.colorStops[c],u=h.pos-l.pos,d=n.pos-l.pos;d/=u;var f=Math.floor(l.color[0]+d*(h.color[0]-l.color[0])),p=Math.floor(l.color[1]+d*(h.color[1]-l.color[2])),v=Math.floor(l.color[2]+d*(h.color[2]-l.color[2]));n.color=[f,p,v,1]}this.currentSelectStop=n,this.updateColorStops()},getStopPosition:function(t){var e=t.pos,i=e*this.stripWidth,n=0;t==this.currentSelectStop&&(n=1);var o={left:"".concat(i-5,"px"),"z-index":n,"background-color":"rgba(".concat(t.color[0],",").concat(t.color[1],",").concat(t.color[2],",").concat(t.color[3],")")};return t==this.currentSelectStop&&(o.border="2px solid whitesmoke"),o},colorStopMousedown:function(t){var e=t.target;e.focus(),this.currentSelectStop=this.getStopById(e.id),this.selected=!0},colorStopMouseup:function(t){this.colorStopdeactive()},colorStopMousemove:function(t){if(this.currentSelectStop&&0!=this.stripWidth&&this.selected){var e=t.movementX,i=e/this.stripWidth;this.currentSelectStop.pos+=i,this.currentSelectStop.pos<0&&(this.currentSelectStop.pos=0),this.currentSelectStop.pos>1&&(this.currentSelectStop.pos=1)}},colorStopdeactive:function(t){this.selected&&(this.selected=!1,this.updateColorStops())},getStopById:function(t){return this.colorStops[t]}},watch:{models:{handler:function(){this.createColorStops()},deep:!0},colorType:function(t,e){this.createColorStops()}},computed:{gradient:function(){if(this.isSingleModel&&this.colorType>1){var t,e=this.currentSingleModel;return 2==this.colorType&&(t=e[this.linearGradientKey]),3==this.colorType&&(t=e[this.radialGradientKey]),t}},gradientString:function(){if(null==this.colorStops||0==this.colorStops.length)return"";var t="";this.colorStops.sort((function(t,e){return t.pos-e.pos}));for(var e=0;e<this.colorStops.length;e++){var i=this.colorStops[e];t+="rgba(".concat(i.color[0],",").concat(i.color[1],",").concat(i.color[2],",").concat(i.color[3],")"),t+=" ".concat(100*i.pos,"%"),e<this.colorStops.length-1&&(t+=",")}return"linear-gradient(90deg,".concat(t,")")},canDeleteStop:function(){return null!=this.currentSelectStop&&this.colorStops.length>2},currentModels:function(){if(1==this.fillType)return this.models;if(this.fillType>1&&this.currentSelectStop){var t={};return t[this.rpk]=this.currentSelectStop.color[0],t[this.gpk]=this.currentSelectStop.color[1],t[this.bpk]=this.currentSelectStop.color[2],t[this.apk]=this.currentSelectStop.color[3],[t]}},currentSingleModel:function(){if(this.models&&1==this.models.length)return this.models[0]},canFill:function(){return 0!=this.fillType&&(1==this.fillType||(2==this.fillType||3==this.fillType?null!=this.currentSelectStop:void 0))},isSingleModel:function(){return this.models&&1==this.models.length},colorType:{get:function(){if(this.models)return this.getAnyPropertyValue(this.models,this.colorTypeProperty,0)},set:function(t){this.$emit("colorType:change",t)}},fillType:function(){if(this.models)return this.getAnyPropertyValue(this.models,this.colorTypeProperty,0)},stripStyle:function(){if(null!=this.colorStops&&0!=this.colorStops.length)return{background:"".concat(this.gradientString)}}},props:{id:{type:String,default:"color-config"},colorTypeProperty:{type:String},models:{type:Array},rpk:{type:String,default:"r"},gpk:{type:String,default:"g"},bpk:{type:String,default:"b"},apk:{type:String,default:"a"},linearGradientKey:{type:String,default:"linearGradient"},radialGradientKey:{type:String,default:"radialGradient"}}};i("1bea");rn.render=en;var an=rn,sn={name:"BorderProperty",mixins:[Bt["l"],Bt["h"],Bt["k"]],components:{Property:Oi["a"],ColorProperty:Gi,ColorConfigProperty:an},computed:{joinValue:{get:function(){if(this.join)return this.join.value},set:function(t){var e;switch(t=Number.parseInt(t),t){case 0:e=le["a"].StrokeJoin.Miter;break;case 1:e=le["a"].StrokeJoin.Round;break;case 2:e=le["a"].StrokeJoin.Bevel;break}e&&e!=this.join&&this.changeModelsProperty(this.selections,"join",e)}},capValue:{get:function(){if(this.cap)return this.cap.value},set:function(t){var e;switch(t=Number.parseInt(t),t){case 0:e=le["a"].StrokeCap.Butt;break;case 1:e=le["a"].StrokeCap.Round;break;case 2:e=le["a"].StrokeCap.Square;break}e&&e!=this.cap&&this.changeModelsProperty(this.selections,"cap",e)}},width:{get:function(){return this.getAnyPropertyValue(this.selections,"borderWidth",0)},set:function(t){var e=Number.parseInt(t);this.changeModelsProperty(this.selections,"borderWidth",e)}},miter:{get:function(){return this.getAnyPropertyValue(this.selections,"miter",0)},set:function(t){var e=Number.parseInt(t);this.changeModelsProperty(this.selections,"miter",e)}},join:{get:function(){return this.getAnyPropertyValue(this.selections,"join",le["a"].StrokeCap.Bevel)}},cap:{get:function(){return this.getAnyPropertyValue(this.selections,"cap",le["a"].StrokeCap.Butt)}},showBorder:function(){return this.getAnyPropertyValue("showBorder",!1)},hasBorderProperty:function(){if(!this.isEmptySelections){for(var t=0;t<this.selections.length;t++){var e=this.selections[t];if(e instanceof le["g"]||e instanceof le["f"])return!1}return!0}return!1},currentModels:function(){return this.selections}},methods:{canChangeProperty:function(t){return!(t instanceof le["g"])},colorTypeChanged:function(t){this.changeModelsProperty(this.selections,"showBorder",t)},colorChanged:function(t){this.propertyChange(t)},linearGradientChanged:function(t){this.propertyChange(t)},radialGradientChanged:function(t){this.propertyChange(t)},gradientStopsChanged:function(t){var e=t.models,i=t.stops,n=new Jt["b"];e.forEach((function(t){if(2==t.showBorder){var e=Jt["a"].newUpdateLinearGraidentStopsAction(t,i,"borderLinearGradient");n.add(e)}if(3==t.showBorder){var o=Jt["a"].newUpdateRadialGraidentStopsAction(t,i,"borderRadialGradient");n.add(o)}})),n.isEmpty||this.excuteAction(n)}}};i("dd2d");sn.render=mi;var cn=sn,ln=(i("a4d3"),i("e01a"),{key:0,style:{"text-algin":"left",color:"grey"}}),hn=Object(n["h"])("small",null,"Invalidate",-1),un={key:1},dn={class:"property-item"},fn=Object(n["h"])("label",{class:"property-label"},"Mode",-1),pn={class:"property-value",style:{width:"70%"}},vn=Object(n["h"])("div",{class:"gray-splitter",style:{"margin-top":"20px"}},null,-1);function bn(t,e,i,o,r,a){var s=Object(n["w"])("color-config-property");return Object(n["r"])(),Object(n["d"])("div",null,[!a.hasFillProperty||t.isLine||t.isImage?(Object(n["r"])(),Object(n["d"])("div",ln,[hn])):(Object(n["r"])(),Object(n["d"])("div",un,[Object(n["h"])("div",dn,[fn,Object(n["h"])("div",pn,[Object(n["J"])(Object(n["h"])("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.fillMode=t})},[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(a.modeOptions,(function(t,e){return Object(n["r"])(),Object(n["d"])("option",{key:e,value:e,title:t.description},Object(n["A"])(t.name),9,["value","title"])})),128))],512),[[n["F"],a.fillMode]])])]),vn,Object(n["h"])(s,{id:"fill-",models:t.selections,colorTypeProperty:"fill","onColorType:change":a.colorTypeChanged,"onColor:change":a.colorChanged,"onLinearGradient:change":a.linearGradientChanged,"onRadialGradient:change":a.radialGradientChanged,"onLinearGradient:stopschange":a.gradientStopsChanged,"onRadialGradient:stopschange":a.gradientStopsChanged,rpk:"r",gpk:"g",bpk:"b",apk:"a",linearGradientKey:"linearGradient",radialGradientKey:"radialGradient"},null,8,["models","onColorType:change","onColor:change","onLinearGradient:change","onRadialGradient:change","onLinearGradient:stopschange","onRadialGradient:stopschange"])]))])}i("cb29");var gn={name:"FillProperty",mixins:[Bt["l"],Bt["h"],Bt["k"]],components:{ColorConfigProperty:an,Property:Oi["a"]},methods:{colorTypeChanged:function(t){this.changeModelsProperty(this.selections,"fill",t)},colorChanged:function(t){this.propertyChange(t)},linearGradientChanged:function(t){this.propertyChange(t)},radialGradientChanged:function(t){this.propertyChange(t)},gradientStopsChanged:function(t){var e=t.models,i=t.stops,n=new Jt["b"];e.forEach((function(t){if(2==t.fill){var e=Jt["a"].newUpdateLinearGraidentStopsAction(t,i,"linearGradient");n.add(e)}if(3==t.fill){var o=Jt["a"].newUpdateRadialGraidentStopsAction(t,i,"radialGradient");n.add(o)}})),n.isEmpty||this.excuteAction(n)}},computed:{fillMode:{get:function(){var t=this.getAnyPropertyValue(this.selections,"blendMode",le["a"].BlendModeOptions.get(3));if(t)return t.value},set:function(t){var e=le["a"].BlendModeOptions.get(Number.parseInt(t));e&&this.changeModelsProperty(this.selections,"blendMode",e.mode)}},modeOptions:function(){var t={};return le["a"].BlendModeOptions.forEach((function(e,i){t[i]=e})),t},hasFillProperty:function(){if(!this.isEmptySelections){for(var t=0;t<this.selections.length;t++){var e=this.selections[t];if(e instanceof le["g"]||e instanceof le["f"])return!1}return!0}return!1}}};gn.render=bn;var yn=gn,mn=i("025e"),On=[Bt["h"],Bt["k"]],kn={Property:Oi["a"],BorderProperty:cn,FillProperty:yn},jn={name:"PropertyBar",mixins:On,components:kn,computed:{specialPropertiesComponent:function(){return this.isRect?Object(n["i"])((function(){return i.e("chunk-6154291e").then(i.bind(null,"3478"))})):this.isVertex?Object(n["i"])((function(){return i.e("chunk-61290602").then(i.bind(null,"aa2b"))})):this.isPath?Object(n["i"])((function(){return i.e("chunk-612875a8").then(i.bind(null,"c69c"))})):this.isStar?Object(n["i"])((function(){return i.e("chunk-612782da").then(i.bind(null,"d6d6"))})):this.isPolygon?Object(n["i"])((function(){return i.e("chunk-61525b2c").then(i.bind(null,"52ec"))})):this.isText?Object(n["i"])((function(){return i.e("chunk-7b911dc8").then(i.bind(null,"07de"))})):void 0},title:function(){if(this.isEmptySelections)return"No Selections";if(this.selections){if(this.selections.length>1)return"Multiple Selections";var t=this.currentSelection;return t.name?t.name:t instanceof le["g"]?"Vertex":"Unknown"}},titleIcon:function(){if(this.isEmptySelections);else if(this.selections){if(this.selections.length>1)return"icon-shapes";var t=this.currentSelection;return mn["a"].objectIcon(t)}},canShow:function(){return this.isSingleSelection},showDimension:function(){return!!this.canShow&&!(this.isVertex||this.isPath||this.isLine||this.isText)},showScale:function(){return!!this.canShow&&!this.isVertex},showSkew:function(){return!!this.canShow&&!this.isVertex},showRotation:function(){return!!this.canShow&&!this.isVertex}},methods:{}};i("aecc");jn.render=Ye;var wn=jn,xn={id:"tools-container"},Sn={id:"canvas-space"},Cn={id:"canvas-toolbar"},_n={class:"painter-canvas loading-container darkbg",style:{"z-index":"4"}},Pn=Object(n["h"])("div",{class:"spinner-grow",role:"status"},[Object(n["h"])("span",{class:"visually-hidden"},"Loading...")],-1),An=Object(n["h"])("canvas",{id:"main-canvas",class:"painter-canvas",style:{"z-index":"1"}},null,-1),Mn=Object(n["h"])("canvas",{id:"backend-canvas",class:"painter-canvas",style:{"z-index":"0"}},null,-1);function Fn(t,e,i,o,r,a){var s=Object(n["w"])("tools-bar"),c=Object(n["w"])("action-bar");return Object(n["r"])(),Object(n["d"])("div",{id:"work-space",class:a.canvasBGColor},[Object(n["h"])("div",xn,[Object(n["h"])(s,{"onTool:update":a.toolUpdate,currentTool:r.currentTool,disabled:null==this.mainRoot},null,8,["onTool:update","currentTool","disabled"])]),Object(n["h"])("div",Sn,[Object(n["h"])("div",Cn,[Object(n["h"])(c)]),Object(n["h"])("div",{id:"canvas-container",style:"cursor:"+r.cursor,onDragover:e[8]||(e[8]=function(){return a.resourceDragover&&a.resourceDragover.apply(a,arguments)}),onDrop:e[9]||(e[9]=function(){return a.resourceDrop&&a.resourceDrop.apply(a,arguments)})},[Object(n["J"])(Object(n["h"])("div",_n,[Pn],512),[[n["H"],r.loading]]),Object(n["J"])(Object(n["h"])("textarea",{ref:"canvas-text-input",id:"canvas-text-input",class:"form-control",autofocus:"autofocus",style:[a.textInputStyle,{"max-width":"300px",position:"absolute","z-index":"3"}]},null,4),[[n["H"],this.showTextInput]]),Object(n["h"])("canvas",{id:"front-canvas",class:"painter-canvas",style:{"z-index":"2"},onMousedown:e[1]||(e[1]=Object(n["L"])((function(){return a.mousedown&&a.mousedown.apply(a,arguments)}),["self"])),onMouseleave:e[2]||(e[2]=function(){return a.mouseleave&&a.mouseleave.apply(a,arguments)}),onMousemove:e[3]||(e[3]=function(){return a.mousemove&&a.mousemove.apply(a,arguments)}),onMouseup:e[4]||(e[4]=function(){return a.mouseup&&a.mouseup.apply(a,arguments)}),onMouseover:e[5]||(e[5]=function(){return a.mouseover&&a.mouseover.apply(a,arguments)}),onMouseout:e[6]||(e[6]=function(){return a.mouseout&&a.mouseout.apply(a,arguments)}),onMousewheel:e[7]||(e[7]=function(){return a.mousewheel&&a.mousewheel.apply(a,arguments)})},null,32),An,Mn],36)])],2)}var Rn=i("d4ec"),Tn=i("bee2"),Dn=i("1341"),En=i("45eb"),Vn=i("7e84"),Gn=i("262e"),Bn=i("2caf"),Ln=(i("18a5"),function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){return Object(Rn["a"])(this,i),e.call(this,t)}return Object(Tn["a"])(i,[{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,right:right,top:top,bottom:bottom},e=Object(En["a"])(Object(Vn["a"])(i.prototype),"calculateLocalBounds",this).call(this,t);return e.left-=this.width,e.top-=this.height,e.right+=this.width,e.bottom+=this.height,e}}]),i}(le["m"].CenterRect)),In=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){return Object(Rn["a"])(this,i),e.call(this,t)}return Object(Tn["a"])(i,[{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,right:right,top:top,bottom:bottom},e=Object(En["a"])(Object(Vn["a"])(i.prototype),"calculateLocalBounds",this).call(this,t);return e.left-=this.width,e.top-=this.height,e.right+=this.width,e.bottom+=this.height,e}}]),i}(le["m"].CenterEllipse),Hn=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){return Object(Rn["a"])(this,i),e.call(this,t)}return Object(Tn["a"])(i,[{key:"containsPoint",value:function(t,e,i){return!1}}]),i}(le["m"].Rect),Nn=i("0fda"),zn=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){var n;return Object(Rn["a"])(this,i),n=e.call(this,t),n.relatedSelection,n.relateFigure,n}return Object(Tn["a"])(i,[{key:"fireShapeDirty",value:function(){}},{key:"copyPath",value:function(t){if(this._path&&this.getTarget()._path.delete(),t.getPath)this.getTarget()._path=t.getTarget().getPath().copy();else{this.getTarget()._path=le["a"].newPath();var e=t.bounds;this.getTarget()._path.addRect(le["a"].newXYWHRect(e.left,e.top,e.right-e.left,e.bottom-e.top))}}},{key:"isVisible",value:function(){return this.visible&&(0!=this.scalex||0!=this.scaley)}}]),i}(Nn["Shape"]),Kn=(i("84c3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("cfc3"),function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){var n;return Object(Rn["a"])(this,i),n=e.call(this,t),n.relatedSelection,n.relateFigure,n}return Object(Tn["a"])(i,[{key:"fireShapeDirty",value:function(){}},{key:"copyGlyphs",value:function(t){var e=this;this.deleteGlyphsMap(),this.size=t.size,this.fontFamily=t.fontFamily,this.height=t.height,this.width=t.width;var i=t.getTarget().getGlyphsMap();this.glyphsArray=[],i.forEach((function(t){for(var i=new Uint16Array(t.ids.length),n=0;n<i.length;n++)i[n]=t.ids[n];for(var o=new Float32Array(t.positions.length),r=0;r<o.length;r++)o[r]=t.positions[r];e.glyphsArray.push({ids:i,positions:o})}))}},{key:"isVisible",value:function(){return this.visible&&(0!=this.scalex||0!=this.scaley)}}]),i}(le["i"])),Wn=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o,r){var a;return Object(Rn["a"])(this,i),a=e.call(this),a.frontRoot=t,a.mainRoot=n,a.backendRoot=o,a.id=r,a.actived=!1,a.using=!1,a.currentFeedbacks,a}return Object(Tn["a"])(i,[{key:"currentSelections",get:function(){return this._selections},set:function(t){this._selections=t}},{key:"defaultCursor",get:function(){var t=mn["a"].CURSOR[this.id];return t||"default"}},{key:"toolTipUpdate",value:function(t){this.fireEvent("updateTooltip",{tooltip:t})}},{key:"updateCurrentSelections",value:function(t){this.currentSelections=t}},{key:"addNewFigure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"图形";this.fireEvent("addFigure",{figure:t,name:e})}},{key:"changeCursor",value:function(t){this.fireEvent("cursorChange",{cursor:t})}},{key:"switchTool",value:function(t,e,i,n){this.fireEvent("toolSwitch",{id:t,x:e,y:i,args:n})}},{key:"fireSelectionChangeEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"new";this.fireEvent("selectionChange",{type:e,selections:t})}},{key:"prepare",value:function(t){this.using=!0}},{key:"unUse",value:function(t){this.using=!1,cancelAnimationFrame(this._moveRefreshId),this._moveRefreshId=null}},{key:"active",value:function(t,e,i){i&&i.preventDefault(),this._moveRefreshId&&cancelAnimationFrame(this._moveRefreshId),this.sx=t,this.sy=e,this.lx=t,this.ly=e,this.actived=!0,this.fireEvent("active",{id:this.id,x:t,y:e}),this.toolActived(t,e,i)}},{key:"move",value:function(t,e,i){var n=this;this._moveRefreshId&&cancelAnimationFrame(this._moveRefreshId),this._moveRefreshId=requestAnimationFrame((function(){var o;if(n.actived){var r=t-n.lx,a=e-n.ly,s=Math.min(t,n.sx),c=Math.min(e,n.sy),l=Math.max(t,n.sx),h=Math.max(e,n.sy);o=n.activeMove(t,e,s,c,l,h,r,a,i),n.lx=t,n.ly=e}else o=n.hoverMove(t,e,i);o||(o="x:".concat(t,",y:").concat(e)),n.toolTipUpdate(o)}))}},{key:"activeMove",value:function(t,e,i,n,o,r,a,s,c){}},{key:"hoverMove",value:function(t,e,i){}},{key:"deactive",value:function(t,e,i){if(this.actived){this._moveRefreshId&&cancelAnimationFrame(this._moveRefreshId),this.ex=t,this.ey=e;try{var n=this.toolDeactived(t,e,i);this.fireEvent("complete",{id:this.id,result:n})}catch(o){console.error(o)}finally{this.reset()}}}},{key:"reset",value:function(){this.actived=!1,cancelAnimationFrame(this._moveRefreshId),this._moveRefreshId=null,this.sx=this.sy=this.ex=this.ey=this.lx=this.ly=null}},{key:"toolActived",value:function(t,e,i){}},{key:"toolDeactived",value:function(t,e,i){}}],[{key:"createDelegateFigure",value:function(t){var e,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t instanceof le["i"]?(e=new Kn,e.copyGlyphs(t)):(e=new zn,e.copyPath(t),null!=t.borderWidth&&(e.borderWidth=t.borderWidth)),e.relatedSelection=t,this.setFeedbackColors(e),i){var n=t.worldMatrix,o=n.decompose();le["j"].applyPose(e,o)}return e}},{key:"setFeedbackColors",value:function(t){t.br=this.FEEDBACK_B_COLOR[0],t.bg=this.FEEDBACK_B_COLOR[1],t.bb=this.FEEDBACK_B_COLOR[2],t.ba=.8,t.r=this.FEEDBACK_COLOR[0],t.g=this.FEEDBACK_COLOR[1],t.b=this.FEEDBACK_COLOR[2],t.a=.5}},{key:"setErrorColors",value:function(t){t.showBorder=!1,t.r=255,t.g=0,t.b=0,t.a=1}},{key:"copyPoseDatas",value:function(t,e){t&&e&&(e.x=t.x,e.y=t.y,e.scalex=t.scalex,e.scaley=t.scaley,e.skewx=t.skewx,e.skewy=t.skewy,e.rotation=t.rotation,e.width=t.width,e.height=t.height)}},{key:"FEEDBACK_COLOR",get:function(){return Un}},{key:"FEEDBACK_B_COLOR",get:function(){return Jn}}]),i}(le["c"]),Un=[9,124,244],Jn=[14,98,234],qn=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){var n;Object(Rn["a"])(this,i),n=e.call(this,t),n.anchorSize=null==t||null==t.as?6:t.as,n.padding=null==t||null==t.padding?5:t.padding,n.feedbackContainer=new Hn({a:0,showBorder:!1}),n.addChild(n.feedbackContainer),n.rotateAnchor=new In({width:n.anchorSize,height:n.anchorSize,r:22,g:199,b:154}),n.addChild(n.rotateAnchor),n.topAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.topAnchor),n.bottomAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.bottomAnchor),n.leftAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.leftAnchor),n.rightAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.rightAnchor),n.seAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.seAnchor),n.neAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.neAnchor),n.swAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.swAnchor),n.nwAnchor=new Ln({width:n.anchorSize,height:n.anchorSize}),n.addChild(n.nwAnchor),n.anchor={x:.5,y:.5};var o=Wn.FEEDBACK_B_COLOR;return n.br=o[0],n.bg=o[1],n.bb=o[2],n.a=0,n}return Object(Tn["a"])(i,[{key:"initFeedbackContainer",value:function(){this.feedbackContainer&&(this.feedbackContainer.width=this.width,this.feedbackContainer.height=this.height,this.feedbackContainer.rotation=0,this.feedbackContainer.scalex=this.feedbackContainer.scaley=1,this.feedbackContainer.skewx=this.feedbackContainer.skewy=0)}},{key:"addFeedback",value:function(t){this.feedbackContainer.addChild(t)}},{key:"removeFeedback",value:function(t){this.feedbackContainer.removeChild(t)}},{key:"updateAnchorsPostion",value:function(){if(this.topAnchor&&(this.topAnchor.y=-this.padding,this.topAnchor.x=this.width/2),this.bottomAnchor&&(this.bottomAnchor.y=this.height+this.padding,this.bottomAnchor.x=this.width/2),this.leftAnchor&&(this.leftAnchor.y=this.height/2,this.leftAnchor.x=-this.padding),this.rightAnchor&&(this.rightAnchor.y=this.height/2,this.rightAnchor.x=this.width+this.padding),this.seAnchor&&(this.seAnchor.y=this.height+this.padding,this.seAnchor.x=this.width+this.padding),this.neAnchor&&(this.neAnchor.y=-this.padding,this.neAnchor.x=this.width+this.padding),this.swAnchor&&(this.swAnchor.y=this.height+this.padding,this.swAnchor.x=-this.padding),this.nwAnchor&&(this.nwAnchor.y=-this.padding,this.nwAnchor.x=-this.padding),this.rotateAnchor&&(this.rotateAnchor.y=-this.padding-2*this.rotateAnchor.width,this.rotateAnchor.x=this.width+this.padding+2*this.rotateAnchor.height),this.feedbackContainer){var t=this.feedbackContainer.width,e=this.feedbackContainer.height;0==this.width&&(this.feedbackContainer.scalex=0),0==this.height&&(this.feedbackContainer.scaley=0),0!=t&&(this.feedbackContainer.scalex=this.width/t),0!=e&&(this.feedbackContainer.scaley=this.height/e)}}},{key:"width",get:function(){return Object(En["a"])(Object(Vn["a"])(i.prototype),"width",this)},set:function(t){t!=Object(En["a"])(Object(Vn["a"])(i.prototype),"width",this)&&(Object(Dn["a"])(Object(Vn["a"])(i.prototype),"width",t,this,!0),this.updateAnchorsPostion())}},{key:"height",get:function(){return Object(En["a"])(Object(Vn["a"])(i.prototype),"height",this)},set:function(t){t!=Object(En["a"])(Object(Vn["a"])(i.prototype),"height",this)&&(Object(Dn["a"])(Object(Vn["a"])(i.prototype),"height",t,this,!0),this.updateAnchorsPostion())}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom};return t.left=-this.padding-this.anchorSize/2-this.anchorSize,t.top=-this.padding-this.anchorSize/2-3*this.anchorSize,t.right=this.width+this.padding+this.anchorSize/2+3*this.anchorSize,t.bottom=this.height+this.padding+this.anchorSize/2+this.anchorSize,t}},{key:"drawPath",value:function(t){var e=this.padding;t.addRect(le["a"].newXYWHRect(-e,-e,this.width+2*e,this.height+2*e))}},{key:"drawSelf",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"drawSelf",this).call(this,t),this._paint.setStyle(le["a"].strokeStyle);var e=this.width/2,n=e,o=this.height/2-this.anchorSize,r=o+2*this.anchorSize;t.drawLine(e,o,n,r,this._paint),e=this.width/2-this.anchorSize,n=e+2*this.anchorSize,o=this.height/2,r=o,t.drawLine(e,o,n,r,this._paint)}}]),i}(le["m"].Rect),Xn=i("d3d6"),Yn=i("3411"),$n=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o,r){var a;return Object(Rn["a"])(this,i),a=e.call(this,t,n,o,r),a.currentFeedbacks,a}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"prepare",this).call(this,t),t&&t.transformFeedback&&(this._transformFeedback=t.transformFeedback),t&&t.currentFeedbacks&&(this.currentFeedbacks=t.currentFeedbacks)}},{key:"unUse",value:function(t){this.updateFeedbackId&&cancelAnimationFrame(this.updateFeedbackId),this.updateFeedbackId=null,t&&t.keepFeedback||this._transformFeedback&&(this.frontRoot.removeChild(this._transformFeedback),this.transformFeedback.dispose(),this._transformFeedback=null,this.frontRoot.refresh()),Object(En["a"])(Object(Vn["a"])(i.prototype),"unUse",this).call(this,t)}},{key:"requestUpdateFeedbackFigures",value:function(){var t=this;if(this.using){var e=this.transformFeedback;this.updateFeedbackId&&cancelAnimationFrame(this.updateFeedbackId),this.updateFeedbackId=requestAnimationFrame((function(){if(e.visible=!1,e.rotation=0,e.scalex=e.scaley=1,e.skewx=e.skewy=0,t.currentFeedbacks||(t.currentFeedbacks=[]),t.currentFeedbacks.forEach((function(t){t.parent&&t.parent.removeChild(t),t.dispose(),t.parent=null,t.relatedSelection=null})),t.currentFeedbacks.length=0,t.currentSelections.forEach((function(e){while(e.parent!=t.mainRoot)e=e.parent;var i=Wn.createDelegateFigure(e,!1);i.a=0,i.ba=0,t.transformFeedback.addFeedback(i),t.currentFeedbacks.push(i)})),t.currentFeedbacks&&0!=t.currentFeedbacks.length){t.transformFeedback.visible=!0;for(var n,o=!0,r=t.currentSelections[0].rotation,a=1;a<t.currentSelections.length;a++){var s=t.currentSelections[a];while(s.parent!=t.mainRoot)s=s.parent;if(!i.isSameRadian(r,s.rotation)){o=!1;break}}if(o){var c=new le["k"].Vector2(1,0).rotate(r),l=new le["k"].Vector2(0,1).rotate(r),h=[1/0,-1/0],u=[1/0,-1/0];t.currentSelections.forEach((function(e){while(e.parent!=t.mainRoot)e=e.parent;var i=e.worldVertices;i.forEach((function(t){var e=c.dot(t[0],t[1]);h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],e);var i=l.dot(t[0],t[1]);u[0]=Math.min(u[0],i),u[1]=Math.max(u[1],i)}))}));var d=c.clone().scale(h[0]),f=c.clone().scale(h[1]),p=l.clone().scale(u[0]),v=l.clone().scale(u[1]),b=new le["k"].Vector2(d.x-p.x,d.y-p.y),g=b.dot(c.x,c.y);b.x=g*c.x+p.x,b.y=g*c.y+p.y;var y=new le["k"].Vector2(f.x-v.x,f.y-v.y);g=y.dot(c.x,c.y),y.x=g*c.x+v.x,y.y=g*c.y+v.y;var m=new le["k"].Vector2(y.x-b.x,y.y-b.y),O=c.dot(m.x,m.y),k=l.dot(m.x,m.y);t.transformFeedback.rotation=r,n={left:b.x,top:b.y,right:b.x+O,bottom:b.y+k}}else n=mn["a"].calculateFiguresBounds(t.currentSelections);t.transformFeedback.x=n.left,t.transformFeedback.y=n.top,t.transformFeedback.width=n.right-n.left,t.transformFeedback.height=n.bottom-n.top,t.transformFeedback.initFeedbackContainer();var j=t.transformFeedback.worldMatrix.clone().invert();t.currentFeedbacks.forEach((function(t){var e=j.clone().multiply(t.relatedSelection.worldMatrix),i=e.decompose();le["j"].applyPose(t,i)}))}t.feedbackFiguresUpdated(),t.frontRoot.refresh(),t.updateFeedbackId=null}))}}},{key:"feedbackFiguresUpdated",value:function(){}},{key:"updateCurrentSelections",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"updateCurrentSelections",this).call(this,t),this.requestUpdateFeedbackFigures()}},{key:"transformFeedback",get:function(){return null==this._transformFeedback&&(this._transformFeedback=new qn,this.frontRoot.addChild(this._transformFeedback)),this._transformFeedback}}],[{key:"isSameRadian",value:function(t,e){return t==e||Math.abs(t-e)<=Qn}}]),i}(Wn),Qn=1e-5,Zn=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r;return Object(Rn["a"])(this,i),r=e.call(this,t,n,o,"select"),r.notifySelectionChange=!0,r}return Object(Tn["a"])(i,[{key:"rect",get:function(){if(!this._selectRect){var t=Wn.FEEDBACK_COLOR,e=Wn.FEEDBACK_B_COLOR;this._selectRect=new le["m"].Rect({r:t[0],g:t[1],b:t[2],a:.5,showBorder:!0,br:e[0],bg:e[1],bb:e[2],borderWidth:1}),this.frontRoot.addChild(this._selectRect)}return this._selectRect}},{key:"toolActived",value:function(t,e,i){this.rect.visible=!1,this.deleteHoverFigure();var n=this.frontRoot.findFigure(t,e);n=n==this.frontRoot?null:n;var o=this.getTransformToolId(n);if(o)this.notifySelectionChange=!1,this.switchTool(o,t,e,{currentFeedbacks:this.currentFeedbacks,transformFeedback:this.transformFeedback,keepFeedback:!0,mouseEvent:i});else if(n=this.mainRoot.findFigure(t,e),n=n==this.mainRoot?null:n,n){while(n.parent!=this.mainRoot)n=n.parent;this.currentSelections&&-1!=this.currentSelections.indexOf(n)&&(this.notifySelectionChange=!1),this.switchTool("move",t,e,{currentFeedbacks:this.currentFeedbacks,transformFeedback:this.transformFeedback,keepFeedback:!0,mouseEvent:i})}else this.rect.width=this.rect.height=0,this.rect.visible=!0}},{key:"toolDeactived",value:function(t,e,i){var n=this;if(this.notifySelectionChange){var o=Math.min(this.sx,this.ex),r=Math.min(this.sy,this.ey),a=Math.max(this.sx,this.ex),s=Math.max(this.sy,this.ey),c="new";if(i&&i.ctrlKey&&(c="plus"),i&&i.shiftKey&&(c="minus"),i&&i.ctrlKey&&i.shiftKey&&(c="new"),o==a&&r==s){var l=this.mainRoot.findFigure(o,r);if(l=l==this.mainRoot?null:l,l)while(l.parent!=this.mainRoot)l=l.parent;var h=[];return l&&h.push(l),{selections:h,type:c}}var u=this.mainRoot.findChildren({left:o,top:r,right:a,bottom:s}),d=[];return u&&0!=u.length&&u.forEach((function(t){var e=t instanceof le["l"].QuadTreeNode?t.value:t;le["k"].SAT.contactTest(e.worldVertices,e.worldAxis,n.rect.worldVertices,[[0,1],[1,0]])&&d.push(e)})),{selections:d,type:c}}}},{key:"hoverMove",value:function(t,e){if(0!=this.mainRoot.children.length){var i=this.frontRoot.findFigure(t,e),n=this.getTransformToolId(i);if(this.changeCursor(this.defaultCursor),n){var o=mn["a"].CURSOR[n];return o&&this.changeCursor(o),this.deleteHoverFigure(),this.frontRoot.refresh(),"变换:".concat(n)}var r=this.mainRoot.findFigure(t,e);return r=r==this.mainRoot?null:r,r instanceof le["e"]&&(r=null),this.currentSelectionsContains(r)&&this.changeCursor(mn["a"].CURSOR["move"]),this.updateHoverFigure(r),this.frontRoot.refresh(),r?"".concat(r.name," [x:").concat(r.x.toFixed(0),",y:").concat(r.y.toFixed(0),",w:").concat(r.width,",h:").concat(r.height,"]"):void 0}}},{key:"feedbackFiguresUpdated",value:function(){this.updateHoverFigure()}},{key:"currentSelectionsContains",value:function(t){if(!this.currentSelections||!t)return!1;for(var e=0;e<this.currentSelections.length;e++){var i=this.currentSelections[e];if(i.id==t.id)return!0}return!1}},{key:"getTransformToolId",value:function(t){if(t){var e=this.transformFeedback;if(null!=e){if(t==e.rotateAnchor)return"rotate";if(t==e.topAnchor)return"n-resize";if(t==e.bottomAnchor)return"s-resize";if(t==e.leftAnchor)return"w-resize";if(t==e.rightAnchor)return"e-resize";if(t==e.seAnchor)return"se-resize";if(t==e.neAnchor)return"ne-resize";if(t==e.swAnchor)return"sw-resize";if(t==e.nwAnchor)return"nw-resize"}}}},{key:"isTransformTool",value:function(t){var e=this.transformFeedback;if(null!=e)return t==e.topAnchor||t==e.rotateAnchor||t==e.bottomAnchor||t==e.rightAnchor||t==e.leftAnchor||t==e.seAnchor||t==e.neAnchor||t==e.swAnchor||t==e.nwAnchor}},{key:"deleteHoverFigure",value:function(){this._lastHoverDelegate&&(this._lastHoverDelegate.dispose(),this.frontRoot.removeChild(this._lastHoverDelegate),this._lastHoverDelegate.parent=null,this._lastHoverDelegate.relatedSelection=null,this._lastHoverDelegate=null)}},{key:"updateHoverFigure",value:function(t){t?this._lastHoverDelegate?this._lastHoverDelegate.relatedSelection.id!=t.id&&(this.deleteHoverFigure(),this._lastHoverDelegate=Wn.createDelegateFigure(t),this.frontRoot.addChild(this._lastHoverDelegate)):this.isTransformTool(t)||(this._lastHoverDelegate=Wn.createDelegateFigure(t),this.frontRoot.addChild(this._lastHoverDelegate)):this.deleteHoverFigure()}},{key:"activeMove",value:function(t,e,i,n,o,r){this.rect.x=i,this.rect.y=n,this.rect.width=o-i,this.rect.height=r-n,this.frontRoot.refresh()}},{key:"reset",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this),this.deleteHoverFigure(),this.notifySelectionChange=!0,this.rect.visible=!1,this.rect.width=this.rect.height=0,this.frontRoot.refresh()}},{key:"unUse",value:function(){this.deleteHoverFigure(),Object(En["a"])(Object(Vn["a"])(i.prototype),"unUse",this).call(this)}}]),i}($n),to=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r;return Object(Rn["a"])(this,i),r=e.call(this,t,n,o,"move"),r.startPosition={},r}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){t&&(this.currentFeedbacks=t.currentFeedbacks,this.transformFeedback=t.transformFeedback)}},{key:"toolActived",value:function(t,e){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e),this.currentFeedbacks&&this.currentFeedbacks.length>0){var n=this.currentFeedbacks[0];this.startPosition=n.worldMatrix.decompose().translation}}},{key:"activeMove",value:function(t,e,n,o,r,a,s,c){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"activeMove",this).call(this,t,e,n,o,r,a),this.currentFeedbacks&&this.transformFeedback){var l=this.transformFeedback.worldMatrix.invert(),h=l.multiplyWithVertexDatas(this.lx,this.ly),u=l.multiplyWithVertexDatas(t,e);s=u[0]-h[0],c=u[1]-h[1],this.currentFeedbacks.forEach((function(t){t.a=.2,t.ba=.8,t.x+=s,t.y+=c})),this.frontRoot.refresh()}}},{key:"toolDeactived",value:function(t,e,n){var o=this;Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e);var r=this.ex-this.sx,a=this.ey-this.sy;if(0!=r||0!=a){if(n.altKey){var s=[];return this.currentSelections.forEach((function(t){var e=t.clone();e.x+=r/o.mainRoot.scalex,e.y+=a/o.mainRoot.scaley,s.push(e)})),{type:"new",figures:s}}var c=[];return this.currentSelections.forEach((function(t){return c.push(t)})),{type:"move",figures:c,dx:r/this.mainRoot.scalex,dy:a/this.mainRoot.scaley}}}}]),i}(Wn),eo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o,r){return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){t&&(this.currentFeedbacks=t.currentFeedbacks,this.transformFeedback=t.transformFeedback,this.currentFeedbacks.forEach((function(t){t.a=.2,t.ba=.8})))}},{key:"isIllegalData",get:function(){return!1}},{key:"processFinalResult",value:function(t){}},{key:"toolDeactived",value:function(t,e){var n=this;if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e),!this.isIllegalData){var o=[];return this.currentFeedbacks.forEach((function(t){try{var e,i=t.relatedSelection;if(null==i)return void console.error("发生错误，没有找到feedbackfigure id对应的figure");e=i.parent?i.parent.worldMatrix.clone().invert():new le["k"].Matrix3;var r=t.worldMatrix;e.multiply(r);var a=e.decompose();n.processFinalResult(a),o.push({figure:i,pose:a})}catch(s){console.error(s)}})),o}}}]),i}(Wn),io=(Math.PI,function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r;return Object(Rn["a"])(this,i),r=e.call(this,t,n,o,"rotate"),r.sr,r.anchor={x:.5,y:.5},r}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"prepare",this).call(this,t),this.anchor=null!=t&&null!=t.anchor?t.anchor:this.anchor}},{key:"active",value:function(t,e){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"active",this).call(this,t,e),this.transformFeedback){var n=this.transformFeedback,o=n.worldMatrix.clone();this.cx=this.w=this.anchor.x*n.width,this.cy=this.h=this.anchor.y*n.height;var r=o.multiplyWithVertexDatas(this.cx,this.cy);this.cx=r[0],this.cy=r[1],this.sr=Math.atan2(e-this.cy,t-this.cx),this.startRotation=this.transformFeedback.rotation}}},{key:"activeMove",value:function(t,e,n,o,r,a,s,c,l){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"activeMove",this).call(this,t,e,n,o,r,a,s,c),this.transformFeedback){var h=this.transformFeedback,u=Math.atan2(e-this.cy,t-this.cx),d=u-this.sr;l.altKey;var f=(new le["k"].Matrix3).translate(this.cx,this.cy).rotate(d+this.startRotation).translate(-this.w,-this.h).decompose();le["j"].applyPose(h,f),h.scalex=h.scaley=1,h.skewx=h.skewy=0,this.frontRoot.refresh()}}},{key:"isIllegalData",get:function(){if(this.transformFeedback)return this.transformFeedback.rotation-this.startRotation==0}},{key:"reset",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this),this.startRotation=null,this.sr=null,this.cx=this.cy=null}}]),i}(eo)),no=i("1d51"),oo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o,r){return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"isIllegalData",get:function(){return this.ex-this.sx==0&&this.ey-this.ex==0}},{key:"activeMove",value:function(t,e,n,o,r,a,s,c,l){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"activeMove",this).call(this,t,e,n,o,r,a,s,c),this.transformFeedback){var h=this.transformFeedback.worldMatrix.clone().invert(),u=h.multiplyWithVertexDatas(this.lx,this.ly),d=h.multiplyWithVertexDatas(t,e);if(s=d[0]-u[0],c=d[1]-u[1],s=this.processDx(s),c=this.processDy(c),l.shiftKey){var f=Math.max(s,c);(s<0||c<0)&&(f=Math.min(s,c)),s=c=f}var p=this.transformFeedback,v=this.getTransformAnchor(p),b=p.width+s,g=p.height+c;l.altKey&&(b+=s,g+=c,v.x=p.width/2,v.y=p.height/2);var y=b/p.width,m=g/p.height,O=new no["Matrix3"],k=v.x,j=v.y;O.translate(p.x,p.y).rotate(p.rotation).scale(y,m).translate(k/y-k,j/m-j);var w=O.decompose();p.x=w.translation.x,p.y=w.translation.y,p.height=g,p.width=b,this.frontRoot.refresh()}}},{key:"processDx",value:function(t){return t}},{key:"processDy",value:function(t){return t}},{key:"getTransformAnchor",value:function(t){return{x:0,y:0}}}]),i}(eo),ro=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"e-resize")}return Object(Tn["a"])(i,[{key:"isIllegalData",get:function(){return this.ex-this.sx==0}},{key:"processDy",value:function(t){return 0}}]),i}(oo),ao=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"w-resize")}return Object(Tn["a"])(i,[{key:"getTransformAnchor",value:function(t){return{x:t.width,y:t.height}}},{key:"processDx",value:function(t){return-t}},{key:"processDy",value:function(t){return 0}},{key:"isIllegalData",get:function(){return this.ex-this.sx==0}}]),i}(oo),so=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"n-resize")}return Object(Tn["a"])(i,[{key:"isIllegalData",get:function(){return this.ey-this.sy==0}},{key:"getTransformAnchor",value:function(t){return{x:0,y:t.height}}},{key:"processDx",value:function(){return 0}},{key:"processDy",value:function(t){return-t}}]),i}(oo),co=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"s-resize")}return Object(Tn["a"])(i,[{key:"isIllegalData",get:function(){return this.ey-this.sy==0}},{key:"getTransformAnchor",value:function(t){return{x:t.width,y:0}}},{key:"processDx",value:function(){return 0}}]),i}(oo),lo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"se-resize")}return i}(oo),ho=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"ne-resize")}return Object(Tn["a"])(i,[{key:"getTransformAnchor",value:function(t){return{x:0,y:t.height}}},{key:"processDy",value:function(t){return-t}}]),i}(oo),uo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"sw-resize")}return Object(Tn["a"])(i,[{key:"getTransformAnchor",value:function(t){return{x:t.width,y:0}}},{key:"processDx",value:function(t){return-t}}]),i}(oo),fo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"nw-resize")}return Object(Tn["a"])(i,[{key:"getTransformAnchor",value:function(t){return{x:t.width,y:t.height}}},{key:"processDx",value:function(t){return-t}},{key:"processDy",value:function(t){return-t}}]),i}(oo),po=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o,r){return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"defaultCursor",get:function(){return mn["a"].CURSOR.add}},{key:"prepare",value:function(){this.fireSelectionChangeEvent([],"new")}},{key:"createShape",value:function(t,e){}},{key:"toolActived",value:function(t,e){this.fireSelectionChangeEvent([],"new"),this._newShape=this.createShape(t,e),this._newShape&&(this._newShape.alpha=.8,this.frontRoot.addChild(this._newShape))}},{key:"updateShapeBounds",value:function(t,e,i,n,o,r){var a=n-e,s=o-i;if(r.shiftKey){var c=Math.max(a,s);a=c,s=c}r.altKey?(t.width=2*a,t.height=2*s,t.x=this.sx,t.y=this.sy):(t.width=a,t.height=s,t.x=e+a/2,t.y=i+s/2)}},{key:"activeMove",value:function(t,e,i,n,o,r,a,s,c){if(this._newShape)return this.updateShapeBounds(this._newShape,i,n,o,r,c),this.frontRoot.refresh(),"Create ".concat(this._newShape.name," [x:").concat(i,",y:").concat(n,",w:").concat(o-i,",h:").concat(r-n,"]")}},{key:"toolDeactived",value:function(t,e){if(this._newShape&&this.mainRoot){var i=this._newShape.worldMatrix.clone();if(this.frontRoot.removeChild(this._newShape),this._newShape.alpha=1,this.frontRoot.refresh(),0==this._newShape.width||0==this._newShape.height)return this._newShape.dispose(),void(this._newShape=null);var n=this.mainRoot.worldMatrix.clone().invert(),o=n.multiply(i).decompose();return this._newShape.x=o.translation.x,this._newShape.y=o.translation.y,this._newShape.width=this._newShape.width*o.scale.x,this._newShape.height=this._newShape.height*o.scale.y,{figure:this._newShape,name:this.figureName}}}},{key:"figureName",get:function(){return"Shape"}},{key:"reset",value:function(){this._newShape=null,Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this)}}]),i}(Wn),vo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rect";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"createShape",value:function(t,e){return new le["m"].CenterRect({name:"Rectangle"})}}]),i}(po),bo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ellipse";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"createShape",value:function(t,e){return new le["m"].CenterEllipse({name:"Ellipse"})}}]),i}(po),go=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"star";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"createShape",value:function(){return new le["m"].CenterStar({name:"Star"})}}]),i}(po),yo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"polygon";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"createShape",value:function(t,e){return new le["m"].CenterPolygon({name:"Polygon"})}}]),i}(po),mo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){var n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;return Object(Rn["a"])(this,i),n=e.call(this,r),n.model=t,n.isOut=o,n.r=122,n.g=255,n.b=0,n.master,n._isfocus=!1,n}return Object(Tn["a"])(i,[{key:"focus",value:function(){this._isfocus=!0}},{key:"blur",value:function(){this._isfocus=!1}},{key:"dispose",value:function(){this.master=null,this.relate=null,Object(En["a"])(Object(Vn["a"])(i.prototype),"dispose",this).call(this)}},{key:"update",value:function(t,e){this.x=t,this.y=e;var i=this.master.worldMatrix.clone().invert(),n=i.multiplyWithVertexDatas(t,e);this.isOut?(this.model.outX=n[0],this.model.outY=n[1]):(this.model.inX=n[0],this.model.inY=n[1])}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom},e=Object(En["a"])(Object(Vn["a"])(i.prototype),"calculateLocalBounds",this).call(this,t);return e.left-=this.width,e.top-=this.height,e.right+=this.width,e.bottom+=this.height,e}},{key:"drawSelf",value:function(t){this._isfocus?(this.r=255,this.g=0,this.b=0):(this.r=122,this.g=255,this.b=0),Object(En["a"])(Object(Vn["a"])(i.prototype),"drawSelf",this).call(this,t)}}]),i}(le["m"].CenterEllipse),Oo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n){var o;return Object(Rn["a"])(this,i),o=e.call(this,n),o.model=t,o._linePaint=le["a"].newPaint(),o._linePaint.setStyle(le["a"].strokeStyle),o._linePaint.setColorComponents(0,0,255,1),o._linePaint.setAntiAlias(!1),o._isfocus=!1,o}return Object(Tn["a"])(i,[{key:"type",get:function(){if(this.model)return this.model.type},set:function(t){this.model&&this.model.type!=t&&(this.model.type=t)}},{key:"focus",value:function(){this._isfocus=!0}},{key:"blur",value:function(){this._isfocus=!1}},{key:"hideController",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inController&&(this.inController.visible=!0),this.outController&&(this.outController.visible=!0),this.inController&&t&&(this.inController.visible=!1),this.outController&&e&&(this.outController.visible=!1)}},{key:"showController",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.inController&&(this.inController.visible=!1),this.outController&&(this.outController.visible=!1),this.inController&&t&&(this.inController.visible=!0),this.outController&&e&&(this.outController.visible=!0)}},{key:"initControllerPoints",value:function(){var t=this.master.worldMatrix;if(!this.inController&&this.model&&this.model.in){var e=this.x,i=this.y;if(this.model.in){e=this.model.inX,i=this.model.inY;var n=t.multiplyWithVertexDatas(e,i);e=n[0],i=n[1]}this.inController=new mo(this.model,!1,{x:e,y:i,width:this.width,height:this.height}),this.inController.master=this.master,this.inController.relate=this,this.parent.addChild(this.inController)}if(!this.outController&&this.model&&this.model.out){var o=this.x,r=this.y;if(this.model.out){o=this.model.outX,r=this.model.outY;var a=t.multiplyWithVertexDatas(o,r);o=a[0],r=a[1]}this.outController=new mo(this.model,!0,{x:o,y:r,width:this.width,height:this.height}),this.outController.master=this.master,this.outController.relate=this,this.parent.addChild(this.outController)}}},{key:"drawSelf",value:function(t){var e=0,n=0;if(this.inController&&this.inController.isVisible){var o=this.inController.x-this.x,r=this.inController.y-this.y;t.drawLine(e,n,o,r,this._linePaint)}if(this.outController&&this.outController.isVisible){var a=this.outController.x-this.x,s=this.outController.y-this.y;t.drawLine(e,n,a,s,this._linePaint)}this.br=255,this.bb=255,this.bg=255,this._isfocus?(this.r=255,this.g=0,this.b=0):(this.r=0,this.g=0,this.b=0),Object(En["a"])(Object(Vn["a"])(i.prototype),"drawSelf",this).call(this,t)}},{key:"dispose",value:function(){this.master=null,this.model&&this.model.dispose(),this._linePaint&&this.getTarget()._linePaint.delete(),this.inController&&(this.inController.parent.removeChild(this.inController),this.inController.dispose(),this.inController=null),this.outController&&(this.outController.parent.removeChild(this.outController),this.outController.dispose(),this.outController=null),Object(En["a"])(Object(Vn["a"])(i.prototype),"dispose",this).call(this)}},{key:"update",value:function(t,e){this.x=t,this.y=e;var i=this.master.worldMatrix.clone().invert(),n=i.multiplyWithVertexDatas(t,e);this.model.x=n[0],this.model.y=n[1]}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom},e=Object(En["a"])(Object(Vn["a"])(i.prototype),"calculateLocalBounds",this).call(this,t);return e.left-=this.width,e.top-=this.height,e.right+=this.width,e.bottom+=this.height,e}}]),i}(le["m"].CenterRect),ko=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t){var n;return Object(Rn["a"])(this,i),n=e.call(this,t),n.vertexSize=null==t||null==t.vertexSize?7:t.vertexSize,n.vertexFigures=[],n}return Object(Tn["a"])(i,[{key:"deletePathModel",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"deletePathModel",this).call(this),this.vertexFigures.forEach((function(t){var e=t.parent;e&&e.removeChild(t),t.dispose()})),this.vertexFigures.length=0}},{key:"applyWorkingVisible",value:function(){this.hideAllVertex(),this.visible=!0,this.a=.2;var t=this.getLastPreVertexFigure();t&&(t.visible=!0,t.showController(!1,!0));var e=this.getLastVertexFigure();e&&(e.visible=!0,e.showController(!0,!0))}},{key:"applyRestingVisible",value:function(){this.showAllVertex(),this.hideAllVertexController(),this.visible=!0,this.a=0}},{key:"indexOfVertex",value:function(t){for(var e=0;e<this.vertexFigures.length;e++){var i=this.vertexFigures[e];if(t==i)return e}return-1}},{key:"hideAllVertex",value:function(){this.vertexFigures.forEach((function(t){return t.visible=!1}))}},{key:"showAllVertex",value:function(){this.vertexFigures.forEach((function(t){return t.visible=!0}))}},{key:"hideAllVertexController",value:function(){this.vertexFigures.forEach((function(t){t.hideController(!0,!0)}))}},{key:"getVertexFigure",value:function(t){return this.vertexFigures[t]}},{key:"getFirstVertexFigure",value:function(){return this.vertexFigures[0]}},{key:"getLastVertexFigure",value:function(){return this.vertexFigures[this.vertexFigures.length-1]}},{key:"getLastPreVertexFigure",value:function(){return this.vertexFigures[this.vertexFigures.length-2]}},{key:"getVertexFigureCount",value:function(){return this.vertexFigures.length}},{key:"addVertexFigure",value:function(t){if(this.parent&&t){var e=new Oo(t,{width:this.vertexSize,height:this.vertexSize,r:0,g:0,b:0});e.master=this;var i=this.worldMatrix,n=i.multiplyWithVertexDatas(t.x,t.y);return e.x=n[0],e.y=n[1],this.parent.addChild(e),this.vertexFigures.push(e),e.initControllerPoints(),e}}},{key:"removeVertexFigure",value:function(t){if(this.parent)for(var e=0;e<this.vertexFigures.length;e++){var i=this.vertexFigures[e];if(i.model.equals(t))return this.vertexFigures.splice(e,1),this.parent.removeChild(i),i.dispose(),i}}},{key:"addPoint",value:function(t){return Object(En["a"])(Object(Vn["a"])(i.prototype),"addPoint",this).call(this,t),this.addVertexFigure(t)}},{key:"insertPoint",value:function(t,e){return Object(En["a"])(Object(Vn["a"])(i.prototype),"insertPoint",this).call(this,t,e),this.addVertexFigure(t)}},{key:"deletePoint",value:function(t){return Object(En["a"])(Object(Vn["a"])(i.prototype),"deletePoint",this).call(this,t),this.removeVertexFigure(t)}},{key:"deleteAt",value:function(t){var e=Object(En["a"])(Object(Vn["a"])(i.prototype),"deleteAt",this).call(this,t);return this.removeVertexFigure(e)}}]),i}(le["m"].PathShape),jo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pen";return Object(Rn["a"])(this,i),r=e.call(this,t,n,o,a),r.vertices=[],r.vertexSize=4,r}return Object(Tn["a"])(i,[{key:"updateCurrentSelections",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"updateCurrentSelections",this).call(this,t),t&&t[t.length-1]instanceof le["m"].PathShape?null!=this.currentPath||t[t.length-1].close||(this.currentPath=t[t.length-1],this.createShadowPath(this.currentPath)):(this.currentPath=null,this.disposeCurrentShadow()),this.updateVertexShapeFeedback()}},{key:"updateVertexShapeFeedback",value:function(){var t=this;this._updateFeedbackid&&cancelAnimationFrame(this._updateFeedbackid),this.shadowPath&&(this.shadowPath.visible=!1),this._updateFeedbackid=requestAnimationFrame((function(){if(null!=t.shadowPath){var e=t.currentSelections[t.currentSelections.length-1];e.id==t.shadowPath.id&&e&&(t.shadowPath.visible=!0,le["j"].applyPose(t.shadowPath,e.worldMatrix.decompose()),t.shadowPath.deletePathModel(),e.getPathModel().points.forEach((function(e){var i=e.clone();t.shadowPath.addPoint(i)})),t.shadowPath.applyRestingVisible(),t.frontRoot.refresh())}}))}},{key:"prepare",value:function(t){}},{key:"unUse",value:function(t){cancelAnimationFrame(this._updateFeedbackid),this._updateFeedbackid=null,this.disposeCurrentShadow(),this.currentPath=null}},{key:"createShadowPath",value:function(t){this.disposeCurrentShadow(),this.shadowPath=new ko({x:t.x,y:t.y,a:0,borderWidth:1}),this.shadowPath.id=t.id,this.shadowPath.related=t,Wn.setFeedbackColors(this.shadowPath),this.frontRoot.addChild(this.shadowPath),this.frontRoot.refresh()}},{key:"addNewPoint",value:function(t,e){if(null==this.currentPath){this.currentPath=new le["m"].PathShape({x:t,y:e}),this.currentPath.name="Path Shape",this.createShadowPath(this.currentPath);var i=this.currentPath.worldMatrix.clone().invert(),n=i.multiplyWithVertexDatas(t,e),o=new le["g"](n[0],n[1]);this.currentPath.addPoint(o);var r=o.clone();return this.shadowPath.addPoint(r),this.currentAdded=this.currentPath,void this.frontRoot.refresh()}var a=this.currentPath.worldMatrix.clone().invert(),s=a.multiplyWithVertexDatas(t,e),c=new le["g"](s[0],s[1]);this.shadowPath.addPoint(c),this.currentAdded=c,this.shadowPath.applyWorkingVisible(),this.frontRoot.refresh()}},{key:"toolActived",value:function(t,e){Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e),this.completeType=null,this.minusIndex=-1;var n=this.frontRoot.findFigure(t,e);if(n=n==this.frontRoot||n==this.shadowPath?null:n,n){if(this.updateHoverFigure(),!this.shadowPath)return;var o=this.shadowPath.indexOfVertex(n);if(console.log(o,this.shadowPath.getPathModel().pointsCount),-1!=o){if(0==o)this.completeType="close";else if(o<this.shadowPath.getPathModel().pointsCount-1)this.completeType="minus",this.minusIndex=o;else if(o==this.shadowPath.getPathModel().pointsCount-1){var r=this.shadowPath.getPathModel().getPoint(o);null!=r.out&&(this.completeType="change",this.minusIndex=o)}return}}else this.completeType="add",this.addNewPoint(t,e)}},{key:"toolDeactived",value:function(t,e){var n;if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e),"add"==this.completeType){if(this.currentAdded instanceof le["m"].PathShape){var o=this.currentAdded.getPathModel(),r=this.shadowPath.getPathModel(),a=o.getPoint(0);a.copyFrom(r.getPoint(0));var s=this.currentAdded.worldMatrix,c=this.mainRoot.worldMatrix.clone().invert(),l=c.multiply(s).decompose().translation,h=this.currentAdded;this.currentAdded=null,h.x=l.x,h.y=l.y,n={type:"add",figure:h,point:a}}if(this.currentAdded instanceof le["g"]){var u=this.currentAdded.clone();this.currentAdded=null,n={type:"add",point:u,path:this.currentPath,index:this.currentPath.pointsCount}}}if("close"==this.completeType){this.disposeCurrentShadow();var d=this.getSelectionById(this.currentPath.id);this.currentPath=null,n={type:this.completeType,path:d}}if("minus"==this.completeType){var f=this.getSelectionById(this.currentPath.id);n={type:this.completeType,index:this.minusIndex,path:f}}if("change"==this.completeType){var p=this.getSelectionById(this.currentPath.id),v=p.getPathModel().getPoint(this.minusIndex);n={type:this.completeType,point:v}}return this.shadowPath&&this.shadowPath.applyRestingVisible(),this.frontRoot.refresh(),n}},{key:"getSelectionById",value:function(t){if(this.currentSelections)for(var e=0;e<this.currentSelections.length;e++){var i=this.currentSelections[e];if(i.id==t)return i}}},{key:"disposeCurrentShadow",value:function(){null!=this.shadowPath&&(this.frontRoot.removeChild(this.shadowPath),this.shadowPath.dispose(),this.shadowPath=null,this.frontRoot.refresh())}},{key:"hoverMove",value:function(t,e){var i=this.frontRoot.findFigure(t,e);i==this._lastHover&&null!=i||(i=i instanceof Oo?i:null,this.updateHoverFigure(i))}},{key:"updateHoverFigure",value:function(t){this._lastHover!=t&&(this._lastHover&&this._lastHover.blur(),this._lastHover=t,this._lastHover&&this._lastHover.focus(),this.frontRoot.refresh())}},{key:"activeMove",value:function(t,e,n,o,r,a,s,c){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"activeMove",this).call(this,t,e,n,o,r,a,s,c),"add"==this.completeType){var l=this.shadowPath.getLastVertexFigure();if(l){l.outController&&l.inController||(l.type=1,l.model.inX=l.model.x,l.model.inY=l.model.y,l.model.outX=l.model.x,l.model.outY=l.model.y,l.initControllerPoints());var h=l.outController;h.update(h.x+s,h.y+c);var u=l.inController;u.update(u.x-s,u.y-c),this.frontRoot.refresh()}}}},{key:"reset",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this),cancelAnimationFrame(this._updateFeedbackid),this._updateFeedbackid=null,this.completeType=null,this.minusIndex=-1}}]),i}(Wn);function wo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(t&&0!=t.length){if(t.length<3)return t.map((function(t){return[t[0],t[1]]}));if(i=null==i?0:i,n=null==n?t.length-1:n,!(i<0||n<0||i>t.length-1||n>t.length-1)){if(n-i<2){for(var o=[],r=i;r<=n;r++)o.push([t[r][0],t[r][1]]);return o}var a=-1/0,s=-1,c=new Co(t[n][0]-t[i][0],t[n][1]-t[i][1]);c.normalize();for(var l=i+1;l<n;l++){var h=So(t[l],t[i],c);h>a&&(a=h,s=l)}if(a>e*e){var u=wo(t,e,i,s),d=wo(t,e,s,n);return u.pop(),u.concat(d)}var f=[[t[i][0],t[i][1]],[t[n][0],t[n][1]]];return f}}}function xo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,i=t.length;if(i<3)throw new Error("A curve must have at least three points.");var n=[];if(3===i)return[{x:t[0][0],y:t[0][1],out:{x:t[1][0],y:t[1][1]}},{x:t[2][0],y:t[2][1]}];var o=[];o.push(t[0],t[0]);for(var r=1;r<t.length;r++)o.push(t[r]),r===t.length-1&&o.push(t[r]);var a,s=[],c=1-e,l={x:o[0][0],y:o[0][1]};n.push(l);for(var h=1;h+2<o.length;h++){var u=o[h];s[0]=[u[0],u[1]],s[1]=[u[0]+(c*o[h+1][0]-c*o[h-1][0])/6,u[1]+(c*o[h+1][1]-c*o[h-1][1])/6],s[2]=[o[h+1][0]+(c*o[h][0]-c*o[h+2][0])/6,o[h+1][1]+(c*o[h][1]-c*o[h+2][1])/6],s[3]=[o[h+1][0],o[h+1][1]],l.out={x:s[1][0],y:s[1][1]},a={x:s[3][0],y:s[3][1],in:{x:s[2][0],y:s[2][1]}},n.push(a),l=a}return n}function So(t,e,i){var n=new Co(t[0]-e[0],t[1]-e[1]),o=n.dot(i.x,i.y),r=e[0]+i.x*o,a=e[1]+i.y*o,s=r-t[0],c=a-t[1];return s*s+c*c}var Co=function(){function t(e,i){Object(Rn["a"])(this,t),this.x=e,this.y=i}return Object(Tn["a"])(t,[{key:"_length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var t=this._length();this.x=this.x/t,this.y=this.y/t}},{key:"dot",value:function(t,e){return this.x*t+this.y*e}}]),t}(),_o=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"curve";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"disposeLine",value:function(){this.line&&(this.frontRoot.removeChild(this.line),this.line.parent=null,this.line.dispose(),this.line=null)}},{key:"toolActived",value:function(t,e,i){this.disposeLine(),null==this.line&&(this.line=new Nn["PathShape"]({x:t,y:e}),this.line.addPoint(new le["g"](0,0)),this.frontRoot.addChild(this.line)),this.frontRoot.refresh()}},{key:"activeMove",value:function(t,e){this.line&&(this.line.addPoint(new le["g"](t-this.line.x,e-this.line.y)),this.frontRoot.refresh())}},{key:"toolDeactived",value:function(t,e,i){var n=this,o=this.line.getPathModel().clone(),r=(this.line.x,this.line.y,this.line.x),a=this.line.y,s=this.mainRoot.worldMatrix.clone().invert(),c=s.multiplyWithVertexDatas(r,a);if(r=c[0],a=c[1],this.disposeLine(),this.frontRoot.refresh(),this.sx-t!=0||this.sy-e!=0){var l,h=o.points.map((function(t){return[t.x/n.mainRoot.scalex,t.y/n.mainRoot.scaley]})),u=wo(h);o.dispose(),o=null,h.length=0,h=null,u.length>=3?(l=xo(u),u.length=0,u=null):(l=u.map((function(t){return{x:t[0],y:t[1]}})),u.length=0,u=null);var d=new Nn["PathShape"]({x:r,y:a});return l.forEach((function(t){var e=new le["g"](t.x,t.y,1);d.addPoint(e),t.in&&(e.inX=t.in.x,e.inY=t.in.y),t.out&&(e.outX=t.out.x,e.outY=t.out.y)})),{figure:d,name:"Curve Figure"}}}}]),i}(Wn),Po=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertex-select";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"unUse",value:function(){if(this.stopUpdate(),this.disposeShadowPath(),this.deleteLastHover(),this.currentSelections&&this.currentSelections[0]instanceof le["g"]){var t=this.currentSelections[0],e=t.parent;while(1){if(null==e||e instanceof le["m"].VerticesShape)break;e=e.parent}e?this.fireSelectionChangeEvent([e]):this.fireSelectionChangeEvent([])}this.frontRoot.refresh()}},{key:"shadowPath",get:function(){return null==this._shadowPath&&(this._shadowPath=new ko({a:0,borderWidth:1}),Wn.setFeedbackColors(this._shadowPath),this.frontRoot.addChild(this._shadowPath)),this._shadowPath}},{key:"updateShadowPath",value:function(t){this.shadowPath=null,t&&(t instanceof mo&&(t=t.parent),t instanceof Oo&&(this.shadowPath=t.master))}},{key:"disposeShadowPath",value:function(){this._shadowPath&&(this.frontRoot.removeChild(this._shadowPath),this._shadowPath.parent=null,this._shadowPath.dispose(),this._shadowPath.relatedPath=null,this._shadowPath=null,this._selectedVertex=null,this._selectedVertexType=null)}},{key:"updateVertexShapeFeedback",value:function(t){var e=this;if(t){this.shadowPath.id=t.id,this.shadowPath.visible=!0,this.shadowPath.close=t.close,this.shadowPath.relatedPath=t,this.shadowPath.deletePathModel();var i=t.worldMatrix.decompose();le["j"].applyPose(this.shadowPath,i),t.getPathModel().points.forEach((function(t){var i=t.clone();e.shadowPath.addPoint(i)})),this.shadowPath.applyRestingVisible(),this.frontRoot.refresh()}}},{key:"updateCurrentSelections",value:function(t){var e=this;Object(En["a"])(Object(Vn["a"])(i.prototype),"updateCurrentSelections",this).call(this,t),this.shadowPath&&(this.shadowPath.visible=!1),this._updateId&&cancelAnimationFrame(this._updateId),this._updateId=requestAnimationFrame((function(){if(e.currentSelections&&1==e.currentSelections.length){var t=e.currentSelections[0];if(t instanceof le["m"].PathShape&&(e.updateVertexShapeFeedback(t),e._selectedVertex&&e._selectedVertex.blur(),e._selectedVertex=null,e._selectedVertexType=null),t instanceof le["g"]){if(null==t.parent)return void(e.shadowPath&&e.fireSelectionChangeEvent([e.shadowPath.relatedPath]));var i=e.shadowPath.relatedPath;e.updateVertexShapeFeedback(i);var n=i.getPathModel(),o=n.points.indexOf(t),r=e.shadowPath.getVertexFigure(o);e._lastVertexHover&&e._lastVertexHover.blur(),e._lastVertexHover==r&&(e._lastVertexHover=null),e._selectedVertex&&e._selectedVertex.blur(),e._selectedVertex=r,e._selectedVertex.focus(),e.focusVertex(e._selectedVertex)}}else e.disposeShadowPath(),e.deleteLastHover(),e.frontRoot.refresh()}))}},{key:"findRealModel",value:function(t){t instanceof mo&&(t=t.relate);var e=this.shadowPath.indexOfVertex(t),i=this.mainRoot.getFigureById(this.shadowPath.id);return i.getPathModel().getPoint(e)}},{key:"toolActived",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e,n),this.actionType=null;var o=this.frontRoot.findFigure(t,e);if(o=o==this.frontRoot?null:o,o instanceof Oo||o instanceof mo){var r=this.findRealModel(o),a=this.currentSelections[0],s=!r.equals(a);if(o instanceof Oo&&(this.focusVertex(o),this.actionType="changevertex"),o instanceof mo&&(this.actionType="changevertexcontroller"),s&&this.fireSelectionChangeEvent([r]),"changevertex"==this.actionType&&(this._selectedVertexType="v"),"changevertexcontroller"==this.actionType){var c=o==o.relate.inController;this._selectedVertexType=c?"in":"out"}}else{if(o=this.mainRoot.findFigure(t,e),o=o==this.mainRoot?null:o,o instanceof le["m"].PathShape)return this._shadowPath&&this.shadowPath.id==o.id&&!this._selectedVertex||this.fireSelectionChangeEvent([o]),void(this.actionType="move");this.fireSelectionChangeEvent([])}}},{key:"focusVertex",value:function(t){if(t){this.shadowPath.applyRestingVisible(),this.shadowPath.a=.2,t.showController(!0,!0);var e=this.shadowPath.indexOfVertex(t),i=this.shadowPath.getVertexFigure(e+1);i&&i.showController(!0,!1);var n=this.shadowPath.getVertexFigure(e-1);n&&n.showController(!1,!0),this.frontRoot.refresh()}}},{key:"stopUpdate",value:function(){this._updateId&&cancelAnimationFrame(this._updateId),this._updateId=null}},{key:"toolDeactived",value:function(t,e){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e),this.stopUpdate(),null!=this.actionType&&(this.ex-this.sx!=0||this.ey-this.sy!=0)){if("move"==this.actionType){var n=this.currentSelections[0];if(n&&n instanceof le["m"].PathShape){var o=n.parent.worldMatrix.clone().invert(),r=o.multiplyWithVertexDatas(this.sx,this.sy),a=o.multiplyWithVertexDatas(this.ex,this.ey),s=a[0]-r[0],c=a[1]-r[1];return{type:"move",figures:[n],dx:s,dy:c}}}if("changevertex"==this.actionType||"changevertexcontroller"==this.actionType){var l=this.currentSelections[0];if(l&&l instanceof le["g"]&&this._selectedVertex)return{type:"vertex",vertex:l,copy:this._selectedVertex.model.clone()}}}}},{key:"updateVertexHover",value:function(t){this._lastVertexHover!=t&&(null!=this._lastVertexHover&&this._lastVertexHover.blur(),this._lastVertexHover=t,this._lastVertexHover&&this._lastVertexHover.focus(),this.frontRoot.refresh())}},{key:"hoverMove",value:function(t,e){Object(En["a"])(Object(Vn["a"])(i.prototype),"hoverMove",this).call(this,t,e);var n=this.frontRoot.findFigure(t,e);if(n=n==this.frontRoot?null:n,n instanceof Oo||n instanceof mo)return this.updateHoverFigure(),this.updateVertexHover(n),void(this._selectedVertex&&this._selectedVertex.focus());var o=this.mainRoot.findFigure(t,e);o=o==this.mainRoot?null:o,(o instanceof le["m"].PathShape||!o)&&(this.updateVertexHover(),this.updateHoverFigure(o)),this._selectedVertex&&this._selectedVertex.focus()}},{key:"deleteLastHover",value:function(){this.lastHoverFigure&&(this.frontRoot.removeChild(this.lastHoverFigure),this.lastHoverFigure.parent=null,this.lastHoverFigure.dispose(),this.lastHoverFigure.relatedSelection=null,this.lastHoverFigure=null)}},{key:"updateHoverFigure",value:function(t){if(t){if(this.lastHoverFigure&&this.lastHoverFigure.relatedSelection.id==t.id)return;this.deleteLastHover(),this.lastHoverFigure=Wn.createDelegateFigure(t),this._shadowPath?this.frontRoot.insertChild(this.lastHoverFigure,this.frontRoot.indexOfChild(this._shadowPath)):this.frontRoot.addChild(this.lastHoverFigure)}else this.deleteLastHover();this.frontRoot.refresh()}},{key:"activeMove",value:function(t,e,n,o,r,a,s,c){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"activeMove",this).call(this,t,e,n,o,r,a,s,c),"move"==this.actionType){if(!this.lastHoverFigure){var l=this.currentSelections[0];l&&l instanceof le["m"].PathShape&&(this.lastHoverFigure=Wn.createDelegateFigure(l),this.frontRoot.addChild(this.lastHoverFigure))}this.lastHoverFigure&&(this.lastHoverFigure.x+=s,this.lastHoverFigure.y+=c)}if("changevertex"==this.actionType&&this._selectedVertex){this._selectedVertex.update(this._selectedVertex.x+s,this._selectedVertex.y+c);var h=this._selectedVertex.inController;h&&h.update(h.x+s,h.y+c);var u=this._selectedVertex.outController;u&&u.update(u.x+s,u.y+c)}if("changevertexcontroller"==this.actionType){var d=this._selectedVertex.inController,f=this._selectedVertex.outController;if("out"==this._selectedVertexType){var p=d;d=f,f=p}d&&d.update(d.x+s,d.y+c),1==this._selectedVertex.type&&f&&f.update(f.x-s,f.y-c)}this.frontRoot.refresh()}},{key:"getAnotherController",value:function(t){var e=t.parent;if(e instanceof Oo){if(t==e.inController)return e.outController;if(t==e.outController)return e.inController}}},{key:"reset",value:function(){this.stopUpdate(),this.deleteLastHover(),Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this)}}]),i}(Wn),Ao=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"move-root")}return Object(Tn["a"])(i,[{key:"activeMove",value:function(t,e,i,n,o,r,a,s){this.mainRoot&&(this.mainRoot.x+=a/this.mainRoot.scalex,this.mainRoot.y+=s/this.mainRoot.scaley,this.mainRoot.refresh())}}]),i}(Wn),Mo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"line")}return Object(Tn["a"])(i,[{key:"deleteLine",value:function(){this.line&&(this.line.parent.removeChild(this.line),this.line.dispose(),this.line.parent=null,this.line=null)}},{key:"createLine",value:function(t,e){return this.deleteLine(),this.line||(this.line=new Nn["Line"]({x:t,y:e}),this.line.getPathModel().addPoint(new le["g"]),this.line.getPathModel().addPoint(new le["g"]),this.frontRoot.addChild(this.line)),this.line}},{key:"toolActived",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e,n);var o=this.createLine(t,e);o.x=t,o.y=e}},{key:"activeMove",value:function(t,e,n,o,r,a,s,c,l){Object(En["a"])(Object(Vn["a"])(i.prototype),"activeMove",this).call(this,t,e,n,o,r,a,s,c,l);var h=this.line.getPathModel().getPoint(1);h&&(h.x+=s,h.y+=c,this.frontRoot.refresh())}},{key:"toolDeactived",value:function(t,e,n){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e,n),this.line&&this.mainRoot&&(this.ex-this.sx!=0||this.ey-this.sy!=0)){var o=[this.line.x,this.line.y],r=this.mainRoot.worldMatrix.clone().invert();o=r.multiplyWithVertexDatas(o[0],o[1]);var a=new Nn["Line"]({name:"Line",x:o[0],y:o[1]});a.getPathModel().addPoint(new le["g"]);var s=this.line.getPathModel().getPoint(1);return a.getPathModel().addPoint(new le["g"](s.x/this.mainRoot.scalex,s.y/this.mainRoot.scaley)),this.deleteLine(),this.frontRoot.refresh(),{figure:a,name:"Line"}}}},{key:"reset",value:function(){this.deleteLine(),Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this)}},{key:"unUse",value:function(){this.deleteLine(),Object(En["a"])(Object(Vn["a"])(i.prototype),"unUse",this).call(this)}}]),i}(Wn),Fo=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"prepare",this).call(this,t),this.fireSelectionChangeEvent([])}},{key:"toolActived",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e,n),this.deleteHoverFigure(),this.frontRoot.refresh(),this.activing=!0,this.edit=!1,this.create=!1,this.editingFigure=null;var o=this.mainRoot.findFigure(t,e);if(o=o==this.mainRoot?null:o,o&&o instanceof le["i"]){this.edit=!0,this.editingFigure=o;var r=o.worldMatrix.multiplyWithVertexDatas(0,0);return this.frontRoot.worldMatrix.clone().invert().multiplyWithVertexDatas(r[0],r[1],r),void this.fireEvent("showTextInput",{x:r[0],y:r[1],value:o.text})}this.create=!0,this.fireEvent("showTextInput",{x:t,y:e-10,size:10,value:""})}},{key:"updateHoverFigure",value:function(t){t?this._lastHoverDelegate?this._lastHoverDelegate.relatedSelection.id!=t.id&&(this.deleteHoverFigure(),this._lastHoverDelegate=Wn.createDelegateFigure(t),this.frontRoot.addChild(this._lastHoverDelegate)):(this._lastHoverDelegate=Wn.createDelegateFigure(t),this.frontRoot.addChild(this._lastHoverDelegate)):this.deleteHoverFigure()}},{key:"deleteHoverFigure",value:function(){this._lastHoverDelegate&&(this._lastHoverDelegate.dispose(),this.frontRoot.removeChild(this._lastHoverDelegate),this._lastHoverDelegate.parent=null,this._lastHoverDelegate.relatedSelection=null,this._lastHoverDelegate=null)}},{key:"hoverMove",value:function(t,e,i){var n=this.mainRoot.findFigure(t,e);if(n=n==this.mainRoot?null:n,n){if(n instanceof le["i"])return this.updateHoverFigure(n),this.frontRoot.refresh(),"Text [x:".concat(n.x.toFixed(0),",y:").concat(n.y.toFixed(0),"]")}else this._lastHoverDelegate&&(this.deleteHoverFigure(),this.frontRoot.refresh())}},{key:"createNewText",value:function(t,e,i){var n=this.mainRoot.worldMatrix.clone().invert(),o=n.multiplyWithVertexDatas(e,i);return new le["i"]({x:o[0],y:o[1],text:t,size:10,name:"Text"})}},{key:"reset",value:function(){this.deleteHoverFigure(),this.frontRoot.refresh(),Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this)}},{key:"unUse",value:function(){this.deleteHoverFigure(),this.frontRoot.refresh(),this.activing&&(this.fireEvent("hideTextInput"),this.activing=!1),Object(En["a"])(Object(Vn["a"])(i.prototype),"unUse",this).call(this)}}]),i}(Wn),Ro=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"v-text";return Object(Rn["a"])(this,i),e.call(this,t,n,o,r)}return Object(Tn["a"])(i,[{key:"createNewText",value:function(t,e,n){var o=Object(En["a"])(Object(Vn["a"])(i.prototype),"createNewText",this).call(this,t,e,n);return o.vertical=!0,o}}]),i}(Fo),To=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"linearGradient")}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"prepare",this).call(this,t),this.moveFigure=null}},{key:"deleteFeedback",value:function(){this.start&&(this.frontRoot.removeChild(this.start),this.start.parent=null,this.start.related=null,this.start.dispose(),this.start=null),this.end&&(this.frontRoot.removeChild(this.end),this.end.parent=null,this.end.related=null,this.end.dispose(),this.end=null),this.line&&(this.frontRoot.removeChild(this.line),this.line.parent=null,this.line.dispose(),this.line=null),this.frontRoot.refresh()}},{key:"updateCurrentSelections",value:function(t){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"updateCurrentSelections",this).call(this,t),this.deleteFeedback(),t&&1==t.length){var e=t[0];this.createFeedback(e)}}},{key:"createFeedback",value:function(t){if(this.deleteFeedback(),2==t.fill){var e=t.worldMatrix,i=t.linearGradient,n=e.multiplyWithVertexDatas(i.x1,i.y1),o=i.colorStops[0],r=i.colorStops[i.colorStops.length-1];this.line=new Nn["Line"]({x:n[0],y:n[1],borderWidth:2}),this.line.addPoint(new le["g"](0,0,0)),this.frontRoot.addChild(this.line),this.start=new Nn["CenterEllipse"]({x:n[0],y:n[1],width:15,height:15,r:o.color[0],g:o.color[1],b:o.color[2],a:o.color[3],br:Wn.FEEDBACK_B_COLOR[0],bg:Wn.FEEDBACK_B_COLOR[1],bb:Wn.FEEDBACK_B_COLOR[2]}),this.start.related=t,this.frontRoot.addChild(this.start);var a=e.multiplyWithVertexDatas(i.x2,i.y2);this.end=new Nn["CenterEllipse"]({x:a[0],y:a[1],width:15,height:15,r:r.color[0],g:r.color[1],b:r.color[2],a:r.color[3],br:Wn.FEEDBACK_B_COLOR[0],bg:Wn.FEEDBACK_B_COLOR[1],bb:Wn.FEEDBACK_B_COLOR[2]}),this.end.related=t,this.frontRoot.addChild(this.end),this.line.addPoint(new le["g"](a[0]-n[0],a[1]-n[1],0)),this.frontRoot.refresh()}}},{key:"updateHover",value:function(t){this.hover&&this.hover.related==t||(this.hover&&(this.frontRoot.removeChild(this.hover),this.hover.parent=null,this.hover.dispose(),this.hover=null),t&&2==t.fill&&(this.hover=Wn.createDelegateFigure(t),this.hover.related=t,this.frontRoot.addChild(this.hover)),this.frontRoot.refresh())}},{key:"hoverMove",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"hoverMove",this).call(this,t,e,n);var o=this.mainRoot.findFigure(t,e),r=this.frontRoot.findFigure(t,e);r!=this.end&&r!=this.start?(o=o==this.mainRoot?null:o,this.updateHover(o)):this.updateHover()}},{key:"toolActived",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e,n),this.updateHover();var o=this.frontRoot.findFigure(t,e);o!=this.end&&o!=this.start?(o=this.mainRoot.findFigure(t,e),o=o==this.mainRoot?null:o,o?2==o.fill&&this.fireSelectionChangeEvent([o]):this.fireSelectionChangeEvent([])):this.moveFigure=o}},{key:"toolDeactived",value:function(t,e,n){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e,n),(this.sx-this.ex!=0||this.sy-this.ey!=0)&&this.moveFigure&&this.start&&this.end){var o=this.start.related,r=o.worldMatrix.clone().invert(),a=r.multiplyWithVertexDatas(this.start.x,this.start.y),s=r.multiplyWithVertexDatas(this.end.x,this.end.y);return{x1:a[0],y1:a[1],x2:s[0],y2:s[1]}}}},{key:"activeMove",value:function(t,e,i,n,o,r,a,s,c){if(this.moveFigure){var l,h;if(this.moveFigure.x+=a,this.moveFigure.y+=s,this.moveFigure==this.start?(l=this.line.getPathModel().getPoint(0),h=this.line.getPathModel().getPoint(1)):(l=this.line.getPathModel().getPoint(1),h=this.line.getPathModel().getPoint(0)),l.x+=a,l.y+=s,c.altKey){var u=this.start==this.moveFigure?this.end:this.start;u.x-=a,u.y-=s,h.x-=a,h.y-=s}this.frontRoot.refresh()}}},{key:"reset",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this),this.moveFigure=null}},{key:"unUse",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"unUse",this).call(this),this.updateHover(),this.deleteFeedback()}}]),i}(Wn),Do=function(t){Object(Gn["a"])(i,t);var e=Object(Bn["a"])(i);function i(t,n,o){return Object(Rn["a"])(this,i),e.call(this,t,n,o,"radialGradient")}return Object(Tn["a"])(i,[{key:"prepare",value:function(t){Object(En["a"])(Object(Vn["a"])(i.prototype),"prepare",this).call(this,t),this.moveFigure=null}},{key:"deleteFeedback",value:function(){this.center&&(this.frontRoot.removeChild(this.center),this.center.parent=null,this.center.related=null,this.center.dispose(),this.center=null),this.radius&&(this.frontRoot.removeChild(this.radius),this.radius.parent=null,this.radius.related=null,this.radius.dispose(),this.radius=null),this.circle&&(this.frontRoot.removeChild(this.circle),this.circle.parent=null,this.circle.dispose(),this.circle=null),this.frontRoot.refresh()}},{key:"updateCurrentSelections",value:function(t){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"updateCurrentSelections",this).call(this,t),this.deleteFeedback(),t&&1==t.length){var e=t[0];this.createFeedback(e)}}},{key:"createFeedback",value:function(t){if(this.deleteFeedback(),3==t.fill){var e=t.worldMatrix,i=e.decompose(),n=i.scale.x,o=i.scale.y,r=t.radialGradient,a=e.multiplyWithVertexDatas(r.x,r.y),s=r.colorStops[0],c=r.colorStops[r.colorStops.length-1];this.circle=new Nn["CenterEllipse"]({x:a[0],y:a[1],width:2*r.radius*n,height:2*r.radius*o,borderWidth:1,fill:0,br:Wn.FEEDBACK_B_COLOR[0],bg:Wn.FEEDBACK_B_COLOR[1],bb:Wn.FEEDBACK_B_COLOR[2]}),this.frontRoot.addChild(this.circle),this.center=new Nn["CenterEllipse"]({x:a[0],y:a[1],width:15,height:15,r:s.color[0],g:s.color[1],b:s.color[2],a:s.color[3],br:Wn.FEEDBACK_B_COLOR[0],bg:Wn.FEEDBACK_B_COLOR[1],bb:Wn.FEEDBACK_B_COLOR[2]}),this.center.related=t,this.frontRoot.addChild(this.center),this.radius=new Nn["CenterEllipse"]({x:a[0]+r.radius*n,y:a[1],width:15,height:15,r:c.color[0],g:c.color[1],b:c.color[2],a:c.color[3],br:Wn.FEEDBACK_B_COLOR[0],bg:Wn.FEEDBACK_B_COLOR[1],bb:Wn.FEEDBACK_B_COLOR[2]}),this.radius.related=t,this.frontRoot.addChild(this.radius)}}},{key:"updateHover",value:function(t){this.hover&&this.hover.related==t||(this.hover&&(this.frontRoot.removeChild(this.hover),this.hover.parent=null,this.hover.dispose(),this.hover=null),t&&3==t.fill&&(this.hover=Wn.createDelegateFigure(t),this.hover.related=t,this.frontRoot.addChild(this.hover)),this.frontRoot.refresh())}},{key:"hoverMove",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"hoverMove",this).call(this,t,e,n);var o=this.mainRoot.findFigure(t,e),r=this.frontRoot.findFigure(t,e);r!=this.radius&&r!=this.center&&r!=this.circle?(o=o==this.mainRoot?null:o,this.updateHover(o)):this.updateHover()}},{key:"toolActived",value:function(t,e,n){Object(En["a"])(Object(Vn["a"])(i.prototype),"toolActived",this).call(this,t,e,n),this.updateHover();var o=this.frontRoot.findFigure(t,e);o!=this.radius&&o!=this.center?(o=this.mainRoot.findFigure(t,e),o=o==this.mainRoot?null:o,o?3==o.fill&&this.fireSelectionChangeEvent([o]):this.fireSelectionChangeEvent([])):this.moveFigure=o}},{key:"toolDeactived",value:function(t,e,n){if(Object(En["a"])(Object(Vn["a"])(i.prototype),"toolDeactived",this).call(this,t,e,n),(this.sx-this.ex!=0||this.sy-this.ey!=0)&&this.moveFigure&&this.center&&this.radius){var o=this.center.related,r=o.worldMatrix,a=r.decompose();r=r.invert();var s=r.multiplyWithVertexDatas(this.center.x,this.center.y),c=le["j"].distance(this.radius.x,this.radius.y,this.center.x,this.center.y);return{x:s[0],y:s[1],radius:c/a.scale.x}}}},{key:"activeMove",value:function(t,e,i,n,o,r,a,s,c){if(this.moveFigure==this.center&&(this.moveFigure.x+=a,this.moveFigure.y+=s,this.radius.x+=a,this.radius.y+=s,this.circle.x+=a,this.circle.y+=s),this.moveFigure==this.radius){var l=this.moveFigure.related,h=l.worldMatrix.decompose();this.radius.x+=a;var u=le["j"].distance(this.radius.x,this.radius.y,this.center.x,this.center.y);this.circle.width=2*u,this.circle.height=this.circle.width*h.scale.y/h.scale.x}this.frontRoot.refresh()}},{key:"reset",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"reset",this).call(this),this.moveFigure=null}},{key:"unUse",value:function(){Object(En["a"])(Object(Vn["a"])(i.prototype),"unUse",this).call(this),this.updateHover(),this.deleteFeedback()}}]),i}(Wn),Eo={class:"canvas-action-bar graybg"},Vo={class:"action-bar-main"},Go={class:"action-container"},Bo=Object(n["h"])("i",{class:"iconfont icon-trash"},null,-1),Lo=Object(n["h"])("div",{class:"action-container"},[Object(n["h"])("div",{class:"action-spliter"})],-1),Io={class:"action-container"},Ho=Object(n["h"])("i",{class:"iconfont icon-undo"},null,-1),No={class:"action-container"},zo=Object(n["h"])("i",{class:"iconfont icon-redo"},null,-1),Ko=Object(n["h"])("div",{class:"action-container"},[Object(n["h"])("div",{class:"action-spliter"})],-1),Wo={class:"action-container"},Uo=Object(n["h"])("i",{class:"iconfont icon-group"},null,-1),Jo={class:"action-container"},qo=Object(n["h"])("i",{class:"iconfont icon-ungroup"},null,-1),Xo=Object(n["h"])("div",{class:"action-container"},[Object(n["h"])("div",{class:"action-spliter"})],-1),Yo={class:"action-container"},$o=Object(n["h"])("i",{class:"iconfont icon-mask-clip larger-action-icon"},null,-1),Qo={class:"action-container"},Zo=Object(n["h"])("i",{class:"iconfont icon-mask-unclip larger-action-icon"},null,-1),tr=Object(n["h"])("div",{class:"action-container"},[Object(n["h"])("div",{class:"action-spliter"})],-1),er={class:"action-container"},ir=Object(n["h"])("i",{class:"iconfont icon-bring-front larger-action-icon"},null,-1),nr={class:"action-container"},or=Object(n["h"])("i",{class:"iconfont icon-send-back larger-action-icon"},null,-1),rr=Object(n["h"])("div",{class:"action-container"},[Object(n["h"])("div",{class:"action-spliter"})],-1),ar={class:"action-container"},sr=Object(n["h"])("i",{class:"iconfont icon-align-left more-larger-action-icon"},null,-1),cr={class:"action-container"},lr=Object(n["h"])("i",{class:"iconfont icon-align-center more-larger-action-icon"},null,-1),hr={class:"action-container"},ur=Object(n["h"])("i",{class:"iconfont icon-align-right more-larger-action-icon"},null,-1),dr={class:"action-container"},fr=Object(n["h"])("i",{class:"iconfont icon-align-top more-larger-action-icon"},null,-1),pr={class:"action-container"},vr=Object(n["h"])("i",{class:"iconfont icon-align-v-center more-larger-action-icon"},null,-1),br={class:"action-container"},gr=Object(n["h"])("i",{class:"iconfont icon-align-bottom more-larger-action-icon"},null,-1),yr=Object(n["h"])("div",{class:"action-container"},[Object(n["h"])("div",{class:"action-spliter"})],-1),mr={class:"action-container"},Or=Object(n["h"])("i",{class:"iconfont icon-distribute-left more-larger-action-icon"},null,-1),kr={class:"action-container"},jr=Object(n["h"])("i",{class:"iconfont icon-distribute-center more-larger-action-icon"},null,-1),wr={class:"action-container"},xr=Object(n["h"])("i",{class:"iconfont icon-distribute-right more-larger-action-icon"},null,-1),Sr={class:"action-container"},Cr=Object(n["h"])("i",{class:"iconfont icon-distribute-top more-larger-action-icon"},null,-1),_r={class:"action-container"},Pr=Object(n["h"])("i",{class:"iconfont icon-distribute-v-center more-larger-action-icon"},null,-1),Ar={class:"action-container"},Mr=Object(n["h"])("i",{class:"iconfont icon-distribute-bottom more-larger-action-icon"},null,-1),Fr={class:"action-bar-other"};function Rr(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",Eo,[Object(n["h"])("div",Vo,[Object(n["h"])("div",Go,[Object(n["h"])("button",{type:"button",class:["btn btn-primary btn-sm action-button",t.canDelete?"":"disabled"],onClick:e[1]||(e[1]=function(){return t.deleteSelections&&t.deleteSelections.apply(t,arguments)})},[Bo],2)]),Lo,Object(n["h"])("div",Io,[Object(n["h"])("button",{onClick:e[2]||(e[2]=function(){return t.undo&&t.undo.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",a.canUndo?"":"disabled"]},[Ho],2)]),Object(n["h"])("div",No,[Object(n["h"])("button",{onClick:e[3]||(e[3]=function(){return t.redo&&t.redo.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",a.canRedo?"":"disabled"]},[zo],2)]),Ko,Object(n["h"])("div",Wo,[Object(n["h"])("button",{onClick:e[4]||(e[4]=function(){return t.groupFigures&&t.groupFigures.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canGroup?"":"disabled"]},[Uo],2)]),Object(n["h"])("div",Jo,[Object(n["h"])("button",{onClick:e[5]||(e[5]=function(){return t.unGroupFigures&&t.unGroupFigures.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canUnGroup?"":"disabled"]},[qo],2)]),Xo,Object(n["h"])("div",Yo,[Object(n["h"])("button",{onClick:e[6]||(e[6]=function(){return t.clip&&t.clip.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canClip?"":"disabled"]},[$o],2)]),Object(n["h"])("div",Qo,[Object(n["h"])("button",{onClick:e[7]||(e[7]=function(){return t.unClip&&t.unClip.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canUnClip?"":"disabled"]},[Zo],2)]),tr,Object(n["h"])("div",er,[Object(n["h"])("button",{onClick:e[8]||(e[8]=function(){return t.bringFront&&t.bringFront.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canBringFront?"":"disabled"]},[ir],2)]),Object(n["h"])("div",nr,[Object(n["h"])("button",{onClick:e[9]||(e[9]=function(){return t.sendBack&&t.sendBack.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canSendBack?"":"disabled"]},[or],2)]),rr,Object(n["h"])("div",ar,[Object(n["h"])("button",{onClick:e[10]||(e[10]=function(){return t.alignLeft&&t.alignLeft.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canAlign?"":"disabled"]},[sr],2)]),Object(n["h"])("div",cr,[Object(n["h"])("button",{onClick:e[11]||(e[11]=function(e){return t.alignCenter(!0,"Align Center")}),type:"button",class:["btn btn-primary btn-sm action-button",t.canAlign?"":"disabled"]},[lr],2)]),Object(n["h"])("div",hr,[Object(n["h"])("button",{onClick:e[12]||(e[12]=function(){return t.alignRight&&t.alignRight.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canAlign?"":"disabled"]},[ur],2)]),Object(n["h"])("div",dr,[Object(n["h"])("button",{onClick:e[13]||(e[13]=function(){return t.alignTop&&t.alignTop.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canAlign?"":"disabled"]},[fr],2)]),Object(n["h"])("div",pr,[Object(n["h"])("button",{onClick:e[14]||(e[14]=function(e){return t.alignCenter(!1,"Align V-Center")}),type:"button",class:["btn btn-primary btn-sm action-button",t.canAlign?"":"disabled"]},[vr],2)]),Object(n["h"])("div",br,[Object(n["h"])("button",{onClick:e[15]||(e[15]=function(){return t.alignBottom&&t.alignBottom.apply(t,arguments)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canAlign?"":"disabled"]},[gr],2)]),yr,Object(n["h"])("div",mr,[Object(n["h"])("button",{onClick:e[16]||(e[16]=function(e){return t.distribute("left",!0)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canDistribute?"":"disabled"]},[Or],2)]),Object(n["h"])("div",kr,[Object(n["h"])("button",{onClick:e[17]||(e[17]=function(e){return t.distribute("center",!0)}),type:"button",class:["btn btn-primary btn-sm  action-button",t.canDistribute?"":"disabled"]},[jr],2)]),Object(n["h"])("div",wr,[Object(n["h"])("button",{onClick:e[18]||(e[18]=function(e){return t.distribute("right",!0)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canDistribute?"":"disabled"]},[xr],2)]),Object(n["h"])("div",Sr,[Object(n["h"])("button",{onClick:e[19]||(e[19]=function(e){return t.distribute("top",!1)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canDistribute?"":"disabled"]},[Cr],2)]),Object(n["h"])("div",_r,[Object(n["h"])("button",{onClick:e[20]||(e[20]=function(e){return t.distribute("center",!1)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canDistribute?"":"disabled"]},[Pr],2)]),Object(n["h"])("div",Ar,[Object(n["h"])("button",{onClick:e[21]||(e[21]=function(e){return t.distribute("bottom",!1)}),type:"button",class:["btn btn-primary btn-sm action-button",t.canDistribute?"":"disabled"]},[Mr],2)])]),Object(n["h"])("div",Fr,[Object(n["J"])(Object(n["h"])("input",{class:"form-control form-control-sm property-input","onUpdate:modelValue":e[22]||(e[22]=function(t){return a.mainScale=t}),onClick:e[23]||(e[23]=function(){return t.selectText&&t.selectText.apply(t,arguments)}),onKeypress:e[24]||(e[24]=Object(n["K"])((function(){return t.confirm&&t.confirm.apply(t,arguments)}),["enter"])),style:{width:"6em","text-align":"center"}},null,544),[[n["H"],a.hasRootFigure],[n["G"],a.mainScale,void 0,{lazy:!0}]])])])}var Tr=[Bt["l"],Bt["b"],Bt["c"],Bt["a"],Bt["d"],Bt["j"],Bt["e"],ht["a"]],Dr={name:"ActionBar",mixins:Tr,computed:{hasRootFigure:function(){return null!=this.document},mainScale:{get:function(){if(this.document){var t=this.document.zoom,e=(100*t).toFixed(2)+"%";return e}},set:function(t){if(this.document){var e=Number.parseFloat(t);if(isNaN(e))return;this.document.zoom=e/100,this.document.placeAtCenter(),this.document.refresh()}}},canRedo:function(){if(this.actionStack)return this.actionStack.canRedo()},canUndo:function(){if(this.actionStack)return this.actionStack.canUndo()}}};i("d008");Dr.render=Rr;var Er=Dr,Vr=i("a1e9"),Gr=[Bt["f"],Bt["i"],ht["a"]],Br={name:"Canvas",mixins:Gr,components:{ToolsBar:xe,ActionBar:Er},emits:["selection:change","tooltip:update"],mounted:function(){var t=this;this.tools={},this.createTools(this.frontRoot,this.mainRoot);var e=this.$refs["canvas-text-input"];e.addEventListener("focus",(function(e){t.canHandlerInput=!1})),e.addEventListener("blur",(function(e){t.canHandlerInput=!0})),e.addEventListener("keydown",(function(e){if("Escape"==e.key){var i=t.getCurrentTool();i instanceof Fo&&(i.activing=!1),t.textInputCompleted({source:t.getCurrentTool()})}}))},methods:{resourceDragover:function(t){this.mainRoot&&(t.preventDefault(),t.dataTransfer.dropEffect="link")},resourceDrop:function(t){if(this.mainRoot){var e=t.dataTransfer.getData("imageIndex"),i=this.images[e];if(!i)return;var n,o,r=Object(Vr["o"])(i.image),a=this.mainRoot.worldMatrix.clone().invert();n=i.width,n>=this.mainRoot.width&&(n=this.mainRoot.width,o=Math.floor(n*i.height/i.width)),o=i.height,o>=this.mainRoot.height&&(o=this.mainRoot.height,n=Math.floor(o*i.width/i.height));var s=a.multiplyWithVertexDatas(t.offsetX,t.offsetY),c=new le["f"]({x:s[0],y:s[1],width:n,height:o,srcWidth:i.width,srcHeight:i.height,image:r}),l=Xn["a"].newAddFigureAction(c,this.mainRoot,"Add Image Figure");this.excuteAction(l),this.mainRoot.refresh()}},textInputCompleted:function(t){var e=this.$refs["canvas-text-input"];e.blur(),this.showTextInput=!1;var i=e.value;if(e.value=null,t){var n=t.source;if(n&&n instanceof Fo&&i&&0!=i.length){if(n.create){var o=n.createNewText(i,this.textInput.x,this.textInput.y);o&&this.addShape({figure:o,name:"Text"})}if(n.edit){var r=n.editingFigure;if(r&&r.text!=i){var a=Xn["a"].newChangePropertyAction(r,"text",i);this.excuteAction(a)}}}}},createNewMainRoot:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Utitled";new Promise((function(o,r){try{i.loading=!0,i.disposeMainRoot();var a=new le["b"](i.mainSurface,i.frontRoot.width,i.frontRoot.height,{width:t,height:e,name:n});i.updateDocument(a),o()}catch(s){console.error(s),r(s)}})).catch((function(t){return console.error(t)})).finally((function(){return i.loading=!1}))},disposeMainRoot:function(){null!=this.mainRoot&&(this.cleanSelections(),this.mainRoot.off("addChild",this.figureAdded),this.mainRoot.off("removeChild",this.figureRemoved),this.mainRoot.dispose(),this.updateDocument(null),this.configToolsMainRoot(null),this.cleanActionStack()),this.mainRoot=null},configToolsMainRoot:function(t){for(var e in this.tools){var i=this.tools[e];i.mainRoot=t}},createTools:function(t,e,i){var n=this;function o(t){null==n.registedTools&&(n.registedTools=[]),n.tools[t.id]=t,t.on("transformFigure",n.figureTransform),t.on("complete",n.toolCompleted),t.on("active",n.toolActived),t.on("selectionChange",(function(t){n.selectionChange(t.event)})),t.on("toolSwitch",n.toolSwitch),t.on("updateTooltip",n.toolTipUpdated),t.on("cursorChange",n.cursorChange),t.on("showTextInput",n.displayTextInput),t.on("hideTextInput",n.textInputCompleted),n.registedTools.push(t)}o(new Zn(t,e,i)),o(new io(t,e,i)),o(new ro(t,e,i)),o(new so(t,e,i)),o(new ao(t,e,i)),o(new co(t,e,i)),o(new lo(t,e,i)),o(new ho(t,e,i)),o(new uo(t,e,i)),o(new fo(t,e,i)),o(new to(t,e,i)),o(new Ao(t,e,i)),o(new Fo(t,e,i)),o(new Ro(t,e,i)),o(new jo(t,e,i)),o(new _o(t,e,i)),o(new vo(t,e,i)),o(new go(t,e,i)),o(new bo(t,e,i)),o(new yo(t,e,i)),o(new Po(t,e,i)),o(new Mo(t,e,i)),o(new To(t,e,i)),o(new Do(t,e,i))},displayTextInput:function(t){var e=this,i=t.event;this.showTextInput=!0,this.canHandlerInput=!1,this.textInput.x=i.x,this.textInput.y=i.y,this.textInput.width=null==i.width?200:i.width,this.textInput.width=Math.min(200,this.textInput.width),this.textInput.height=null==i.height?50:i.height,this.textInput.height=Math.min(50,this.textInput.height),this.textInput.size=null==i.size?10:i.size;var n=i.value;this.$nextTick((function(){var t=e.$refs["canvas-text-input"];t.value=n,t.focus()}))},mousewheel:function(t){var e=this;t.altKey&&(this._zoomId&&cancelAnimationFrame(this._zoomId),this._zoomId=requestAnimationFrame((function(){t.altKey&&e.zoomMainRoot(t.deltaY<0)})))},mousedown:function(t){var e=this.$refs["canvas-text-input"];e.blur(),this.spacePressed&&this.mainRoot?this.toolSwitch({event:{id:"move-root",x:t.offsetX,y:t.offsetY}}):this.activeTool(this.getCurrentTool(),t.offsetX,t.offsetY,t)},mousemove:function(t){var e=this.getCurrentTool();e=null==this.currentActivedTool?e:this.currentActivedTool,e&&e.move(t.offsetX,t.offsetY,t)},deactiveCurrentTool:function(t){this.currentActivedTool&&this.currentActivedTool.deactive(t.offsetX,t.offsetY,t),this.currentActivedTool=null},mouseout:function(t){this.deactiveCurrentTool(t)},mouseover:function(t){this.deactiveCurrentTool(t)},mouseup:function(t){this.deactiveCurrentTool(t)},mouseleave:function(t){this.deactiveCurrentTool(t)},zoomMainRoot:function(t){if(this.mainRoot){var e=.05;t||(e*=-1),this.mainRoot.zoom+=e,this.mainRoot.refresh()}},getCurrentTool:function(){return this.tools[this.currentTool]},cursorChange:function(t){var e=this;this.$nextTick((function(){e.cursor=t.event.cursor}))},useTool:function(t,e){t.prepare(e),t.updateCurrentSelections(this.selections),this.cursor=t.defaultCursor},unUseTool:function(t,e){t.unUse(e),t.updateCurrentSelections(),this.cursor="default"},toolTipUpdated:function(t){var e=t.event.tooltip;this.$emit("tooltip:update",e)},activeTool:function(t,e,i,n){t&&(this.cursor=t.defaultCursor,t.active(e,i,n))},toolSwitch:function(t){var e,i=t.source,n=t.event;n.args&&(e=n.args.mouseEvent);var o=n.id,r=n.x,a=n.y,s=n.args,c=this.tools[o];c&&(i&&i.deactive(r,a,e),this.useTool(c,s),this.activeTool(c,r,a,e))},toolActived:function(t){this.currentActivedTool=t.source},isAddShapeTool:function(t){return"rect"==t||"ellipse"==t||"star"==t||"polygon"==t||"line"==t||"text"==t||"v-text"==t||"curve"==t},isTransformTool:function(t){return"rotate"==t||"e-resize"==t||"s-resize"==t||"n-resize"==t||"w-resize"==t||"se-resize"==t||"sw-resize"==t||"ne-resize"==t||"nw-resize"==t},processVertexSelectResult:function(t){var e=t.type;t.figure,t.point;if("move"==e){var i=Xn["a"].newTranslateAction(t.figures,t.dx,t.dy);this.excuteAction(i)}if("vertex"==e){var n=t.vertex,o=t.copy,r=new Yn["a"];n.x!=o.x&&r.add(Xn["a"].newChangePropertyAction(n,"x",o.x)),n.y!=o.y&&r.add(Xn["a"].newChangePropertyAction(n,"y",o.y)),n.type!=o.type&&r.add(Xn["a"].newChangePropertyAction(n,"type",o.type)),o.in!=n.in&&r.add(Xn["a"].newChangePropertyAction(n,"in",o.in)),o.out!=n.out&&r.add(Xn["a"].newChangePropertyAction(n,"out",o.out)),this.excuteAction(r)}},processPenResult:function(t){var e,i=t.type,n=t.figure,o=t.point,r=t.path,a=t.index;"add"==i&&(n?e=Xn["a"].newAddFigureAction(n,this.mainRoot,"路径图形"):o&&(e=Xn["a"].newInsertPointAction(o,r,a))),"close"==i&&(e=Xn["a"].newChangePropertyAction(r,"close",!0)),"minus"==i&&(e=Xn["a"].newDeletePointAction(r,a)),"change"==i&&(e=Xn["a"].newChangePropertyAction(o,"out",null)),e&&this.excuteAction(e),"close"==i&&this.selectionChange({type:"new",selections:[]}),this.mainRoot.refresh()},toolCompleted:function(t){var e=this,i=t.event,n=i.id,o=i.result;if(o&&this.isAddShapeTool(n)&&this.addShape(o,"添加图形"),o&&"pen"==n&&this.processPenResult(o),o&&"vertex-select"==n&&this.processVertexSelectResult(o),o&&"linearGradient"==n&&this.updateLinearGradient(o),o&&"radialGradient"==n&&this.updateRadicalGradient(o),"move"==n&&o){if("move"==o.type){var r=Xn["a"].newTranslateAction(o.figures,o.dx,o.dy);this.excuteAction(r)}if("new"==o.type){var a=new Yn["a"];o.figures.forEach((function(t){a.add(Xn["a"].newAddFigureAction(t,e.mainRoot,t.name))})),this.excuteAction(a)}}if(o&&this.isTransformTool(n)){var s=Xn["a"].newPoseChangeAction(o);this.excuteAction(s)}o&&"select"==n&&this.selectionChange(o),this.mainRoot.refresh();var c=this.getCurrentTool();this.currentActivedTool.id!=c.id&&(this.unUseTool(this.currentActivedTool),c.updateCurrentSelections(this.selections),this.cursor=c.defaultCursor),this.currentActivedTool=null},updateLinearGradient:function(t){var e=new Yn["a"];this.selections.forEach((function(i){e.add(Xn["a"].newChangePropertyAction(i.linearGradient,"x1",t.x1)),e.add(Xn["a"].newChangePropertyAction(i.linearGradient,"y1",t.y1)),e.add(Xn["a"].newChangePropertyAction(i.linearGradient,"x2",t.x2)),e.add(Xn["a"].newChangePropertyAction(i.linearGradient,"y2",t.y2))})),e.isEmpty||this.excuteAction(e)},updateRadicalGradient:function(t){var e=new Yn["a"];this.selections.forEach((function(i){e.add(Xn["a"].newChangePropertyAction(i.radialGradient,"x",t.x)),e.add(Xn["a"].newChangePropertyAction(i.radialGradient,"y",t.y)),e.add(Xn["a"].newChangePropertyAction(i.radialGradient,"radius",t.radius))})),e.isEmpty||this.excuteAction(e)},getTransformFeedback:function(){return null==this.transformFeedback&&(this.transformFeedback=new qn,this.frontRoot.addChild(this.transformFeedback),this.frontRoot.transformFeedback=this.transformFeedback),this.transformFeedback},addShape:function(t){if(t){var e=t.figure;if(e){var i=t.name,n=Xn["a"].newAddFigureAction(e,this.mainRoot,i);this.excuteAction(n)}}},vertexAdded:function(t){},vertexRemoved:function(t){},figureAdded:function(t){var e=t.event.child;this.selectionChange({type:"new",selections:[e]})},figureRemoved:function(t){var e=t.event.child;this.removeSelection(e)},selectionChange:function(t){t&&("new"==t.type&&this.updateSelections(t.selections),"plus"==t.type&&this.concatSelections(t.selections),"minus"==t.type&&this.removeSelections(t.selections))},toolUpdate:function(t){this.currentTool=t}},data:function(){return{cursor:"auto",currentTool:null,loading:!1,textInput:{x:0,y:0,width:0,height:0,size:10},showTextInput:!1}},computed:{mainRoot:function(){return this.document},textInputStyle:function(){return{left:"".concat(this.textInput.x,"px"),top:"".concat(this.textInput.y,"px"),width:"".concat(this.textInput.width,"px"),height:"".concat(this.textInput.height,"px"),"font-size":"".concat(this.textInput.size,"px")}},canvasBGColor:function(){return this.mainRoot?"graybg":"blackbg"},currentSelections:function(){return this.selections}},watch:{currentTool:function(t,e){if(t!=e){var i=this.tools[t],n=this.tools[e];n&&this.unUseTool(n),i&&this.useTool(i)}},document:function(t,e){t.on("addChild",this.figureAdded),t.on("removeChild",this.figureRemoved),this.updateDocument(t),this.configToolsMainRoot(t),t.surface=this.mainSurface,t.screanWidth=this.frontRoot.width,t.screanHeight=this.frontRoot.height,t.init(),this.currentTool="select",this.$el.focus(),this.mainRoot.refresh()},currentSelections:{handler:function(t,e){var i=this.getCurrentTool();i&&i.updateCurrentSelections(t),this.mainRoot&&this.mainRoot.refresh(),this.frontRoot.refresh()},deep:!0},actionStack:{handler:function(){var t=this.getCurrentTool();t&&t.updateCurrentSelections(this.selections),this.frontRoot.refresh(),this.mainRoot&&this.mainRoot.refresh()},deep:!0}},props:{}};i("bbaa");Br.render=Fn;var Lr=Br,Ir={class:"document-root blackbg"},Hr=Object(n["h"])("div",{class:"document-header"},[Object(n["h"])("small",null,[Object(n["h"])("i",{class:"iconfont icon-document",style:{"margin-right":"5px"}}),Object(n["h"])("span",{style:{"font-weight":"bold"}},"Shape Structure")])],-1),Nr=Object(n["h"])("div",{style:{"background-color":"#777777",height:"1px","margin-top":"5px","margin-bottom":"10px"}},null,-1),zr={class:"document-content"};function Kr(t,e,i,o,r,a){var s=Object(n["w"])("tree-node");return Object(n["r"])(),Object(n["d"])("div",Ir,[Hr,Nr,Object(n["h"])("div",zr,[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(t.documentChildren,(function(t){return Object(n["r"])(),Object(n["d"])(s,{key:t.id,model:t},null,8,["model"])})),128))])])}var Wr={key:0,class:"tree-node"},Ur=Object(n["h"])("i",{class:"iconfont icon-arrow-right",style:{"font-size":"1em"}},null,-1),Jr={key:1,style:{width:"1.4em"}},qr={class:"tree-node-contents",style:"padding-left:2em"},Xr={key:0};function Yr(t,e,i,o,r,a){var s=Object(n["w"])("tree-node",!0);return Object(n["r"])(),Object(n["d"])("div",null,[null!=i.model?(Object(n["r"])(),Object(n["d"])("div",Wr,[Object(n["h"])("div",{class:"tree-node-label",onClick:e[1]||(e[1]=function(){return a.expand&&a.expand.apply(a,arguments)})},[a.hasChildren?(Object(n["r"])(),Object(n["d"])("div",{key:0,id:"collapse-icon-"+i.model.id,class:["collapse-icon",a.collapsed?"collapse-icon-rotate":""]},[Ur],10,["id"])):(Object(n["r"])(),Object(n["d"])("div",Jr)),Object(n["h"])("i",{class:["iconfont node-icon",a.nodeIcon]},null,2),Object(n["h"])("small",null,Object(n["A"])(i.model.name),1)]),Object(n["h"])("div",qr,[a.collapsed?(Object(n["r"])(),Object(n["d"])("div",Xr,[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(a.children,(function(t){return Object(n["r"])(),Object(n["d"])(s,{key:t.id,model:t},null,8,["model"])})),128))])):Object(n["e"])("",!0)])])):Object(n["e"])("",!0)])}var $r={name:"TreeNode",data:function(){return{iconWidth:0}},updated:function(){if(this.model){var t=this.$el,e=t.querySelector("#collapse-icon-"+this.model.id);null!=e&&(this.iconWidth=e.clientWidth)}},computed:{collapsed:function(){return!!this.model&&(null==this.model.collapsed&&(this.model.collapsed=!0),this.model.collapsed)},nodeIcon:function(){return mn["a"].objectIcon(this.model)},children:function(){if(this.hasChildren)return this.model.children},hasChildren:function(){if(this.model&&this.model.children)return this.model.children.length>0}},methods:{expand:function(t){this.hasChildren&&(null==this.model.collapsed?this.model.collapsed=!0:this.model.collapsed=!this.model.collapsed)}},props:{model:{type:Object}}};i("f1b5");$r.render=Yr;var Qr=$r,Zr={mixins:[ht["a"]],components:{TreeNode:Qr},name:"Document"};i("f12d");Zr.render=Kr;var ta=Zr,ea={class:"resource-root blackbg"},ia=Object(n["h"])("div",{class:"resource-header"},[Object(n["h"])("small",null,[Object(n["h"])("i",{class:"iconfont icon-document",style:{"margin-right":"5px"}}),Object(n["h"])("span",{style:{"font-weight":"bold"}},"Resources")])],-1),na=Object(n["h"])("div",{style:{"background-color":"#777777",height:"1px","margin-top":"5px","margin-bottom":"10px"}},null,-1),oa={class:"resource-content"};function ra(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",ea,[ia,na,Object(n["h"])("div",oa,[(Object(n["r"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(t.images,(function(t,i){return Object(n["r"])(),Object(n["d"])("div",{id:"img_res_"+i,key:t.name,title:t.name,style:{width:"100%","white-space":"nowrap","text-align":"left","text-overflow":"ellipsis"},draggable:"true",onDragstart:e[1]||(e[1]=function(){return a.dragStart&&a.dragStart.apply(a,arguments)}),class:"image-resource-item"},[Object(n["h"])("img",{class:"preview-image",src:t.dataUrl,style:{"margin-right":"5px"}},null,8,["src"]),Object(n["h"])("small",null,[Object(n["h"])("label",null,Object(n["A"])(t.name),1)])],40,["id","title"])})),128))])])}var aa={mixins:[ht["a"]],methods:{dragStart:function(t){var e=t.target.id;if(e){var i=e.substring(8),n=this.images[i];n&&(t.dataTransfer.setData("imageIndex",i),t.dataTransfer.dropEffect="link")}}}};i("320e");aa.render=ra;var sa=aa,ca={name:"Main",components:{ToolsBar:xe,PropertyBar:wn,Canvas:Lr,Document:ta,ResourcePanel:sa},emits:["tooltip:update"],methods:{createNewDocument:function(t){"create"==t.type&&this.$refs["canvas"].createNewMainRoot(t.width,t.height,t.name)},tooltipUpdate:function(t){this.$emit("tooltip:update",t)},selectionChange:function(t){this.selections=t.selections},propertyChange:function(t){this.$refs["canvas"].changeFigureProperty(t)}},data:function(){return{currentTool:"select",selections:[]}}};i("bcd1");ca.render=Oe;var la=ca,ha={id:"footer",class:"bluebg"};function ua(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",ha,[Object(n["h"])("div",null,[Object(n["h"])("small",null,Object(n["A"])(i.tooltip),1)]),Object(n["h"])("div",null,[e[1]||(Object(n["y"])(-1),e[1]=Object(n["h"])("small",null,Object(n["A"])(t.$root.$VERSION),1),Object(n["y"])(1),e[1])])])}var da={name:"Footer",props:{tooltip:{type:String,default:"NONE"}}};i("6bef");da.render=ua;var fa=da,pa={name:"App",created:function(){this.$VERSION="0.4.0",this.$CANVASKIT_PATH="https://unpkg.com/canvaskit-wasm@0.26.0/bin/",this.$DEFAULTFONTS_PATH="https://unpkg.com/mulin-default-fonts@0.0.1/fonts/",this.$GITHUB="https://github.com/eclipseglory/mulin"},mounted:function(){var t=this,e=this.$el,i=e.querySelector("#main-loader");i&&(i.addEventListener("transitionend",(function(e){if("main-loader"==e.target.id&&(t.showLoader=!1),"progress-bar"==e.target.id&&t.currentProgress>=t.totalProgress){for(var i in le["a"].fontCache)t.$store.commit("addFontFamily",i);t.initCompleted=!0}})),i.addEventListener("animationend",(function(e){"main-loader"==e.target.id&&(t.showLoader=!1),"progress-bar"==e.target.id&&t.currentProgress>=t.totalProgress&&(t.initCompleted=!0)})));var n=le["a"].DEFAULT_FONTS.length;n+=1,this.totalProgress=n,this.loadingMessage="Loading CanvasKit WASM...",le["a"].initCanvasKit(this.$CANVASKIT_PATH).then((function(e){t.currentProgress++,t.loadingMessage="Loading Fonts...",le["a"].DEFAULT_FONTS.forEach((function(e){var i=t.$DEFAULTFONTS_PATH+e.path;i?fetch(i).then((function(t){return t.arrayBuffer()})).then((function(t){return le["a"].loadFont(t,e.descriptors)})).finally((function(){t.currentProgress++})):t.currentProgress++}))}))},methods:{imageImported:function(t){var e=this;t.forEach((function(t){e.$store.commit("addImage",t)}))},tooltipUpdate:function(t){this.tooltip=t},newDocument:function(t){var e=new le["b"](null,0,0,{width:t.width,height:t.height,name:t.name});this.updateDoc(e)},updateDoc:function(t){this.$store.commit("updateDocument",t)},createSVG:function(t){this.$refs["main"].createSVG()}},computed:{progressWidth:function(){return 0==this.totalProgress?"0%":(this.currentProgress/this.totalProgress*100).toFixed(2)+"%"}},data:function(){return{initCompleted:!1,showLoader:!0,tooltip:"",loadingMessage:"Loading",currentProgress:0,totalProgress:1/0}},components:{Header:fe,Main:la,Footer:fa}};i("2b62");pa.render=c;var va=pa,ba=i("6c02"),ga=i("cf05"),ya=i.n(ga),ma={class:"home"},Oa=Object(n["h"])("img",{alt:"Vue logo",src:ya.a},null,-1);function ka(t,e,i,o,r,a){return Object(n["r"])(),Object(n["d"])("div",ma,[Oa])}var ja={name:"Home"};ja.render=ka;var wa=ja,xa=[{path:"/",name:"Home",component:wa},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],Sa=Object(ba["a"])({history:Object(ba["b"])(""),routes:xa}),Ca=Sa,_a=i("5502"),Pa=i("3f6e"),Aa={document:null,status:"",selections:[],actionStack:new Pa["a"],defaultFont:{family:"Arial",size:10},images:[],fonts:[]},Ma={addFontFamily:function(t,e){t.fonts.push(e)},addImage:function(t,e){t.images.push(e)},removeImage:function(t){var e=Aa.images.indexOf(t);-1!=e&&Aa.images.splice(e,1)},updateDocument:function(t,e){t.document=e},updateStatus:function(t,e){t.status=e},concatSelections:function(t,e){t.selections&&e instanceof Array&&(t.selections=t.selections.concat(e))},updateSelections:function(t,e){t.selections=e},addSelection:function(t,e){t.selections&&e&&t.selections.push(e)},removeSelection:function(t,e){if(t.selections&&e){var i=t.selections.indexOf(e);-1!=i&&t.selections.splice(i,1)}},cleanSelections:function(t){t.selections&&t.selections.splice(0)},sortSelections:function(t){t.selections&&t.document&&t.selections.sort((function(e,i){if(e instanceof le["g"]||i instanceof le["g"])return 0;t.document.indexOfChild(i),t.document.indexOfChild(e)}))}},Fa={documentIsEmpty:function(t){return null==t.document||0==t.document.children.length},isEmptySelections:function(t){return null==t.selections||0==t.selections.length},images:function(t){return t.images},fonts:function(t){return t.fonts}},Ra={excuteAction:function(t,e){t.commit;var i=t.state;i.actionStack.excute(e)},redo:function(t){t.commit;var e=t.state;e.actionStack.redo()},undo:function(t){t.commit;var e=t.state;e.actionStack.undo()},cleanActionStack:function(t){t.commit;var e=t.state;e.actionStack.dispose()},addSelection:function(t,e){var i=t.commit;t.state;i("addSelection",e),i("sortSelections")},removeSelection:function(t,e){var i=t.commit;t.state;i("removeSelection",e),i("sortSelections")},removeSelections:function(t,e){var i=t.commit;t.state;e.forEach((function(t){i("removeSelection",Ra)})),i("sortSelections")},cleanSelections:function(t){var e=t.commit;t.state;e("cleanSelections")},concatSelections:function(t,e){var i=t.commit;t.state;i("concatSelections",e),i("sortSelections")}},Ta=Object(_a["a"])({state:Aa,mutations:Ma,getters:Fa,actions:Ra});Object(n["c"])(va).use(Ta).use(Ca).mount("#app")},"587d":function(t,e,i){},"5ce9":function(t,e,i){},"63fb":function(t,e,i){},"6bef":function(t,e,i){"use strict";i("2f19")},"6ed4":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("d4ec"),o=i("bee2"),r=i("262e"),a=i("2caf"),s=i("4e40"),c=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n["a"])(this,i),t=e.call(this),t.x=null==o?0:o,t.y=null==r?0:r,t._type=null==a?0:a,t.parent,t}return Object(o["a"])(i,[{key:"type",get:function(){return this._type},set:function(t){this._type!=t&&(this._type=t)}},{key:"fireDirty",value:function(){this.fireEvent("dirty",!0)}},{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.fireDirty())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.fireDirty())}},{key:"in",get:function(){return this._in},set:function(t){t!=this._in&&(this._in=t,this.fireDirty())}},{key:"out",get:function(){return this._out},set:function(t){t!=this._out&&(this._out=t,this.fireDirty())}},{key:"inX",get:function(){if(this.in)return this.in[0]},set:function(t){null==this._in&&(this._in=[this.x,this.y]),t!=this._in[0]&&(this._in[0]=t,this.fireDirty())}},{key:"inY",get:function(){if(this.in)return this.in[1]},set:function(t){null==this._in&&(this._in=[this.x,this.y]),t!=this._in[1]&&(this._in[1]=t,this.fireDirty())}},{key:"outX",get:function(){if(this.out)return this.out[0]},set:function(t){null==this._out&&(this._out=[this.x,this.y]),t!=this._out[0]&&(this._out[0]=t,this.fireDirty())}},{key:"outY",get:function(){if(this.out)return this.out[1]},set:function(t){null==this._out&&(this._out=[this.x,this.y]),t!=this._out[1]&&(this._out[1]=t,this.fireDirty())}},{key:"copyFrom",value:function(t){this.equals(t)||(this.type=t.type,this.x=t.x,this.y=t.y,t.in?(this.inX=t.inX,this.inY=t.inY):this._in=null,t.out?(this.outX=t.outX,this.outY=t.outY):this._out=null)}},{key:"clone",value:function(){var t=new i;return t.copyFrom(this),t}},{key:"equals",value:function(t){if(!t)return!1;if(t==this)return!0;if(t.x!=this.x||t.y!=this.y)return!1;if(!(t.in&&this.in||!t.in&&!this.in)||!(t.out&&this.out||!t.out&&!this.out))return!1;if(t.in&&this.in){if(t.inX!=this.inX)return!1;if(t.inY!=this.inY)return!1}if(t.out&&this.out){if(t.outX!=this.outX)return!1;if(t.outY!=this.outY)return!1}return!0}}]),i}(s["a"])},"760e":function(t,e,i){"use strict";i.d(e,"a",(function(){return O}));var n=i("1da1"),o=i("d4ec"),r=i("bee2"),a=i("1341"),s=i("45eb"),c=i("7e84"),l=i("262e"),h=i("2caf"),u=(i("96cf"),i("b0c0"),i("cb29"),i("159b"),i("99af"),i("90a2")),d=(i("a434"),i("f106")),f="   ",p=function(t){Object(l["a"])(i,t);var e=Object(h["a"])(i);function i(t){var n;return Object(o["a"])(this,i),n=e.call(this,t),n._id=u["a"].newID(),n.children=[],n.showChildren=!0,n.visible=!0,n.clip=!1,n}return Object(r["a"])(i,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"isVisible",get:function(){return this.visible&&0!=this.width&&0!=this.height&&0!=this.scaley&&0!=this.scalex}},{key:"draw",value:function(t){this.isVisible&&(t.save(),this.beforeDrawSelf(),this.beforeTransform(),this.transform(t),this.clip&&this.applyClip(t),this.drawSelf(t),this.beforeDrawChildren(),this.drawChildren(t),t.restore())}},{key:"applyClip",value:function(t){}},{key:"beforeTransform",value:function(){}},{key:"transform",value:function(t){t.concat(this.matrix.data)}},{key:"beforeDrawSelf",value:function(){}},{key:"drawSelf",value:function(t){}},{key:"beforeDrawChildren",value:function(){}},{key:"drawChildren",value:function(t){this.showChildren&&this.children.forEach((function(e){e.draw(t)}))}},{key:"addChild",value:function(t){return this.insertChild(t,this.children.length)}},{key:"insertChild",value:function(t,e){if(-1==e||!t)return!1;if(null==t.parent){if(e>=this.children.length)return this.children.push(t),t.parent=this,this.fireEvent("addChild",{parent:this,child:t,index:this.children.length-1}),!0;this.children.push(t),t.parent=this;for(var i=this.children.length-1;i>e;i--){var n=this.children[i];this.children[i]=this.children[i-1],this.children[i-1]=n}return this.fireEvent("addChild",{parent:this,child:t,index:e}),!0}console.warn("cannot add child because it has a parent,please delete it first")}},{key:"indexOfChild",value:function(t){return this.children.indexOf(t)}},{key:"removeChild",value:function(t){if(t){var e=this.indexOfChild(t);return this.removeAt(e)}}},{key:"removeAt",value:function(t){if(-1!=t){var e=this.children.splice(t,1);if(e&&e[0]){var i=e[0];return i.parent=null,this.fireEvent("removeChild",{parent:this,child:i}),i}}}},{key:"moveIndex",value:function(t,e){if(t==e||t<0||t>this.children.length-1||e<0||e>this.children.length-1)console.warn("invalidate from/to index value :".concat(t," -> ").concat(e));else{if(t>e)for(var i=t;i>e;i--){var n=this.children[t-1];this.children[t-1]=this.children[t],this.children[t]=n}if(t<e)for(var o=t;o<e;o++){var r=this.children[t];this.children[t]=this.children[t+1],this.children[t+1]=r}}}},{key:"dispose",value:function(){this.isDisposed||(this.children&&(this.children.forEach((function(t){t.dispose()})),this.children.length=0),Object(s["a"])(Object(c["a"])(i.prototype),"dispose",this).call(this))}},{key:"clone",value:function(){var t=Object(s["a"])(Object(c["a"])(i.prototype),"clone",this).call(this);if(t)return t.visible=this.visible,t.clip=this.clip,this.children&&this.children.forEach((function(e){var i=e.clone();i&&t.addChild(i)})),t}},{key:"getJsonObjectName",value:function(){return"drawable"}},{key:"toJsonObject",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])(Object(c["a"])(i.prototype),"toJsonObject",this).call(this);case 2:if(e=t.sent,e.visible=this.visible,e.id=this.id,e.clip=this.clip,e.showChildren=this.showChildren,!this.children||0==this.children.length){t.next=20;break}e.children=[],n=0;case 10:if(!(n<this.children.length)){t.next=20;break}return o=this.children[n],t.t0=e.children,t.next=15,o.toJsonObject();case 15:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 17:n++,t.next=10;break;case 20:return t.abrupt("return",e);case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGCDATA",value:function(){}},{key:"getSVGDefs",value:function(){}},{key:"getSVGAppendContents",value:function(){}},{key:"getSVGString",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,n,o,r,a,s,c,l,h,u,d,p,v,b=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=b.length>0&&void 0!==b[0]?b[0]:f,i=b.length>1&&void 0!==b[1]?b[1]:[],n="<".concat(this.getSVGLabelName(),' id="').concat(this.id,'"'),o=this.getSVGPositionString(),o&&(n+=" ".concat(o)),r=this.getSVGDimensionString(),r&&(n+=" ".concat(r)),a=this.getSVGTransformString(),a&&(n+=' transform="'.concat(a,'"')),s=this.getSVGExtensionString(),s&&(n+=" ".concat(s)),c=this.getSVGCDATA(),l=this.getSVGDefs(),l&&i&&i.push(l),!(this.children&&this.children.length>0||null!=c)){t.next=40;break}if(n+=">",c&&(n+="\n".concat(e).concat(c)),!(this.children&&this.children.length>0)){t.next=34;break}h=0;case 19:if(!(h<this.children.length)){t.next=34;break}return u=this.children[h],t.prev=21,t.next=24,u.getSVGString(e+f,i);case 24:d=t.sent,d&&(n+="\n".concat(e).concat(d)),t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](21),console.warn(t.t0);case 31:h++,t.next=19;break;case 34:return p=this.getSVGAppendContents(i),p&&(n+="\n".concat(e).concat(p)),n+="\n</".concat(this.getSVGLabelName(),">"),t.abrupt("return",n);case 40:return v=this.getSVGAppendContents(i),v?(n+="\n".concat(e).concat(v),n+="\n</".concat(this.getSVGLabelName(),">")):n+="/>",t.abrupt("return",n);case 43:case"end":return t.stop()}}),t,this,[[21,28]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSVGTransformString",value:function(){var t="translate(".concat(this.x," ").concat(this.y,")");return 0!=this.rotation&&(t?t+=" ":t="",t+="rotate(".concat(180*this.rotation/Math.PI,")")),1==this.scalex&&1==this.scaley||(t?t+=" ":t="",t+="scale(".concat(this.scalex," ").concat(this.scaley,")")),0!=this.skewx&&(t?t+=" ":t="",t+="skewX(".concat(180*this.skewx/Math.PI,")")),0!=this.skewy&&(t?t+=" ":t="",t+="skewY(".concat(180*this.skewy/Math.PI,")")),t}},{key:"getSVGPositionString",value:function(){}},{key:"getSVGDimensionString",value:function(){return'width="'.concat(this.width,'" height="').concat(this.height,'"')}},{key:"getSVGLabelName",value:function(){return""}},{key:"getSVGExtensionString",value:function(){}}]),i}(d["a"]),v=i("825c"),b=i("9799"),g=i("7d5a"),y=(i("d427"),i("0d3f")),m=i("f8ec"),O=function(t){Object(l["a"])(i,t);var e=Object(h["a"])(i);function i(t){var n;return Object(o["a"])(this,i),n=e.call(this,t),n.name=null==t||null==t.name?"Figure":t.name,n.useQuadTree=!1,n._paint=u["a"].newPaint(),n.quadtree=new y["a"]({left:0,top:0,right:n.width,bottom:n.height}),n.blendMode=null==t||null==t.blendMode?u["a"].BlendMode.SrcOver:t.blendMode,n.alpha=null==t||null==t.alpha?1:t.alpha,n.fill=null==t||null==t.fill?1:t.fill,n.showBorder=null==t||null==t.showBorder?1:t.showBorder,n.borderWidth=null==t||null==t.borderWidth?1:t.borderWidth,n.dashOffset=null==t||null==t.dashOffset?0:t.dashOffset,n.dashLength=null==t||null==t.dashLength?0:t.dashLength,n.r=null==t||null==t.r?255:t.r,n.g=null==t||null==t.g?255:t.g,n.b=null==t||null==t.b?255:t.b,n.a=null==t||null==t.a?1:t.a,n.br=null==t||null==t.br?0:t.br,n.bg=null==t||null==t.bg?0:t.bg,n.bb=null==t||null==t.bb?0:t.bb,n.ba=null==t||null==t.ba?1:t.ba,n}return Object(r["a"])(i,[{key:"getPathEffect",value:function(){return this._pathEffect||this.dashLength>0&&(this._pathEffect=u["a"].CanvasKit.PathEffect.MakeDash([this.dashLength,this.dashLength],this.dashOffset)),this._pathEffect}},{key:"deletePathEffect",value:function(){this._pathEffect&&(this.getTarget()._pathEffect.delete(),this._pathEffect=null)}},{key:"dashOffset",get:function(){return this._dashOffset},set:function(t){t!=this._dashOffset&&(this._dashOffset=t,this.deletePathEffect())}},{key:"dashLength",get:function(){return this._dashLength},set:function(t){t!=this._dashLength&&(this._dashLength=t,this.deletePathEffect())}},{key:"blendMode",get:function(){if(this._paint)return this.getTarget()._paint.getBlendMode()},set:function(t){this._paint&&this.getTarget()._paint.setBlendMode(t)}},{key:"borderLinearGradient",get:function(){if(null==this._borderLinearGradient){var t=this.bounds;this._borderLinearGradient=new b["a"]({x1:t.left,y:0,x2:t.right,y2:0}),this._borderLinearGradient.addColorStop(new v["a"](this.br,this.bb,this.bg,this.ba,0)),this._borderLinearGradient.addColorStop(new v["a"](0,0,0,1,1))}return this._borderLinearGradient},set:function(t){this._borderLinearGradient=t}},{key:"borderRadialGradient",get:function(){if(null==this._borderRadicalGradient){var t=this.bounds,e=(t.left+t.right)/2,i=(t.top+t.bottom)/2,n=m["a"].distance(e,i,t.left,t.top);this._borderRadicalGradient=new g["a"](e,i,n),this._borderRadicalGradient.addColorStop(new v["a"](this.br,this.bb,this.bg,this.ba,0)),this._borderRadicalGradient.addColorStop(new v["a"](0,0,0,1,1))}return this._borderRadicalGradient},set:function(t){this._borderRadicalGradient=t}},{key:"linearGradient",get:function(){if(null==this._linearGradient){var t=this.bounds;this._linearGradient=new b["a"]({x1:t.left,y:0,x2:t.right,y2:0}),this._linearGradient.addColorStop(new v["a"](this.r,this.b,this.g,this.a,0)),this._linearGradient.addColorStop(new v["a"](0,0,0,1,1))}return this._linearGradient},set:function(t){this._linearGradient=t}},{key:"radialGradient",get:function(){if(null==this._radicalGradient){var t=this.bounds,e=(t.left+t.right)/2,i=(t.top+t.bottom)/2,n=m["a"].distance(e,i,t.left,t.top);this._radicalGradient=new g["a"](e,i,n),this._radicalGradient.addColorStop(new v["a"](this.r,this.b,this.g,this.a,0)),this._radicalGradient.addColorStop(new v["a"](0,0,0,1,1))}return this._radicalGradient},set:function(t){this._radicalGradient=t}},{key:"width",get:function(){return Object(s["a"])(Object(c["a"])(i.prototype),"width",this)},set:function(t){this.width!=t&&(Object(a["a"])(Object(c["a"])(i.prototype),"width",t,this,!0),this._recreateQuadTree())}},{key:"height",get:function(){return Object(s["a"])(Object(c["a"])(i.prototype),"height",this)},set:function(t){this.height!=t&&(Object(a["a"])(Object(c["a"])(i.prototype),"height",t,this,!0),this._recreateQuadTree())}},{key:"insertChildQuadNode",value:function(t){this.useQuadTree&&(this.quadtree||(this.quadtree=new y["a"]({left:0,top:0,right:this.width,bottom:this.height})),this.quadtree.insert(t.getQuadTreeNode()),console.log("新加入quadnode",this.quadtree,this.quadtree.nodes.length))}},{key:"matrix",get:function(){return this._transformDirty&&this.updateRelatedQuadTree(),Object(s["a"])(Object(c["a"])(i.prototype),"matrix",this)}},{key:"updateRelatedQuadTree",value:function(){this._quadTreeNode&&this.parent.useQuadTree&&(console.log("位置改变更新quadnode",this._quadTreeNode),y["a"].deleteNodeForce(this._quadTreeNode),console.log("强制删除quadnode",this.parent.quadtree),this._quadTreeNode=null,this.parent&&this.parent.insertChildQuadNode(this))}},{key:"_recreateQuadTree",value:function(){var t=this;if(this.useQuadTree){null==this._reQT&&(this._reQT=0),this._reQT++;var e=this._reQT;e==this._reQT&&(this.quadtree&&this.quadtree.dispose(),this.quadtree=new y["a"]({left:0,top:0,right:this.width,bottom:this.height}),this.children.forEach((function(e){var i=e.getQuadTreeNode(t.matrix);i&&t.quadtree.insert(i)})),this._reQT=null)}}},{key:"getQuadTreeNode",value:function(){if(!this._quadTreeNode){var t=this.worldBounds;this._quadTreeNode={bounds:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},value:this}}return this._quadTreeNode}},{key:"insertChild",value:function(t,e){var n=Object(s["a"])(Object(c["a"])(i.prototype),"insertChild",this).call(this,t,e);return n?(this.parent?this.parent.recordAdd(t):this.recordAdd(t),this.insertChildQuadNode(t),n):n}},{key:"recordAdd",value:function(t){}},{key:"recordRemove",value:function(t){}},{key:"removeChild",value:function(t){var e=Object(s["a"])(Object(c["a"])(i.prototype),"removeChild",this).call(this,t);if(e)return this.parent?this.parent.recordRemove(t):this.recordRemove(t),t&&this.quadtree&&this.useQuadTree&&(y["a"].deleteNodeForce(t._quadTreeNode),console.log("删除quadnode",t._quadTreeNode)),e}},{key:"findChildren",value:function(t){var e=this.worldMatrix.clone();e.invert();try{var i=m["a"].transformToRelatedBounds(t,e);if(this.quadtree&&this.useQuadTree){var n=this.quadtree.findNodes(i);return n}var o=[];return this.children.forEach((function(e){m["a"].isContacted(e.worldBounds,t)&&o.push(e)})),o}catch(r){console.error(r)}}},{key:"findFigure",value:function(t,e){if(!this.isVisible)return null;var i=this.worldMatrix.clone(),n=i.invert().multiplyWithVertexDatas(t,e);if(this.containsPoint(n[0],n[1],!1)){if(this.quadtree&&this.useQuadTree){var o=this.quadtree.findSingleNode(n[0],n[1]);if(o){var r=o.value;return r.findFigure(t,e)}return this}if(this.children)for(var a=this.children.length-1;a>=0;a--){var s=this.children[a],c=s.findFigure(t,e);if(c)return c}return this}return null}},{key:"drawSelf",value:function(t){Object(s["a"])(Object(c["a"])(i.prototype),"drawSelf",this).call(this,t)}},{key:"getJsonObjectName",value:function(){return"figure"}},{key:"toJsonObject",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])(Object(c["a"])(i.prototype),"toJsonObject",this).call(this);case 2:return e=t.sent,e.name=null==this.name?e.name:this.name,e.alpha=this.alpha,e.r=this.r,e.b=this.b,e.g=this.g,e.a=this.a,e.fill=this.fill,e.showBorder=this.showBorder,0!=this.showBoder&&(e.border={},n=e.border,n.dashLength=this.dashLength,n.dashOffset=this.dashOffset,n.r=this.br,n.b=this.bb,n.g=this.bg,n.a=this.ba),t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"deletePaint",value:function(){this._paint&&(this.getTarget()._paint.delete(),this._paint=null)}},{key:"dispose",value:function(){this.isDisposed||(this.quadtree&&this.quadtree.dispose(),this._radicalGradient&&(this._radicalGradient.dispose(),this._radicalGradient=null),this._linearGradient&&(this._linearGradient.dispose(),this._linearGradient=null),this._borderLinearGradient&&(this._borderLinearGradient.dispose(),this._borderLinearGradient=null),this._borderRadicalGradient&&(this._borderRadicalGradient.dispose(),this._borderRadicalGradient=null),this.deletePaint(),this.deletePathEffect(),Object(s["a"])(Object(c["a"])(i.prototype),"dispose",this).call(this))}},{key:"getSVGExtensionString",value:function(){var t="";return this.fill>0?(1==this.fill&&(t+=' fill="'.concat(m["a"].transformRGBToHex(this.r,this.g,this.b),'"'),1!=this.a&&(t+=' fill-opacity:"'.concat(this.a,'"'))),2==this.fill&&(t+=' fill="url(#fill-linear-gradient-'.concat(this.id,')"')),3==this.fill&&(t+=' fill="url(#fill-radical-gradient-'.concat(this.id,')"'))):t='fill="none"',this.showBorder>0?(0!=this.dashLength&&(t+=' stroke-dasharray="'.concat(this.dashLength," ").concat(this.dashLength,'"')),0!=this.dashOffset&&(t+=' stroke-dashoffset="'.concat(this.dashOffset,'"')),null!=this.borderWidth&&(t+=' stroke-width="'.concat(this.borderWidth,'"')),1==this.showBorder&&(t+=' stroke="'.concat(m["a"].transformRGBToHex(this.br,this.bg,this.bb),'"'),1!=this.ba&&(t+=' stroke-opacity="'.concat(this.ba,'"'))),2==this.showBorder&&(t+=' stroke="url(#stroke-linear-gradient-'.concat(this.id,')"')),3==this.showBorder&&(t+=' stroke="url(#stroke-radical-gradient-'.concat(this.id,')"'))):t+=' stroke="none"',t}},{key:"_createStopSVGString",value:function(t){var e="",i=t.colorStops;return i.forEach((function(t){e+='\n\t<stop offset="'.concat(t.pos,'" stop-color="').concat(m["a"].transformRGBToHex(t.color[0],t.color[1],t.color[2]),'" stop-opacity="').concat(t.color[3],'"/>')})),e}},{key:"getSVGDefs",value:function(){var t="";if(2==this.fill){var e=this.linearGradient;t+='\n<linearGradient id="fill-linear-gradient-'.concat(this.id,'" gradientUnits="userSpaceOnUse" \n                            x1="').concat(e.x1,'" y1="').concat(e.y1,'" x2="').concat(e.x2,'" y2="').concat(e.y2,'">'),t+=this._createStopSVGString(e),t+="\n</linearGradient>"}if(3==this.fill){var i=this.radialGradient;t+='\n<radialGradient id="fill-radical-gradient-'.concat(this.id,'" gradientUnits="userSpaceOnUse" \n                            cx="').concat(i.x,'" cy="').concat(i.y,'" r="').concat(i.radius,'">'),t+=this._createStopSVGString(i),t+="\n</radialGradient>"}if(2==this.showBorder){var n=this.borderLinearGradient;t+='\n<linearGradient id="stroke-linear-gradient-'.concat(this.id,'" gradientUnits="userSpaceOnUse" \n                            x1="').concat(n.x1,'" y1="').concat(n.y1,'" x2="').concat(n.x2,'" y2="').concat(n.y2,'">'),t+=this._createStopSVGString(n),t+="\n</linearGradient>"}if(3==this.showBorder){var o=this.borderRadialGradient;t+='\n<radialGradient id="stroke-radical-gradient-'.concat(this.id,'" gradientUnits="userSpaceOnUse" \n                            cx="').concat(o.x,'" cy="').concat(o.y,'" r="').concat(o.radius,'">'),t+=this._createStopSVGString(o),t+="\n</radialGradient>"}return t}},{key:"clone",value:function(){var t=Object(s["a"])(Object(c["a"])(i.prototype),"clone",this).call(this);if(t)return t.name=this.name,t.useQuadTree=this.useQuadTree,t.alpha=this.alpha,t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t.br=this.br,t.bg=this.bg,t.bb=this.bb,t.ba=this.ba,t.fill=this.fill,t.showBorder=this.showBorder,t.dashLength=this.dashLength,t.dashOffset=this.dashOffset,this._linearGradient&&(t._linearGradient=this._linearGradient.clone()),this._radicalGradient&&(t._radicalGradient=this._radicalGradient.clone()),this._borderLinearGradient&&(t._borderLinearGradient=this._borderLinearGradient.clone()),this._borderRadicalGradient&&(t._borderRadicalGradient=this._borderRadicalGradient.clone()),t}}]),i}(p)},"77e1":function(t,e,i){},"7d5a":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("d4ec"),o=i("bee2"),r=i("262e"),a=i("2caf"),s=(i("159b"),i("e48c")),c=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(n["a"])(this,i),t=e.call(this),t.x=o,t.y=r,t.radius=a,t}return Object(o["a"])(i,[{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.deleteShader())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.deleteShader())}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius!=t&&(this._radius=t,this.deleteShader())}},{key:"createShader",value:function(t){return t.Shader.MakeRadialGradient([this.x,this.y],this.radius,this.createColorArray(),this.createPosArray(),t.TileMode.Clamp)}},{key:"clone",value:function(){var t=new i(this.x,this.y,this.radius);return this.colorStops.forEach((function(e){t.addColorStop(e.clone())})),t}}]),i}(s["a"])},"825c":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("d4ec"),o=i("bee2"),r=(i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(n["a"])(this,t),this._values=new Float32Array(4),this._values[0]=e,this._values[1]=i,this._values[2]=o,this._values[3]=r,this.pos=a}return Object(o["a"])(t,[{key:"color",get:function(){return this._values}},{key:"pos",get:function(){return this._pos},set:function(t){this._pos=t}},{key:"equals",value:function(t){return this==t||t.color[0]==this._values[0]&&t.color[1]==this._values[1]&&t.color[2]==this._values[2]&&t.color[3]==this._values[3]&&t.pos==this.pos}},{key:"clone",value:function(){return new t(this.color[0],this.color[1],this.color[2],this.color[3],this.pos)}},{key:"dispose",value:function(){this._values=null}}]),t}())},"85af":function(t,e,i){},"877c":function(t,e,i){},9091:function(t,e,i){},"90a2":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("d4ec"),o=i("bee2"),r=i("ade3"),a=(i("a4d3"),i("e01a"),i("d3b7"),i("99af"),i("25f0"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("84c3"),i("4ec9"),i("3ca3"),i("ddb0"),Math.pow(2,31)),s=Symbol("Canvaskit instance"),c=[{path:"Roboto-Regular.ttf",descriptors:{family:"Roboto"}},{path:"msyh.ttf",descriptors:{family:"微软雅黑"}},{path:"Arial.ttf",descriptors:{family:"Arial"}}],l=function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,null,[{key:"fontCache",get:function(){if(null==this._fontCache){this._fontCache={};for(var t=this.FontMgr,e=t.countFamilies(),i=0;i<e;i++){var n=t.getFamilyName(i);this._fontCache[n]={"*":null}}}return this._fontCache}},{key:"addToFontCache",value:function(t,e){var i=(e["style"]||"normal")+"|"+(e["variant"]||"normal")+"|"+(e["weight"]||"normal"),n=e["family"];this.fontCache[n]||(this.fontCache[n]={"*":t}),this.fontCache[n][i]=t}},{key:"getFromFontCache",value:function(t){var e=(t["style"]||"normal")+"|"+(t["variant"]||"normal")+"|"+(t["weight"]||"normal"),i=t["family"];return this.fontCache[i]?this.fontCache[i][e]||this.fontCache[i]["*"]:null}},{key:"BlendMode",get:function(){if(this.CanvasKit)return this.CanvasKit.BlendMode}},{key:"newFont",value:function(t,e){var i=this.getFromFontCache(t);i||(i=this.getFromFontCache({family:"Arial"}));var n=(t["style"]||"normal")+"|"+(t["variant"]||"normal")+"|"+(t["weight"]||"normal"),o=t["family"],r=new CanvasKit.Font(i,e);return r.key="".concat(o,":").concat(n),r}},{key:"_initFontMaxHeight",value:function(t){var e=null==t.key?"*":t.key,i=this._glyphboundsCache[e],n=t,o=t.getSize();if(t.setSize(100),!i){var r=n.getGlyphIDs("|"),a=n.getGlyphBounds(r),s=n.getGlyphWidths(r),c=r[0].toString();this._glyphboundsCache[e]={glyphbounds:{},glyphIds:{"|":r[0]},minLineHeight:0},i=this._glyphboundsCache[e],i.glyphbounds[c]=new Float32Array(6),i.glyphbounds[c][0]=a[0],i.glyphbounds[c][1]=a[1],i.glyphbounds[c][2]=a[2],i.glyphbounds[c][3]=a[3],i.glyphbounds[c][4]=s[0],i.glyphbounds[c][5]=(s[0]-a[2]+a[0])/2,i.minLineHeight=a[3]-a[1],i.top=a[1],i.bottom=a[3]}return t.setSize(o),i}},{key:"getFontLineHeight",value:function(t){var e=this._initFontMaxHeight(t);return e.minLineHeight}},{key:"getFontTopBottom",value:function(t){var e=this._initFontMaxHeight(t);return{top:e.top,bottom:e.bottom}}},{key:"getGlyphIdsAndBounds",value:function(t,e){var i=t.getSize();t.setSize(100);for(var n=t,o=this._initFontMaxHeight(t),r=new Array(e.length),a=new Uint16Array(e.length),s="",c=[],l=0;l<e.length;l++){var h=e[l],u=o.glyphIds[h];if(u){a[l]=u;var d=o.glyphbounds[u];r[l]=d}else s+=h,c.push(l)}if(0!=s.length)for(var f=n.getGlyphIDs(s),p=n.getGlyphBounds(f),v=n.getGlyphWidths(f),b=0;b<s.length;b++){var g=f[b],y=s[b],m=c[b];if(null!=o.glyphIds[y]){var O=o.glyphIds[y];a[m]=O,r[m]=o.glyphbounds[O]}else o.glyphIds[y]=g,o.glyphbounds[g]=new Float32Array(6),o.glyphbounds[g][0]=p[4*b],o.glyphbounds[g][1]=p[4*b+1],o.glyphbounds[g][2]=p[4*b+2],o.glyphbounds[g][3]=p[4*b+3],o.glyphbounds[g][4]=v[b],o.glyphbounds[g][5]=(v[b]-p[4*b+2]+p[4*b])/2,a[m]=g,r[m]=o.glyphbounds[g]}return t.setSize(i),{ids:a,bounds:r}}},{key:"DEFAULT_FONTS",get:function(){return c}},{key:"CanvasKit",get:function(){return this[s]}},{key:"newID",value:function(){return null==this.currentId&&(this.currentId=0),this.currentId+=1,this.currentId>a&&(this.currentId=0),this.currentId}},{key:"initCanvasKit",value:function(t){var e=this;return new Promise((function(i,n){CanvasKitInit({locateFile:function(e){return t+e}}).then((function(t){window&&(window.CanvasKit=t),e[s]=t,i(t)}))}))}},{key:"FontMgr",get:function(){return this.CanvasKit.FontMgr.RefDefault()}},{key:"loadFont",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{family:"unknown"},i=this.FontMgr.MakeTypefaceFromData(t);return!!i&&(this.addToFontCache(i,e),!0)}},{key:"ClipOp",get:function(){return CanvasKit.ClipOp}},{key:"StrokeCap",get:function(){return CanvasKit.StrokeCap}},{key:"StrokeJoin",get:function(){return CanvasKit.StrokeJoin}},{key:"makeCanvasSurface",value:function(t){return CanvasKit.MakeCanvasSurface(t)}},{key:"newPaint",value:function(){if(CanvasKit)return new CanvasKit.Paint}},{key:"newPath",value:function(){if(CanvasKit)return new CanvasKit.Path}},{key:"TRANSPARENT",get:function(){return CanvasKit.TRANSPARENT}},{key:"fillStyle",get:function(){return CanvasKit.PaintStyle.Fill}},{key:"strokeStyle",get:function(){return CanvasKit.PaintStyle.Stroke}},{key:"newXYWHRect",value:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return CanvasKit.XYWHRect(t,e,i,n,o)}},{key:"newRRectXY",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return CanvasKit.RRectXY(t,e,i,n)}},{key:"getJoinText",value:function(t){return t.value==this.StrokeJoin.Bevel.value?"bevel":t.value==this.StrokeJoin.Round.value?"round":t.value==this.StrokeJoin.Miter.value?"miter":void 0}},{key:"getCapText",value:function(t){return t.value==this.StrokeCap.Butt.value?"butt":t.value==this.StrokeCap.Round.value?"round":t.value==this.StrokeCap.Square.value?"square":void 0}},{key:"BlendModeOptions",get:function(){if(!this._modeOptions){this._modeOptions=new Map;var t=this._modeOptions;t.set(this.CanvasKit.BlendMode.Clear.value,{name:"Clear",mode:this.CanvasKit.BlendMode.Clear}),t.set(this.CanvasKit.BlendMode.Src.value,{name:"Src",mode:this.CanvasKit.BlendMode.Src}),t.set(this.CanvasKit.BlendMode.Dst.value,{name:"Dst",mode:this.CanvasKit.BlendMode.Dst}),t.set(this.CanvasKit.BlendMode.SrcOver.value,{name:"SrcOver",mode:this.CanvasKit.BlendMode.SrcOver,description:"This is the default setting and draws new shapes on top of the existing canvas content."}),t.set(this.CanvasKit.BlendMode.DstOver.value,{name:"DstOver",mode:this.CanvasKit.BlendMode.DstOver,description:"New shapes are drawn behind the existing canvas content."}),t.set(this.CanvasKit.BlendMode.SrcIn.value,{name:"SrcIn",mode:this.CanvasKit.BlendMode.SrcIn,description:"The new shape is drawn only where both the new shape and the destination canvas overlap. Everything else is made transparent."}),t.set(this.CanvasKit.BlendMode.DstIn.value,{name:"DstIn",mode:this.CanvasKit.BlendMode.DstIn}),t.set(this.CanvasKit.BlendMode.SrcOut.value,{name:"SrcOut",mode:this.CanvasKit.BlendMode.SrcOut,description:"The new shape is drawn where it doesn't overlap the existing canvas content."}),t.set(this.CanvasKit.BlendMode.DstOut.value,{name:"DstOut",mode:this.CanvasKit.BlendMode.DstOut}),t.set(this.CanvasKit.BlendMode.SrcATop.value,{name:"SrcATop",mode:this.CanvasKit.BlendMode.SrcATop,description:"The new shape is only drawn where it overlaps the existing canvas content."}),t.set(this.CanvasKit.BlendMode.DstATop.value,{name:"DstATop",mode:this.CanvasKit.BlendMode.DstATop}),t.set(this.CanvasKit.BlendMode.Xor.value,{name:"Xor",mode:this.CanvasKit.BlendMode.Xor}),t.set(this.CanvasKit.BlendMode.Plus.value,{name:"Plus",mode:this.CanvasKit.BlendMode.Plus}),t.set(this.CanvasKit.BlendMode.Modulate.value,{name:"Modulate",mode:this.CanvasKit.BlendMode.Modulate}),t.set(this.CanvasKit.BlendMode.Screen.value,{name:"Screen",mode:this.CanvasKit.BlendMode.Screen}),t.set(this.CanvasKit.BlendMode.Overlay.value,{name:"Overlay",mode:this.CanvasKit.BlendMode.Overlay}),t.set(this.CanvasKit.BlendMode.Darken.value,{name:"Darken",mode:this.CanvasKit.BlendMode.Darken}),t.set(this.CanvasKit.BlendMode.Lighten.value,{name:"Lighten",mode:this.CanvasKit.BlendMode.Lighten}),t.set(this.CanvasKit.BlendMode.ColorDodge.value,{name:"ColorDodge",mode:this.CanvasKit.BlendMode.ColorDodge}),t.set(this.CanvasKit.BlendMode.HardLight.value,{name:"HardLight",mode:this.CanvasKit.BlendMode.HardLight}),t.set(this.CanvasKit.BlendMode.SoftLight.value,{name:"SoftLight",mode:this.CanvasKit.BlendMode.SoftLight}),t.set(this.CanvasKit.BlendMode.Difference.value,{name:"Difference",mode:this.CanvasKit.BlendMode.Difference}),t.set(this.CanvasKit.BlendMode.Exclusion.value,{name:"Exclusion",mode:this.CanvasKit.BlendMode.Exclusion}),t.set(this.CanvasKit.BlendMode.Multiply.value,{name:"Multiply",mode:this.CanvasKit.BlendMode.Multiply}),t.set(this.CanvasKit.BlendMode.Hue.value,{name:"Hue",mode:this.CanvasKit.BlendMode.Hue}),t.set(this.CanvasKit.BlendMode.Saturation.value,{name:"Saturation",mode:this.CanvasKit.BlendMode.Saturation}),t.set(this.CanvasKit.BlendMode.Color.value,{name:"Color",mode:this.CanvasKit.BlendMode.Color}),t.set(this.CanvasKit.BlendMode.Luminosity.value,{name:"Luminosity",mode:this.CanvasKit.BlendMode.Luminosity})}return this._modeOptions}}]),t}();Object(r["a"])(l,"_fontCache",void 0),Object(r["a"])(l,"_glyphboundsCache",{}),Object(r["a"])(l,"currentId",void 0)},"92e6":function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var n=i("d4ec"),o=i("bee2"),r=i("45eb"),a=i("7e84"),s=i("262e"),c=i("2caf"),l=(i("159b"),i("a434"),i("4e40")),h=function(t){Object(s["a"])(i,t);var e=Object(c["a"])(i);function i(){var t,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(n["a"])(this,i),t=e.call(this),t._points=[],t._closed=o,t.parent,t}return Object(o["a"])(i,[{key:"isClosed",get:function(){return this._closed}},{key:"pointsCount",get:function(){return this._points.length}},{key:"points",get:function(){return this._points}},{key:"close",value:function(){this._closed=!0}},{key:"open",value:function(){this._closed=!1}},{key:"draw",value:function(t){if(t&&!(this._points.length<=1)){var e,i=this._points[0],n=i;if(null!=i){t.moveTo(i.x,i.y);for(var o=1;o<this._points.length;o++)e=this._points[o],this._lineToNext(n,e,t),n=e;this.isClosed&&(e=i,this._lineToNext(n,e,t))}}}},{key:"_lineToNext",value:function(t,e,i){var n=t.out,o=e.in;if(0!=t.type||0!=e.type)if(null==n&&null==o)i.lineTo(e.x,e.y);else{var r=n,a=o;if(null==r||null==a){var s=r;s=s||a,i.quadTo(s[0],s[1],e.x,e.y)}else i.cubicTo(r[0],r[1],a[0],a[1],e.x,e.y)}else i.lineTo(e.x,e.y)}},{key:"dispose",value:function(){this._points&&(this._points.forEach((function(t){t.dispose(),t.parent=null})),this._points.length=0),delete this._points,Object(r["a"])(Object(a["a"])(i.prototype),"dispose",this).call(this)}},{key:"getPoint",value:function(t){return this.points[t]}},{key:"deleteAt",value:function(t){if(-1!=t){var e=this._points.splice(t,1);if(e&&e[0]){var i=e[0];return i.dispose(),i.parent=null,this.fireEvent("dirty"),i}}}},{key:"deletePoint",value:function(t){var e=this.getPointIndex(t);return this.deleteAt(e)}},{key:"getPointIndex",value:function(t){if(!t)return-1;for(var e=0;e<this._points.length;e++){var i=this._points[e];if(i.equals(t))return e}return-1}},{key:"addPoint",value:function(t){this.insertPoint(t,this._points.length)}},{key:"insertPoint",value:function(t,e){var i=this;if(-1==e||!t)return!1;if(e>=this._points.length)return this._points.push(t),t.parent=this,t.on("dirty",(function(){i.fireEvent("dirty")})),this.fireEvent("dirty"),!0;this._points.push(t),t.on("dirty",(function(){i.fireEvent("dirty")}));for(var n=this._points.length-1;n>e;n--){var o=this._points[n];this._points[n]=this._points[n-1],this._points[n-1]=o}return this.fireEvent("dirty"),!0}},{key:"clone",value:function(){var t=new i(this.isClosed);return this._points&&this._points.forEach((function(e){t.addPoint(e.clone())})),t}}]),i}(l["a"])},"93b2":function(t,e,i){},9799:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("d4ec"),o=i("bee2"),r=i("262e"),a=i("2caf"),s=(i("159b"),i("e48c")),c=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t){var o;return Object(n["a"])(this,i),o=e.call(this,t),o.x1=null==t||null==t.x1?0:t.x1,o.y1=null==t||null==t.y1?0:t.y1,o.x2=null==t||null==t.x2?0:t.x2,o.y2=null==t||null==t.y2?0:t.y2,o}return Object(o["a"])(i,[{key:"x1",get:function(){return this._x1},set:function(t){this._x1!=t&&(this._x1=t,this.deleteShader())}},{key:"x2",get:function(){return this._x2},set:function(t){this._x2!=t&&(this._x2=t,this.deleteShader())}},{key:"y1",get:function(){return this._y1},set:function(t){this._y1!=t&&(this._y1=t,this.deleteShader())}},{key:"y2",get:function(){return this._y2},set:function(t){this._y2!=t&&(this._y2=t,this.deleteShader())}},{key:"createShader",value:function(t){var e=this.createColorArray(),i=this.createPosArray();return t.Shader.MakeLinearGradient([this.x1,this.y1],[this.x2,this.y2],e,i,t.TileMode.Clamp)}},{key:"clone",value:function(){var t=new i({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2});return this.colorStops.forEach((function(e){t.addColorStop(e.clone())})),t}}]),i}(s["a"])},"98da":function(t,e,i){"use strict";i("85af")},"9e8b":function(t,e,i){"use strict";i("be5c")},a3cf:function(t,e,i){},aecc:function(t,e,i){"use strict";i("49aa")},bbaa:function(t,e,i){"use strict";i("f013")},bcd1:function(t,e,i){"use strict";i("29c8")},be5c:function(t,e,i){},c1cd:function(t,e,i){"use strict";i("b0c0");var n=i("7a23"),o={class:"property-item"},r={key:1},a={class:"property-value"},s={key:0,class:"form-control form-control-sm property-input",disabled:""};function c(t,e,i,c,l,h){return Object(n["r"])(),Object(n["d"])("div",o,[Object(n["h"])("div",{class:["property-label",h.disabled?"disabled-label":""],title:null==i.name?"":i.name},[null!=i.icon?(Object(n["r"])(),Object(n["d"])("i",{key:0,class:["iconfont",i.icon]},null,2)):(Object(n["r"])(),Object(n["d"])("span",r,[Object(n["h"])("label",null,Object(n["A"])(i.name),1)]))],10,["title"]),Object(n["h"])("div",a,[h.disabled?(Object(n["r"])(),Object(n["d"])("input",s)):Object(n["J"])((Object(n["r"])(),Object(n["d"])("input",{key:1,class:"form-control form-control-sm property-input","onUpdate:modelValue":e[1]||(e[1]=function(t){return h.pvalue=t}),type:i.type,step:i.step,max:i.max,min:i.min,onClick:e[2]||(e[2]=function(){return t.selectText&&t.selectText.apply(t,arguments)}),onKeypress:e[3]||(e[3]=Object(n["K"])((function(){return t.confirm&&t.confirm.apply(t,arguments)}),["enter"]))},null,40,["type","step","max","min"])),[[n["D"],h.pvalue,void 0,{lazy:!0}]])])])}i("c35a"),i("a9e3"),i("b680"),i("c7cd"),i("159b");var l=i("1b62"),h={name:"Property",mixins:[l["l"],l["g"]],emits:["property:change"],computed:{pvalue:{get:function(){if(!this.disabled){var t=this.defaultValue;"number"==this.type&&null!=t&&(t=Number.parseFloat(t));var e=this.getAnyPropertyValue(this.models,this.pk,t);if(null!=e){if(this.transformToAngel){var i=180*e/Math.PI;return i.toFixed(this.fixed)}return e.toFixed(this.fixed)}}},set:function(t){var e=this;if(null!=this.selections){var i=t;"number"==this.type&&(i=Number.parseFloat(t)),this.transformToAngel&&(i=t*Math.PI/180);var n=[];this.models.forEach((function(t){n.push({model:t,property:e.pk,value:i})})),this.$emit("property:change",n)}}},disabled:function(){if(null==this.models||0==this.models.length)return!0;for(var t=0;t<this.models.length;t++){var e=this.models[t];if(!this.pk in e)return!0}return!1}},props:{models:{type:Array},name:{type:String,default:null},fixed:{type:Number,default:2},transformToAngel:{type:Boolean,default:!1},pk:{type:String},step:{type:Number,default:1},max:{type:Number},min:{type:Number},type:{type:String,default:"number"},icon:{type:String,default:null},defaultValue:{type:String,default:null}}};h.render=c;e["a"]=h},c363:function(t,e,i){"use strict";i("e48c");var n=i("825c");i.d(e,"a",(function(){return n["a"]}));i("9799"),i("7d5a")},c92a:function(t,e,i){"use strict";i("9091")},c96b:function(t,e,i){},cf05:function(t,e,i){t.exports=i.p+"img/logo.82b9c7a5.png"},d008:function(t,e,i){"use strict";i("63fb")},d135:function(t,e,i){},d3d6:function(t,e,i){"use strict";i.d(e,"a",(function(){return m}));var n=i("d4ec"),o=i("bee2"),r=(i("159b"),i("262e")),a=i("2caf"),s=i("2124"),c=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"添加图形";return Object(n["a"])(this,i),r=e.call(this,a),r.child=t,r.parent=o,r}return Object(o["a"])(i,[{key:"excute",value:function(){null!=this.index?this.parent.insertChild(this.child,this.index):this.parent.addChild(this.child)}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){this.index=this.parent.children.indexOf(this.child),this.parent.removeChild(this.child)}},{key:"dispose",value:function(){this.parent&&this.parent.dispose(),this.child&&this.child.dispose(),this.parent=null,this.child=null}},{key:"disposeRedo",value:function(){this.child&&this.child.dispose(),this.child=null}},{key:"disposeUndo",value:function(){}}]),i}(s["a"]),l=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"移动图形";return Object(n["a"])(this,i),a=e.call(this,s),a.figure=t,a.dx=o,a.dy=r,a}return Object(o["a"])(i,[{key:"excute",value:function(){var t=this.figure;t.x+=this.dx,t.y+=this.dy}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){var t=this.figure;t.x-=this.dx,t.y-=this.dy}},{key:"dispose",value:function(){this.figure&&this.figure.dispose(),this.figure=null}}]),i}(s["a"]),h=i("3411"),u=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r;return Object(n["a"])(this,i),r=e.call(this,"姿势更改"),r.pose=o,r.figure=t,r.old={x:t.x,y:t.y,rotation:t.rotation,scalex:t.scalex,scaley:t.scaley,skewx:t.skewx,skewy:t.skewy},r}return Object(o["a"])(i,[{key:"excute",value:function(){this.figure.x=this.pose.translation.x,this.figure.y=this.pose.translation.y,this.figure.rotation=this.pose.rotation,this.figure.scalex=this.pose.scale.x,this.figure.scaley=this.pose.scale.y,this.figure.skewx=this.pose.skew.x,this.figure.skewy=this.pose.skew.y}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){this.figure.x=this.old.x,this.figure.y=this.old.y,this.figure.rotation=this.old.rotation,this.figure.scalex=this.old.scalex,this.figure.scaley=this.old.scaley,this.figure.skewx=this.old.skewx,this.figure.skewy=this.old.skewy}},{key:"dispose",value:function(){this.figure&&this.figure.dispose(),this.figure=null}}]),i}(s["a"]),d=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"添加顶点";return Object(n["a"])(this,i),a=e.call(this,s),a.point=t,a.path=o,a.index=r,a}return Object(o["a"])(i,[{key:"excute",value:function(){this.path.insertPoint(this.point,this.index)}},{key:"redo",value:function(){this.path.insertPoint(this.point.clone(),this.index)}},{key:"undo",value:function(){this.path.deleteAt(this.index)}},{key:"dispose",value:function(){this.path&&this.path.dispose(),this.path=null,this.point=null}}]),i}(s["a"]),f=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o,r){var a;return Object(n["a"])(this,i),a=e.call(this,"更改属性值"),a.model=t,a.property=o,a.value=r,a}return Object(o["a"])(i,[{key:"excute",value:function(){void 0==this.oldValue&&(this.oldValue=this.model[this.property]),this.model[this.property]=this.value}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){this.model[this.property]=this.oldValue}},{key:"dispose",value:function(){this.model&&this.model.dispose&&this.model.dispose(),this.model=null}},{key:"disposeRedo",value:function(){}},{key:"disposeUndo",value:function(){}}]),i}(s["a"]),p=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"删除顶点";return Object(n["a"])(this,i),r=e.call(this,a),r.path=t,r.index=o,r}return Object(o["a"])(i,[{key:"excute",value:function(){this.point=this.path.deleteAt(this.index)}},{key:"undo",value:function(){this.path.insertPoint(this.point.clone(),this.index)}},{key:"redo",value:function(){this.path.deleteAt(this.index)}},{key:"dispose",value:function(){this.path&&this.path.dispose(),this.path=null,this.point=null}}]),i}(s["a"]),v=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"删除图形";return Object(n["a"])(this,i),r=e.call(this,a),r.child=t,r.parent=o,r}return Object(o["a"])(i,[{key:"excute",value:function(){this.index=this.parent.children.indexOf(this.child),this.parent.removeChild(this.child)}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){this.parent.insertChild(this.child,this.index)}},{key:"dispose",value:function(){this.parent&&this.parent.dispose(),this.parent=null,this.figure&&this.figure.dispose(),this.figure=null}},{key:"disposeUndo",value:function(){this.figure&&this.figure.dispose(),this.figure=null}}]),i}(s["a"]),b=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r;return Object(n["a"])(this,i),r=e.call(this,"Change Index"),r.figure=t,r.index=o,r.oldIndex=r.figure.parent.indexOfChild(r.figure),r}return Object(o["a"])(i,[{key:"excute",value:function(){var t=this.figure.parent;t.removeChild(this.figure),t.insertChild(this.figure,this.index)}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){var t=this.figure.parent;t.removeChild(this.figure),t.insertChild(this.figure,this.oldIndex)}},{key:"dispose",value:function(){this.figure&&this.figure.dispose(),this.figure=null}}]),i}(s["a"]),g=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linearGradient";Object(n["a"])(this,i),r=e.call(this,"Update gradient"),r.model=t,r.pk=a,r.colorStops=o,r.old=[];var s=r.getGrarident();return s.colorStops.forEach((function(t){return r.old.push(t.clone())})),r}return Object(o["a"])(i,[{key:"getGrarident",value:function(){return this.model[this.pk]}},{key:"excute",value:function(){var t=this.getGrarident();t.replaceColorStops(this.colorStops)}},{key:"redo",value:function(){this.excute()}},{key:"undo",value:function(){var t=this.getGrarident();t.replaceColorStops(this.old)}}]),i}(s["a"]),y=function(t){Object(r["a"])(i,t);var e=Object(a["a"])(i);function i(t,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"radicalGradient";return Object(n["a"])(this,i),e.call(this,t,o,r)}return i}(g),m=function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,null,[{key:"newUpdateLinearGraidentStopsAction",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linearGradient";return new g(t,e,i)}},{key:"newUpdateRadialGraidentStopsAction",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"radicalGradient";return new y(t,e,i)}},{key:"newChangeIndexAction",value:function(t,e){return new b(t,e)}},{key:"newRemoveFigureAction",value:function(t,e){return new v(t,e)}},{key:"newChangePropertyAction",value:function(t,e,i){return new f(t,e,i)}},{key:"newInsertPointAction",value:function(t,e,i){return new d(t,e,i)}},{key:"newDeletePointAction",value:function(t,e){return new p(t,e)}},{key:"newAddFigureAction",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"添加图形";return new c(t,e,i)}},{key:"newTranslateAction",value:function(t,e,i){var n=new h["a"];return t.forEach((function(t){n.add(new l(t,e,i))})),n}},{key:"newPoseChangeAction",value:function(t){var e=new h["a"];return t.forEach((function(t){e.add(new u(t.figure,t.pose))})),e}}]),t}()},d427:function(t,e,i){"use strict";i("159b");function n(t,e){var i=1/0,n=-1/0;return t.forEach((function(t){var r=o(e[0],e[1],t[0],t[1]);i=Math.min(i,r),n=Math.max(n,r)})),{min:i,max:n}}function o(t,e,i,n){return t*i+e*n}function r(t,e){return!(t.min>e.max||e.min>t.max)}function a(t,e,i,o){var a={},s=c(e,a);return!!s&&(s=c(o,a),!!s);function c(e,o){for(var a=0;a<e.length;a++){var s=e[a],c=0==s[0]?1/0:s[1]/s[0];if(!o[c]){o[c]=!0;var l=n(t,s),h=n(i,s),u=r(l,h);if(!u)return!1}}return!0}}e["a"]={contactTest:a}},dd2d:function(t,e,i){"use strict";i("77e1")},e48c:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("2909"),o=i("d4ec"),r=i("bee2"),a=(i("a4d3"),i("e01a"),i("d3b7"),i("a434"),i("99af"),i("159b"),i("d81d"),i("90a2")),s=Symbol(),c=function(){function t(){var e=this;Object(o["a"])(this,t),this.getTarget=function(){return e[s]||(e[s]=e),e[s]},this.getTarget(),this._colorStops=[]}return Object(r["a"])(t,[{key:"colorStops",get:function(){return this._colorStops}},{key:"deleteShader",value:function(){this._shader&&this.getTarget()._shader.delete(),this._shader=null}},{key:"createShader",value:function(t){}},{key:"getShader",value:function(){if(a["a"].CanvasKit)return this._shader||(this._shader=this.createShader(a["a"].CanvasKit)),this._shader}},{key:"replaceColorStops",value:function(t){var e;(e=this._colorStops).splice.apply(e,[0,this._colorStops.length].concat(Object(n["a"])(t))),this.deleteShader()}},{key:"addColorStop",value:function(t){this._colorStops.push(t),this.deleteShader()}},{key:"removeColorStopAt",value:function(t){t<0||t>this._colorStops.length-1||(this._colorStops.splice(t,1),this.deleteShader())}},{key:"removeColorStop",value:function(t){var e=this._colorStops.indexOf(t);this.removeColorStopAt(e)}},{key:"insertColorStopAt",value:function(t,e){e<0||e>this._colorStops.length-1||(this._colorStops.splice(e,0,t),this.deleteShader())}},{key:"sort",value:function(){this._colorStops.sort((function(t,e){return t.pos-e.pos}))}},{key:"createColorArray",value:function(){var t=[];return this._colorStops.forEach((function(e){t.push([e.color[0]/255,e.color[1]/255,e.color[2]/255,e.color[3]])})),t}},{key:"createPosArray",value:function(){return this._colorStops.map((function(t){return t.pos}))}},{key:"dispose",value:function(){this._colorStops.length=0,this._colorStops=null,this.deleteShader()}},{key:"clone",value:function(){var e=new t;return this.colorStops.forEach((function(t){e.addColorStop(t.clone())})),e}}]),t}()},ea73:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("d4ec"),o=i("bee2"),r=(i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),null),a=null,s=(Math.PI,function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array(9);Object(n["a"])(this,t),this._array=e,this.identity()}return Object(o["a"])(t,[{key:"isIdentity",value:function(){var t=this._array;return 1==t[0]&&0==t[1]&&0==t[2]&&0==t[3]&&1==t[4]&&0==t[5]&&0==t[6]&&0==t[7]&&1==t[8]}},{key:"data",get:function(){return this._array}},{key:"clone",value:function(){for(var e=new t,i=this.data,n=e.data,o=0;o<i.length;o++)n[o]=i[o];return e}},{key:"from",value:function(t){for(var e=this.data,i=t.data,n=0;n<e.length;n++)e[n]=i[n]}},{key:"decompose",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.data,i=e[0],n=e[1],o=e[2],r=e[3],a=e[4],s=e[5],c={x:o,y:s},l=0,h={x:1,y:1},u={x:0,y:0},d=i*a-r*n;if(t)if(0!=i||0!=r){var f=Math.sqrt(i*i+r*r);l=r>0?Math.acos(i/f):-Math.acos(i/f),h.x=f,h.y=d/f,u.x=Math.atan((i*n+r*a)/(f*f))}else if(0!=n||0!=a){var p=Math.sqrt(n*n+a*a);l=Math.PI/2-(a>0?Math.acos(-n/p):-Math.acos(n/p)),h.x=d/p,h.y=p,u.y=Math.atan((i*n+r*a)/(p*p))}else h.x=h.y=0;else 0!=i?(u.y=Math.atan(r/i),h.x=i,h.y=d/i,u.x=Math.atan(n/i)):0!=r?(l=Math.PI/2,h.x=r,h.y=d/r,u.x=Math.atan(a/r)):(h.x=n,h.y=a,u.x=Math.PI/4,h.x=0,h.y=1);return{translation:c,rotation:l,scale:h,skew:u}}},{key:"identity",value:function(){var t=this._array;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.multiplyWithSimpleDatas(e,i,-i,e,0,0),this}},{key:"skew",value:function(t,e){return this.multiplyWithSimpleDatas(1,Math.tan(e),Math.tan(t),1,0,0),this}},{key:"scale",value:function(t,e){return this.multiplyWithSimpleDatas(t,0,0,e,0,0),this}},{key:"translate",value:function(t,e){return this.multiplyWithSimpleDatas(1,0,0,1,t,e),this}},{key:"multiplyWithVertexDatas",value:function(t,e,i){null==i&&(i=new Float32Array(2));var n=this.data;return i[0]=n[0]*t+n[1]*e+n[2],i[1]=n[3]*t+n[4]*e+n[5],i}},{key:"multiplyWithVertex",value:function(t,e){return this.multiplyWithVertexDatas(t[0],t[1],e)}},{key:"multiplyWithDatas",value:function(t,e,i,n,o,r,a,s,c){var l=this.data,h=this.data,u=h[0],d=h[3],f=h[6],p=h[1],v=h[4],b=h[7],g=h[2],y=h[5],m=h[8];return l[0]=t*u+e*p+i*g,l[3]=t*d+e*v+i*y,l[6]=t*f+e*b+i*m,l[1]=n*u+o*p+r*g,l[4]=n*d+o*v+r*y,l[7]=n*f+o*b+r*m,l[2]=a*u+s*p+c*g,l[5]=a*d+s*v+c*y,l[8]=a*f+s*b+c*m,this}},{key:"multiplyWithSimpleDatas",value:function(t,e,i,n,o,r){var a=this.data,s=this.data,c=a[0],l=a[3],h=a[1],u=a[4],d=a[2],f=a[5];return s[0]=t*c+e*h,s[3]=t*l+e*u,s[1]=i*c+n*h,s[4]=i*l+n*u,s[2]=o*c+r*h+d,s[5]=o*l+r*u+f,this}},{key:"invert",value:function(){return this.getInvert(this)}},{key:"getInvert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t,i=e.data,n=this.data,o=n[0],r=n[3],a=n[6],s=n[1],c=n[4],l=n[7],h=n[2],u=n[5],d=n[8],f=d*c-l*u,p=-d*s+l*h,v=u*s-c*h,b=o*f+r*p+a*v;return b?(b=1/b,i[0]=f*b,i[3]=(-d*r+a*u)*b,i[6]=(l*r-a*c)*b,i[1]=p*b,i[4]=(d*o-a*h)*b,i[7]=(-l*o+a*s)*b,i[2]=v*b,i[5]=(-u*o+r*h)*b,i[8]=(c*o-r*s)*b,e):null}},{key:"simpleMultiply",value:function(t){var e=t.data;return this.multiplyWithSimpleDatas(e[0],e[3],e[1],e[4],e[2],e[5])}},{key:"multiply",value:function(t){var e=t.data;return this.multiplyWithDatas(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},{key:"toSVGMatrix",value:function(){var t=this.data;return{a:t[0],b:t[3],c:t[1],d:t[4],e:t[2],f:t[5]}}}],[{key:"TEMP",get:function(){return null==r&&(r=new t,r.identity()),r}},{key:"TEMP2",get:function(){return null==a&&(a=new t,r.identity()),a}},{key:"copyFrom",value:function(t,e){var i=e.data,n=t.data;i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5]}},{key:"IdentityMatrix",value:function(e){null==e&&(e=new Float32Array(9));var i=new t(e);return i.identity()}}]),t}())},f013:function(t,e,i){},f106:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("1da1"),o=i("d4ec"),r=i("bee2"),a=i("257e"),s=i("45eb"),c=i("7e84"),l=i("262e"),h=i("2caf"),u=(i("96cf"),i("159b"),i("4e40")),d=i("ea73"),f=i("f8ec"),p=2*Math.PI,v=Math.PI/2,b=function(t){Object(l["a"])(i,t);var e=Object(h["a"])(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,width:0,height:0,scalex:1,scaley:1,rotation:0};return Object(o["a"])(this,i),t=e.call(this),t.getTarget=function(){return t.__target||(t.__target=Object(a["a"])(t)),t.__target},t.getTarget(),t.x=null==n||null==n.x?0:n.x,t.y=null==n||null==n.y?0:n.y,t.width=null==n||null==n.width?0:n.width,t.height=null==n||null==n.height?0:n.height,t.scalex=null==n||null==n.scalex?1:n.scalex,t.scaley=null==n||null==n.scaley?1:n.scaley,t.skewx=null==n||null==n.skewx?0:n.skewx,t.skewy=null==n||null==n.skewy?0:n.skewy,t.rotation=null==n||null==n.rotation?0:n.rotation,t._matrix=new d["a"],t._transformDirty=!0,t._boundsdirty=!0,t._bounds={left:0,top:0,right:0,bottom:0},t._axis,t.parent,t._disposed=!1,t}return Object(r["a"])(i,[{key:"isDisposed",get:function(){return this._disposed}},{key:"width",get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this.fireTransformDirty(),this.fireBoundsDirty())}},{key:"height",get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this.fireTransformDirty(),this.fireBoundsDirty())}},{key:"scalex",get:function(){return this._scalex},set:function(t){this._scalex!=t&&(this._scalex=t,this.fireTransformDirty())}},{key:"scaley",get:function(){return this._scaley},set:function(t){this._scaley!=t&&(this._scaley=t,this.fireTransformDirty())}},{key:"skewx",get:function(){return this._skewx},set:function(t){this._skewx!=t&&(this._skewx=t,this.fireTransformDirty())}},{key:"skewy",get:function(){return this._skewy},set:function(t){this._skewy!=t&&(this._skewy=t,this.fireTransformDirty())}},{key:"worldVertices",get:function(){for(var t=this.bounds,e=[[t.left,t.top],[t.right,t.top],[t.right,t.bottom],[t.left,t.bottom]],i=this.worldMatrix,n=[],o=0;o<e.length;o++)n.push(i.multiplyWithVertex(e[o]));return n}},{key:"axis",get:function(){return this._axis||(this._axis=[[1,0],[0,1]]),this._axis}},{key:"worldAxis",get:function(){var t=this.worldMatrix.clone(),e=this.axis;t.data[2]=0,t.data[5]=0;var i=[];return e.forEach((function(e){i.push(t.multiplyWithVertexDatas(e[0],e[1]))})),i}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!=t&&(this._rotation=t,this.fireTransformDirty())}},{key:"x",get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.fireTransformDirty())}},{key:"y",get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.fireTransformDirty())}},{key:"matrix",get:function(){return this._transformDirty&&(i.calculateTransformableMatrix(this.x,this.y,this.width,this.height,this.rotation,this.scalex,this.scaley,this.skewx,this.skewy,this._matrix),this._transformDirty=!1),this._matrix}},{key:"worldMatrix",get:function(){if(this.parent){var t=this.parent.worldMatrix;return t.clone().multiply(this.matrix)}return this.matrix}},{key:"bounds",get:function(){return this._boundsdirty&&(this._bounds=this.calculateLocalBounds(this._bounds),this._boundsdirty=!1),this._bounds}},{key:"getRelateBounds",value:function(t){if(!t)return this.bounds;for(var e=this.bounds,i=[[e.left,e.top],[e.right,e.top],[e.right,e.bottom],[e.left,e.bottom]],n=[],o=0;o<i.length;o++)n.push(t.multiplyWithVertex(i[o]));var r={left:1/0,top:1/0,right:-1/0,bottom:-1/0};return n.forEach((function(t){r.left=Math.min(t[0],r.left),r.top=Math.min(t[1],r.top),r.right=Math.max(t[0],r.right),r.bottom=Math.max(t[1],r.bottom)})),r}},{key:"calculateLocalBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:left,top:top,right:right,bottom:bottom};return t.left=0,t.top=0,t.right=this.width,t.bottom=this.height,t}},{key:"worldBounds",get:function(){var t=this.worldVertices,e={left:1/0,top:1/0,right:-1/0,bottom:-1/0};return t.forEach((function(t){e.left=Math.min(t[0],e.left),e.top=Math.min(t[1],e.top),e.right=Math.max(t[0],e.right),e.bottom=Math.max(t[1],e.bottom)})),e}},{key:"fireBoundsDirty",value:function(){this._boundsdirty=!0,this.fireEvent("boundsDirty",!0)}},{key:"fireTransformDirty",value:function(){this._transformDirty=!0,this.fireEvent("transformDirty",!0)}},{key:"containsPoint",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t,o=e;if(i){var r=this.worldMatrix.clone(),a=r.invert().multiplyWithVertexDatas(n,o);n=a[0],o=a[1]}return f["a"].containsPoint(n,o,this.bounds)}},{key:"dispose",value:function(){this.isDisposed||(this._disposed=!0,this.__target=null,this.fireEvent("disposed"),Object(s["a"])(Object(c["a"])(i.prototype),"dispose",this).call(this))}},{key:"clone",value:function(){if(!this.isDisposed){var t=this.createMySelf();return t?(t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.scalex=this.scalex,t.scaley=this.scaley,t.skewx=this.skewx,t.skewy=this.skewy,t.rotation=this.rotation,t):void 0}}},{key:"createMySelf",value:function(){}},{key:"toJsonObject",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",{type:this.getJsonObjectName(),x:this.x,y:this.y,width:this.width,height:this.height,rotation:this.rotation,scalex:this.scalex,scaley:this.scaley,skewx:this.skewx,skewy:this.skewy});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getJsonObjectName",value:function(){return"transformable"}}],[{key:"PI2",get:function(){return p}},{key:"HALF_PI",get:function(){return v}},{key:"calculateTransformableMatrix",value:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:new d["a"];if(0==r||0==a)return null;var h=l.identity();return h=h.translate(t,e),0!==o&&h.rotate(o),1===r&&1===a||h.scale(r,a),0===s&&0===c||h.skew(s,c),l}}]),i}(u["a"])},f12d:function(t,e,i){"use strict";i("587d")},f1b5:function(t,e,i){"use strict";i("a3cf")},f40b:function(t,e,i){"use strict";var n=i("d3d6");i.d(e,"a",(function(){return n["a"]}));i("3f6e");var o=i("3411");i.d(e,"b",(function(){return o["a"]}))},f8ec:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("d4ec"),o=i("bee2"),r=(i("d3b7"),i("25f0"),i("99af"),function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,null,[{key:"isContacted",value:function(t,e){return!(t.left>e.right||t.top>e.bottom||e.left>t.right||e.top>t.bottom)}},{key:"containsPoint",value:function(t,e,i){return t>=i.left&&t<=i.right&&e>=i.top&&e<=i.bottom}},{key:"transformToRelatedBounds",value:function(t,e){var i=[t.left,t.top],n=[t.right,t.bottom],o=e.multiplyWithVertex(i),r=e.multiplyWithVertex(n),a=Math.min(o[0],r[0]),s=Math.min(o[1],r[1]),c=Math.max(o[0],r[0]),l=Math.max(o[1],r[1]);return{left:a,top:s,right:c,bottom:l}}},{key:"transformRGBToHex",value:function(t,e,i){var n=t.toString(16);1==n.length&&(n="0"+n);var o=e.toString(16);1==o.length&&(o="0"+o);var r=i.toString(16);return 1==r.length&&(r="0"+r),"#".concat(n).concat(o).concat(r)}},{key:"decomposeMatrix",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.decompose(e)}},{key:"applyPose",value:function(t,e){t&&e&&(t.x=e.translation.x,t.y=e.translation.y,t.rotation=e.rotation,t.skewx=e.skew.x,t.skewy=e.skew.y,t.scaley=e.scale.y,t.scalex=e.scale.x)}},{key:"distance",value:function(t,e,i,n){var o=t-i,r=e-n;return Math.sqrt(o*o+r*r)}}]),t}())},fc85:function(t,e,i){"use strict";i("1576")}});